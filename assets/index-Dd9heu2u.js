var RM=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var iPe=RM((sPe,Jm)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(s){if(s.ep)return;s.ep=!0;const u=n(s);fetch(s.href,u)}})();/**
* @vue/shared v3.4.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function jb(e,t){const n=new Set(e.split(","));return t?r=>n.has(r.toLowerCase()):r=>n.has(r)}const zr={},ud=[],Ya=()=>{},OM=()=>!1,Lg=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Hb=e=>e.startsWith("onUpdate:"),mi=Object.assign,Gb=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},zM=Object.prototype.hasOwnProperty,Kn=(e,t)=>zM.call(e,t),mn=Array.isArray,dd=e=>Rg(e)==="[object Map]",U2=e=>Rg(e)==="[object Set]",En=e=>typeof e=="function",ti=e=>typeof e=="string",iu=e=>typeof e=="symbol",Mr=e=>e!==null&&typeof e=="object",q2=e=>(Mr(e)||En(e))&&En(e.then)&&En(e.catch),j2=Object.prototype.toString,Rg=e=>j2.call(e),FM=e=>Rg(e).slice(8,-1),H2=e=>Rg(e)==="[object Object]",Wb=e=>ti(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,rf=jb(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Og=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},BM=/-(\w)/g,ys=Og(e=>e.replace(BM,(t,n)=>n?n.toUpperCase():"")),VM=/\B([A-Z])/g,kd=Og(e=>e.replace(VM,"-$1").toLowerCase()),wo=Og(e=>e.charAt(0).toUpperCase()+e.slice(1)),qy=Og(e=>e?`on${wo(e)}`:""),ic=(e,t)=>!Object.is(e,t),Rm=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},G2=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},B_=e=>{const t=parseFloat(e);return isNaN(t)?e:t},NM=e=>{const t=ti(e)?Number(e):NaN;return isNaN(t)?e:t};let _w;const W2=()=>_w||(_w=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Yb(e){if(mn(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=ti(r)?jM(r):Yb(r);if(s)for(const u in s)t[u]=s[u]}return t}else if(ti(e)||Mr(e))return e}const $M=/;(?![^(]*\))/g,UM=/:([^]+)/,qM=/\/\*[^]*?\*\//g;function jM(e){const t={};return e.replace(qM,"").split($M).forEach(n=>{if(n){const r=n.split(UM);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function _a(e){let t="";if(ti(e))t=e;else if(mn(e))for(let n=0;n<e.length;n++){const r=_a(e[n]);r&&(t+=r+" ")}else if(Mr(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const HM="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",GM=jb(HM);function Y2(e){return!!e||e===""}const qs=e=>ti(e)?e:e==null?"":mn(e)||Mr(e)&&(e.toString===j2||!En(e.toString))?JSON.stringify(e,Z2,2):String(e),Z2=(e,t)=>t&&t.__v_isRef?Z2(e,t.value):dd(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],u)=>(n[jy(r,u)+" =>"]=s,n),{})}:U2(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>jy(n))}:iu(t)?jy(t):Mr(t)&&!mn(t)&&!H2(t)?String(t):t,jy=(e,t="")=>{var n;return iu(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.4.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ha;class K2{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ha,!t&&Ha&&(this.index=(Ha.scopes||(Ha.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Ha;try{return Ha=this,t()}finally{Ha=n}}}on(){Ha=this}off(){Ha=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function zg(e){return new K2(e)}function WM(e,t=Ha){t&&t.active&&t.effects.push(e)}function YM(){return Ha}function Ra(e){Ha&&Ha.cleanups.push(e)}let Xc;class Zb{constructor(t,n,r,s){this.fn=t,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,WM(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,oc();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed&&(ZM(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),lc()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=tc,n=Xc;try{return tc=!0,Xc=this,this._runnings++,bw(this),this.fn()}finally{xw(this),this._runnings--,Xc=n,tc=t}}stop(){var t;this.active&&(bw(this),xw(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function ZM(e){return e.value}function bw(e){e._trackId++,e._depsLength=0}function xw(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)X2(e.deps[t],e);e.deps.length=e._depsLength}}function X2(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let tc=!0,V_=0;const J2=[];function oc(){J2.push(tc),tc=!1}function lc(){const e=J2.pop();tc=e===void 0?!0:e}function Kb(){V_++}function Xb(){for(V_--;!V_&&N_.length;)N_.shift()()}function Q2(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const r=e.deps[e._depsLength];r!==t?(r&&X2(r,e),e.deps[e._depsLength++]=t):e._depsLength++}}const N_=[];function eC(e,t,n){Kb();for(const r of e.keys()){let s;r._dirtyLevel<t&&(s??(s=e.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=t),r._shouldSchedule&&(s??(s=e.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&N_.push(r.scheduler)))}Xb()}const tC=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},Qm=new WeakMap,Jc=Symbol(""),$_=Symbol("");function La(e,t,n){if(tc&&Xc){let r=Qm.get(e);r||Qm.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=tC(()=>r.delete(n))),Q2(Xc,s)}}function il(e,t,n,r,s,u){const h=Qm.get(e);if(!h)return;let l=[];if(t==="clear")l=[...h.values()];else if(n==="length"&&mn(e)){const v=Number(r);h.forEach((_,S)=>{(S==="length"||!iu(S)&&S>=v)&&l.push(_)})}else switch(n!==void 0&&l.push(h.get(n)),t){case"add":mn(e)?Wb(n)&&l.push(h.get("length")):(l.push(h.get(Jc)),dd(e)&&l.push(h.get($_)));break;case"delete":mn(e)||(l.push(h.get(Jc)),dd(e)&&l.push(h.get($_)));break;case"set":dd(e)&&l.push(h.get(Jc));break}Kb();for(const v of l)v&&eC(v,4);Xb()}function KM(e,t){var n;return(n=Qm.get(e))==null?void 0:n.get(t)}const XM=jb("__proto__,__v_isRef,__isVue"),nC=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(iu)),ww=JM();function JM(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=vn(this);for(let u=0,h=this.length;u<h;u++)La(r,"get",u+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(vn)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){oc(),Kb();const r=vn(this)[t].apply(this,n);return Xb(),lc(),r}}),e}function QM(e){iu(e)||(e=String(e));const t=vn(this);return La(t,"has",e),t.hasOwnProperty(e)}class rC{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){const s=this._isReadonly,u=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return u;if(n==="__v_raw")return r===(s?u?hL:oC:u?sC:aC).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const h=mn(t);if(!s){if(h&&Kn(ww,n))return Reflect.get(ww,n,r);if(n==="hasOwnProperty")return QM}const l=Reflect.get(t,n,r);return(iu(n)?nC.has(n):XM(n))||(s||La(t,"get",n),u)?l:_r(l)?h&&Wb(n)?l:l.value:Mr(l)?s?Vf(l):Si(l):l}}class iC extends rC{constructor(t=!1){super(!1,t)}set(t,n,r,s){let u=t[n];if(!this._isShallow){const v=mf(u);if(!eg(r)&&!mf(r)&&(u=vn(u),r=vn(r)),!mn(t)&&_r(u)&&!_r(r))return v?!1:(u.value=r,!0)}const h=mn(t)&&Wb(n)?Number(n)<t.length:Kn(t,n),l=Reflect.set(t,n,r,s);return t===vn(s)&&(h?ic(r,u)&&il(t,"set",n,r):il(t,"add",n,r)),l}deleteProperty(t,n){const r=Kn(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&il(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!iu(n)||!nC.has(n))&&La(t,"has",n),r}ownKeys(t){return La(t,"iterate",mn(t)?"length":Jc),Reflect.ownKeys(t)}}class eL extends rC{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const tL=new iC,nL=new eL,rL=new iC(!0),Jb=e=>e,Fg=e=>Reflect.getPrototypeOf(e);function fm(e,t,n=!1,r=!1){e=e.__v_raw;const s=vn(e),u=vn(t);n||(ic(t,u)&&La(s,"get",t),La(s,"get",u));const{has:h}=Fg(s),l=r?Jb:n?t0:gf;if(h.call(s,t))return l(e.get(t));if(h.call(s,u))return l(e.get(u));e!==s&&e.get(t)}function pm(e,t=!1){const n=this.__v_raw,r=vn(n),s=vn(e);return t||(ic(e,s)&&La(r,"has",e),La(r,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function mm(e,t=!1){return e=e.__v_raw,!t&&La(vn(e),"iterate",Jc),Reflect.get(e,"size",e)}function Sw(e){e=vn(e);const t=vn(this);return Fg(t).has.call(t,e)||(t.add(e),il(t,"add",e,e)),this}function kw(e,t){t=vn(t);const n=vn(this),{has:r,get:s}=Fg(n);let u=r.call(n,e);u||(e=vn(e),u=r.call(n,e));const h=s.call(n,e);return n.set(e,t),u?ic(t,h)&&il(n,"set",e,t):il(n,"add",e,t),this}function Cw(e){const t=vn(this),{has:n,get:r}=Fg(t);let s=n.call(t,e);s||(e=vn(e),s=n.call(t,e)),r&&r.call(t,e);const u=t.delete(e);return s&&il(t,"delete",e,void 0),u}function Tw(){const e=vn(this),t=e.size!==0,n=e.clear();return t&&il(e,"clear",void 0,void 0),n}function gm(e,t){return function(r,s){const u=this,h=u.__v_raw,l=vn(h),v=t?Jb:e?t0:gf;return!e&&La(l,"iterate",Jc),h.forEach((_,S)=>r.call(s,v(_),v(S),u))}}function vm(e,t,n){return function(...r){const s=this.__v_raw,u=vn(s),h=dd(u),l=e==="entries"||e===Symbol.iterator&&h,v=e==="keys"&&h,_=s[e](...r),S=n?Jb:t?t0:gf;return!t&&La(u,"iterate",v?$_:Jc),{next(){const{value:C,done:k}=_.next();return k?{value:C,done:k}:{value:l?[S(C[0]),S(C[1])]:S(C),done:k}},[Symbol.iterator](){return this}}}}function $l(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function iL(){const e={get(u){return fm(this,u)},get size(){return mm(this)},has:pm,add:Sw,set:kw,delete:Cw,clear:Tw,forEach:gm(!1,!1)},t={get(u){return fm(this,u,!1,!0)},get size(){return mm(this)},has:pm,add:Sw,set:kw,delete:Cw,clear:Tw,forEach:gm(!1,!0)},n={get(u){return fm(this,u,!0)},get size(){return mm(this,!0)},has(u){return pm.call(this,u,!0)},add:$l("add"),set:$l("set"),delete:$l("delete"),clear:$l("clear"),forEach:gm(!0,!1)},r={get(u){return fm(this,u,!0,!0)},get size(){return mm(this,!0)},has(u){return pm.call(this,u,!0)},add:$l("add"),set:$l("set"),delete:$l("delete"),clear:$l("clear"),forEach:gm(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(u=>{e[u]=vm(u,!1,!1),n[u]=vm(u,!0,!1),t[u]=vm(u,!1,!0),r[u]=vm(u,!0,!0)}),[e,n,t,r]}const[aL,sL,oL,lL]=iL();function Qb(e,t){const n=t?e?lL:oL:e?sL:aL;return(r,s,u)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(Kn(n,s)&&s in r?n:r,s,u)}const cL={get:Qb(!1,!1)},uL={get:Qb(!1,!0)},dL={get:Qb(!0,!1)},aC=new WeakMap,sC=new WeakMap,oC=new WeakMap,hL=new WeakMap;function fL(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function pL(e){return e.__v_skip||!Object.isExtensible(e)?0:fL(FM(e))}function Si(e){return mf(e)?e:e0(e,!1,tL,cL,aC)}function lC(e){return e0(e,!1,rL,uL,sC)}function Vf(e){return e0(e,!0,nL,dL,oC)}function e0(e,t,n,r,s){if(!Mr(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const u=s.get(e);if(u)return u;const h=pL(e);if(h===0)return e;const l=new Proxy(e,h===2?r:n);return s.set(e,l),l}function af(e){return mf(e)?af(e.__v_raw):!!(e&&e.__v_isReactive)}function mf(e){return!!(e&&e.__v_isReadonly)}function eg(e){return!!(e&&e.__v_isShallow)}function cC(e){return e?!!e.__v_raw:!1}function vn(e){const t=e&&e.__v_raw;return t?vn(t):e}function U_(e){return Object.isExtensible(e)&&G2(e,"__v_skip",!0),e}const gf=e=>Mr(e)?Si(e):e,t0=e=>Mr(e)?Vf(e):e;class uC{constructor(t,n,r,s){this.getter=t,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Zb(()=>t(this._value),()=>Om(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=vn(this);return(!t._cacheable||t.effect.dirty)&&ic(t._value,t._value=t.effect.run())&&Om(t,4),dC(t),t.effect._dirtyLevel>=2&&Om(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function mL(e,t,n=!1){let r,s;const u=En(e);return u?(r=e,s=Ya):(r=e.get,s=e.set),new uC(r,s,u||!s,n)}function dC(e){var t;tc&&Xc&&(e=vn(e),Q2(Xc,(t=e.dep)!=null?t:e.dep=tC(()=>e.dep=void 0,e instanceof uC?e:void 0)))}function Om(e,t=4,n){e=vn(e);const r=e.dep;r&&eC(r,t)}function _r(e){return!!(e&&e.__v_isRef===!0)}function lt(e){return hC(e,!1)}function Ut(e){return hC(e,!0)}function hC(e,t){return _r(e)?e:new gL(e,t)}class gL{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:vn(t),this._value=n?t:gf(t)}get value(){return dC(this),this._value}set value(t){const n=this.__v_isShallow||eg(t)||mf(t);t=n?t:vn(t),ic(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:gf(t),Om(this,4))}}function Fr(e){return _r(e)?e.value:e}const vL={get:(e,t,n)=>Fr(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return _r(s)&&!_r(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function fC(e){return af(e)?e:new Proxy(e,vL)}function n0(e){const t=mn(e)?new Array(e.length):{};for(const n in e)t[n]=pC(e,n);return t}class yL{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return KM(vn(this._object),this._key)}}class _L{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Ct(e,t,n){return _r(e)?e:En(e)?new _L(e):Mr(e)&&arguments.length>1?pC(e,t,n):lt(e)}function pC(e,t,n){const r=e[t];return _r(r)?r:new yL(e,t,n)}/**
* @vue/runtime-core v3.4.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function nc(e,t,n,r){try{return r?e(...r):e()}catch(s){Bg(s,t,n)}}function fs(e,t,n,r){if(En(e)){const s=nc(e,t,n,r);return s&&q2(s)&&s.catch(u=>{Bg(u,t,n)}),s}if(mn(e)){const s=[];for(let u=0;u<e.length;u++)s.push(fs(e[u],t,n,r));return s}}function Bg(e,t,n,r=!0){const s=t?t.vnode:null;if(t){let u=t.parent;const h=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;u;){const _=u.ec;if(_){for(let S=0;S<_.length;S++)if(_[S](e,h,l)===!1)return}u=u.parent}const v=t.appContext.config.errorHandler;if(v){oc(),nc(v,null,10,[e,h,l]),lc();return}}bL(e,n,s,r)}function bL(e,t,n,r=!0){console.error(e)}let vf=!1,q_=!1;const ra=[];let ho=0;const hd=[];let Gl=null,Uc=0;const mC=Promise.resolve();let r0=null;function ar(e){const t=r0||mC;return e?t.then(this?e.bind(this):e):t}function xL(e){let t=ho+1,n=ra.length;for(;t<n;){const r=t+n>>>1,s=ra[r],u=yf(s);u<e||u===e&&s.pre?t=r+1:n=r}return t}function i0(e){(!ra.length||!ra.includes(e,vf&&e.allowRecurse?ho+1:ho))&&(e.id==null?ra.push(e):ra.splice(xL(e.id),0,e),gC())}function gC(){!vf&&!q_&&(q_=!0,r0=mC.then(yC))}function wL(e){const t=ra.indexOf(e);t>ho&&ra.splice(t,1)}function SL(e){mn(e)?hd.push(...e):(!Gl||!Gl.includes(e,e.allowRecurse?Uc+1:Uc))&&hd.push(e),gC()}function Aw(e,t,n=vf?ho+1:0){for(;n<ra.length;n++){const r=ra[n];if(r&&r.pre){if(e&&r.id!==e.uid)continue;ra.splice(n,1),n--,r()}}}function vC(e){if(hd.length){const t=[...new Set(hd)].sort((n,r)=>yf(n)-yf(r));if(hd.length=0,Gl){Gl.push(...t);return}for(Gl=t,Uc=0;Uc<Gl.length;Uc++)Gl[Uc]();Gl=null,Uc=0}}const yf=e=>e.id==null?1/0:e.id,kL=(e,t)=>{const n=yf(e)-yf(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function yC(e){q_=!1,vf=!0,ra.sort(kL);try{for(ho=0;ho<ra.length;ho++){const t=ra[ho];t&&t.active!==!1&&nc(t,null,14)}}finally{ho=0,ra.length=0,vC(),vf=!1,r0=null,(ra.length||hd.length)&&yC()}}function CL(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||zr;let s=n;const u=t.startsWith("update:"),h=u&&t.slice(7);if(h&&h in r){const S=`${h==="modelValue"?"model":h}Modifiers`,{number:C,trim:k}=r[S]||zr;k&&(s=n.map(D=>ti(D)?D.trim():D)),C&&(s=n.map(B_))}let l,v=r[l=qy(t)]||r[l=qy(ys(t))];!v&&u&&(v=r[l=qy(kd(t))]),v&&fs(v,e,6,s);const _=r[l+"Once"];if(_){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,fs(_,e,6,s)}}function _C(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const u=e.emits;let h={},l=!1;if(!En(e)){const v=_=>{const S=_C(_,t,!0);S&&(l=!0,mi(h,S))};!n&&t.mixins.length&&t.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}return!u&&!l?(Mr(e)&&r.set(e,null),null):(mn(u)?u.forEach(v=>h[v]=null):mi(h,u),Mr(e)&&r.set(e,h),h)}function Vg(e,t){return!e||!Lg(t)?!1:(t=t.slice(2).replace(/Once$/,""),Kn(e,t[0].toLowerCase()+t.slice(1))||Kn(e,kd(t))||Kn(e,t))}let ba=null,bC=null;function tg(e){const t=ba;return ba=e,bC=e&&e.type.__scopeId||null,t}function Ie(e,t=ba,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&$w(-1);const u=tg(t);let h;try{h=e(...s)}finally{tg(u),r._d&&$w(1)}return h};return r._n=!0,r._c=!0,r._d=!0,r}function Hy(e){const{type:t,vnode:n,proxy:r,withProxy:s,props:u,propsOptions:[h],slots:l,attrs:v,emit:_,render:S,renderCache:C,data:k,setupState:D,ctx:O,inheritAttrs:R}=e;let F,N;const j=tg(e);try{if(n.shapeFlag&4){const ee=s||r,le=ee;F=uo(S.call(le,ee,C,u,D,k,O)),N=v}else{const ee=t;F=uo(ee.length>1?ee(u,{attrs:v,slots:l,emit:_}):ee(u,null)),N=t.props?v:TL(v)}}catch(ee){cf.length=0,Bg(ee,e,1),F=E(ps)}let X=F;if(N&&R!==!1){const ee=Object.keys(N),{shapeFlag:le}=X;ee.length&&le&7&&(h&&ee.some(Hb)&&(N=AL(N,h)),X=ll(X,N))}return n.dirs&&(X=ll(X),X.dirs=X.dirs?X.dirs.concat(n.dirs):n.dirs),n.transition&&(X.transition=n.transition),F=X,tg(j),F}const TL=e=>{let t;for(const n in e)(n==="class"||n==="style"||Lg(n))&&((t||(t={}))[n]=e[n]);return t},AL=(e,t)=>{const n={};for(const r in e)(!Hb(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function EL(e,t,n){const{props:r,children:s,component:u}=e,{props:h,children:l,patchFlag:v}=t,_=u.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&v>=0){if(v&1024)return!0;if(v&16)return r?Ew(r,h,_):!!h;if(v&8){const S=t.dynamicProps;for(let C=0;C<S.length;C++){const k=S[C];if(h[k]!==r[k]&&!Vg(_,k))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===h?!1:r?h?Ew(r,h,_):!0:!!h;return!1}function Ew(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const u=r[s];if(t[u]!==e[u]&&!Vg(n,u))return!0}return!1}function IL({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const a0="components",PL="directives";function wn(e,t){return s0(a0,e,!0,t)||e}const xC=Symbol.for("v-ndc");function DL(e){return ti(e)?s0(a0,e,!1)||e:e||xC}function So(e){return s0(PL,e)}function s0(e,t,n=!0,r=!1){const s=ba||$i;if(s){const u=s.type;if(e===a0){const l=bR(u,!1);if(l&&(l===t||l===ys(t)||l===wo(ys(t))))return u}const h=Iw(s[e]||u[e],t)||Iw(s.appContext[e],t);return!h&&r?u:h}}function Iw(e,t){return e&&(e[t]||e[ys(t)]||e[wo(ys(t))])}const ML=e=>e.__isSuspense;function LL(e,t){t&&t.pendingBranch?mn(e)?t.effects.push(...e):t.effects.push(e):SL(e)}const RL=Symbol.for("v-scx"),OL=()=>yt(RL);function Ui(e,t){return o0(e,null,t)}const ym={};function ut(e,t,n){return o0(e,t,n)}function o0(e,t,{immediate:n,deep:r,flush:s,once:u,onTrack:h,onTrigger:l}=zr){if(t&&u){const ie=t;t=(...se)=>{ie(...se),le()}}const v=$i,_=ie=>r===!0?ie:Hc(ie,r===!1?1:void 0);let S,C=!1,k=!1;if(_r(e)?(S=()=>e.value,C=eg(e)):af(e)?(S=()=>_(e),C=!0):mn(e)?(k=!0,C=e.some(ie=>af(ie)||eg(ie)),S=()=>e.map(ie=>{if(_r(ie))return ie.value;if(af(ie))return _(ie);if(En(ie))return nc(ie,v,2)})):En(e)?t?S=()=>nc(e,v,2):S=()=>(D&&D(),fs(e,v,3,[O])):S=Ya,t&&r){const ie=S;S=()=>Hc(ie())}let D,O=ie=>{D=X.onStop=()=>{nc(ie,v,4),D=X.onStop=void 0}},R;if(qg)if(O=Ya,t?n&&fs(t,v,3,[S(),k?[]:void 0,O]):S(),s==="sync"){const ie=OL();R=ie.__watcherHandles||(ie.__watcherHandles=[])}else return Ya;let F=k?new Array(e.length).fill(ym):ym;const N=()=>{if(!(!X.active||!X.dirty))if(t){const ie=X.run();(r||C||(k?ie.some((se,H)=>ic(se,F[H])):ic(ie,F)))&&(D&&D(),fs(t,v,3,[ie,F===ym?void 0:k&&F[0]===ym?[]:F,O]),F=ie)}else X.run()};N.allowRecurse=!!t;let j;s==="sync"?j=N:s==="post"?j=()=>Pa(N,v&&v.suspense):(N.pre=!0,v&&(N.id=v.uid),j=()=>i0(N));const X=new Zb(S,Ya,j),ee=YM(),le=()=>{X.stop(),ee&&Gb(ee.effects,X)};return t?n?N():F=X.run():s==="post"?Pa(X.run.bind(X),v&&v.suspense):X.run(),R&&R.push(le),le}function zL(e,t,n){const r=this.proxy,s=ti(e)?e.includes(".")?wC(r,e):()=>r[e]:e.bind(r,r);let u;En(t)?u=t:(u=t.handler,n=t);const h=$f(this),l=o0(s,u.bind(r),n);return h(),l}function wC(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Hc(e,t,n=0,r){if(!Mr(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if(r=r||new Set,r.has(e))return e;if(r.add(e),_r(e))Hc(e.value,t,n,r);else if(mn(e))for(let s=0;s<e.length;s++)Hc(e[s],t,n,r);else if(U2(e)||dd(e))e.forEach(s=>{Hc(s,t,n,r)});else if(H2(e))for(const s in e)Hc(e[s],t,n,r);return e}function gi(e,t){if(ba===null)return e;const n=jg(ba)||ba.proxy,r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[u,h,l,v=zr]=t[s];u&&(En(u)&&(u={mounted:u,updated:u}),u.deep&&Hc(h),r.push({dir:u,instance:n,value:h,oldValue:void 0,arg:l,modifiers:v}))}return e}function Rc(e,t,n,r){const s=e.dirs,u=t&&t.dirs;for(let h=0;h<s.length;h++){const l=s[h];u&&(l.oldValue=u[h].value);let v=l.dir[r];v&&(oc(),fs(v,n,8,[e.el,l,e,t]),lc())}}const Wl=Symbol("_leaveCb"),_m=Symbol("_enterCb");function SC(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Oa(()=>{e.isMounted=!0}),br(()=>{e.isUnmounting=!0}),e}const cs=[Function,Array],kC={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:cs,onEnter:cs,onAfterEnter:cs,onEnterCancelled:cs,onBeforeLeave:cs,onLeave:cs,onAfterLeave:cs,onLeaveCancelled:cs,onBeforeAppear:cs,onAppear:cs,onAfterAppear:cs,onAppearCancelled:cs},FL={name:"BaseTransition",props:kC,setup(e,{slots:t}){const n=xs(),r=SC();return()=>{const s=t.default&&l0(t.default(),!0);if(!s||!s.length)return;let u=s[0];if(s.length>1){for(const k of s)if(k.type!==ps){u=k;break}}const h=vn(e),{mode:l}=h;if(r.isLeaving)return Gy(u);const v=Pw(u);if(!v)return Gy(u);const _=_f(v,h,r,n);bf(v,_);const S=n.subTree,C=S&&Pw(S);if(C&&C.type!==ps&&!qc(v,C)){const k=_f(C,h,r,n);if(bf(C,k),l==="out-in")return r.isLeaving=!0,k.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},Gy(u);l==="in-out"&&v.type!==ps&&(k.delayLeave=(D,O,R)=>{const F=CC(r,C);F[String(C.key)]=C,D[Wl]=()=>{O(),D[Wl]=void 0,delete _.delayedLeave},_.delayedLeave=R})}return u}}},BL=FL;function CC(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function _f(e,t,n,r){const{appear:s,mode:u,persisted:h=!1,onBeforeEnter:l,onEnter:v,onAfterEnter:_,onEnterCancelled:S,onBeforeLeave:C,onLeave:k,onAfterLeave:D,onLeaveCancelled:O,onBeforeAppear:R,onAppear:F,onAfterAppear:N,onAppearCancelled:j}=t,X=String(e.key),ee=CC(n,e),le=(H,Z)=>{H&&fs(H,r,9,Z)},ie=(H,Z)=>{const ne=Z[1];le(H,Z),mn(H)?H.every(_e=>_e.length<=1)&&ne():H.length<=1&&ne()},se={mode:u,persisted:h,beforeEnter(H){let Z=l;if(!n.isMounted)if(s)Z=R||l;else return;H[Wl]&&H[Wl](!0);const ne=ee[X];ne&&qc(e,ne)&&ne.el[Wl]&&ne.el[Wl](),le(Z,[H])},enter(H){let Z=v,ne=_,_e=S;if(!n.isMounted)if(s)Z=F||v,ne=N||_,_e=j||S;else return;let te=!1;const Se=H[_m]=me=>{te||(te=!0,me?le(_e,[H]):le(ne,[H]),se.delayedLeave&&se.delayedLeave(),H[_m]=void 0)};Z?ie(Z,[H,Se]):Se()},leave(H,Z){const ne=String(e.key);if(H[_m]&&H[_m](!0),n.isUnmounting)return Z();le(C,[H]);let _e=!1;const te=H[Wl]=Se=>{_e||(_e=!0,Z(),Se?le(O,[H]):le(D,[H]),H[Wl]=void 0,ee[ne]===e&&delete ee[ne])};ee[ne]=e,k?ie(k,[H,te]):te()},clone(H){return _f(H,t,n,r)}};return se}function Gy(e){if(Ng(e))return e=ll(e),e.children=null,e}function Pw(e){return Ng(e)?e.children?e.children[0]:void 0:e}function bf(e,t){e.shapeFlag&6&&e.component?bf(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function l0(e,t=!1,n){let r=[],s=0;for(let u=0;u<e.length;u++){let h=e[u];const l=n==null?h.key:String(n)+String(h.key!=null?h.key:u);h.type===rn?(h.patchFlag&128&&s++,r=r.concat(l0(h.children,t,l))):(t||h.type!==ps)&&r.push(l!=null?ll(h,{key:l}):h)}if(s>1)for(let u=0;u<r.length;u++)r[u].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function sr(e,t){return En(e)?mi({name:e.name},t,{setup:e}):e}const zm=e=>!!e.type.__asyncLoader,Ng=e=>e.type.__isKeepAlive;function TC(e,t){EC(e,"a",t)}function AC(e,t){EC(e,"da",t)}function EC(e,t,n=$i){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if($g(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Ng(s.parent.vnode)&&VL(r,t,n,s),s=s.parent}}function VL(e,t,n,r){const s=$g(t,e,r,!0);DC(()=>{Gb(r[t],s)},n)}function $g(e,t,n=$i,r=!1){if(n){const s=n[e]||(n[e]=[]),u=t.__weh||(t.__weh=(...h)=>{if(n.isUnmounted)return;oc();const l=$f(n),v=fs(t,n,e,h);return l(),lc(),v});return r?s.unshift(u):s.push(u),u}}const dl=e=>(t,n=$i)=>(!qg||e==="sp")&&$g(e,(...r)=>t(...r),n),Ug=dl("bm"),Oa=dl("m"),IC=dl("bu"),PC=dl("u"),br=dl("bum"),DC=dl("um"),NL=dl("sp"),$L=dl("rtg"),UL=dl("rtc");function qL(e,t=$i){$g("ec",e,t)}function Fm(e,t,n,r){let s;const u=n&&n[r];if(mn(e)||ti(e)){s=new Array(e.length);for(let h=0,l=e.length;h<l;h++)s[h]=t(e[h],h,void 0,u&&u[h])}else if(typeof e=="number"){s=new Array(e);for(let h=0;h<e;h++)s[h]=t(h+1,h,void 0,u&&u[h])}else if(Mr(e))if(e[Symbol.iterator])s=Array.from(e,(h,l)=>t(h,l,void 0,u&&u[l]));else{const h=Object.keys(e);s=new Array(h.length);for(let l=0,v=h.length;l<v;l++){const _=h[l];s[l]=t(e[_],_,l,u&&u[l])}}else s=[];return n&&(n[r]=s),s}const j_=e=>e?jC(e)?jg(e)||e.proxy:j_(e.parent):null,sf=mi(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>j_(e.parent),$root:e=>j_(e.root),$emit:e=>e.emit,$options:e=>c0(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,i0(e.update)}),$nextTick:e=>e.n||(e.n=ar.bind(e.proxy)),$watch:e=>zL.bind(e)}),Wy=(e,t)=>e!==zr&&!e.__isScriptSetup&&Kn(e,t),jL={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:u,accessCache:h,type:l,appContext:v}=e;let _;if(t[0]!=="$"){const D=h[t];if(D!==void 0)switch(D){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return u[t]}else{if(Wy(r,t))return h[t]=1,r[t];if(s!==zr&&Kn(s,t))return h[t]=2,s[t];if((_=e.propsOptions[0])&&Kn(_,t))return h[t]=3,u[t];if(n!==zr&&Kn(n,t))return h[t]=4,n[t];H_&&(h[t]=0)}}const S=sf[t];let C,k;if(S)return t==="$attrs"&&La(e,"get",t),S(e);if((C=l.__cssModules)&&(C=C[t]))return C;if(n!==zr&&Kn(n,t))return h[t]=4,n[t];if(k=v.config.globalProperties,Kn(k,t))return k[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:u}=e;return Wy(s,t)?(s[t]=n,!0):r!==zr&&Kn(r,t)?(r[t]=n,!0):Kn(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(u[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:u}},h){let l;return!!n[h]||e!==zr&&Kn(e,h)||Wy(t,h)||(l=u[0])&&Kn(l,h)||Kn(r,h)||Kn(sf,h)||Kn(s.config.globalProperties,h)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Kn(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Dw(e){return mn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let H_=!0;function HL(e){const t=c0(e),n=e.proxy,r=e.ctx;H_=!1,t.beforeCreate&&Mw(t.beforeCreate,e,"bc");const{data:s,computed:u,methods:h,watch:l,provide:v,inject:_,created:S,beforeMount:C,mounted:k,beforeUpdate:D,updated:O,activated:R,deactivated:F,beforeDestroy:N,beforeUnmount:j,destroyed:X,unmounted:ee,render:le,renderTracked:ie,renderTriggered:se,errorCaptured:H,serverPrefetch:Z,expose:ne,inheritAttrs:_e,components:te,directives:Se,filters:me}=t;if(_&&GL(_,r,null),h)for(const $e in h){const ke=h[$e];En(ke)&&(r[$e]=ke.bind(n))}if(s){const $e=s.call(n,n);Mr($e)&&(e.data=Si($e))}if(H_=!0,u)for(const $e in u){const ke=u[$e],Pe=En(ke)?ke.bind(n,n):En(ke.get)?ke.get.bind(n,n):Ya,Ze=!En(ke)&&En(ke.set)?ke.set.bind(n):Ya,Je=Q({get:Pe,set:Ze});Object.defineProperty(r,$e,{enumerable:!0,configurable:!0,get:()=>Je.value,set:Ne=>Je.value=Ne})}if(l)for(const $e in l)MC(l[$e],r,n,$e);if(v){const $e=En(v)?v.call(n):v;Reflect.ownKeys($e).forEach(ke=>{bn(ke,$e[ke])})}S&&Mw(S,e,"c");function Ge($e,ke){mn(ke)?ke.forEach(Pe=>$e(Pe.bind(n))):ke&&$e(ke.bind(n))}if(Ge(Ug,C),Ge(Oa,k),Ge(IC,D),Ge(PC,O),Ge(TC,R),Ge(AC,F),Ge(qL,H),Ge(UL,ie),Ge($L,se),Ge(br,j),Ge(DC,ee),Ge(NL,Z),mn(ne))if(ne.length){const $e=e.exposed||(e.exposed={});ne.forEach(ke=>{Object.defineProperty($e,ke,{get:()=>n[ke],set:Pe=>n[ke]=Pe})})}else e.exposed||(e.exposed={});le&&e.render===Ya&&(e.render=le),_e!=null&&(e.inheritAttrs=_e),te&&(e.components=te),Se&&(e.directives=Se)}function GL(e,t,n=Ya){mn(e)&&(e=G_(e));for(const r in e){const s=e[r];let u;Mr(s)?"default"in s?u=yt(s.from||r,s.default,!0):u=yt(s.from||r):u=yt(s),_r(u)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>u.value,set:h=>u.value=h}):t[r]=u}}function Mw(e,t,n){fs(mn(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function MC(e,t,n,r){const s=r.includes(".")?wC(n,r):()=>n[r];if(ti(e)){const u=t[e];En(u)&&ut(s,u)}else if(En(e))ut(s,e.bind(n));else if(Mr(e))if(mn(e))e.forEach(u=>MC(u,t,n,r));else{const u=En(e.handler)?e.handler.bind(n):t[e.handler];En(u)&&ut(s,u,e)}}function c0(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:u,config:{optionMergeStrategies:h}}=e.appContext,l=u.get(t);let v;return l?v=l:!s.length&&!n&&!r?v=t:(v={},s.length&&s.forEach(_=>ng(v,_,h,!0)),ng(v,t,h)),Mr(t)&&u.set(t,v),v}function ng(e,t,n,r=!1){const{mixins:s,extends:u}=t;u&&ng(e,u,n,!0),s&&s.forEach(h=>ng(e,h,n,!0));for(const h in t)if(!(r&&h==="expose")){const l=WL[h]||n&&n[h];e[h]=l?l(e[h],t[h]):t[h]}return e}const WL={data:Lw,props:Rw,emits:Rw,methods:tf,computed:tf,beforeCreate:ya,created:ya,beforeMount:ya,mounted:ya,beforeUpdate:ya,updated:ya,beforeDestroy:ya,beforeUnmount:ya,destroyed:ya,unmounted:ya,activated:ya,deactivated:ya,errorCaptured:ya,serverPrefetch:ya,components:tf,directives:tf,watch:ZL,provide:Lw,inject:YL};function Lw(e,t){return t?e?function(){return mi(En(e)?e.call(this,this):e,En(t)?t.call(this,this):t)}:t:e}function YL(e,t){return tf(G_(e),G_(t))}function G_(e){if(mn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ya(e,t){return e?[...new Set([].concat(e,t))]:t}function tf(e,t){return e?mi(Object.create(null),e,t):t}function Rw(e,t){return e?mn(e)&&mn(t)?[...new Set([...e,...t])]:mi(Object.create(null),Dw(e),Dw(t??{})):t}function ZL(e,t){if(!e)return t;if(!t)return e;const n=mi(Object.create(null),e);for(const r in t)n[r]=ya(e[r],t[r]);return n}function LC(){return{app:null,config:{isNativeTag:OM,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let KL=0;function XL(e,t){return function(r,s=null){En(r)||(r=mi({},r)),s!=null&&!Mr(s)&&(s=null);const u=LC(),h=new WeakSet;let l=!1;const v=u.app={_uid:KL++,_component:r,_props:s,_container:null,_context:u,_instance:null,version:wR,get config(){return u.config},set config(_){},use(_,...S){return h.has(_)||(_&&En(_.install)?(h.add(_),_.install(v,...S)):En(_)&&(h.add(_),_(v,...S))),v},mixin(_){return u.mixins.includes(_)||u.mixins.push(_),v},component(_,S){return S?(u.components[_]=S,v):u.components[_]},directive(_,S){return S?(u.directives[_]=S,v):u.directives[_]},mount(_,S,C){if(!l){const k=E(r,s);return k.appContext=u,C===!0?C="svg":C===!1&&(C=void 0),S&&t?t(k,_):e(k,_,C),l=!0,v._container=_,_.__vue_app__=v,jg(k.component)||k.component.proxy}},unmount(){l&&(e(null,v._container),delete v._container.__vue_app__)},provide(_,S){return u.provides[_]=S,v},runWithContext(_){const S=of;of=v;try{return _()}finally{of=S}}};return v}}let of=null;function bn(e,t){if($i){let n=$i.provides;const r=$i.parent&&$i.parent.provides;r===n&&(n=$i.provides=Object.create(r)),n[e]=t}}function yt(e,t,n=!1){const r=$i||ba;if(r||of){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:of._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&En(t)?t.call(r&&r.proxy):t}}const RC={};function JL(e,t,n,r=!1){const s={},u=Object.create(RC);e.propsDefaults=Object.create(null),OC(e,t,s,u);for(const h in e.propsOptions[0])h in s||(s[h]=void 0);n?e.props=r?s:lC(s):e.type.props?e.props=s:e.props=u,e.attrs=u}function QL(e,t,n,r){const{props:s,attrs:u,vnode:{patchFlag:h}}=e,l=vn(s),[v]=e.propsOptions;let _=!1;if((r||h>0)&&!(h&16)){if(h&8){const S=e.vnode.dynamicProps;for(let C=0;C<S.length;C++){let k=S[C];if(Vg(e.emitsOptions,k))continue;const D=t[k];if(v)if(Kn(u,k))D!==u[k]&&(u[k]=D,_=!0);else{const O=ys(k);s[O]=W_(v,l,O,D,e,!1)}else D!==u[k]&&(u[k]=D,_=!0)}}}else{OC(e,t,s,u)&&(_=!0);let S;for(const C in l)(!t||!Kn(t,C)&&((S=kd(C))===C||!Kn(t,S)))&&(v?n&&(n[C]!==void 0||n[S]!==void 0)&&(s[C]=W_(v,l,C,void 0,e,!0)):delete s[C]);if(u!==l)for(const C in u)(!t||!Kn(t,C))&&(delete u[C],_=!0)}_&&il(e.attrs,"set","")}function OC(e,t,n,r){const[s,u]=e.propsOptions;let h=!1,l;if(t)for(let v in t){if(rf(v))continue;const _=t[v];let S;s&&Kn(s,S=ys(v))?!u||!u.includes(S)?n[S]=_:(l||(l={}))[S]=_:Vg(e.emitsOptions,v)||(!(v in r)||_!==r[v])&&(r[v]=_,h=!0)}if(u){const v=vn(n),_=l||zr;for(let S=0;S<u.length;S++){const C=u[S];n[C]=W_(s,v,C,_[C],e,!Kn(_,C))}}return h}function W_(e,t,n,r,s,u){const h=e[n];if(h!=null){const l=Kn(h,"default");if(l&&r===void 0){const v=h.default;if(h.type!==Function&&!h.skipFactory&&En(v)){const{propsDefaults:_}=s;if(n in _)r=_[n];else{const S=$f(s);r=_[n]=v.call(null,t),S()}}else r=v}h[0]&&(u&&!l?r=!1:h[1]&&(r===""||r===kd(n))&&(r=!0))}return r}function zC(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const u=e.props,h={},l=[];let v=!1;if(!En(e)){const S=C=>{v=!0;const[k,D]=zC(C,t,!0);mi(h,k),D&&l.push(...D)};!n&&t.mixins.length&&t.mixins.forEach(S),e.extends&&S(e.extends),e.mixins&&e.mixins.forEach(S)}if(!u&&!v)return Mr(e)&&r.set(e,ud),ud;if(mn(u))for(let S=0;S<u.length;S++){const C=ys(u[S]);Ow(C)&&(h[C]=zr)}else if(u)for(const S in u){const C=ys(S);if(Ow(C)){const k=u[S],D=h[C]=mn(k)||En(k)?{type:k}:mi({},k);if(D){const O=Bw(Boolean,D.type),R=Bw(String,D.type);D[0]=O>-1,D[1]=R<0||O<R,(O>-1||Kn(D,"default"))&&l.push(C)}}}const _=[h,l];return Mr(e)&&r.set(e,_),_}function Ow(e){return e[0]!=="$"&&!rf(e)}function zw(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function Fw(e,t){return zw(e)===zw(t)}function Bw(e,t){return mn(t)?t.findIndex(n=>Fw(n,e)):En(t)&&Fw(t,e)?0:-1}const FC=e=>e[0]==="_"||e==="$stable",u0=e=>mn(e)?e.map(uo):[uo(e)],eR=(e,t,n)=>{if(t._n)return t;const r=Ie((...s)=>u0(t(...s)),n);return r._c=!1,r},BC=(e,t,n)=>{const r=e._ctx;for(const s in e){if(FC(s))continue;const u=e[s];if(En(u))t[s]=eR(s,u,r);else if(u!=null){const h=u0(u);t[s]=()=>h}}},VC=(e,t)=>{const n=u0(t);e.slots.default=()=>n},tR=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=vn(t),G2(e.slots,"_",n)):BC(t,e.slots={})}else e.slots={},t&&VC(e,t)},nR=(e,t,n)=>{const{vnode:r,slots:s}=e;let u=!0,h=zr;if(r.shapeFlag&32){const l=t._;l?n&&l===1?u=!1:(mi(s,t),!n&&l===1&&delete s._):(u=!t.$stable,BC(t,s)),h=t}else t&&(VC(e,t),h={default:1});if(u)for(const l in s)!FC(l)&&h[l]==null&&delete s[l]};function Y_(e,t,n,r,s=!1){if(mn(e)){e.forEach((k,D)=>Y_(k,t&&(mn(t)?t[D]:t),n,r,s));return}if(zm(r)&&!s)return;const u=r.shapeFlag&4?jg(r.component)||r.component.proxy:r.el,h=s?null:u,{i:l,r:v}=e,_=t&&t.r,S=l.refs===zr?l.refs={}:l.refs,C=l.setupState;if(_!=null&&_!==v&&(ti(_)?(S[_]=null,Kn(C,_)&&(C[_]=null)):_r(_)&&(_.value=null)),En(v))nc(v,l,12,[h,S]);else{const k=ti(v),D=_r(v);if(k||D){const O=()=>{if(e.f){const R=k?Kn(C,v)?C[v]:S[v]:v.value;s?mn(R)&&Gb(R,u):mn(R)?R.includes(u)||R.push(u):k?(S[v]=[u],Kn(C,v)&&(C[v]=S[v])):(v.value=[u],e.k&&(S[e.k]=v.value))}else k?(S[v]=h,Kn(C,v)&&(C[v]=h)):D&&(v.value=h,e.k&&(S[e.k]=h))};h?(O.id=-1,Pa(O,n)):O()}}}const Pa=LL;function rR(e){return iR(e)}function iR(e,t){const n=W2();n.__VUE__=!0;const{insert:r,remove:s,patchProp:u,createElement:h,createText:l,createComment:v,setText:_,setElementText:S,parentNode:C,nextSibling:k,setScopeId:D=Ya,insertStaticContent:O}=e,R=(re,he,ze,He=null,Ke=null,dt=null,gt=void 0,Ce=null,pt=!!he.dynamicChildren)=>{if(re===he)return;re&&!qc(re,he)&&(He=Fe(re),Ne(re,Ke,dt,!0),re=null),he.patchFlag===-2&&(pt=!1,he.dynamicChildren=null);const{type:Qe,ref:st,shapeFlag:Et}=he;switch(Qe){case Nf:F(re,he,ze,He);break;case ps:N(re,he,ze,He);break;case Zy:re==null&&j(he,ze,He,gt);break;case rn:te(re,he,ze,He,Ke,dt,gt,Ce,pt);break;default:Et&1?le(re,he,ze,He,Ke,dt,gt,Ce,pt):Et&6?Se(re,he,ze,He,Ke,dt,gt,Ce,pt):(Et&64||Et&128)&&Qe.process(re,he,ze,He,Ke,dt,gt,Ce,pt,Be)}st!=null&&Ke&&Y_(st,re&&re.ref,dt,he||re,!he)},F=(re,he,ze,He)=>{if(re==null)r(he.el=l(he.children),ze,He);else{const Ke=he.el=re.el;he.children!==re.children&&_(Ke,he.children)}},N=(re,he,ze,He)=>{re==null?r(he.el=v(he.children||""),ze,He):he.el=re.el},j=(re,he,ze,He)=>{[re.el,re.anchor]=O(re.children,he,ze,He,re.el,re.anchor)},X=({el:re,anchor:he},ze,He)=>{let Ke;for(;re&&re!==he;)Ke=k(re),r(re,ze,He),re=Ke;r(he,ze,He)},ee=({el:re,anchor:he})=>{let ze;for(;re&&re!==he;)ze=k(re),s(re),re=ze;s(he)},le=(re,he,ze,He,Ke,dt,gt,Ce,pt)=>{he.type==="svg"?gt="svg":he.type==="math"&&(gt="mathml"),re==null?ie(he,ze,He,Ke,dt,gt,Ce,pt):Z(re,he,Ke,dt,gt,Ce,pt)},ie=(re,he,ze,He,Ke,dt,gt,Ce)=>{let pt,Qe;const{props:st,shapeFlag:Et,transition:It,dirs:an}=re;if(pt=re.el=h(re.type,dt,st&&st.is,st),Et&8?S(pt,re.children):Et&16&&H(re.children,pt,null,He,Ke,Yy(re,dt),gt,Ce),an&&Rc(re,null,He,"created"),se(pt,re,re.scopeId,gt,He),st){for(const Tn in st)Tn!=="value"&&!rf(Tn)&&u(pt,Tn,null,st[Tn],dt,re.children,He,Ke,St);"value"in st&&u(pt,"value",null,st.value,dt),(Qe=st.onVnodeBeforeMount)&&oo(Qe,He,re)}an&&Rc(re,null,He,"beforeMount");const ln=aR(Ke,It);ln&&It.beforeEnter(pt),r(pt,he,ze),((Qe=st&&st.onVnodeMounted)||ln||an)&&Pa(()=>{Qe&&oo(Qe,He,re),ln&&It.enter(pt),an&&Rc(re,null,He,"mounted")},Ke)},se=(re,he,ze,He,Ke)=>{if(ze&&D(re,ze),He)for(let dt=0;dt<He.length;dt++)D(re,He[dt]);if(Ke){let dt=Ke.subTree;if(he===dt){const gt=Ke.vnode;se(re,gt,gt.scopeId,gt.slotScopeIds,Ke.parent)}}},H=(re,he,ze,He,Ke,dt,gt,Ce,pt=0)=>{for(let Qe=pt;Qe<re.length;Qe++){const st=re[Qe]=Ce?Yl(re[Qe]):uo(re[Qe]);R(null,st,he,ze,He,Ke,dt,gt,Ce)}},Z=(re,he,ze,He,Ke,dt,gt)=>{const Ce=he.el=re.el;let{patchFlag:pt,dynamicChildren:Qe,dirs:st}=he;pt|=re.patchFlag&16;const Et=re.props||zr,It=he.props||zr;let an;if(ze&&Oc(ze,!1),(an=It.onVnodeBeforeUpdate)&&oo(an,ze,he,re),st&&Rc(he,re,ze,"beforeUpdate"),ze&&Oc(ze,!0),Qe?ne(re.dynamicChildren,Qe,Ce,ze,He,Yy(he,Ke),dt):gt||ke(re,he,Ce,null,ze,He,Yy(he,Ke),dt,!1),pt>0){if(pt&16)_e(Ce,he,Et,It,ze,He,Ke);else if(pt&2&&Et.class!==It.class&&u(Ce,"class",null,It.class,Ke),pt&4&&u(Ce,"style",Et.style,It.style,Ke),pt&8){const ln=he.dynamicProps;for(let Tn=0;Tn<ln.length;Tn++){const In=ln[Tn],Vn=Et[In],lr=It[In];(lr!==Vn||In==="value")&&u(Ce,In,Vn,lr,Ke,re.children,ze,He,St)}}pt&1&&re.children!==he.children&&S(Ce,he.children)}else!gt&&Qe==null&&_e(Ce,he,Et,It,ze,He,Ke);((an=It.onVnodeUpdated)||st)&&Pa(()=>{an&&oo(an,ze,he,re),st&&Rc(he,re,ze,"updated")},He)},ne=(re,he,ze,He,Ke,dt,gt)=>{for(let Ce=0;Ce<he.length;Ce++){const pt=re[Ce],Qe=he[Ce],st=pt.el&&(pt.type===rn||!qc(pt,Qe)||pt.shapeFlag&70)?C(pt.el):ze;R(pt,Qe,st,null,He,Ke,dt,gt,!0)}},_e=(re,he,ze,He,Ke,dt,gt)=>{if(ze!==He){if(ze!==zr)for(const Ce in ze)!rf(Ce)&&!(Ce in He)&&u(re,Ce,ze[Ce],null,gt,he.children,Ke,dt,St);for(const Ce in He){if(rf(Ce))continue;const pt=He[Ce],Qe=ze[Ce];pt!==Qe&&Ce!=="value"&&u(re,Ce,Qe,pt,gt,he.children,Ke,dt,St)}"value"in He&&u(re,"value",ze.value,He.value,gt)}},te=(re,he,ze,He,Ke,dt,gt,Ce,pt)=>{const Qe=he.el=re?re.el:l(""),st=he.anchor=re?re.anchor:l("");let{patchFlag:Et,dynamicChildren:It,slotScopeIds:an}=he;an&&(Ce=Ce?Ce.concat(an):an),re==null?(r(Qe,ze,He),r(st,ze,He),H(he.children||[],ze,st,Ke,dt,gt,Ce,pt)):Et>0&&Et&64&&It&&re.dynamicChildren?(ne(re.dynamicChildren,It,ze,Ke,dt,gt,Ce),(he.key!=null||Ke&&he===Ke.subTree)&&d0(re,he,!0)):ke(re,he,ze,st,Ke,dt,gt,Ce,pt)},Se=(re,he,ze,He,Ke,dt,gt,Ce,pt)=>{he.slotScopeIds=Ce,re==null?he.shapeFlag&512?Ke.ctx.activate(he,ze,He,gt,pt):me(he,ze,He,Ke,dt,gt,pt):Ve(re,he,pt)},me=(re,he,ze,He,Ke,dt,gt)=>{const Ce=re.component=mR(re,He,Ke);if(Ng(re)&&(Ce.ctx.renderer=Be),gR(Ce),Ce.asyncDep){if(Ke&&Ke.registerDep(Ce,Ge),!re.el){const pt=Ce.subTree=E(ps);N(null,pt,he,ze)}}else Ge(Ce,re,he,ze,Ke,dt,gt)},Ve=(re,he,ze)=>{const He=he.component=re.component;if(EL(re,he,ze))if(He.asyncDep&&!He.asyncResolved){$e(He,he,ze);return}else He.next=he,wL(He.update),He.effect.dirty=!0,He.update();else he.el=re.el,He.vnode=he},Ge=(re,he,ze,He,Ke,dt,gt)=>{const Ce=()=>{if(re.isMounted){let{next:st,bu:Et,u:It,parent:an,vnode:ln}=re;{const ft=NC(re);if(ft){st&&(st.el=ln.el,$e(re,st,gt)),ft.asyncDep.then(()=>{re.isUnmounted||Ce()});return}}let Tn=st,In;Oc(re,!1),st?(st.el=ln.el,$e(re,st,gt)):st=ln,Et&&Rm(Et),(In=st.props&&st.props.onVnodeBeforeUpdate)&&oo(In,an,st,ln),Oc(re,!0);const Vn=Hy(re),lr=re.subTree;re.subTree=Vn,R(lr,Vn,C(lr.el),Fe(lr),re,Ke,dt),st.el=Vn.el,Tn===null&&IL(re,Vn.el),It&&Pa(It,Ke),(In=st.props&&st.props.onVnodeUpdated)&&Pa(()=>oo(In,an,st,ln),Ke)}else{let st;const{el:Et,props:It}=he,{bm:an,m:ln,parent:Tn}=re,In=zm(he);if(Oc(re,!1),an&&Rm(an),!In&&(st=It&&It.onVnodeBeforeMount)&&oo(st,Tn,he),Oc(re,!0),Et&&Bt){const Vn=()=>{re.subTree=Hy(re),Bt(Et,re.subTree,re,Ke,null)};In?he.type.__asyncLoader().then(()=>!re.isUnmounted&&Vn()):Vn()}else{const Vn=re.subTree=Hy(re);R(null,Vn,ze,He,re,Ke,dt),he.el=Vn.el}if(ln&&Pa(ln,Ke),!In&&(st=It&&It.onVnodeMounted)){const Vn=he;Pa(()=>oo(st,Tn,Vn),Ke)}(he.shapeFlag&256||Tn&&zm(Tn.vnode)&&Tn.vnode.shapeFlag&256)&&re.a&&Pa(re.a,Ke),re.isMounted=!0,he=ze=He=null}},pt=re.effect=new Zb(Ce,Ya,()=>i0(Qe),re.scope),Qe=re.update=()=>{pt.dirty&&pt.run()};Qe.id=re.uid,Oc(re,!0),Qe()},$e=(re,he,ze)=>{he.component=re;const He=re.vnode.props;re.vnode=he,re.next=null,QL(re,he.props,He,ze),nR(re,he.children,ze),oc(),Aw(re),lc()},ke=(re,he,ze,He,Ke,dt,gt,Ce,pt=!1)=>{const Qe=re&&re.children,st=re?re.shapeFlag:0,Et=he.children,{patchFlag:It,shapeFlag:an}=he;if(It>0){if(It&128){Ze(Qe,Et,ze,He,Ke,dt,gt,Ce,pt);return}else if(It&256){Pe(Qe,Et,ze,He,Ke,dt,gt,Ce,pt);return}}an&8?(st&16&&St(Qe,Ke,dt),Et!==Qe&&S(ze,Et)):st&16?an&16?Ze(Qe,Et,ze,He,Ke,dt,gt,Ce,pt):St(Qe,Ke,dt,!0):(st&8&&S(ze,""),an&16&&H(Et,ze,He,Ke,dt,gt,Ce,pt))},Pe=(re,he,ze,He,Ke,dt,gt,Ce,pt)=>{re=re||ud,he=he||ud;const Qe=re.length,st=he.length,Et=Math.min(Qe,st);let It;for(It=0;It<Et;It++){const an=he[It]=pt?Yl(he[It]):uo(he[It]);R(re[It],an,ze,null,Ke,dt,gt,Ce,pt)}Qe>st?St(re,Ke,dt,!0,!1,Et):H(he,ze,He,Ke,dt,gt,Ce,pt,Et)},Ze=(re,he,ze,He,Ke,dt,gt,Ce,pt)=>{let Qe=0;const st=he.length;let Et=re.length-1,It=st-1;for(;Qe<=Et&&Qe<=It;){const an=re[Qe],ln=he[Qe]=pt?Yl(he[Qe]):uo(he[Qe]);if(qc(an,ln))R(an,ln,ze,null,Ke,dt,gt,Ce,pt);else break;Qe++}for(;Qe<=Et&&Qe<=It;){const an=re[Et],ln=he[It]=pt?Yl(he[It]):uo(he[It]);if(qc(an,ln))R(an,ln,ze,null,Ke,dt,gt,Ce,pt);else break;Et--,It--}if(Qe>Et){if(Qe<=It){const an=It+1,ln=an<st?he[an].el:He;for(;Qe<=It;)R(null,he[Qe]=pt?Yl(he[Qe]):uo(he[Qe]),ze,ln,Ke,dt,gt,Ce,pt),Qe++}}else if(Qe>It)for(;Qe<=Et;)Ne(re[Qe],Ke,dt,!0),Qe++;else{const an=Qe,ln=Qe,Tn=new Map;for(Qe=ln;Qe<=It;Qe++){const ur=he[Qe]=pt?Yl(he[Qe]):uo(he[Qe]);ur.key!=null&&Tn.set(ur.key,Qe)}let In,Vn=0;const lr=It-ln+1;let ft=!1,fi=0;const Sn=new Array(lr);for(Qe=0;Qe<lr;Qe++)Sn[Qe]=0;for(Qe=an;Qe<=Et;Qe++){const ur=re[Qe];if(Vn>=lr){Ne(ur,Ke,dt,!0);continue}let xt;if(ur.key!=null)xt=Tn.get(ur.key);else for(In=ln;In<=It;In++)if(Sn[In-ln]===0&&qc(ur,he[In])){xt=In;break}xt===void 0?Ne(ur,Ke,dt,!0):(Sn[xt-ln]=Qe+1,xt>=fi?fi=xt:ft=!0,R(ur,he[xt],ze,null,Ke,dt,gt,Ce,pt),Vn++)}const oa=ft?sR(Sn):ud;for(In=oa.length-1,Qe=lr-1;Qe>=0;Qe--){const ur=ln+Qe,xt=he[ur],gn=ur+1<st?he[ur+1].el:He;Sn[Qe]===0?R(null,xt,ze,gn,Ke,dt,gt,Ce,pt):ft&&(In<0||Qe!==oa[In]?Je(xt,ze,gn,2):In--)}}},Je=(re,he,ze,He,Ke=null)=>{const{el:dt,type:gt,transition:Ce,children:pt,shapeFlag:Qe}=re;if(Qe&6){Je(re.component.subTree,he,ze,He);return}if(Qe&128){re.suspense.move(he,ze,He);return}if(Qe&64){gt.move(re,he,ze,Be);return}if(gt===rn){r(dt,he,ze);for(let Et=0;Et<pt.length;Et++)Je(pt[Et],he,ze,He);r(re.anchor,he,ze);return}if(gt===Zy){X(re,he,ze);return}if(He!==2&&Qe&1&&Ce)if(He===0)Ce.beforeEnter(dt),r(dt,he,ze),Pa(()=>Ce.enter(dt),Ke);else{const{leave:Et,delayLeave:It,afterLeave:an}=Ce,ln=()=>r(dt,he,ze),Tn=()=>{Et(dt,()=>{ln(),an&&an()})};It?It(dt,ln,Tn):Tn()}else r(dt,he,ze)},Ne=(re,he,ze,He=!1,Ke=!1)=>{const{type:dt,props:gt,ref:Ce,children:pt,dynamicChildren:Qe,shapeFlag:st,patchFlag:Et,dirs:It}=re;if(Ce!=null&&Y_(Ce,null,ze,re,!0),st&256){he.ctx.deactivate(re);return}const an=st&1&&It,ln=!zm(re);let Tn;if(ln&&(Tn=gt&&gt.onVnodeBeforeUnmount)&&oo(Tn,he,re),st&6)kt(re.component,ze,He);else{if(st&128){re.suspense.unmount(ze,He);return}an&&Rc(re,null,he,"beforeUnmount"),st&64?re.type.remove(re,he,ze,Ke,Be,He):Qe&&(dt!==rn||Et>0&&Et&64)?St(Qe,he,ze,!1,!0):(dt===rn&&Et&384||!Ke&&st&16)&&St(pt,he,ze),He&&tt(re)}(ln&&(Tn=gt&&gt.onVnodeUnmounted)||an)&&Pa(()=>{Tn&&oo(Tn,he,re),an&&Rc(re,null,he,"unmounted")},ze)},tt=re=>{const{type:he,el:ze,anchor:He,transition:Ke}=re;if(he===rn){_t(ze,He);return}if(he===Zy){ee(re);return}const dt=()=>{s(ze),Ke&&!Ke.persisted&&Ke.afterLeave&&Ke.afterLeave()};if(re.shapeFlag&1&&Ke&&!Ke.persisted){const{leave:gt,delayLeave:Ce}=Ke,pt=()=>gt(ze,dt);Ce?Ce(re.el,dt,pt):pt()}else dt()},_t=(re,he)=>{let ze;for(;re!==he;)ze=k(re),s(re),re=ze;s(he)},kt=(re,he,ze)=>{const{bum:He,scope:Ke,update:dt,subTree:gt,um:Ce}=re;He&&Rm(He),Ke.stop(),dt&&(dt.active=!1,Ne(gt,re,he,ze)),Ce&&Pa(Ce,he),Pa(()=>{re.isUnmounted=!0},he),he&&he.pendingBranch&&!he.isUnmounted&&re.asyncDep&&!re.asyncResolved&&re.suspenseId===he.pendingId&&(he.deps--,he.deps===0&&he.resolve())},St=(re,he,ze,He=!1,Ke=!1,dt=0)=>{for(let gt=dt;gt<re.length;gt++)Ne(re[gt],he,ze,He,Ke)},Fe=re=>re.shapeFlag&6?Fe(re.component.subTree):re.shapeFlag&128?re.suspense.next():k(re.anchor||re.el);let at=!1;const qe=(re,he,ze)=>{re==null?he._vnode&&Ne(he._vnode,null,null,!0):R(he._vnode||null,re,he,null,null,null,ze),at||(at=!0,Aw(),vC(),at=!1),he._vnode=re},Be={p:R,um:Ne,m:Je,r:tt,mt:me,mc:H,pc:ke,pbc:ne,n:Fe,o:e};let bt,Bt;return t&&([bt,Bt]=t(Be)),{render:qe,hydrate:bt,createApp:XL(qe,bt)}}function Yy({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Oc({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function aR(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function d0(e,t,n=!1){const r=e.children,s=t.children;if(mn(r)&&mn(s))for(let u=0;u<r.length;u++){const h=r[u];let l=s[u];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[u]=Yl(s[u]),l.el=h.el),n||d0(h,l)),l.type===Nf&&(l.el=h.el)}}function sR(e){const t=e.slice(),n=[0];let r,s,u,h,l;const v=e.length;for(r=0;r<v;r++){const _=e[r];if(_!==0){if(s=n[n.length-1],e[s]<_){t[r]=s,n.push(r);continue}for(u=0,h=n.length-1;u<h;)l=u+h>>1,e[n[l]]<_?u=l+1:h=l;_<e[n[u]]&&(u>0&&(t[r]=n[u-1]),n[u]=r)}}for(u=n.length,h=n[u-1];u-- >0;)n[u]=h,h=t[h];return n}function NC(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:NC(t)}const oR=e=>e.__isTeleport,lf=e=>e&&(e.disabled||e.disabled===""),Vw=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Nw=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Z_=(e,t)=>{const n=e&&e.to;return ti(n)?t?t(n):null:n},lR={name:"Teleport",__isTeleport:!0,process(e,t,n,r,s,u,h,l,v,_){const{mc:S,pc:C,pbc:k,o:{insert:D,querySelector:O,createText:R,createComment:F}}=_,N=lf(t.props);let{shapeFlag:j,children:X,dynamicChildren:ee}=t;if(e==null){const le=t.el=R(""),ie=t.anchor=R("");D(le,n,r),D(ie,n,r);const se=t.target=Z_(t.props,O),H=t.targetAnchor=R("");se&&(D(H,se),h==="svg"||Vw(se)?h="svg":(h==="mathml"||Nw(se))&&(h="mathml"));const Z=(ne,_e)=>{j&16&&S(X,ne,_e,s,u,h,l,v)};N?Z(n,ie):se&&Z(se,H)}else{t.el=e.el;const le=t.anchor=e.anchor,ie=t.target=e.target,se=t.targetAnchor=e.targetAnchor,H=lf(e.props),Z=H?n:ie,ne=H?le:se;if(h==="svg"||Vw(ie)?h="svg":(h==="mathml"||Nw(ie))&&(h="mathml"),ee?(k(e.dynamicChildren,ee,Z,s,u,h,l),d0(e,t,!0)):v||C(e,t,Z,ne,s,u,h,l,!1),N)H?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):bm(t,n,le,_,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const _e=t.target=Z_(t.props,O);_e&&bm(t,_e,null,_,0)}else H&&bm(t,ie,se,_,1)}$C(t)},remove(e,t,n,r,{um:s,o:{remove:u}},h){const{shapeFlag:l,children:v,anchor:_,targetAnchor:S,target:C,props:k}=e;if(C&&u(S),h&&u(_),l&16){const D=h||!lf(k);for(let O=0;O<v.length;O++){const R=v[O];s(R,t,n,D,!!R.dynamicChildren)}}},move:bm,hydrate:cR};function bm(e,t,n,{o:{insert:r},m:s},u=2){u===0&&r(e.targetAnchor,t,n);const{el:h,anchor:l,shapeFlag:v,children:_,props:S}=e,C=u===2;if(C&&r(h,t,n),(!C||lf(S))&&v&16)for(let k=0;k<_.length;k++)s(_[k],t,n,2);C&&r(l,t,n)}function cR(e,t,n,r,s,u,{o:{nextSibling:h,parentNode:l,querySelector:v}},_){const S=t.target=Z_(t.props,v);if(S){const C=S._lpa||S.firstChild;if(t.shapeFlag&16)if(lf(t.props))t.anchor=_(h(e),t,l(e),n,r,s,u),t.targetAnchor=C;else{t.anchor=h(e);let k=C;for(;k;)if(k=h(k),k&&k.nodeType===8&&k.data==="teleport anchor"){t.targetAnchor=k,S._lpa=t.targetAnchor&&h(t.targetAnchor);break}_(C,t,S,n,r,s,u)}$C(t)}return t.anchor&&h(t.anchor)}const h0=lR;function $C(e){const t=e.ctx;if(t&&t.ut){let n=e.children[0].el;for(;n&&n!==e.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}const rn=Symbol.for("v-fgt"),Nf=Symbol.for("v-txt"),ps=Symbol.for("v-cmt"),Zy=Symbol.for("v-stc"),cf=[];let $s=null;function fn(e=!1){cf.push($s=e?null:[])}function uR(){cf.pop(),$s=cf[cf.length-1]||null}let xf=1;function $w(e){xf+=e}function UC(e){return e.dynamicChildren=xf>0?$s||ud:null,uR(),xf>0&&$s&&$s.push(e),e}function ds(e,t,n,r,s,u){return UC(er(e,t,n,r,s,u,!0))}function Bn(e,t,n,r,s){return UC(E(e,t,n,r,s,!0))}function rg(e){return e?e.__v_isVNode===!0:!1}function qc(e,t){return e.type===t.type&&e.key===t.key}const qC=({key:e})=>e??null,Bm=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ti(e)||_r(e)||En(e)?{i:ba,r:e,k:t,f:!!n}:e:null);function er(e,t=null,n=null,r=0,s=null,u=e===rn?0:1,h=!1,l=!1){const v={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&qC(t),ref:t&&Bm(t),scopeId:bC,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:u,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ba};return l?(f0(v,n),u&128&&e.normalize(v)):n&&(v.shapeFlag|=ti(n)?8:16),xf>0&&!h&&$s&&(v.patchFlag>0||u&6)&&v.patchFlag!==32&&$s.push(v),v}const E=dR;function dR(e,t=null,n=null,r=0,s=null,u=!1){if((!e||e===xC)&&(e=ps),rg(e)){const l=ll(e,t,!0);return n&&f0(l,n),xf>0&&!u&&$s&&(l.shapeFlag&6?$s[$s.indexOf(e)]=l:$s.push(l)),l.patchFlag|=-2,l}if(xR(e)&&(e=e.__vccOpts),t){t=hR(t);let{class:l,style:v}=t;l&&!ti(l)&&(t.class=_a(l)),Mr(v)&&(cC(v)&&!mn(v)&&(v=mi({},v)),t.style=Yb(v))}const h=ti(e)?1:ML(e)?128:oR(e)?64:Mr(e)?4:En(e)?2:0;return er(e,t,n,r,s,h,u,!0)}function hR(e){return e?cC(e)||Object.getPrototypeOf(e)===RC?mi({},e):e:null}function ll(e,t,n=!1){const{props:r,ref:s,patchFlag:u,children:h}=e,l=t?wt(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&qC(l),ref:t&&t.ref?n&&s?mn(s)?s.concat(Bm(t)):[s,Bm(t)]:Bm(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:h,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==rn?u===-1?16:u|16:u,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ll(e.ssContent),ssFallback:e.ssFallback&&ll(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Ot(e=" ",t=0){return E(Nf,null,e,t)}function Yn(e="",t=!1){return t?(fn(),Bn(ps,null,e)):E(ps,null,e)}function uo(e){return e==null||typeof e=="boolean"?E(ps):mn(e)?E(rn,null,e.slice()):typeof e=="object"?Yl(e):E(Nf,null,String(e))}function Yl(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ll(e)}function f0(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(mn(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),f0(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;s?s===3&&ba&&(ba.slots._===1?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=ba}else En(t)?(t={default:t,_ctx:ba},n=32):(t=String(t),r&64?(n=16,t=[Ot(t)]):n=8);e.children=t,e.shapeFlag|=n}function wt(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=_a([t.class,r.class]));else if(s==="style")t.style=Yb([t.style,r.style]);else if(Lg(s)){const u=t[s],h=r[s];h&&u!==h&&!(mn(u)&&u.includes(h))&&(t[s]=u?[].concat(u,h):h)}else s!==""&&(t[s]=r[s])}return t}function oo(e,t,n,r=null){fs(e,t,7,[n,r])}const fR=LC();let pR=0;function mR(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||fR,u={uid:pR++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new K2(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zC(r,s),emitsOptions:_C(r,s),emit:null,emitted:null,propsDefaults:zr,inheritAttrs:r.inheritAttrs,ctx:zr,data:zr,props:zr,attrs:zr,slots:zr,refs:zr,setupState:zr,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return u.ctx={_:u},u.root=t?t.root:u,u.emit=CL.bind(null,u),e.ce&&e.ce(u),u}let $i=null;const xs=()=>$i||ba;let ig,K_;{const e=W2(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),u=>{s.length>1?s.forEach(h=>h(u)):s[0](u)}};ig=t("__VUE_INSTANCE_SETTERS__",n=>$i=n),K_=t("__VUE_SSR_SETTERS__",n=>qg=n)}const $f=e=>{const t=$i;return ig(e),e.scope.on(),()=>{e.scope.off(),ig(t)}},Uw=()=>{$i&&$i.scope.off(),ig(null)};function jC(e){return e.vnode.shapeFlag&4}let qg=!1;function gR(e,t=!1){t&&K_(t);const{props:n,children:r}=e.vnode,s=jC(e);JL(e,n,s,t),tR(e,r);const u=s?vR(e,t):void 0;return t&&K_(!1),u}function vR(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,jL);const{setup:r}=n;if(r){const s=e.setupContext=r.length>1?_R(e):null,u=$f(e);oc();const h=nc(r,e,0,[e.props,s]);if(lc(),u(),q2(h)){if(h.then(Uw,Uw),t)return h.then(l=>{qw(e,l,t)}).catch(l=>{Bg(l,e,0)});e.asyncDep=h}else qw(e,h,t)}else HC(e,t)}function qw(e,t,n){En(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Mr(t)&&(e.setupState=fC(t)),HC(e,n)}let jw;function HC(e,t,n){const r=e.type;if(!e.render){if(!t&&jw&&!r.render){const s=r.template||c0(e).template;if(s){const{isCustomElement:u,compilerOptions:h}=e.appContext.config,{delimiters:l,compilerOptions:v}=r,_=mi(mi({isCustomElement:u,delimiters:l},h),v);r.render=jw(s,_)}}e.render=r.render||Ya}{const s=$f(e);oc();try{HL(e)}finally{lc(),s()}}}const yR={get(e,t){return La(e,"get",""),e[t]}};function _R(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,yR),slots:e.slots,emit:e.emit,expose:t}}function jg(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(fC(U_(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in sf)return sf[n](e)},has(t,n){return n in t||n in sf}}))}function bR(e,t=!0){return En(e)?e.displayName||e.name:e.name||t&&e.__name}function xR(e){return En(e)&&"__vccOpts"in e}const Q=(e,t)=>mL(e,t,qg);function Zr(e,t,n){const r=arguments.length;return r===2?Mr(t)&&!mn(t)?rg(t)?E(e,null,[t]):E(e,t):E(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&rg(n)&&(n=[n]),E(e,t,n))}const wR="3.4.22",SR=Ya;/**
* @vue/runtime-dom v3.4.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const kR="http://www.w3.org/2000/svg",CR="http://www.w3.org/1998/Math/MathML",Zl=typeof document<"u"?document:null,Hw=Zl&&Zl.createElement("template"),TR={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?Zl.createElementNS(kR,e):t==="mathml"?Zl.createElementNS(CR,e):Zl.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Zl.createTextNode(e),createComment:e=>Zl.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Zl.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,u){const h=n?n.previousSibling:t.lastChild;if(s&&(s===u||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===u||!(s=s.nextSibling)););else{Hw.innerHTML=r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e;const l=Hw.content;if(r==="svg"||r==="mathml"){const v=l.firstChild;for(;v.firstChild;)l.appendChild(v.firstChild);l.removeChild(v)}t.insertBefore(l,n)}return[h?h.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Ul="transition",Yh="animation",vd=Symbol("_vtc"),_o=(e,{slots:t})=>Zr(BL,WC(e),t);_o.displayName="Transition";const GC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},AR=_o.props=mi({},kC,GC),zc=(e,t=[])=>{mn(e)?e.forEach(n=>n(...t)):e&&e(...t)},Gw=e=>e?mn(e)?e.some(t=>t.length>1):e.length>1:!1;function WC(e){const t={};for(const te in e)te in GC||(t[te]=e[te]);if(e.css===!1)return t;const{name:n="v",type:r,duration:s,enterFromClass:u=`${n}-enter-from`,enterActiveClass:h=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:v=u,appearActiveClass:_=h,appearToClass:S=l,leaveFromClass:C=`${n}-leave-from`,leaveActiveClass:k=`${n}-leave-active`,leaveToClass:D=`${n}-leave-to`}=e,O=ER(s),R=O&&O[0],F=O&&O[1],{onBeforeEnter:N,onEnter:j,onEnterCancelled:X,onLeave:ee,onLeaveCancelled:le,onBeforeAppear:ie=N,onAppear:se=j,onAppearCancelled:H=X}=t,Z=(te,Se,me)=>{Hl(te,Se?S:l),Hl(te,Se?_:h),me&&me()},ne=(te,Se)=>{te._isLeaving=!1,Hl(te,C),Hl(te,D),Hl(te,k),Se&&Se()},_e=te=>(Se,me)=>{const Ve=te?se:j,Ge=()=>Z(Se,te,me);zc(Ve,[Se,Ge]),Ww(()=>{Hl(Se,te?v:u),Jo(Se,te?S:l),Gw(Ve)||Yw(Se,r,R,Ge)})};return mi(t,{onBeforeEnter(te){zc(N,[te]),Jo(te,u),Jo(te,h)},onBeforeAppear(te){zc(ie,[te]),Jo(te,v),Jo(te,_)},onEnter:_e(!1),onAppear:_e(!0),onLeave(te,Se){te._isLeaving=!0;const me=()=>ne(te,Se);Jo(te,C),ZC(),Jo(te,k),Ww(()=>{te._isLeaving&&(Hl(te,C),Jo(te,D),Gw(ee)||Yw(te,r,F,me))}),zc(ee,[te,me])},onEnterCancelled(te){Z(te,!1),zc(X,[te])},onAppearCancelled(te){Z(te,!0),zc(H,[te])},onLeaveCancelled(te){ne(te),zc(le,[te])}})}function ER(e){if(e==null)return null;if(Mr(e))return[Ky(e.enter),Ky(e.leave)];{const t=Ky(e);return[t,t]}}function Ky(e){return NM(e)}function Jo(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[vd]||(e[vd]=new Set)).add(t)}function Hl(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[vd];n&&(n.delete(t),n.size||(e[vd]=void 0))}function Ww(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let IR=0;function Yw(e,t,n,r){const s=e._endId=++IR,u=()=>{s===e._endId&&r()};if(n)return setTimeout(u,n);const{type:h,timeout:l,propCount:v}=YC(e,t);if(!h)return r();const _=h+"end";let S=0;const C=()=>{e.removeEventListener(_,k),u()},k=D=>{D.target===e&&++S>=v&&C()};setTimeout(()=>{S<v&&C()},l+1),e.addEventListener(_,k)}function YC(e,t){const n=window.getComputedStyle(e),r=O=>(n[O]||"").split(", "),s=r(`${Ul}Delay`),u=r(`${Ul}Duration`),h=Zw(s,u),l=r(`${Yh}Delay`),v=r(`${Yh}Duration`),_=Zw(l,v);let S=null,C=0,k=0;t===Ul?h>0&&(S=Ul,C=h,k=u.length):t===Yh?_>0&&(S=Yh,C=_,k=v.length):(C=Math.max(h,_),S=C>0?h>_?Ul:Yh:null,k=S?S===Ul?u.length:v.length:0);const D=S===Ul&&/\b(transform|all)(,|$)/.test(r(`${Ul}Property`).toString());return{type:S,timeout:C,propCount:k,hasTransform:D}}function Zw(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>Kw(n)+Kw(e[r])))}function Kw(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function ZC(){return document.body.offsetHeight}function PR(e,t,n){const r=e[vd];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const ag=Symbol("_vod"),KC=Symbol("_vsh"),hl={beforeMount(e,{value:t},{transition:n}){e[ag]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Zh(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Zh(e,!0),r.enter(e)):r.leave(e,()=>{Zh(e,!1)}):Zh(e,t))},beforeUnmount(e,{value:t}){Zh(e,t)}};function Zh(e,t){e.style.display=t?e[ag]:"none",e[KC]=!t}const DR=Symbol(""),MR=/(^|;)\s*display\s*:/;function LR(e,t,n){const r=e.style,s=ti(n);let u=!1;if(n&&!s){if(t)if(ti(t))for(const h of t.split(";")){const l=h.slice(0,h.indexOf(":")).trim();n[l]==null&&Vm(r,l,"")}else for(const h in t)n[h]==null&&Vm(r,h,"");for(const h in n)h==="display"&&(u=!0),Vm(r,h,n[h])}else if(s){if(t!==n){const h=r[DR];h&&(n+=";"+h),r.cssText=n,u=MR.test(n)}}else t&&e.removeAttribute("style");ag in e&&(e[ag]=u?r.display:"",e[KC]&&(r.display="none"))}const Xw=/\s*!important$/;function Vm(e,t,n){if(mn(n))n.forEach(r=>Vm(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=RR(e,t);Xw.test(n)?e.setProperty(kd(r),n.replace(Xw,""),"important"):e[r]=n}}const Jw=["Webkit","Moz","ms"],Xy={};function RR(e,t){const n=Xy[t];if(n)return n;let r=ys(t);if(r!=="filter"&&r in e)return Xy[t]=r;r=wo(r);for(let s=0;s<Jw.length;s++){const u=Jw[s]+r;if(u in e)return Xy[t]=u}return t}const Qw="http://www.w3.org/1999/xlink";function OR(e,t,n,r,s){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Qw,t.slice(6,t.length)):e.setAttributeNS(Qw,t,n);else{const u=GM(t);n==null||u&&!Y2(n)?e.removeAttribute(t):e.setAttribute(t,u?"":n)}}function zR(e,t,n,r,s,u,h){if(t==="innerHTML"||t==="textContent"){r&&h(r,s,u),e[t]=n??"";return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){const _=l==="OPTION"?e.getAttribute("value")||"":e.value,S=n??"";(_!==S||!("_value"in e))&&(e.value=S),n==null&&e.removeAttribute(t),e._value=n;return}let v=!1;if(n===""||n==null){const _=typeof e[t];_==="boolean"?n=Y2(n):n==null&&_==="string"?(n="",v=!0):_==="number"&&(n=0,v=!0)}try{e[t]=n}catch{}v&&e.removeAttribute(t)}function ad(e,t,n,r){e.addEventListener(t,n,r)}function FR(e,t,n,r){e.removeEventListener(t,n,r)}const eS=Symbol("_vei");function BR(e,t,n,r,s=null){const u=e[eS]||(e[eS]={}),h=u[t];if(r&&h)h.value=r;else{const[l,v]=VR(t);if(r){const _=u[t]=UR(r,s);ad(e,l,_,v)}else h&&(FR(e,l,h,v),u[t]=void 0)}}const tS=/(?:Once|Passive|Capture)$/;function VR(e){let t;if(tS.test(e)){t={};let r;for(;r=e.match(tS);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):kd(e.slice(2)),t]}let Jy=0;const NR=Promise.resolve(),$R=()=>Jy||(NR.then(()=>Jy=0),Jy=Date.now());function UR(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;fs(qR(r,n.value),t,5,[r])};return n.value=e,n.attached=$R(),n}function qR(e,t){if(mn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const nS=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,jR=(e,t,n,r,s,u,h,l,v)=>{const _=s==="svg";t==="class"?PR(e,r,_):t==="style"?LR(e,n,r):Lg(t)?Hb(t)||BR(e,t,n,r,h):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):HR(e,t,r,_))?zR(e,t,r,u,h,l,v):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),OR(e,t,r,_))};function HR(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&nS(t)&&En(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return nS(t)&&ti(n)?!1:t in e}const XC=new WeakMap,JC=new WeakMap,sg=Symbol("_moveCb"),rS=Symbol("_enterCb"),QC={name:"TransitionGroup",props:mi({},AR,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=xs(),r=SC();let s,u;return PC(()=>{if(!s.length)return;const h=e.moveClass||`${e.name||"v"}-move`;if(!KR(s[0].el,n.vnode.el,h))return;s.forEach(WR),s.forEach(YR);const l=s.filter(ZR);ZC(),l.forEach(v=>{const _=v.el,S=_.style;Jo(_,h),S.transform=S.webkitTransform=S.transitionDuration="";const C=_[sg]=k=>{k&&k.target!==_||(!k||/transform$/.test(k.propertyName))&&(_.removeEventListener("transitionend",C),_[sg]=null,Hl(_,h))};_.addEventListener("transitionend",C)})}),()=>{const h=vn(e),l=WC(h);let v=h.tag||rn;if(s=[],u)for(let _=0;_<u.length;_++){const S=u[_];S.el&&S.el instanceof Element&&(s.push(S),bf(S,_f(S,l,r,n)),XC.set(S,S.el.getBoundingClientRect()))}u=t.default?l0(t.default()):[];for(let _=0;_<u.length;_++){const S=u[_];S.key!=null&&bf(S,_f(S,l,r,n))}return E(v,null,u)}}},GR=e=>delete e.mode;QC.props;const eT=QC;function WR(e){const t=e.el;t[sg]&&t[sg](),t[rS]&&t[rS]()}function YR(e){JC.set(e,e.el.getBoundingClientRect())}function ZR(e){const t=XC.get(e),n=JC.get(e),r=t.left-n.left,s=t.top-n.top;if(r||s){const u=e.el.style;return u.transform=u.webkitTransform=`translate(${r}px,${s}px)`,u.transitionDuration="0s",e}}function KR(e,t,n){const r=e.cloneNode(),s=e[vd];s&&s.forEach(l=>{l.split(/\s+/).forEach(v=>v&&r.classList.remove(v))}),n.split(/\s+/).forEach(l=>l&&r.classList.add(l)),r.style.display="none";const u=t.nodeType===1?t:t.parentNode;u.appendChild(r);const{hasTransform:h}=YC(r);return u.removeChild(r),h}const iS=e=>{const t=e.props["onUpdate:modelValue"]||!1;return mn(t)?n=>Rm(t,n):t};function XR(e){e.target.composing=!0}function aS(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Qy=Symbol("_assign"),tT={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[Qy]=iS(s);const u=r||s.props&&s.props.type==="number";ad(e,t?"change":"input",h=>{if(h.target.composing)return;let l=e.value;n&&(l=l.trim()),u&&(l=B_(l)),e[Qy](l)}),n&&ad(e,"change",()=>{e.value=e.value.trim()}),t||(ad(e,"compositionstart",XR),ad(e,"compositionend",aS),ad(e,"change",aS))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:s}},u){if(e[Qy]=iS(u),e.composing)return;const h=(s||e.type==="number")&&!/^0\d/.test(e.value)?B_(e.value):e.value,l=t??"";h!==l&&(document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===l)||(e.value=l))}},JR=["ctrl","shift","alt","meta"],QR={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>JR.some(n=>e[`${n}Key`]&&!t.includes(n))},sS=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(s,...u)=>{for(let h=0;h<t.length;h++){const l=QR[t[h]];if(l&&l(s,t))return}return e(s,...u)})},eO=mi({patchProp:jR},TR);let oS;function tO(){return oS||(oS=rR(eO))}const nO=(...e)=>{const t=tO().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=iO(r);if(!s)return;const u=t._component;!En(u)&&!u.render&&!u.template&&(u.template=s.innerHTML),s.innerHTML="";const h=n(s,!1,rO(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),h},t};function rO(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function iO(e){return ti(e)?document.querySelector(e):e}function ms(e,t){let n;function r(){n=zg(),n.run(()=>t.length?t(()=>{n==null||n.stop(),r()}):t())}ut(e,s=>{s&&!n?r():s||(n==null||n.stop(),n=void 0)},{immediate:!0}),Ra(()=>{n==null||n.stop()})}const Cr=typeof window<"u",p0=Cr&&"IntersectionObserver"in window,aO=Cr&&("ontouchstart"in window||window.navigator.maxTouchPoints>0);function lS(e,t,n){sO(e,t),t.set(e,n)}function sO(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function oO(e,t,n){var r=nT(e,t,"set");return lO(e,r,n),n}function lO(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function Fc(e,t){var n=nT(e,t,"get");return cO(e,n)}function nT(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function cO(e,t){return t.get?t.get.call(e):t.value}function rT(e,t,n){const r=t.length-1;if(r<0)return e===void 0?n:e;for(let s=0;s<r;s++){if(e==null)return n;e=e[t[s]]}return e==null||e[t[r]]===void 0?n:e[t[r]]}function fl(e,t){if(e===t)return!0;if(e instanceof Date&&t instanceof Date&&e.getTime()!==t.getTime()||e!==Object(e)||t!==Object(t))return!1;const n=Object.keys(e);return n.length!==Object.keys(t).length?!1:n.every(r=>fl(e[r],t[r]))}function nu(e,t,n){return e==null||!t||typeof t!="string"?n:e[t]!==void 0?e[t]:(t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,""),rT(e,t.split("."),n))}function ia(e,t,n){if(t===!0)return e===void 0?n:e;if(t==null||typeof t=="boolean")return n;if(e!==Object(e)){if(typeof t!="function")return n;const s=t(e,n);return typeof s>"u"?n:s}if(typeof t=="string")return nu(e,t,n);if(Array.isArray(t))return rT(e,t,n);if(typeof t!="function")return n;const r=t(e,n);return typeof r>"u"?n:r}function el(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:e},(n,r)=>t+r)}function Jt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(!(e==null||e===""))return isNaN(+e)?String(e):isFinite(+e)?`${Number(e)}${t}`:void 0}function og(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function lg(e){if(e&&"$el"in e){const t=e.$el;return(t==null?void 0:t.nodeType)===Node.TEXT_NODE?t.nextElementSibling:t}return e}const cS=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16}),uS=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function iT(e){return Object.keys(e)}function e_(e,t){return t.every(n=>e.hasOwnProperty(n))}function aT(e,t){const n={},r=new Set(Object.keys(e));for(const s of t)r.has(s)&&(n[s]=e[s]);return n}function X_(e,t,n){const r=Object.create(null),s=Object.create(null);for(const u in e)t.some(h=>h instanceof RegExp?h.test(u):h===u)&&!(n!=null&&n.some(h=>h===u))?r[u]=e[u]:s[u]=e[u];return[r,s]}function za(e,t){const n={...e};return t.forEach(r=>delete n[r]),n}function dS(e,t){const n={};return t.forEach(r=>n[r]=e[r]),n}const sT=/^on[^a-z]/,Hg=e=>sT.test(e),uO=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"];function Cd(e){const[t,n]=X_(e,[sT]),r=za(t,uO),[s,u]=X_(n,["class","style","id",/^data-/]);return Object.assign(s,t),Object.assign(u,r),[s,u]}function Mi(e){return e==null?[]:Array.isArray(e)?e:[e]}function dO(e,t){let n=0;const r=function(){for(var s=arguments.length,u=new Array(s),h=0;h<s;h++)u[h]=arguments[h];clearTimeout(n),n=setTimeout(()=>e(...u),Fr(t))};return r.clear=()=>{clearTimeout(n)},r.immediate=e,r}function gs(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(t,Math.min(n,e))}function hS(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return e+n.repeat(Math.max(0,t-e.length))}function fS(e,t){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,t-e.length))+e}function hO(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=[];let r=0;for(;r<e.length;)n.push(e.substr(r,t)),r+=t;return n}function fO(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Array.from({length:Math.ceil(e.length/t)},(n,r)=>e.slice(r*t,r*t+t))}function pS(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(e<t)return`${e} B`;const n=t===1024?["Ki","Mi","Gi"]:["k","M","G"];let r=-1;for(;Math.abs(e)>=t&&r<n.length-1;)e/=t,++r;return`${e.toFixed(1)} ${n[r]}B`}function Za(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r={};for(const s in e)r[s]=e[s];for(const s in t){const u=e[s],h=t[s];if(og(u)&&og(h)){r[s]=Za(u,h,n);continue}if(Array.isArray(u)&&Array.isArray(h)&&n){r[s]=n(u,h);continue}r[s]=h}return r}function oT(e){return e.map(t=>t.type===rn?oT(t.children):t).flat()}function Qc(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(Qc.cache.has(e))return Qc.cache.get(e);const t=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return Qc.cache.set(e,t),t}Qc.cache=new Map;function uf(e,t){if(!t||typeof t!="object")return[];if(Array.isArray(t))return t.map(n=>uf(e,n)).flat(1);if(Array.isArray(t.children))return t.children.map(n=>uf(e,n)).flat(1);if(t.component){if(Object.getOwnPropertySymbols(t.component.provides).includes(e))return[t.component];if(t.component.subTree)return uf(e,t.component.subTree).flat(1)}return[]}var xm=new WeakMap,Xu=new WeakMap;class pO{constructor(t){lS(this,xm,{writable:!0,value:[]}),lS(this,Xu,{writable:!0,value:0}),this.size=t}push(t){Fc(this,xm)[Fc(this,Xu)]=t,oO(this,Xu,(Fc(this,Xu)+1)%this.size)}values(){return Fc(this,xm).slice(Fc(this,Xu)).concat(Fc(this,xm).slice(0,Fc(this,Xu)))}}function m0(e){const t=Si({}),n=Q(e);return Ui(()=>{for(const r in n.value)t[r]=n.value[r]},{flush:"sync"}),n0(t)}function cg(e,t){return e.includes(t)}function lT(e){return e[2].toLowerCase()+e.slice(3)}const Ma=()=>[Function,Array];function mS(e,t){return t="on"+wo(t),!!(e[t]||e[`${t}Once`]||e[`${t}Capture`]||e[`${t}OnceCapture`]||e[`${t}CaptureOnce`])}function g0(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(Array.isArray(e))for(const s of e)s(...n);else typeof e=="function"&&e(...n)}function wf(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(r=>`${r}${t?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...e.querySelectorAll(n)]}function cT(e,t,n){let r,s=e.indexOf(document.activeElement);const u=t==="next"?1:-1;do s+=u,r=e[s];while((!r||r.offsetParent==null||!((n==null?void 0:n(r))??!0))&&s<e.length&&s>=0);return r}function ug(e,t){var r,s,u,h;const n=wf(e);if(!t)(e===document.activeElement||!e.contains(document.activeElement))&&((r=n[0])==null||r.focus());else if(t==="first")(s=n[0])==null||s.focus();else if(t==="last")(u=n.at(-1))==null||u.focus();else if(typeof t=="number")(h=n[t])==null||h.focus();else{const l=cT(n,t);l?l.focus():ug(e,t==="next"?"first":"last")}}function wm(e){return e==null||typeof e=="string"&&e.trim()===""}function mO(){}function yd(e,t){if(!(Cr&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${t})`)))return null;try{return!!e&&e.matches(t)}catch{return null}}function v0(e){return e.some(t=>rg(t)?t.type===ps?!1:t.type!==rn||v0(t.children):!0)?e:null}function gO(e,t){if(!Cr||e===0)return t(),()=>{};const n=window.setTimeout(t,e);return()=>window.clearTimeout(n)}function vO(e,t){const n=e.clientX,r=e.clientY,s=t.getBoundingClientRect(),u=s.left,h=s.top,l=s.right,v=s.bottom;return n>=u&&n<=l&&r>=h&&r<=v}const uT=["top","bottom"],yO=["start","end","left","right"];function J_(e,t){let[n,r]=e.split(" ");return r||(r=cg(uT,n)?"start":cg(yO,n)?"top":"center"),{side:Q_(n,t),align:Q_(r,t)}}function Q_(e,t){return e==="start"?t?"right":"left":e==="end"?t?"left":"right":e}function t_(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function n_(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function gS(e){return{side:e.align,align:e.side}}function vS(e){return cg(uT,e.side)?"y":"x"}class eu{constructor(t){let{x:n,y:r,width:s,height:u}=t;this.x=n,this.y=r,this.width=s,this.height=u}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function yS(e,t){return{x:{before:Math.max(0,t.left-e.left),after:Math.max(0,e.right-t.right)},y:{before:Math.max(0,t.top-e.top),after:Math.max(0,e.bottom-t.bottom)}}}function dT(e){return Array.isArray(e)?new eu({x:e[0],y:e[1],width:0,height:0}):e.getBoundingClientRect()}function y0(e){const t=e.getBoundingClientRect(),n=getComputedStyle(e),r=n.transform;if(r){let s,u,h,l,v;if(r.startsWith("matrix3d("))s=r.slice(9,-1).split(/, /),u=+s[0],h=+s[5],l=+s[12],v=+s[13];else if(r.startsWith("matrix("))s=r.slice(7,-1).split(/, /),u=+s[0],h=+s[3],l=+s[4],v=+s[5];else return new eu(t);const _=n.transformOrigin,S=t.x-l-(1-u)*parseFloat(_),C=t.y-v-(1-h)*parseFloat(_.slice(_.indexOf(" ")+1)),k=u?t.width/u:e.offsetWidth+1,D=h?t.height/h:e.offsetHeight+1;return new eu({x:S,y:C,width:k,height:D})}else return new eu(t)}function Gc(e,t,n){if(typeof e.animate>"u")return{finished:Promise.resolve()};let r;try{r=e.animate(t,n)}catch{return{finished:Promise.resolve()}}return typeof r.finished>"u"&&(r.finished=new Promise(s=>{r.onfinish=()=>{s(r)}})),r}const Nm=new WeakMap;function _O(e,t){Object.keys(t).forEach(n=>{if(Hg(n)){const r=lT(n),s=Nm.get(e);if(t[n]==null)s==null||s.forEach(u=>{const[h,l]=u;h===r&&(e.removeEventListener(r,l),s.delete(u))});else if(!s||![...s].some(u=>u[0]===r&&u[1]===t[n])){e.addEventListener(r,t[n]);const u=s||new Set;u.add([r,t[n]]),Nm.has(e)||Nm.set(e,u)}}else t[n]==null?e.removeAttribute(n):e.setAttribute(n,t[n])})}function bO(e,t){Object.keys(t).forEach(n=>{if(Hg(n)){const r=lT(n),s=Nm.get(e);s==null||s.forEach(u=>{const[h,l]=u;h===r&&(e.removeEventListener(r,l),s.delete(u))})}else e.removeAttribute(n)})}const Ju=2.4,_S=.2126729,bS=.7151522,xS=.072175,xO=.55,wO=.58,SO=.57,kO=.62,Sm=.03,wS=1.45,CO=5e-4,TO=1.25,AO=1.25,SS=.078,kS=12.82051282051282,km=.06,CS=.001;function TS(e,t){const n=(e.r/255)**Ju,r=(e.g/255)**Ju,s=(e.b/255)**Ju,u=(t.r/255)**Ju,h=(t.g/255)**Ju,l=(t.b/255)**Ju;let v=n*_S+r*bS+s*xS,_=u*_S+h*bS+l*xS;if(v<=Sm&&(v+=(Sm-v)**wS),_<=Sm&&(_+=(Sm-_)**wS),Math.abs(_-v)<CO)return 0;let S;if(_>v){const C=(_**xO-v**wO)*TO;S=C<CS?0:C<SS?C-C*kS*km:C-km}else{const C=(_**kO-v**SO)*AO;S=C>-CS?0:C>-SS?C-C*kS*km:C+km}return S*100}function EO(e,t){t=Array.isArray(t)?t.slice(0,-1).map(n=>`'${n}'`).join(", ")+` or '${t.at(-1)}'`:`'${t}'`}const dg=.20689655172413793,IO=e=>e>dg**3?Math.cbrt(e):e/(3*dg**2)+4/29,PO=e=>e>dg?e**3:3*dg**2*(e-4/29);function hT(e){const t=IO,n=t(e[1]);return[116*n-16,500*(t(e[0]/.95047)-n),200*(n-t(e[2]/1.08883))]}function fT(e){const t=PO,n=(e[0]+16)/116;return[t(n+e[1]/500)*.95047,t(n),t(n-e[2]/200)*1.08883]}const DO=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],MO=e=>e<=.0031308?e*12.92:1.055*e**(1/2.4)-.055,LO=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],RO=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function pT(e){const t=Array(3),n=MO,r=DO;for(let s=0;s<3;++s)t[s]=Math.round(gs(n(r[s][0]*e[0]+r[s][1]*e[1]+r[s][2]*e[2]))*255);return{r:t[0],g:t[1],b:t[2]}}function _0(e){let{r:t,g:n,b:r}=e;const s=[0,0,0],u=RO,h=LO;t=u(t/255),n=u(n/255),r=u(r/255);for(let l=0;l<3;++l)s[l]=h[l][0]*t+h[l][1]*n+h[l][2]*r;return s}function eb(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}function OO(e){return eb(e)&&!/^((rgb|hsl)a?\()?var\(--/.test(e)}const AS=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,zO={rgb:(e,t,n,r)=>({r:e,g:t,b:n,a:r}),rgba:(e,t,n,r)=>({r:e,g:t,b:n,a:r}),hsl:(e,t,n,r)=>ES({h:e,s:t,l:n,a:r}),hsla:(e,t,n,r)=>ES({h:e,s:t,l:n,a:r}),hsv:(e,t,n,r)=>Sf({h:e,s:t,v:n,a:r}),hsva:(e,t,n,r)=>Sf({h:e,s:t,v:n,a:r})};function po(e){if(typeof e=="number")return{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255};if(typeof e=="string"&&AS.test(e)){const{groups:t}=e.match(AS),{fn:n,values:r}=t,s=r.split(/,\s*/).map(u=>u.endsWith("%")&&["hsl","hsla","hsv","hsva"].includes(n)?parseFloat(u)/100:parseFloat(u));return zO[n](...s)}else if(typeof e=="string"){let t=e.startsWith("#")?e.slice(1):e;return[3,4].includes(t.length)?t=t.split("").map(n=>n+n).join(""):[6,8].includes(t.length),BO(t)}else if(typeof e=="object"){if(e_(e,["r","g","b"]))return e;if(e_(e,["h","s","l"]))return Sf(mT(e));if(e_(e,["h","s","v"]))return Sf(e)}throw new TypeError(`Invalid color: ${e==null?e:String(e)||e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function Sf(e){const{h:t,s:n,v:r,a:s}=e,u=l=>{const v=(l+t/60)%6;return r-r*n*Math.max(Math.min(v,4-v,1),0)},h=[u(5),u(3),u(1)].map(l=>Math.round(l*255));return{r:h[0],g:h[1],b:h[2],a:s}}function ES(e){return Sf(mT(e))}function mT(e){const{h:t,s:n,l:r,a:s}=e,u=r+n*Math.min(r,1-r),h=u===0?0:2-2*r/u;return{h:t,s:h,v:u,a:s}}function Cm(e){const t=Math.round(e).toString(16);return("00".substr(0,2-t.length)+t).toUpperCase()}function FO(e){let{r:t,g:n,b:r,a:s}=e;return`#${[Cm(t),Cm(n),Cm(r),s!==void 0?Cm(Math.round(s*255)):""].join("")}`}function BO(e){e=VO(e);let[t,n,r,s]=hO(e,2).map(u=>parseInt(u,16));return s=s===void 0?s:s/255,{r:t,g:n,b:r,a:s}}function VO(e){return e.startsWith("#")&&(e=e.slice(1)),e=e.replace(/([^0-9a-f])/gi,"F"),(e.length===3||e.length===4)&&(e=e.split("").map(t=>t+t).join("")),e.length!==6&&(e=hS(hS(e,6),8,"F")),e}function NO(e,t){const n=hT(_0(e));return n[0]=n[0]+t*10,pT(fT(n))}function $O(e,t){const n=hT(_0(e));return n[0]=n[0]-t*10,pT(fT(n))}function UO(e){const t=po(e);return _0(t)[1]}function gT(e){const t=Math.abs(TS(po(0),po(e)));return Math.abs(TS(po(16777215),po(e)))>Math.min(t,50)?"#fff":"#000"}function Xe(e,t){return n=>Object.keys(e).reduce((r,s)=>{const h=typeof e[s]=="object"&&e[s]!=null&&!Array.isArray(e[s])?e[s]:{type:e[s]};return n&&s in n?r[s]={...h,default:n[s]}:r[s]=h,t&&!r[s].source&&(r[s].source=t),r},{})}const pn=Xe({class:[String,Array],style:{type:[String,Array,Object],default:null}},"component"),_d=Symbol.for("vuetify:defaults");function qO(e){return lt(e)}function b0(){const e=yt(_d);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function Ka(e,t){const n=b0(),r=lt(e),s=Q(()=>{if(Fr(t==null?void 0:t.disabled))return n.value;const h=Fr(t==null?void 0:t.scoped),l=Fr(t==null?void 0:t.reset),v=Fr(t==null?void 0:t.root);if(r.value==null&&!(h||l||v))return n.value;let _=Za(r.value,{prev:n.value});if(h)return _;if(l||v){const S=Number(l||1/0);for(let C=0;C<=S&&!(!_||!("prev"in _));C++)_=_.prev;return _&&typeof v=="string"&&v in _&&(_=Za(Za(_,{prev:_}),_[v])),_}return _.prev?Za(_.prev,_):_});return bn(_d,s),s}function jO(e,t){var n,r;return typeof((n=e.props)==null?void 0:n[t])<"u"||typeof((r=e.props)==null?void 0:r[Qc(t)])<"u"}function HO(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b0();const r=ni("useDefaults");if(t=t??r.type.name??r.type.__name,!t)throw new Error("[Vuetify] Could not determine component name");const s=Q(()=>{var v;return(v=n.value)==null?void 0:v[e._as??t]}),u=new Proxy(e,{get(v,_){var C,k,D,O;const S=Reflect.get(v,_);return _==="class"||_==="style"?[(C=s.value)==null?void 0:C[_],S].filter(R=>R!=null):typeof _=="string"&&!jO(r.vnode,_)?((k=s.value)==null?void 0:k[_])??((O=(D=n.value)==null?void 0:D.global)==null?void 0:O[_])??S:S}}),h=Ut();Ui(()=>{if(s.value){const v=Object.entries(s.value).filter(_=>{let[S]=_;return S.startsWith(S[0].toUpperCase())});h.value=v.length?Object.fromEntries(v):void 0}else h.value=void 0});function l(){const v=KO(_d,r);bn(_d,Q(()=>h.value?Za((v==null?void 0:v.value)??{},h.value):v==null?void 0:v.value))}return{props:u,provideSubDefaults:l}}function Td(e){if(e._setup=e._setup??e.setup,!e.name)return e;if(e._setup){e.props=Xe(e.props??{},e.name)();const t=Object.keys(e.props).filter(n=>n!=="class"&&n!=="style");e.filterProps=function(r){return aT(r,t)},e.props._as=String,e.setup=function(r,s){const u=b0();if(!u.value)return e._setup(r,s);const{props:h,provideSubDefaults:l}=HO(r,r._as??e.name,u),v=e._setup(h,s);return l(),v}}return e}function At(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t=>(e?Td:sr)(t)}function GO(e,t){return t.props=e,t}function cc(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return At()({name:n??wo(ys(e.replace(/__/g,"-"))),props:{tag:{type:String,default:t},...pn()},setup(r,s){let{slots:u}=s;return()=>{var h;return Zr(r.tag,{class:[e,r.class],style:r.style},(h=u.default)==null?void 0:h.call(u))}}})}function vT(e){if(typeof e.getRootNode!="function"){for(;e.parentNode;)e=e.parentNode;return e!==document?null:document}const t=e.getRootNode();return t!==document&&t.getRootNode({composed:!0})!==document?null:t}const kf="cubic-bezier(0.4, 0, 0.2, 1)",WO="cubic-bezier(0.0, 0, 0.2, 1)",YO="cubic-bezier(0.4, 0, 1, 1)";function IS(e,t,n){return Object.keys(e).filter(r=>Hg(r)&&r.endsWith(t)).reduce((r,s)=>(r[s.slice(0,-t.length)]=u=>e[s](u,n(u)),r),{})}function ni(e,t){const n=xs();if(!n)throw new Error(`[Vuetify] ${e} ${t||"must be called from inside a setup function"}`);return n}function ko(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const t=ni(e).type;return Qc((t==null?void 0:t.aliasName)||(t==null?void 0:t.name))}let yT=0,$m=new WeakMap;function Fa(){const e=ni("getUid");if($m.has(e))return $m.get(e);{const t=yT++;return $m.set(e,t),t}}Fa.reset=()=>{yT=0,$m=new WeakMap};function _T(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;e;){if(t?ZO(e):x0(e))return e;e=e.parentElement}return document.scrollingElement}function hg(e,t){const n=[];if(t&&e&&!t.contains(e))return n;for(;e&&(x0(e)&&n.push(e),e!==t);)e=e.parentElement;return n}function x0(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return t.overflowY==="scroll"||t.overflowY==="auto"&&e.scrollHeight>e.clientHeight}function ZO(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return["scroll","auto"].includes(t.overflowY)}function KO(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ni("injectSelf");const{provides:n}=t;if(n&&e in n)return n[e]}function XO(e){for(;e;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.offsetParent}return!1}function zt(e){const t=ni("useRender");t.render=e}function xn(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:C=>C,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:C=>C;const u=ni("useProxiedModel"),h=lt(e[t]!==void 0?e[t]:n),l=Qc(t),_=Q(l!==t?()=>{var C,k,D,O;return e[t],!!(((C=u.vnode.props)!=null&&C.hasOwnProperty(t)||(k=u.vnode.props)!=null&&k.hasOwnProperty(l))&&((D=u.vnode.props)!=null&&D.hasOwnProperty(`onUpdate:${t}`)||(O=u.vnode.props)!=null&&O.hasOwnProperty(`onUpdate:${l}`)))}:()=>{var C,k;return e[t],!!((C=u.vnode.props)!=null&&C.hasOwnProperty(t)&&((k=u.vnode.props)!=null&&k.hasOwnProperty(`onUpdate:${t}`)))});ms(()=>!_.value,()=>{ut(()=>e[t],C=>{h.value=C})});const S=Q({get(){const C=e[t];return r(_.value?C:h.value)},set(C){const k=s(C),D=vn(_.value?e[t]:h.value);D===k||r(D)===C||(h.value=k,u==null||u.emit(`update:${t}`,k))}});return Object.defineProperty(S,"externalValue",{get:()=>_.value?e[t]:h.value}),S}const JO={badge:"Badge",open:"Open",close:"Close",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"}},PS="$vuetify.",DS=(e,t)=>e.replace(/\{(\d+)\}/g,(n,r)=>String(t[+r])),bT=(e,t,n)=>function(r){for(var s=arguments.length,u=new Array(s>1?s-1:0),h=1;h<s;h++)u[h-1]=arguments[h];if(!r.startsWith(PS))return DS(r,u);const l=r.replace(PS,""),v=e.value&&n.value[e.value],_=t.value&&n.value[t.value];let S=nu(v,l,null);return S||(`${r}${e.value}`,S=nu(_,l,null)),S||(S=r),typeof S!="string"&&(S=r),DS(S,u)};function xT(e,t){return(n,r)=>new Intl.NumberFormat([e.value,t.value],r).format(n)}function r_(e,t,n){const r=xn(e,t,e[t]??n.value);return r.value=e[t]??n.value,ut(n,s=>{e[t]==null&&(r.value=n.value)}),r}function wT(e){return t=>{const n=r_(t,"locale",e.current),r=r_(t,"fallback",e.fallback),s=r_(t,"messages",e.messages);return{name:"vuetify",current:n,fallback:r,messages:s,t:bT(n,r,s),n:xT(n,r),provide:wT({current:n,fallback:r,messages:s})}}}function QO(e){const t=Ut((e==null?void 0:e.locale)??"en"),n=Ut((e==null?void 0:e.fallback)??"en"),r=lt({en:JO,...e==null?void 0:e.messages});return{name:"vuetify",current:t,fallback:n,messages:r,t:bT(t,n,r),n:xT(t,n),provide:wT({current:t,fallback:n,messages:r})}}const fg=Symbol.for("vuetify:locale");function ez(e){return e.name!=null}function tz(e){const t=e!=null&&e.adapter&&ez(e==null?void 0:e.adapter)?e==null?void 0:e.adapter:QO(e),n=rz(t,e);return{...t,...n}}function qi(){const e=yt(fg);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");return e}function nz(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function rz(e,t){const n=lt((t==null?void 0:t.rtl)??nz()),r=Q(()=>n.value[e.current.value]??!1);return{isRtl:r,rtl:n,rtlClasses:Q(()=>`v-locale--is-${r.value?"rtl":"ltr"}`)}}function ws(){const e=yt(fg);if(!e)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:e.isRtl,rtlClasses:e.rtlClasses}}const tb={"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:1,AS:0,AT:1,AU:1,AX:1,AZ:1,BA:1,BD:0,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:1,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:1,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,"GB-alt-variant":0,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:1,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:1,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:0,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:0,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:0,ZA:0,ZW:0};function iz(e,t){const n=[];let r=[];const s=ST(e),u=kT(e),h=(s.getDay()-tb[t.slice(-2).toUpperCase()]+7)%7,l=(u.getDay()-tb[t.slice(-2).toUpperCase()]+7)%7;for(let v=0;v<h;v++){const _=new Date(s);_.setDate(_.getDate()-(h-v)),r.push(_)}for(let v=1;v<=u.getDate();v++){const _=new Date(e.getFullYear(),e.getMonth(),v);r.push(_),r.length===7&&(n.push(r),r=[])}for(let v=1;v<7-l;v++){const _=new Date(u);_.setDate(_.getDate()+v),r.push(_)}return r.length>0&&n.push(r),n}function az(e){const t=new Date(e);for(;t.getDay()!==0;)t.setDate(t.getDate()-1);return t}function sz(e){const t=new Date(e);for(;t.getDay()!==6;)t.setDate(t.getDate()+1);return t}function ST(e){return new Date(e.getFullYear(),e.getMonth(),1)}function kT(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function oz(e){const t=e.split("-").map(Number);return new Date(t[0],t[1]-1,t[2])}const lz=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function CT(e){if(e==null)return new Date;if(e instanceof Date)return e;if(typeof e=="string"){let t;if(lz.test(e))return oz(e);if(t=Date.parse(e),!isNaN(t))return new Date(t)}return null}const MS=new Date(2e3,0,2);function cz(e){const t=tb[e.slice(-2).toUpperCase()];return el(7).map(n=>{const r=new Date(MS);return r.setDate(MS.getDate()+t+n),new Intl.DateTimeFormat(e,{weekday:"narrow"}).format(r)})}function uz(e,t,n,r){const s=CT(e)??new Date,u=r==null?void 0:r[t];if(typeof u=="function")return u(s,t,n);let h={};switch(t){case"fullDateWithWeekday":h={weekday:"long",day:"numeric",month:"long",year:"numeric"};break;case"hours12h":h={hour:"numeric",hour12:!0};break;case"normalDateWithWeekday":h={weekday:"short",day:"numeric",month:"short"};break;case"keyboardDate":h={day:"2-digit",month:"2-digit",year:"numeric"};break;case"monthAndDate":h={month:"long",day:"numeric"};break;case"monthAndYear":h={month:"long",year:"numeric"};break;case"month":h={month:"long"};break;case"monthShort":h={month:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(n).format(s.getDate());case"shortDate":h={year:"2-digit",month:"numeric",day:"numeric"};break;case"weekdayShort":h={weekday:"short"};break;case"year":h={year:"numeric"};break;default:h=u??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(n,h).format(s)}function dz(e,t){const n=e.toJsDate(t),r=n.getFullYear(),s=fS(String(n.getMonth()+1),2,"0"),u=fS(String(n.getDate()),2,"0");return`${r}-${s}-${u}`}function hz(e){const[t,n,r]=e.split("-").map(Number);return new Date(t,n-1,r)}function fz(e,t){const n=new Date(e);return n.setMinutes(n.getMinutes()+t),n}function pz(e,t){const n=new Date(e);return n.setHours(n.getHours()+t),n}function mz(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}function gz(e,t){const n=new Date(e);return n.setDate(n.getDate()+t*7),n}function vz(e,t){const n=new Date(e);return n.setMonth(n.getMonth()+t),n}function yz(e){return e.getFullYear()}function _z(e){return e.getMonth()}function bz(e){return e.getDate()}function xz(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}function wz(e){return e.getHours()}function Sz(e){return e.getMinutes()}function kz(e){return new Date(e.getFullYear(),0,1)}function Cz(e){return new Date(e.getFullYear(),11,31)}function Tz(e,t){return nb(e,t[0])&&Ez(e,t[1])}function Az(e){const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())}function nb(e,t){return e.getTime()>t.getTime()}function Ez(e,t){return e.getTime()<t.getTime()}function LS(e,t){return e.getTime()===t.getTime()}function Iz(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function Pz(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function Dz(e,t,n){const r=new Date(e),s=new Date(t);switch(n){case"years":return r.getFullYear()-s.getFullYear();case"quarters":return Math.floor((r.getMonth()-s.getMonth()+(r.getFullYear()-s.getFullYear())*12)/4);case"months":return r.getMonth()-s.getMonth()+(r.getFullYear()-s.getFullYear())*12;case"weeks":return Math.floor((r.getTime()-s.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((r.getTime()-s.getTime())/(1e3*60*60*24));case"hours":return Math.floor((r.getTime()-s.getTime())/(1e3*60*60));case"minutes":return Math.floor((r.getTime()-s.getTime())/(1e3*60));case"seconds":return Math.floor((r.getTime()-s.getTime())/1e3);default:return r.getTime()-s.getTime()}}function Mz(e,t){const n=new Date(e);return n.setHours(t),n}function Lz(e,t){const n=new Date(e);return n.setMinutes(t),n}function Rz(e,t){const n=new Date(e);return n.setMonth(t),n}function Oz(e,t){const n=new Date(e);return n.setDate(t),n}function zz(e,t){const n=new Date(e);return n.setFullYear(t),n}function Fz(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)}function Bz(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59,999)}class Vz{constructor(t){this.locale=t.locale,this.formats=t.formats}date(t){return CT(t)}toJsDate(t){return t}toISO(t){return dz(this,t)}parseISO(t){return hz(t)}addMinutes(t,n){return fz(t,n)}addHours(t,n){return pz(t,n)}addDays(t,n){return mz(t,n)}addWeeks(t,n){return gz(t,n)}addMonths(t,n){return vz(t,n)}getWeekArray(t){return iz(t,this.locale)}startOfWeek(t){return az(t)}endOfWeek(t){return sz(t)}startOfMonth(t){return ST(t)}endOfMonth(t){return kT(t)}format(t,n){return uz(t,n,this.locale,this.formats)}isEqual(t,n){return LS(t,n)}isValid(t){return Az(t)}isWithinRange(t,n){return Tz(t,n)}isAfter(t,n){return nb(t,n)}isBefore(t,n){return!nb(t,n)&&!LS(t,n)}isSameDay(t,n){return Iz(t,n)}isSameMonth(t,n){return Pz(t,n)}setMinutes(t,n){return Lz(t,n)}setHours(t,n){return Mz(t,n)}setMonth(t,n){return Rz(t,n)}setDate(t,n){return Oz(t,n)}setYear(t,n){return zz(t,n)}getDiff(t,n,r){return Dz(t,n,r)}getWeekdays(){return cz(this.locale)}getYear(t){return yz(t)}getMonth(t){return _z(t)}getDate(t){return bz(t)}getNextMonth(t){return xz(t)}getHours(t){return wz(t)}getMinutes(t){return Sz(t)}startOfDay(t){return Fz(t)}endOfDay(t){return Bz(t)}startOfYear(t){return kz(t)}endOfYear(t){return Cz(t)}}const TT=Symbol.for("vuetify:date-options"),RS=Symbol.for("vuetify:date-adapter");function Nz(e,t){const n=Za({adapter:Vz,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},e);return{options:n,instance:AT(n,t)}}function AT(e,t){const n=Si(typeof e.adapter=="function"?new e.adapter({locale:e.locale[t.current.value]??t.current.value,formats:e.formats}):e.adapter);return ut(t.current,r=>{n.locale=e.locale[r]??r??n.locale}),n}function Uf(){const e=yt(TT);if(!e)throw new Error("[Vuetify] Could not find injected date options");const t=qi();return AT(e,t)}function $z(e,t){const n=e.toJsDate(t);let r=n.getFullYear(),s=new Date(r,0,1);if(n<s)r=r-1,s=new Date(r,0,1);else{const l=new Date(r+1,0,1);n>=l&&(r=r+1,s=l)}const u=Math.abs(n.getTime()-s.getTime()),h=Math.ceil(u/(1e3*60*60*24));return Math.floor(h/7)+1}const Gg=["sm","md","lg","xl","xxl"],rb=Symbol.for("vuetify:display"),OS={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},Uz=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:OS;return Za(OS,e)};function zS(e){return Cr&&!e?window.innerWidth:typeof e=="object"&&e.clientWidth||0}function FS(e){return Cr&&!e?window.innerHeight:typeof e=="object"&&e.clientHeight||0}function BS(e){const t=Cr&&!e?window.navigator.userAgent:"ssr";function n(O){return!!t.match(O)}const r=n(/android/i),s=n(/iphone|ipad|ipod/i),u=n(/cordova/i),h=n(/electron/i),l=n(/chrome/i),v=n(/edge/i),_=n(/firefox/i),S=n(/opera/i),C=n(/win/i),k=n(/mac/i),D=n(/linux/i);return{android:r,ios:s,cordova:u,electron:h,chrome:l,edge:v,firefox:_,opera:S,win:C,mac:k,linux:D,touch:aO,ssr:t==="ssr"}}function qz(e,t){const{thresholds:n,mobileBreakpoint:r}=Uz(e),s=Ut(FS(t)),u=Ut(BS(t)),h=Si({}),l=Ut(zS(t));function v(){s.value=FS(),l.value=zS()}function _(){v(),u.value=BS()}return Ui(()=>{const S=l.value<n.sm,C=l.value<n.md&&!S,k=l.value<n.lg&&!(C||S),D=l.value<n.xl&&!(k||C||S),O=l.value<n.xxl&&!(D||k||C||S),R=l.value>=n.xxl,F=S?"xs":C?"sm":k?"md":D?"lg":O?"xl":"xxl",N=typeof r=="number"?r:n[r],j=l.value<N;h.xs=S,h.sm=C,h.md=k,h.lg=D,h.xl=O,h.xxl=R,h.smAndUp=!S,h.mdAndUp=!(S||C),h.lgAndUp=!(S||C||k),h.xlAndUp=!(S||C||k||D),h.smAndDown=!(k||D||O||R),h.mdAndDown=!(D||O||R),h.lgAndDown=!(O||R),h.xlAndDown=!R,h.name=F,h.height=s.value,h.width=l.value,h.mobile=j,h.mobileBreakpoint=r,h.platform=u.value,h.thresholds=n}),Cr&&window.addEventListener("resize",v,{passive:!0}),{...n0(h),update:_,ssr:!!t}}const ET=Xe({mobileBreakpoint:[Number,String]},"display");function Ad(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ko();const n=yt(rb);if(!n)throw new Error("Could not find Vuetify display injection");const r=Q(()=>{if(!e.mobileBreakpoint)return n.mobile.value;const u=typeof e.mobileBreakpoint=="number"?e.mobileBreakpoint:n.thresholds.value[e.mobileBreakpoint];return n.width.value<u}),s=Q(()=>t?{[`${t}--mobile`]:r.value}:{});return{...n,displayClasses:s,mobile:r}}const jz=Symbol.for("vuetify:goto");function Hz(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:{linear:e=>e,easeInQuad:e=>e**2,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e**2:-1+(4-2*e)*e,easeInCubic:e=>e**3,easeOutCubic:e=>--e**3+1,easeInOutCubic:e=>e<.5?4*e**3:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e**4,easeOutQuart:e=>1- --e**4,easeInOutQuart:e=>e<.5?8*e**4:1-8*--e**4,easeInQuint:e=>e**5,easeOutQuint:e=>1+--e**5,easeInOutQuint:e=>e<.5?16*e**5:1+16*--e**5}}}function Gz(e,t){return{rtl:t.isRtl,options:Za(Hz(),e)}}const IT={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",eyeDropper:"mdi-eyedropper"},PT={component:e=>Zr(MT,{...e,class:"mdi"})},Rn=[String,Function,Object,Array],ib=Symbol.for("vuetify:icons"),Wg=Xe({icon:{type:Rn},tag:{type:String,required:!0}},"icon"),VS=At()({name:"VComponentIcon",props:Wg(),setup(e,t){let{slots:n}=t;return()=>{const r=e.icon;return E(e.tag,null,{default:()=>{var s;return[e.icon?E(r,null,null):(s=n.default)==null?void 0:s.call(n)]}})}}}),DT=Td({name:"VSvgIcon",inheritAttrs:!1,props:Wg(),setup(e,t){let{attrs:n}=t;return()=>E(e.tag,wt(n,{style:null}),{default:()=>[E("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(e.icon)?e.icon.map(r=>Array.isArray(r)?E("path",{d:r[0],"fill-opacity":r[1]},null):E("path",{d:r},null)):E("path",{d:e.icon},null)])]})}});Td({name:"VLigatureIcon",props:Wg(),setup(e){return()=>E(e.tag,null,{default:()=>[e.icon]})}});const MT=Td({name:"VClassIcon",props:Wg(),setup(e){return()=>E(e.tag,{class:e.icon},null)}});function Wz(){return{svg:{component:DT},class:{component:MT}}}function Yz(e){const t=Wz(),n=(e==null?void 0:e.defaultSet)??"mdi";return n==="mdi"&&!t.mdi&&(t.mdi=PT),Za({defaultSet:n,sets:t,aliases:{...IT,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z"}},e)}const Zz=e=>{const t=yt(ib);if(!t)throw new Error("Missing Vuetify Icons provide!");return{iconData:Q(()=>{var v;const r=Fr(e);if(!r)return{component:VS};let s=r;if(typeof s=="string"&&(s=s.trim(),s.startsWith("$")&&(s=(v=t.aliases)==null?void 0:v[s.slice(1)])),!s)throw new Error(`Could not find aliased icon "${r}"`);if(Array.isArray(s))return{component:DT,icon:s};if(typeof s!="string")return{component:VS,icon:s};const u=Object.keys(t.sets).find(_=>typeof s=="string"&&s.startsWith(`${_}:`)),h=u?s.slice(u.length+1):s;return{component:t.sets[u??t.defaultSet].component,icon:h}})}},Cf=Symbol.for("vuetify:theme"),Tr=Xe({theme:String},"theme");function NS(){return{defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#a3a3a3","on-surface-variant":"#424242",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}}}function Kz(){var r,s;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NS();const t=NS();if(!e)return{...t,isDisabled:!0};const n={};for(const[u,h]of Object.entries(e.themes??{})){const l=h.dark||u==="dark"?(r=t.themes)==null?void 0:r.dark:(s=t.themes)==null?void 0:s.light;n[u]=Za(l,h)}return Za(t,{...e,themes:n})}function Xz(e){const t=Kz(e),n=lt(t.defaultTheme),r=lt(t.themes),s=Q(()=>{const S={};for(const[C,k]of Object.entries(r.value)){const D=S[C]={...k,colors:{...k.colors}};if(t.variations)for(const O of t.variations.colors){const R=D.colors[O];if(R)for(const F of["lighten","darken"]){const N=F==="lighten"?NO:$O;for(const j of el(t.variations[F],1))D.colors[`${O}-${F}-${j}`]=FO(N(po(R),j))}}for(const O of Object.keys(D.colors)){if(/^on-[a-z]/.test(O)||D.colors[`on-${O}`])continue;const R=`on-${O}`,F=po(D.colors[O]);D.colors[R]=gT(F)}}return S}),u=Q(()=>s.value[n.value]),h=Q(()=>{var O;const S=[];(O=u.value)!=null&&O.dark&&Bc(S,":root",["color-scheme: dark"]),Bc(S,":root",$S(u.value));for(const[R,F]of Object.entries(s.value))Bc(S,`.v-theme--${R}`,[`color-scheme: ${F.dark?"dark":"normal"}`,...$S(F)]);const C=[],k=[],D=new Set(Object.values(s.value).flatMap(R=>Object.keys(R.colors)));for(const R of D)/^on-[a-z]/.test(R)?Bc(k,`.${R}`,[`color: rgb(var(--v-theme-${R})) !important`]):(Bc(C,`.bg-${R}`,[`--v-theme-overlay-multiplier: var(--v-theme-${R}-overlay-multiplier)`,`background-color: rgb(var(--v-theme-${R})) !important`,`color: rgb(var(--v-theme-on-${R})) !important`]),Bc(k,`.text-${R}`,[`color: rgb(var(--v-theme-${R})) !important`]),Bc(k,`.border-${R}`,[`--v-border-color: var(--v-theme-${R})`]));return S.push(...C,...k),S.map((R,F)=>F===0?R:`    ${R}`).join("")});function l(){return{style:[{children:h.value,id:"vuetify-theme-stylesheet",nonce:t.cspNonce||!1}]}}function v(S){if(t.isDisabled)return;const C=S._context.provides.usehead;if(C)if(C.push){const D=C.push(l);Cr&&ut(h,()=>{D.patch(l)})}else Cr?(C.addHeadObjs(Q(l)),Ui(()=>C.updateDOM())):C.addHeadObjs(l());else{let O=function(){if(typeof document<"u"&&!D){const R=document.createElement("style");R.type="text/css",R.id="vuetify-theme-stylesheet",t.cspNonce&&R.setAttribute("nonce",t.cspNonce),D=R,document.head.appendChild(D)}D&&(D.innerHTML=h.value)};var k=O;let D=Cr?document.getElementById("vuetify-theme-stylesheet"):null;Cr?ut(h,O,{immediate:!0}):O()}}const _=Q(()=>t.isDisabled?void 0:`v-theme--${n.value}`);return{install:v,isDisabled:t.isDisabled,name:n,themes:r,current:u,computedThemes:s,themeClasses:_,styles:h,global:{name:n,current:u}}}function Hr(e){ni("provideTheme");const t=yt(Cf,null);if(!t)throw new Error("Could not find Vuetify theme injection");const n=Q(()=>e.theme??t.name.value),r=Q(()=>t.themes.value[n.value]),s=Q(()=>t.isDisabled?void 0:`v-theme--${n.value}`),u={...t,name:n,current:r,themeClasses:s};return bn(Cf,u),u}function Jz(){ni("useTheme");const e=yt(Cf,null);if(!e)throw new Error("Could not find Vuetify theme injection");return e}function Bc(e,t,n){e.push(`${t} {
`,...n.map(r=>`  ${r};
`),`}
`)}function $S(e){const t=e.dark?2:1,n=e.dark?1:2,r=[];for(const[s,u]of Object.entries(e.colors)){const h=po(u);r.push(`--v-theme-${s}: ${h.r},${h.g},${h.b}`),s.startsWith("on-")||r.push(`--v-theme-${s}-overlay-multiplier: ${UO(u)>.18?t:n}`)}for(const[s,u]of Object.entries(e.variables)){const h=typeof u=="string"&&u.startsWith("#")?po(u):void 0,l=h?`${h.r}, ${h.g}, ${h.b}`:void 0;r.push(`--v-${s}: ${l??u}`)}return r}function cl(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const n=lt(),r=lt();if(Cr){const s=new ResizeObserver(u=>{e==null||e(u,s),u.length&&(t==="content"?r.value=u[0].contentRect:r.value=u[0].target.getBoundingClientRect())});br(()=>{s.disconnect()}),ut(n,(u,h)=>{h&&(s.unobserve(lg(h)),r.value=void 0),u&&s.observe(lg(u))},{flush:"post"})}return{resizeRef:n,contentRect:Vf(r)}}const pg=Symbol.for("vuetify:layout"),LT=Symbol.for("vuetify:layout-item"),US=1e3,Qz=Xe({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),Yg=Xe({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function eF(){const e=yt(pg);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function Zg(e){const t=yt(pg);if(!t)throw new Error("[Vuetify] Could not find injected layout");const n=e.id??`layout-item-${Fa()}`,r=ni("useLayoutItem");bn(LT,{id:n});const s=Ut(!1);AC(()=>s.value=!0),TC(()=>s.value=!1);const{layoutItemStyles:u,layoutItemScrimStyles:h}=t.register(r,{...e,active:Q(()=>s.value?!1:e.active.value),id:n});return br(()=>t.unregister(n)),{layoutItemStyles:u,layoutRect:t.layoutRect,layoutItemScrimStyles:h}}const tF=(e,t,n,r)=>{let s={top:0,left:0,right:0,bottom:0};const u=[{id:"",layer:{...s}}];for(const h of e){const l=t.get(h),v=n.get(h),_=r.get(h);if(!l||!v||!_)continue;const S={...s,[l.value]:parseInt(s[l.value],10)+(_.value?parseInt(v.value,10):0)};u.push({id:h,layer:S}),s=S}return u};function nF(e){const t=yt(pg,null),n=Q(()=>t?t.rootZIndex.value-100:US),r=lt([]),s=Si(new Map),u=Si(new Map),h=Si(new Map),l=Si(new Map),v=Si(new Map),{resizeRef:_,contentRect:S}=cl(),C=Q(()=>{const ie=new Map,se=e.overlaps??[];for(const H of se.filter(Z=>Z.includes(":"))){const[Z,ne]=H.split(":");if(!r.value.includes(Z)||!r.value.includes(ne))continue;const _e=s.get(Z),te=s.get(ne),Se=u.get(Z),me=u.get(ne);!_e||!te||!Se||!me||(ie.set(ne,{position:_e.value,amount:parseInt(Se.value,10)}),ie.set(Z,{position:te.value,amount:-parseInt(me.value,10)}))}return ie}),k=Q(()=>{const ie=[...new Set([...h.values()].map(H=>H.value))].sort((H,Z)=>H-Z),se=[];for(const H of ie){const Z=r.value.filter(ne=>{var _e;return((_e=h.get(ne))==null?void 0:_e.value)===H});se.push(...Z)}return tF(se,s,u,l)}),D=Q(()=>!Array.from(v.values()).some(ie=>ie.value)),O=Q(()=>k.value[k.value.length-1].layer),R=Q(()=>({"--v-layout-left":Jt(O.value.left),"--v-layout-right":Jt(O.value.right),"--v-layout-top":Jt(O.value.top),"--v-layout-bottom":Jt(O.value.bottom),...D.value?void 0:{transition:"none"}})),F=Q(()=>k.value.slice(1).map((ie,se)=>{let{id:H}=ie;const{layer:Z}=k.value[se],ne=u.get(H),_e=s.get(H);return{id:H,...Z,size:Number(ne.value),position:_e.value}})),N=ie=>F.value.find(se=>se.id===ie),j=ni("createLayout"),X=Ut(!1);Oa(()=>{X.value=!0}),bn(pg,{register:(ie,se)=>{let{id:H,order:Z,position:ne,layoutSize:_e,elementSize:te,active:Se,disableTransitions:me,absolute:Ve}=se;h.set(H,Z),s.set(H,ne),u.set(H,_e),l.set(H,Se),me&&v.set(H,me);const $e=uf(LT,j==null?void 0:j.vnode).indexOf(ie);$e>-1?r.value.splice($e,0,H):r.value.push(H);const ke=Q(()=>F.value.findIndex(Ne=>Ne.id===H)),Pe=Q(()=>n.value+k.value.length*2-ke.value*2),Ze=Q(()=>{const Ne=ne.value==="left"||ne.value==="right",tt=ne.value==="right",_t=ne.value==="bottom",kt={[ne.value]:0,zIndex:Pe.value,transform:`translate${Ne?"X":"Y"}(${(Se.value?0:-110)*(tt||_t?-1:1)}%)`,position:Ve.value||n.value!==US?"absolute":"fixed",...D.value?void 0:{transition:"none"}};if(!X.value)return kt;const St=F.value[ke.value];if(!St)throw new Error(`[Vuetify] Could not find layout item "${H}"`);const Fe=C.value.get(H);return Fe&&(St[Fe.position]+=Fe.amount),{...kt,height:Ne?`calc(100% - ${St.top}px - ${St.bottom}px)`:te.value?`${te.value}px`:void 0,left:tt?void 0:`${St.left}px`,right:tt?`${St.right}px`:void 0,top:ne.value!=="bottom"?`${St.top}px`:void 0,bottom:ne.value!=="top"?`${St.bottom}px`:void 0,width:Ne?te.value?`${te.value}px`:void 0:`calc(100% - ${St.left}px - ${St.right}px)`}}),Je=Q(()=>({zIndex:Pe.value-1}));return{layoutItemStyles:Ze,layoutItemScrimStyles:Je,zIndex:Pe}},unregister:ie=>{h.delete(ie),s.delete(ie),u.delete(ie),l.delete(ie),v.delete(ie),r.value=r.value.filter(se=>se!==ie)},mainRect:O,mainStyles:R,getLayoutItem:N,items:F,layoutRect:S,rootZIndex:n});const ee=Q(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),le=Q(()=>({zIndex:t?n.value:void 0,position:t?"relative":void 0,overflow:t?"hidden":void 0}));return{layoutClasses:ee,layoutStyles:le,getLayoutItem:N,items:F,layoutRect:S,layoutRef:_}}function RT(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:t,...n}=e,r=Za(t,n),{aliases:s={},components:u={},directives:h={}}=r,l=qO(r.defaults),v=qz(r.display,r.ssr),_=Xz(r.theme),S=Yz(r.icons),C=tz(r.locale),k=Nz(r.date,C),D=Gz(r.goTo,C);return{install:R=>{for(const F in h)R.directive(F,h[F]);for(const F in u)R.component(F,u[F]);for(const F in s)R.component(F,Td({...s[F],name:F,aliasName:s[F].name}));if(_.install(R),R.provide(_d,l),R.provide(rb,v),R.provide(Cf,_),R.provide(ib,S),R.provide(fg,C),R.provide(TT,k.options),R.provide(RS,k.instance),R.provide(jz,D),Cr&&r.ssr)if(R.$nuxt)R.$nuxt.hook("app:suspense:resolve",()=>{v.update()});else{const{mount:F}=R;R.mount=function(){const N=F(...arguments);return ar(()=>v.update()),R.mount=F,N}}Fa.reset(),R.mixin({computed:{$vuetify(){return Si({defaults:Qu.call(this,_d),display:Qu.call(this,rb),theme:Qu.call(this,Cf),icons:Qu.call(this,ib),locale:Qu.call(this,fg),date:Qu.call(this,RS)})}}})},defaults:l,display:v,theme:_,icons:S,locale:C,date:k,goTo:D}}const rF="3.5.15";RT.version=rF;function Qu(e){var r,s;const t=this.$,n=((r=t.parent)==null?void 0:r.provides)??((s=t.vnode.appContext)==null?void 0:s.provides);if(n&&e in n)return n[e]}var jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iF(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function aF(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var OT={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(jc,function(){var n,r,s;function u(l,v){if(!n)n=v;else if(!r)r=v;else{var _="var sharedChunk = {}; ("+n+")(sharedChunk); ("+r+")(sharedChunk);",S={};n(S),s=v(S),typeof window<"u"&&(s.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}}u(["exports"],function(l){function v(o,i,c,f){return new(c||(c=Promise))(function(m,b){function w(L){try{P(f.next(L))}catch(B){b(B)}}function T(L){try{P(f.throw(L))}catch(B){b(B)}}function P(L){var B;L.done?m(L.value):(B=L.value,B instanceof c?B:new c(function(U){U(B)})).then(w,T)}P((f=f.apply(o,i||[])).next())})}function _(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var S=C;function C(o,i){this.x=o,this.y=i}C.prototype={clone:function(){return new C(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,i){return this.clone()._rotateAround(o,i)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var i=o.x-this.x,c=o.y-this.y;return i*i+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,i){return Math.atan2(this.x*i-this.y*o,this.x*o+this.y*i)},_matMult:function(o){var i=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=i,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var i=Math.cos(o),c=Math.sin(o),f=c*this.x+i*this.y;return this.x=i*this.x-c*this.y,this.y=f,this},_rotateAround:function(o,i){var c=Math.cos(o),f=Math.sin(o),m=i.y+f*(this.x-i.x)+c*(this.y-i.y);return this.x=i.x+c*(this.x-i.x)-f*(this.y-i.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},C.convert=function(o){return o instanceof C?o:Array.isArray(o)?new C(o[0],o[1]):o};var k=_(S),D=O;function O(o,i,c,f){this.cx=3*o,this.bx=3*(c-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(f-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=i,this.p2x=c,this.p2y=f}O.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,i){if(i===void 0&&(i=1e-6),o<0)return 0;if(o>1)return 1;for(var c=o,f=0;f<8;f++){var m=this.sampleCurveX(c)-o;if(Math.abs(m)<i)return c;var b=this.sampleCurveDerivativeX(c);if(Math.abs(b)<1e-6)break;c-=m/b}var w=0,T=1;for(c=o,f=0;f<20&&(m=this.sampleCurveX(c),!(Math.abs(m-o)<i));f++)o>m?w=c:T=c,c=.5*(T-w)+w;return c},solve:function(o,i){return this.sampleCurveY(this.solveCurveX(o,i))}};var R=_(D);let F,N;function j(){return F==null&&(F=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),F}function X(){if(N==null&&(N=!1,j())){const i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let f=0;f<5*5;f++){const m=4*f;i.fillStyle=`rgb(${m},${m+1},${m+2})`,i.fillRect(f%5,Math.floor(f/5),1,1)}const c=i.getImageData(0,0,5,5).data;for(let f=0;f<5*5*4;f++)if(f%4!=3&&c[f]!==f){N=!0;break}}}return N||!1}function ee(o,i,c,f){const m=new R(o,i,c,f);return function(b){return m.solve(b)}}const le=ee(.25,.1,.25,1);function ie(o,i,c){return Math.min(c,Math.max(i,o))}function se(o,i,c){const f=c-i,m=((o-i)%f+f)%f+i;return m===i?c:m}function H(o,...i){for(const c of i)for(const f in c)o[f]=c[f];return o}let Z=1;function ne(o,i,c){const f={};for(const m in o)f[m]=i.call(c||this,o[m],m,o);return f}function _e(o,i,c){const f={};for(const m in o)i.call(c||this,o[m],m,o)&&(f[m]=o[m]);return f}function te(o){return Array.isArray(o)?o.map(te):typeof o=="object"&&o?ne(o,te):o}const Se={};function me(o){Se[o]||(typeof console<"u"&&console.warn(o),Se[o]=!0)}function Ve(o,i,c){return(c.y-o.y)*(i.x-o.x)>(i.y-o.y)*(c.x-o.x)}function Ge(o){let i=0;for(let c,f,m=0,b=o.length,w=b-1;m<b;w=m++)c=o[m],f=o[w],i+=(f.x-c.x)*(c.y+f.y);return i}function $e(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let ke=null;function Pe(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const Ze="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Je(o,i,c,f,m){return v(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const b=new VideoFrame(o,{timestamp:0});try{const w=b==null?void 0:b.format;if(!w||!w.startsWith("BGR")&&!w.startsWith("RGB"))throw new Error(`Unrecognized format ${w}`);const T=w.startsWith("BGR"),P=new Uint8ClampedArray(f*m*4);if(yield b.copyTo(P,function(L,B,U,G,K){const J=4*Math.max(-B,0),ce=(Math.max(0,U)-U)*G*4+J,ve=4*G,xe=Math.max(0,B),Le=Math.max(0,U);return{rect:{x:xe,y:Le,width:Math.min(L.width,B+G)-xe,height:Math.min(L.height,U+K)-Le},layout:[{offset:ce,stride:ve}]}}(o,i,c,f,m)),T)for(let L=0;L<P.length;L+=4){const B=P[L];P[L]=P[L+2],P[L+2]=B}return P}finally{b.close()}})}let Ne,tt,_t,kt;const St={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const i=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(i)}},getImageData(o,i=0){return this.getImageCanvasContext(o).getImageData(-i,-i,o.width+2*i,o.height+2*i)},getImageCanvasContext(o){const i=window.document.createElement("canvas"),c=i.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return i.width=o.width,i.height=o.height,c.drawImage(o,0,0,o.width,o.height),c},resolveURL:o=>(_t||(_t=document.createElement("a")),_t.href=o,_t.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(kt==null&&(kt=matchMedia("(prefers-reduced-motion: reduce)")),kt.matches)}},Fe={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class at extends Error{constructor(i,c,f,m){super(`AJAXError: ${c} (${i}): ${f}`),this.status=i,this.statusText=c,this.url=f,this.body=m}}const qe=$e()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Be=o=>Fe.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function bt(o,i){const c=new AbortController,f=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:qe(),signal:c.signal});let m=!1,b=!1;return o.type==="json"&&f.headers.set("Accept","application/json"),b||fetch(f).then(w=>w.ok?(T=>{(o.type==="arrayBuffer"||o.type==="image"?T.arrayBuffer():o.type==="json"?T.json():T.text()).then(P=>{b||(m=!0,i(null,P,T.headers.get("Cache-Control"),T.headers.get("Expires")))}).catch(P=>{b||i(new Error(P.message))})})(w):w.blob().then(T=>i(new at(w.status,w.statusText,o.url,T)))).catch(w=>{w.code!==20&&i(new Error(w.message))}),{cancel:()=>{b=!0,m||c.abort()}}}const Bt=function(o,i){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if($e()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,i);if(!$e())return(Be(o.url)||bt)(o,i)}if(!(/^file:/.test(c=o.url)||/^file:/.test(qe())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return bt(o,i);if($e()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,i,void 0,!0)}var c;return function(f,m){const b=new XMLHttpRequest;b.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(b.responseType="arraybuffer");for(const w in f.headers)b.setRequestHeader(w,f.headers[w]);return f.type==="json"&&(b.responseType="text",b.setRequestHeader("Accept","application/json")),b.withCredentials=f.credentials==="include",b.onerror=()=>{m(new Error(b.statusText))},b.onload=()=>{if((b.status>=200&&b.status<300||b.status===0)&&b.response!==null){let w=b.response;if(f.type==="json")try{w=JSON.parse(b.response)}catch(T){return m(T)}m(null,w,b.getResponseHeader("Cache-Control"),b.getResponseHeader("Expires"))}else{const w=new Blob([b.response],{type:b.getResponseHeader("Content-Type")});m(new at(b.status,b.statusText,f.url,w))}},b.send(f.body),{cancel:()=>b.abort()}}(o,i)},re=function(o,i){return Bt(H(o,{type:"arrayBuffer"}),i)};function he(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const i=new URL(o),c=window.location;return i.protocol===c.protocol&&i.host===c.host}function ze(o,i,c){c[o]&&c[o].indexOf(i)!==-1||(c[o]=c[o]||[],c[o].push(i))}function He(o,i,c){if(c&&c[o]){const f=c[o].indexOf(i);f!==-1&&c[o].splice(f,1)}}class Ke{constructor(i,c={}){H(this,c),this.type=i}}class dt extends Ke{constructor(i,c={}){super("error",H({error:i},c))}}class gt{on(i,c){return this._listeners=this._listeners||{},ze(i,c,this._listeners),this}off(i,c){return He(i,c,this._listeners),He(i,c,this._oneTimeListeners),this}once(i,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},ze(i,c,this._oneTimeListeners),this):new Promise(f=>this.once(i,f))}fire(i,c){typeof i=="string"&&(i=new Ke(i,c||{}));const f=i.type;if(this.listens(f)){i.target=this;const m=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const T of m)T.call(this,i);const b=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const T of b)He(f,T,this._oneTimeListeners),T.call(this,i);const w=this._eventedParent;w&&(H(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(i))}else i instanceof dt&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,c){return this._eventedParent=i,this._eventedParentData=c,this}}var Ce={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const pt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Qe(o,i){const c={};for(const f in o)f!=="ref"&&(c[f]=o[f]);return pt.forEach(f=>{f in i&&(c[f]=i[f])}),c}function st(o,i){if(Array.isArray(o)){if(!Array.isArray(i)||o.length!==i.length)return!1;for(let c=0;c<o.length;c++)if(!st(o[c],i[c]))return!1;return!0}if(typeof o=="object"&&o!==null&&i!==null){if(typeof i!="object"||Object.keys(o).length!==Object.keys(i).length)return!1;for(const c in o)if(!st(o[c],i[c]))return!1;return!0}return o===i}const Et={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function It(o,i,c){c.push({command:Et.addSource,args:[o,i[o]]})}function an(o,i,c){i.push({command:Et.removeSource,args:[o]}),c[o]=!0}function ln(o,i,c,f){an(o,c,f),It(o,i,c)}function Tn(o,i,c){let f;for(f in o[c])if(Object.prototype.hasOwnProperty.call(o[c],f)&&f!=="data"&&!st(o[c][f],i[c][f]))return!1;for(f in i[c])if(Object.prototype.hasOwnProperty.call(i[c],f)&&f!=="data"&&!st(o[c][f],i[c][f]))return!1;return!0}function In(o,i,c,f,m,b){let w;for(w in i=i||{},o=o||{})Object.prototype.hasOwnProperty.call(o,w)&&(st(o[w],i[w])||c.push({command:b,args:[f,w,i[w],m]}));for(w in i)Object.prototype.hasOwnProperty.call(i,w)&&!Object.prototype.hasOwnProperty.call(o,w)&&(st(o[w],i[w])||c.push({command:b,args:[f,w,i[w],m]}))}function Vn(o){return o.id}function lr(o,i){return o[i.id]=i,o}class ft{constructor(i,c,f,m){this.message=(i?`${i}: `:"")+f,m&&(this.identifier=m),c!=null&&c.__line__&&(this.line=c.__line__)}}function fi(o,...i){for(const c of i)for(const f in c)o[f]=c[f];return o}class Sn extends Error{constructor(i,c){super(c),this.message=c,this.key=i}}class oa{constructor(i,c=[]){this.parent=i,this.bindings={};for(const[f,m]of c)this.bindings[f]=m}concat(i){return new oa(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const ur={kind:"null"},xt={kind:"number"},gn={kind:"string"},dn={kind:"boolean"},Ri={kind:"color"},es={kind:"object"},yn={kind:"value"},As={kind:"collator"},fe={kind:"formatted"},q={kind:"padding"},W={kind:"resolvedImage"},ae={kind:"variableAnchorOffsetCollection"};function ge(o,i){return{kind:"array",itemType:o,N:i}}function ye(o){if(o.kind==="array"){const i=ye(o.itemType);return typeof o.N=="number"?`array<${i}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${i}>`}return o.kind}const Re=[ur,xt,gn,dn,Ri,fe,es,ge(yn),q,W,ae];function Ae(o,i){if(i.kind==="error")return null;if(o.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Ae(o.itemType,i.itemType))&&(typeof o.N!="number"||o.N===i.N))return null}else{if(o.kind===i.kind)return null;if(o.kind==="value"){for(const c of Re)if(!Ae(c,i))return null}}return`Expected ${ye(o)} but found ${ye(i)} instead.`}function we(o,i){return i.some(c=>c.kind===o.kind)}function Me(o,i){return i.some(c=>c==="null"?o===null:c==="array"?Array.isArray(o):c==="object"?o&&!Array.isArray(o)&&typeof o=="object":c===typeof o)}function et(o,i){return o.kind==="array"&&i.kind==="array"?o.itemType.kind===i.itemType.kind&&typeof o.N=="number":o.kind===i.kind}const nt=.96422,ot=.82521,Qt=4/29,un=6/29,Ht=3*un*un,tn=un*un*un,hn=Math.PI/180,Gn=180/Math.PI;function rr(o){return(o%=360)<0&&(o+=360),o}function Nn([o,i,c,f]){let m,b;const w=Ci((.2225045*(o=Fn(o))+.7168786*(i=Fn(i))+.0606169*(c=Fn(c)))/1);o===i&&i===c?m=b=w:(m=Ci((.4360747*o+.3850649*i+.1430804*c)/nt),b=Ci((.0139322*o+.0971045*i+.7141733*c)/ot));const T=116*w-16;return[T<0?0:T,500*(m-w),200*(w-b),f]}function Fn(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Ci(o){return o>tn?Math.pow(o,1/3):o/Ht+Qt}function dr([o,i,c,f]){let m=(o+16)/116,b=isNaN(i)?m:m+i/500,w=isNaN(c)?m:m-c/200;return m=1*vi(m),b=nt*vi(b),w=ot*vi(w),[Xr(3.1338561*b-1.6168667*m-.4906146*w),Xr(-.9787684*b+1.9161415*m+.033454*w),Xr(.0719453*b-.2289914*m+1.4052427*w),f]}function Xr(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function vi(o){return o>un?o*o*o:Ht*(o-Qt)}function wa(o){return parseInt(o.padEnd(2,o),16)/255}function sp(o,i){return xl(i?o/100:o,0,1)}function xl(o,i,c){return Math.min(Math.max(i,o),c)}function wl(o){return!o.some(Number.isNaN)}const zv={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Xn{constructor(i,c,f,m=1,b=!0){this.r=i,this.g=c,this.b=f,this.a=m,b||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[i,c,f,m]))}static parse(i){if(i instanceof Xn)return i;if(typeof i!="string")return;const c=function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=zv[f];if(m){const[w,T,P]=m;return[w/255,T/255,P/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const w=f.length<6?1:2;let T=1;return[wa(f.slice(T,T+=w)),wa(f.slice(T,T+=w)),wa(f.slice(T,T+=w)),wa(f.slice(T,T+w)||"ff")]}if(f.startsWith("rgb")){const w=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[T,P,L,B,U,G,K,J,ce,ve,xe,Le]=w,Te=[B||" ",K||" ",ve].join("");if(Te==="  "||Te==="  /"||Te===",,"||Te===",,,"){const Oe=[L,G,ce].join(""),je=Oe==="%%%"?100:Oe===""?255:0;if(je){const it=[xl(+P/je,0,1),xl(+U/je,0,1),xl(+J/je,0,1),xe?sp(+xe,Le):1];if(wl(it))return it}}return}}const b=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[w,T,P,L,B,U,G,K,J]=b,ce=[P||" ",B||" ",G].join("");if(ce==="  "||ce==="  /"||ce===",,"||ce===",,,"){const ve=[+T,xl(+L,0,100),xl(+U,0,100),K?sp(+K,J):1];if(wl(ve))return function([xe,Le,Te,Oe]){function je(it){const Nt=(it+xe/30)%12,Wt=Le*Math.min(Te,1-Te);return Te-Wt*Math.max(-1,Math.min(Nt-3,9-Nt,1))}return xe=rr(xe),Le/=100,Te/=100,[je(0),je(8),je(4),Oe]}(ve)}}}(i);return c?new Xn(...c,!1):void 0}get rgb(){const{r:i,g:c,b:f,a:m}=this,b=m||1/0;return this.overwriteGetter("rgb",[i/b,c/b,f/b,m])}get hcl(){return this.overwriteGetter("hcl",function(i){const[c,f,m,b]=Nn(i),w=Math.sqrt(f*f+m*m);return[Math.round(1e4*w)?rr(Math.atan2(m,f)*Gn):NaN,w,c,b]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Nn(this.rgb))}overwriteGetter(i,c){return Object.defineProperty(this,i,{value:c}),c}toString(){const[i,c,f,m]=this.rgb;return`rgba(${[i,c,f].map(b=>Math.round(255*b)).join(",")},${m})`}}Xn.black=new Xn(0,0,0,1),Xn.white=new Xn(1,1,1,1),Xn.transparent=new Xn(0,0,0,0),Xn.red=new Xn(1,0,0,1);class Ud{constructor(i,c,f){this.sensitivity=i?c?"variant":"case":c?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,c){return this.collator.compare(i,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class hu{constructor(i,c,f,m,b){this.text=i,this.image=c,this.scale=f,this.fontStack=m,this.textColor=b}}class Ti{constructor(i){this.sections=i}static fromString(i){return new Ti([new hu(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof Ti?i:Ti.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class la{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof la)return i;if(typeof i=="number")return new la([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(const c of i)if(typeof c!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new la(i)}}toString(){return JSON.stringify(this.values)}}const Fv=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Sa{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Sa)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let c=0;c<i.length;c+=2){const f=i[c],m=i[c+1];if(typeof f!="string"||!Fv.has(f)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new Sa(i)}}toString(){return JSON.stringify(this.values)}}class yi{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new yi({name:i,available:!1}):null}}function fu(o,i,c,f){return typeof o=="number"&&o>=0&&o<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof c=="number"&&c>=0&&c<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[o,i,c,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[o,i,c,f]:[o,i,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Sl(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Xn||o instanceof Ud||o instanceof Ti||o instanceof la||o instanceof Sa||o instanceof yi)return!0;if(Array.isArray(o)){for(const i of o)if(!Sl(i))return!1;return!0}if(typeof o=="object"){for(const i in o)if(!Sl(o[i]))return!1;return!0}return!1}function Ar(o){if(o===null)return ur;if(typeof o=="string")return gn;if(typeof o=="boolean")return dn;if(typeof o=="number")return xt;if(o instanceof Xn)return Ri;if(o instanceof Ud)return As;if(o instanceof Ti)return fe;if(o instanceof la)return q;if(o instanceof Sa)return ae;if(o instanceof yi)return W;if(Array.isArray(o)){const i=o.length;let c;for(const f of o){const m=Ar(f);if(c){if(c===m)continue;c=yn;break}c=m}return ge(c||yn,i)}return es}function qn(o){const i=typeof o;return o===null?"":i==="string"||i==="number"||i==="boolean"?String(o):o instanceof Xn||o instanceof Ti||o instanceof la||o instanceof Sa||o instanceof yi?o.toString():JSON.stringify(o)}class Ro{constructor(i,c){this.type=i,this.value=c}static parse(i,c){if(i.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!Sl(i[1]))return c.error("invalid value");const f=i[1];let m=Ar(f);const b=c.expectedType;return m.kind!=="array"||m.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(m=b),new Ro(m,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Lr{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}const pu={string:gn,number:xt,boolean:dn,object:es};class ka{constructor(i,c){this.type=i,this.args=c}static parse(i,c){if(i.length<2)return c.error("Expected at least one argument.");let f,m=1;const b=i[0];if(b==="array"){let T,P;if(i.length>2){const L=i[1];if(typeof L!="string"||!(L in pu)||L==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);T=pu[L],m++}else T=yn;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return c.error('The length argument to "array" must be a positive integer literal',2);P=i[2],m++}f=ge(T,P)}else{if(!pu[b])throw new Error(`Types doesn't contain name = ${b}`);f=pu[b]}const w=[];for(;m<i.length;m++){const T=c.parse(i[m],m,yn);if(!T)return null;w.push(T)}return new ka(f,w)}evaluate(i){for(let c=0;c<this.args.length;c++){const f=this.args[c].evaluate(i);if(!Ae(this.type,Ar(f)))return f;if(c===this.args.length-1)throw new Lr(`Expected value to be of type ${ye(this.type)}, but found ${ye(Ar(f))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const qd={"to-boolean":dn,"to-color":Ri,"to-number":xt,"to-string":gn};class Js{constructor(i,c){this.type=i,this.args=c}static parse(i,c){if(i.length<2)return c.error("Expected at least one argument.");const f=i[0];if(!qd[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&i.length!==2)return c.error("Expected one argument.");const m=qd[f],b=[];for(let w=1;w<i.length;w++){const T=c.parse(i[w],w,yn);if(!T)return null;b.push(T)}return new Js(m,b)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let c,f;for(const m of this.args){if(c=m.evaluate(i),f=null,c instanceof Xn)return c;if(typeof c=="string"){const b=i.parseColor(c);if(b)return b}else if(Array.isArray(c)&&(f=c.length<3||c.length>4?`Invalid rbga value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:fu(c[0],c[1],c[2],c[3]),!f))return new Xn(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new Lr(f||`Could not parse color from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"padding":{let c;for(const f of this.args){c=f.evaluate(i);const m=la.parse(c);if(m)return m}throw new Lr(`Could not parse padding from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"variableAnchorOffsetCollection":{let c;for(const f of this.args){c=f.evaluate(i);const m=Sa.parse(c);if(m)return m}throw new Lr(`Could not parse variableAnchorOffsetCollection from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"number":{let c=null;for(const f of this.args){if(c=f.evaluate(i),c===null)return 0;const m=Number(c);if(!isNaN(m))return m}throw new Lr(`Could not convert ${JSON.stringify(c)} to number.`)}case"formatted":return Ti.fromString(qn(this.args[0].evaluate(i)));case"resolvedImage":return yi.fromString(qn(this.args[0].evaluate(i)));default:return qn(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const op=["Unknown","Point","LineString","Polygon"];class jd{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?op[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let c=this._parseColorCache[i];return c||(c=this._parseColorCache[i]=Xn.parse(i)),c}}class mu{constructor(i,c,f=[],m,b=new oa,w=[]){this.registry=i,this.path=f,this.key=f.map(T=>`[${T}]`).join(""),this.scope=b,this.errors=w,this.expectedType=m,this._isConstant=c}parse(i,c,f,m,b={}){return c?this.concat(c,f,m)._parse(i,b):this._parse(i,b)}_parse(i,c){function f(m,b,w){return w==="assert"?new ka(b,[m]):w==="coerce"?new Js(b,[m]):m}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=i[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const b=this.registry[m];if(b){let w=b.parse(i,this);if(!w)return null;if(this.expectedType){const T=this.expectedType,P=w.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||P.kind!=="value")if(T.kind!=="color"&&T.kind!=="formatted"&&T.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string")if(T.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array")if(T.kind!=="variableAnchorOffsetCollection"||P.kind!=="value"&&P.kind!=="array"){if(this.checkSubtype(T,P))return null}else w=f(w,T,c.typeAnnotation||"coerce");else w=f(w,T,c.typeAnnotation||"coerce");else w=f(w,T,c.typeAnnotation||"coerce");else w=f(w,T,c.typeAnnotation||"assert")}if(!(w instanceof Ro)&&w.type.kind!=="resolvedImage"&&this._isConstant(w)){const T=new jd;try{w=new Ro(w.type,w.evaluate(T))}catch(P){return this.error(P.message),null}}return w}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,c,f){const m=typeof i=="number"?this.path.concat(i):this.path,b=f?this.scope.concat(f):this.scope;return new mu(this.registry,this._isConstant,m,c||null,b,this.errors)}error(i,...c){const f=`${this.key}${c.map(m=>`[${m}]`).join("")}`;this.errors.push(new Sn(f,i))}checkSubtype(i,c){const f=Ae(i,c);return f&&this.error(f),f}}class gu{constructor(i,c,f){this.type=As,this.locale=f,this.caseSensitive=i,this.diacriticSensitive=c}static parse(i,c){if(i.length!==2)return c.error("Expected one argument.");const f=i[1];if(typeof f!="object"||Array.isArray(f))return c.error("Collator options argument must be an object.");const m=c.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,dn);if(!m)return null;const b=c.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,dn);if(!b)return null;let w=null;return f.locale&&(w=c.parse(f.locale,1,gn),!w)?null:new gu(m,b,w)}evaluate(i){return new Ud(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}const Qs=8192;function Hd(o,i){o[0]=Math.min(o[0],i[0]),o[1]=Math.min(o[1],i[1]),o[2]=Math.max(o[2],i[0]),o[3]=Math.max(o[3],i[1])}function fc(o,i){return!(o[0]<=i[0]||o[2]>=i[2]||o[1]<=i[1]||o[3]>=i[3])}function lp(o,i){const c=(180+o[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,m=Math.pow(2,i.z);return[Math.round(c*m*Qs),Math.round(f*m*Qs)]}function Bv(o,i,c){const f=o[0]-i[0],m=o[1]-i[1],b=o[0]-c[0],w=o[1]-c[1];return f*w-b*m==0&&f*b<=0&&m*w<=0}function Gd(o,i){let c=!1;for(let w=0,T=i.length;w<T;w++){const P=i[w];for(let L=0,B=P.length;L<B-1;L++){if(Bv(o,P[L],P[L+1]))return!1;(m=P[L])[1]>(f=o)[1]!=(b=P[L+1])[1]>f[1]&&f[0]<(b[0]-m[0])*(f[1]-m[1])/(b[1]-m[1])+m[0]&&(c=!c)}}var f,m,b;return c}function Wd(o,i){for(let c=0;c<i.length;c++)if(Gd(o,i[c]))return!0;return!1}function cp(o,i,c,f){const m=f[0]-c[0],b=f[1]-c[1],w=(o[0]-c[0])*b-m*(o[1]-c[1]),T=(i[0]-c[0])*b-m*(i[1]-c[1]);return w>0&&T<0||w<0&&T>0}function Vv(o,i,c){for(const L of c)for(let B=0;B<L.length-1;++B)if((T=[(w=L[B+1])[0]-(b=L[B])[0],w[1]-b[1]])[0]*(P=[(m=i)[0]-(f=o)[0],m[1]-f[1]])[1]-T[1]*P[0]!=0&&cp(f,m,b,w)&&cp(b,w,f,m))return!0;var f,m,b,w,T,P;return!1}function up(o,i){for(let c=0;c<o.length;++c)if(!Gd(o[c],i))return!1;for(let c=0;c<o.length-1;++c)if(Vv(o[c],o[c+1],i))return!1;return!0}function dp(o,i){for(let c=0;c<i.length;c++)if(up(o,i[c]))return!0;return!1}function vu(o,i,c){const f=[];for(let m=0;m<o.length;m++){const b=[];for(let w=0;w<o[m].length;w++){const T=lp(o[m][w],c);Hd(i,T),b.push(T)}f.push(b)}return f}function hp(o,i,c){const f=[];for(let m=0;m<o.length;m++){const b=vu(o[m],i,c);f.push(b)}return f}function fp(o,i,c,f){if(o[0]<c[0]||o[0]>c[2]){const m=.5*f;let b=o[0]-c[0]>m?-f:c[0]-o[0]>m?f:0;b===0&&(b=o[0]-c[2]>m?-f:c[2]-o[0]>m?f:0),o[0]+=b}Hd(i,o)}function Yd(o,i,c,f){const m=Math.pow(2,f.z)*Qs,b=[f.x*Qs,f.y*Qs],w=[];for(const T of o)for(const P of T){const L=[P.x+b[0],P.y+b[1]];fp(L,i,c,m),w.push(L)}return w}function Zd(o,i,c,f){const m=Math.pow(2,f.z)*Qs,b=[f.x*Qs,f.y*Qs],w=[];for(const P of o){const L=[];for(const B of P){const U=[B.x+b[0],B.y+b[1]];Hd(i,U),L.push(U)}w.push(L)}if(i[2]-i[0]<=m/2){(T=i)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const P of w)for(const L of P)fp(L,i,c,m)}var T;return w}class Oo{constructor(i,c){this.type=dn,this.geojson=i,this.geometries=c}static parse(i,c){if(i.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Sl(i[1])){const f=i[1];if(f.type==="FeatureCollection")for(let m=0;m<f.features.length;++m){const b=f.features[m].geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new Oo(f,f.features[m].geometry)}else if(f.type==="Feature"){const m=f.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Oo(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new Oo(f,f)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(c,f){const m=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=c.canonicalID();if(f.type==="Polygon"){const T=vu(f.coordinates,b,w),P=Yd(c.geometry(),m,b,w);if(!fc(m,b))return!1;for(const L of P)if(!Gd(L,T))return!1}if(f.type==="MultiPolygon"){const T=hp(f.coordinates,b,w),P=Yd(c.geometry(),m,b,w);if(!fc(m,b))return!1;for(const L of P)if(!Wd(L,T))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(c,f){const m=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=c.canonicalID();if(f.type==="Polygon"){const T=vu(f.coordinates,b,w),P=Zd(c.geometry(),m,b,w);if(!fc(m,b))return!1;for(const L of P)if(!up(L,T))return!1}if(f.type==="MultiPolygon"){const T=hp(f.coordinates,b,w),P=Zd(c.geometry(),m,b,w);if(!fc(m,b))return!1;for(const L of P)if(!dp(L,T))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class yu{constructor(i,c){this.type=c.type,this.name=i,this.boundExpression=c}static parse(i,c){if(i.length!==2||typeof i[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");const f=i[1];return c.scope.has(f)?new yu(f,c.scope.get(f)):c.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class Ca{constructor(i,c,f,m){this.name=i,this.type=c,this._evaluate=f,this.args=m}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,c){const f=i[0],m=Ca.definitions[f];if(!m)return c.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const b=Array.isArray(m)?m[0]:m.type,w=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,T=w.filter(([L])=>!Array.isArray(L)||L.length===i.length-1);let P=null;for(const[L,B]of T){P=new mu(c.registry,_u,c.path,null,c.scope);const U=[];let G=!1;for(let K=1;K<i.length;K++){const J=i[K],ce=Array.isArray(L)?L[K-1]:L.type,ve=P.parse(J,1+U.length,ce);if(!ve){G=!0;break}U.push(ve)}if(!G)if(Array.isArray(L)&&L.length!==U.length)P.error(`Expected ${L.length} arguments, but found ${U.length} instead.`);else{for(let K=0;K<U.length;K++){const J=Array.isArray(L)?L[K]:L.type,ce=U[K];P.concat(K+1).checkSubtype(J,ce.type)}if(P.errors.length===0)return new Ca(f,b,B,U)}}if(T.length===1)c.errors.push(...P.errors);else{const L=(T.length?T:w).map(([U])=>{return G=U,Array.isArray(G)?`(${G.map(ye).join(", ")})`:`(${ye(G.type)}...)`;var G}).join(" | "),B=[];for(let U=1;U<i.length;U++){const G=c.parse(i[U],1+B.length);if(!G)return null;B.push(ye(G.type))}c.error(`Expected arguments of type ${L}, but found (${B.join(", ")}) instead.`)}return null}static register(i,c){Ca.definitions=c;for(const f in c)i[f]=Ca}}function _u(o){if(o instanceof yu)return _u(o.boundExpression);if(o instanceof Ca&&o.name==="error"||o instanceof gu||o instanceof Oo)return!1;const i=o instanceof Js||o instanceof ka;let c=!0;return o.eachChild(f=>{c=i?c&&_u(f):c&&f instanceof Ro}),!!c&&bu(o)&&xu(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function bu(o){if(o instanceof Ca&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Oo)return!1;let i=!0;return o.eachChild(c=>{i&&!bu(c)&&(i=!1)}),i}function pc(o){if(o instanceof Ca&&o.name==="feature-state")return!1;let i=!0;return o.eachChild(c=>{i&&!pc(c)&&(i=!1)}),i}function xu(o,i){if(o instanceof Ca&&i.indexOf(o.name)>=0)return!1;let c=!0;return o.eachChild(f=>{c&&!xu(f,i)&&(c=!1)}),c}function kl(o,i){const c=o.length-1;let f,m,b=0,w=c,T=0;for(;b<=w;)if(T=Math.floor((b+w)/2),f=o[T],m=o[T+1],f<=i){if(T===c||i<m)return T;b=T+1}else{if(!(f>i))throw new Lr("Input is not a number.");w=T-1}return 0}class eo{constructor(i,c,f){this.type=i,this.input=c,this.labels=[],this.outputs=[];for(const[m,b]of f)this.labels.push(m),this.outputs.push(b)}static parse(i,c){if(i.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return c.error("Expected an even number of arguments.");const f=c.parse(i[1],1,xt);if(!f)return null;const m=[];let b=null;c.expectedType&&c.expectedType.kind!=="value"&&(b=c.expectedType);for(let w=1;w<i.length;w+=2){const T=w===1?-1/0:i[w],P=i[w+1],L=w,B=w+1;if(typeof T!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(m.length&&m[m.length-1][0]>=T)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',L);const U=c.parse(P,B,b);if(!U)return null;b=b||U.type,m.push([T,U])}return new eo(b,f,m)}evaluate(i){const c=this.labels,f=this.outputs;if(c.length===1)return f[0].evaluate(i);const m=this.input.evaluate(i);if(m<=c[0])return f[0].evaluate(i);const b=c.length;return m>=c[b-1]?f[b-1].evaluate(i):f[kl(c,m)].evaluate(i)}eachChild(i){i(this.input);for(const c of this.outputs)i(c)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function On(o,i,c){return o+c*(i-o)}function wu(o,i,c){return o.map((f,m)=>On(f,i[m],c))}const ca={number:On,color:function(o,i,c,f="rgb"){switch(f){case"rgb":{const[m,b,w,T]=wu(o.rgb,i.rgb,c);return new Xn(m,b,w,T,!1)}case"hcl":{const[m,b,w,T]=o.hcl,[P,L,B,U]=i.hcl;let G,K;if(isNaN(m)||isNaN(P))isNaN(m)?isNaN(P)?G=NaN:(G=P,w!==1&&w!==0||(K=L)):(G=m,B!==1&&B!==0||(K=b));else{let Le=P-m;P>m&&Le>180?Le-=360:P<m&&m-P>180&&(Le+=360),G=m+c*Le}const[J,ce,ve,xe]=function([Le,Te,Oe,je]){return Le=isNaN(Le)?0:Le*hn,dr([Oe,Math.cos(Le)*Te,Math.sin(Le)*Te,je])}([G,K??On(b,L,c),On(w,B,c),On(T,U,c)]);return new Xn(J,ce,ve,xe,!1)}case"lab":{const[m,b,w,T]=dr(wu(o.lab,i.lab,c));return new Xn(m,b,w,T,!1)}}},array:wu,padding:function(o,i,c){return new la(wu(o.values,i.values,c))},variableAnchorOffsetCollection:function(o,i,c){const f=o.values,m=i.values;if(f.length!==m.length)throw new Lr(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${i.toString()}`);const b=[];for(let w=0;w<f.length;w+=2){if(f[w]!==m[w])throw new Lr(`Cannot interpolate values containing mismatched anchors. from[${w}]: ${f[w]}, to[${w}]: ${m[w]}`);b.push(f[w]);const[T,P]=f[w+1],[L,B]=m[w+1];b.push([On(T,L,c),On(P,B,c)])}return new Sa(b)}};class ua{constructor(i,c,f,m,b){this.type=i,this.operator=c,this.interpolation=f,this.input=m,this.labels=[],this.outputs=[];for(const[w,T]of b)this.labels.push(w),this.outputs.push(T)}static interpolationFactor(i,c,f,m){let b=0;if(i.name==="exponential")b=Kd(c,i.base,f,m);else if(i.name==="linear")b=Kd(c,1,f,m);else if(i.name==="cubic-bezier"){const w=i.controlPoints;b=new R(w[0],w[1],w[2],w[3]).solve(Kd(c,1,f,m))}return b}static parse(i,c){let[f,m,b,...w]=i;if(!Array.isArray(m)||m.length===0)return c.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const L=m[1];if(typeof L!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:L}}else{if(m[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const L=m.slice(1);if(L.length!==4||L.some(B=>typeof B!="number"||B<0||B>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:L}}}if(i.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(b=c.parse(b,2,xt),!b)return null;const T=[];let P=null;f==="interpolate-hcl"||f==="interpolate-lab"?P=Ri:c.expectedType&&c.expectedType.kind!=="value"&&(P=c.expectedType);for(let L=0;L<w.length;L+=2){const B=w[L],U=w[L+1],G=L+3,K=L+4;if(typeof B!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',G);if(T.length&&T[T.length-1][0]>=B)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',G);const J=c.parse(U,K,P);if(!J)return null;P=P||J.type,T.push([B,J])}return et(P,xt)||et(P,Ri)||et(P,q)||et(P,ae)||et(P,ge(xt))?new ua(P,f,m,b,T):c.error(`Type ${ye(P)} is not interpolatable.`)}evaluate(i){const c=this.labels,f=this.outputs;if(c.length===1)return f[0].evaluate(i);const m=this.input.evaluate(i);if(m<=c[0])return f[0].evaluate(i);const b=c.length;if(m>=c[b-1])return f[b-1].evaluate(i);const w=kl(c,m),T=ua.interpolationFactor(this.interpolation,m,c[w],c[w+1]),P=f[w].evaluate(i),L=f[w+1].evaluate(i);switch(this.operator){case"interpolate":return ca[this.type.kind](P,L,T);case"interpolate-hcl":return ca.color(P,L,T,"hcl");case"interpolate-lab":return ca.color(P,L,T,"lab")}}eachChild(i){i(this.input);for(const c of this.outputs)i(c)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function Kd(o,i,c,f){const m=f-c,b=o-c;return m===0?0:i===1?b/m:(Math.pow(i,b)-1)/(Math.pow(i,m)-1)}class Su{constructor(i,c){this.type=i,this.args=c}static parse(i,c){if(i.length<2)return c.error("Expectected at least one argument.");let f=null;const m=c.expectedType;m&&m.kind!=="value"&&(f=m);const b=[];for(const T of i.slice(1)){const P=c.parse(T,1+b.length,f,void 0,{typeAnnotation:"omit"});if(!P)return null;f=f||P.type,b.push(P)}if(!f)throw new Error("No output type");const w=m&&b.some(T=>Ae(m,T.type));return new Su(w?yn:f,b)}evaluate(i){let c,f=null,m=0;for(const b of this.args)if(m++,f=b.evaluate(i),f&&f instanceof yi&&!f.available&&(c||(c=f.name),f=null,m===this.args.length&&(f=c)),f!==null)break;return f}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}class ku{constructor(i,c){this.type=c.type,this.bindings=[].concat(i),this.result=c}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const c of this.bindings)i(c[1]);i(this.result)}static parse(i,c){if(i.length<4)return c.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const f=[];for(let b=1;b<i.length-1;b+=2){const w=i[b];if(typeof w!="string")return c.error(`Expected string, but found ${typeof w} instead.`,b);if(/[^a-zA-Z0-9_]/.test(w))return c.error("Variable names must contain only alphanumeric characters or '_'.",b);const T=c.parse(i[b+1],b+1);if(!T)return null;f.push([w,T])}const m=c.parse(i[i.length-1],i.length-1,c.expectedType,f);return m?new ku(f,m):null}outputDefined(){return this.result.outputDefined()}}class Xd{constructor(i,c,f){this.type=i,this.index=c,this.input=f}static parse(i,c){if(i.length!==3)return c.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=c.parse(i[1],1,xt),m=c.parse(i[2],2,ge(c.expectedType||yn));return f&&m?new Xd(m.type.itemType,f,m):null}evaluate(i){const c=this.index.evaluate(i),f=this.input.evaluate(i);if(c<0)throw new Lr(`Array index out of bounds: ${c} < 0.`);if(c>=f.length)throw new Lr(`Array index out of bounds: ${c} > ${f.length-1}.`);if(c!==Math.floor(c))throw new Lr(`Array index must be an integer, but found ${c} instead.`);return f[c]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class Jd{constructor(i,c){this.type=dn,this.needle=i,this.haystack=c}static parse(i,c){if(i.length!==3)return c.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=c.parse(i[1],1,yn),m=c.parse(i[2],2,yn);return f&&m?we(f.type,[dn,gn,xt,ur,yn])?new Jd(f,m):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${ye(f.type)} instead`):null}evaluate(i){const c=this.needle.evaluate(i),f=this.haystack.evaluate(i);if(!f)return!1;if(!Me(c,["boolean","string","number","null"]))throw new Lr(`Expected first argument to be of type boolean, string, number or null, but found ${ye(Ar(c))} instead.`);if(!Me(f,["string","array"]))throw new Lr(`Expected second argument to be of type array or string, but found ${ye(Ar(f))} instead.`);return f.indexOf(c)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class Cu{constructor(i,c,f){this.type=xt,this.needle=i,this.haystack=c,this.fromIndex=f}static parse(i,c){if(i.length<=2||i.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const f=c.parse(i[1],1,yn),m=c.parse(i[2],2,yn);if(!f||!m)return null;if(!we(f.type,[dn,gn,xt,ur,yn]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${ye(f.type)} instead`);if(i.length===4){const b=c.parse(i[3],3,xt);return b?new Cu(f,m,b):null}return new Cu(f,m)}evaluate(i){const c=this.needle.evaluate(i),f=this.haystack.evaluate(i);if(!Me(c,["boolean","string","number","null"]))throw new Lr(`Expected first argument to be of type boolean, string, number or null, but found ${ye(Ar(c))} instead.`);if(!Me(f,["string","array"]))throw new Lr(`Expected second argument to be of type array or string, but found ${ye(Ar(f))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(i);return f.indexOf(c,m)}return f.indexOf(c)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class Qd{constructor(i,c,f,m,b,w){this.inputType=i,this.type=c,this.input=f,this.cases=m,this.outputs=b,this.otherwise=w}static parse(i,c){if(i.length<5)return c.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return c.error("Expected an even number of arguments.");let f,m;c.expectedType&&c.expectedType.kind!=="value"&&(m=c.expectedType);const b={},w=[];for(let L=2;L<i.length-1;L+=2){let B=i[L];const U=i[L+1];Array.isArray(B)||(B=[B]);const G=c.concat(L);if(B.length===0)return G.error("Expected at least one branch label.");for(const J of B){if(typeof J!="number"&&typeof J!="string")return G.error("Branch labels must be numbers or strings.");if(typeof J=="number"&&Math.abs(J)>Number.MAX_SAFE_INTEGER)return G.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof J=="number"&&Math.floor(J)!==J)return G.error("Numeric branch labels must be integer values.");if(f){if(G.checkSubtype(f,Ar(J)))return null}else f=Ar(J);if(b[String(J)]!==void 0)return G.error("Branch labels must be unique.");b[String(J)]=w.length}const K=c.parse(U,L,m);if(!K)return null;m=m||K.type,w.push(K)}const T=c.parse(i[1],1,yn);if(!T)return null;const P=c.parse(i[i.length-1],i.length-1,m);return P?T.type.kind!=="value"&&c.concat(1).checkSubtype(f,T.type)?null:new Qd(f,m,T,b,w,P):null}evaluate(i){const c=this.input.evaluate(i);return(Ar(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class eh{constructor(i,c,f){this.type=i,this.branches=c,this.otherwise=f}static parse(i,c){if(i.length<4)return c.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return c.error("Expected an odd number of arguments.");let f;c.expectedType&&c.expectedType.kind!=="value"&&(f=c.expectedType);const m=[];for(let w=1;w<i.length-1;w+=2){const T=c.parse(i[w],w,dn);if(!T)return null;const P=c.parse(i[w+1],w+1,f);if(!P)return null;m.push([T,P]),f=f||P.type}const b=c.parse(i[i.length-1],i.length-1,f);if(!b)return null;if(!f)throw new Error("Can't infer output type");return new eh(f,m,b)}evaluate(i){for(const[c,f]of this.branches)if(c.evaluate(i))return f.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[c,f]of this.branches)i(c),i(f);i(this.otherwise)}outputDefined(){return this.branches.every(([i,c])=>c.outputDefined())&&this.otherwise.outputDefined()}}class Tu{constructor(i,c,f,m){this.type=i,this.input=c,this.beginIndex=f,this.endIndex=m}static parse(i,c){if(i.length<=2||i.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const f=c.parse(i[1],1,yn),m=c.parse(i[2],2,xt);if(!f||!m)return null;if(!we(f.type,[ge(yn),gn,yn]))return c.error(`Expected first argument to be of type array or string, but found ${ye(f.type)} instead`);if(i.length===4){const b=c.parse(i[3],3,xt);return b?new Tu(f.type,f,m,b):null}return new Tu(f.type,f,m)}evaluate(i){const c=this.input.evaluate(i),f=this.beginIndex.evaluate(i);if(!Me(c,["string","array"]))throw new Lr(`Expected first argument to be of type array or string, but found ${ye(Ar(c))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(i);return c.slice(f,m)}return c.slice(f)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function pp(o,i){return o==="=="||o==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function mp(o,i,c,f){return f.compare(i,c)===0}function Cl(o,i,c){const f=o!=="=="&&o!=="!=";return class zT{constructor(b,w,T){this.type=dn,this.lhs=b,this.rhs=w,this.collator=T,this.hasUntypedArgument=b.type.kind==="value"||w.type.kind==="value"}static parse(b,w){if(b.length!==3&&b.length!==4)return w.error("Expected two or three arguments.");const T=b[0];let P=w.parse(b[1],1,yn);if(!P)return null;if(!pp(T,P.type))return w.concat(1).error(`"${T}" comparisons are not supported for type '${ye(P.type)}'.`);let L=w.parse(b[2],2,yn);if(!L)return null;if(!pp(T,L.type))return w.concat(2).error(`"${T}" comparisons are not supported for type '${ye(L.type)}'.`);if(P.type.kind!==L.type.kind&&P.type.kind!=="value"&&L.type.kind!=="value")return w.error(`Cannot compare types '${ye(P.type)}' and '${ye(L.type)}'.`);f&&(P.type.kind==="value"&&L.type.kind!=="value"?P=new ka(L.type,[P]):P.type.kind!=="value"&&L.type.kind==="value"&&(L=new ka(P.type,[L])));let B=null;if(b.length===4){if(P.type.kind!=="string"&&L.type.kind!=="string"&&P.type.kind!=="value"&&L.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(B=w.parse(b[3],3,As),!B)return null}return new zT(P,L,B)}evaluate(b){const w=this.lhs.evaluate(b),T=this.rhs.evaluate(b);if(f&&this.hasUntypedArgument){const P=Ar(w),L=Ar(T);if(P.kind!==L.kind||P.kind!=="string"&&P.kind!=="number")throw new Lr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${P.kind}, ${L.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const P=Ar(w),L=Ar(T);if(P.kind!=="string"||L.kind!=="string")return i(b,w,T)}return this.collator?c(b,w,T,this.collator.evaluate(b)):i(b,w,T)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}}}const Nv=Cl("==",function(o,i,c){return i===c},mp),$v=Cl("!=",function(o,i,c){return i!==c},function(o,i,c,f){return!mp(0,i,c,f)}),Uv=Cl("<",function(o,i,c){return i<c},function(o,i,c,f){return f.compare(i,c)<0}),qv=Cl(">",function(o,i,c){return i>c},function(o,i,c,f){return f.compare(i,c)>0}),jv=Cl("<=",function(o,i,c){return i<=c},function(o,i,c,f){return f.compare(i,c)<=0}),Hv=Cl(">=",function(o,i,c){return i>=c},function(o,i,c,f){return f.compare(i,c)>=0});class th{constructor(i,c,f,m,b){this.type=gn,this.number=i,this.locale=c,this.currency=f,this.minFractionDigits=m,this.maxFractionDigits=b}static parse(i,c){if(i.length!==3)return c.error("Expected two arguments.");const f=c.parse(i[1],1,xt);if(!f)return null;const m=i[2];if(typeof m!="object"||Array.isArray(m))return c.error("NumberFormat options argument must be an object.");let b=null;if(m.locale&&(b=c.parse(m.locale,1,gn),!b))return null;let w=null;if(m.currency&&(w=c.parse(m.currency,1,gn),!w))return null;let T=null;if(m["min-fraction-digits"]&&(T=c.parse(m["min-fraction-digits"],1,xt),!T))return null;let P=null;return m["max-fraction-digits"]&&(P=c.parse(m["max-fraction-digits"],1,xt),!P)?null:new th(f,b,w,T,P)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class Au{constructor(i){this.type=fe,this.sections=i}static parse(i,c){if(i.length<2)return c.error("Expected at least one argument.");const f=i[1];if(!Array.isArray(f)&&typeof f=="object")return c.error("First argument must be an image or text section.");const m=[];let b=!1;for(let w=1;w<=i.length-1;++w){const T=i[w];if(b&&typeof T=="object"&&!Array.isArray(T)){b=!1;let P=null;if(T["font-scale"]&&(P=c.parse(T["font-scale"],1,xt),!P))return null;let L=null;if(T["text-font"]&&(L=c.parse(T["text-font"],1,ge(gn)),!L))return null;let B=null;if(T["text-color"]&&(B=c.parse(T["text-color"],1,Ri),!B))return null;const U=m[m.length-1];U.scale=P,U.font=L,U.textColor=B}else{const P=c.parse(i[w],1,yn);if(!P)return null;const L=P.type.kind;if(L!=="string"&&L!=="value"&&L!=="null"&&L!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,m.push({content:P,scale:null,font:null,textColor:null})}}return new Au(m)}evaluate(i){return new Ti(this.sections.map(c=>{const f=c.content.evaluate(i);return Ar(f)===W?new hu("",f,null,null,null):new hu(qn(f),null,c.scale?c.scale.evaluate(i):null,c.font?c.font.evaluate(i).join(","):null,c.textColor?c.textColor.evaluate(i):null)}))}eachChild(i){for(const c of this.sections)i(c.content),c.scale&&i(c.scale),c.font&&i(c.font),c.textColor&&i(c.textColor)}outputDefined(){return!1}}class nh{constructor(i){this.type=W,this.input=i}static parse(i,c){if(i.length!==2)return c.error("Expected two arguments.");const f=c.parse(i[1],1,gn);return f?new nh(f):c.error("No image name provided.")}evaluate(i){const c=this.input.evaluate(i),f=yi.fromString(c);return f&&i.availableImages&&(f.available=i.availableImages.indexOf(c)>-1),f}eachChild(i){i(this.input)}outputDefined(){return!1}}class rh{constructor(i){this.type=xt,this.input=i}static parse(i,c){if(i.length!==2)return c.error(`Expected 1 argument, but found ${i.length-1} instead.`);const f=c.parse(i[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${ye(f.type)} instead.`):new rh(f):null}evaluate(i){const c=this.input.evaluate(i);if(typeof c=="string"||Array.isArray(c))return c.length;throw new Lr(`Expected value to be of type string or array, but found ${ye(Ar(c))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}const Tl={"==":Nv,"!=":$v,">":qv,"<":Uv,">=":Hv,"<=":jv,array:ka,at:Xd,boolean:ka,case:eh,coalesce:Su,collator:gu,format:Au,image:nh,in:Jd,"index-of":Cu,interpolate:ua,"interpolate-hcl":ua,"interpolate-lab":ua,length:rh,let:ku,literal:Ro,match:Qd,number:ka,"number-format":th,object:ka,slice:Tu,step:eo,string:ka,"to-boolean":Js,"to-color":Js,"to-number":Js,"to-string":Js,var:yu,within:Oo};function gp(o,[i,c,f,m]){i=i.evaluate(o),c=c.evaluate(o),f=f.evaluate(o);const b=m?m.evaluate(o):1,w=fu(i,c,f,b);if(w)throw new Lr(w);return new Xn(i/255,c/255,f/255,b,!1)}function vp(o,i){return o in i}function ih(o,i){const c=i[o];return c===void 0?null:c}function zo(o){return{type:o}}function yp(o){return{result:"success",value:o}}function to(o){return{result:"error",value:o}}function Al(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function _p(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function ah(o){return!!o.expression&&o.expression.interpolated}function jn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Er(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Gv(o){return o}function zn(o,i){const c=i.type==="color",f=o.stops&&typeof o.stops[0][0]=="object",m=f||!(f||o.property!==void 0),b=o.type||(ah(i)?"exponential":"interval");if(c||i.type==="padding"){const B=c?Xn.parse:la.parse;(o=fi({},o)).stops&&(o.stops=o.stops.map(U=>[U[0],B(U[1])])),o.default=B(o.default?o.default:i.default)}if(o.colorSpace&&(w=o.colorSpace)!=="rgb"&&w!=="hcl"&&w!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var w;let T,P,L;if(b==="exponential")T=mc;else if(b==="interval")T=wr;else if(b==="categorical"){T=Ir,P=Object.create(null);for(const B of o.stops)P[B[0]]=B[1];L=typeof o.stops[0][0]}else{if(b!=="identity")throw new Error(`Unknown function type "${b}"`);T=bp}if(f){const B={},U=[];for(let J=0;J<o.stops.length;J++){const ce=o.stops[J],ve=ce[0].zoom;B[ve]===void 0&&(B[ve]={zoom:ve,type:o.type,property:o.property,default:o.default,stops:[]},U.push(ve)),B[ve].stops.push([ce[0].value,ce[1]])}const G=[];for(const J of U)G.push([B[J].zoom,zn(B[J],i)]);const K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:ua.interpolationFactor.bind(void 0,K),zoomStops:G.map(J=>J[0]),evaluate:({zoom:J},ce)=>mc({stops:G,base:o.base},i,J).evaluate(J,ce)}}if(m){const B=b==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:B,interpolationFactor:ua.interpolationFactor.bind(void 0,B),zoomStops:o.stops.map(U=>U[0]),evaluate:({zoom:U})=>T(o,i,U,P,L)}}return{kind:"source",evaluate(B,U){const G=U&&U.properties?U.properties[o.property]:void 0;return G===void 0?Fo(o.default,i.default):T(o,i,G,P,L)}}}function Fo(o,i,c){return o!==void 0?o:i!==void 0?i:c!==void 0?c:void 0}function Ir(o,i,c,f,m){return Fo(typeof c===m?f[c]:void 0,o.default,i.default)}function wr(o,i,c){if(jn(c)!=="number")return Fo(o.default,i.default);const f=o.stops.length;if(f===1||c<=o.stops[0][0])return o.stops[0][1];if(c>=o.stops[f-1][0])return o.stops[f-1][1];const m=kl(o.stops.map(b=>b[0]),c);return o.stops[m][1]}function mc(o,i,c){const f=o.base!==void 0?o.base:1;if(jn(c)!=="number")return Fo(o.default,i.default);const m=o.stops.length;if(m===1||c<=o.stops[0][0])return o.stops[0][1];if(c>=o.stops[m-1][0])return o.stops[m-1][1];const b=kl(o.stops.map(B=>B[0]),c),w=function(B,U,G,K){const J=K-G,ce=B-G;return J===0?0:U===1?ce/J:(Math.pow(U,ce)-1)/(Math.pow(U,J)-1)}(c,f,o.stops[b][0],o.stops[b+1][0]),T=o.stops[b][1],P=o.stops[b+1][1],L=ca[i.type]||Gv;return typeof T.evaluate=="function"?{evaluate(...B){const U=T.evaluate.apply(void 0,B),G=P.evaluate.apply(void 0,B);if(U!==void 0&&G!==void 0)return L(U,G,w,o.colorSpace)}}:L(T,P,w,o.colorSpace)}function bp(o,i,c){switch(i.type){case"color":c=Xn.parse(c);break;case"formatted":c=Ti.fromString(c.toString());break;case"resolvedImage":c=yi.fromString(c.toString());break;case"padding":c=la.parse(c);break;default:jn(c)===i.type||i.type==="enum"&&i.values[c]||(c=void 0)}return Fo(c,o.default,i.default)}Ca.register(Tl,{error:[{kind:"error"},[gn],(o,[i])=>{throw new Lr(i.evaluate(o))}],typeof:[gn,[yn],(o,[i])=>ye(Ar(i.evaluate(o)))],"to-rgba":[ge(xt,4),[Ri],(o,[i])=>{const[c,f,m,b]=i.evaluate(o).rgb;return[255*c,255*f,255*m,b]}],rgb:[Ri,[xt,xt,xt],gp],rgba:[Ri,[xt,xt,xt,xt],gp],has:{type:dn,overloads:[[[gn],(o,[i])=>vp(i.evaluate(o),o.properties())],[[gn,es],(o,[i,c])=>vp(i.evaluate(o),c.evaluate(o))]]},get:{type:yn,overloads:[[[gn],(o,[i])=>ih(i.evaluate(o),o.properties())],[[gn,es],(o,[i,c])=>ih(i.evaluate(o),c.evaluate(o))]]},"feature-state":[yn,[gn],(o,[i])=>ih(i.evaluate(o),o.featureState||{})],properties:[es,[],o=>o.properties()],"geometry-type":[gn,[],o=>o.geometryType()],id:[yn,[],o=>o.id()],zoom:[xt,[],o=>o.globals.zoom],"heatmap-density":[xt,[],o=>o.globals.heatmapDensity||0],"line-progress":[xt,[],o=>o.globals.lineProgress||0],accumulated:[yn,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[xt,zo(xt),(o,i)=>{let c=0;for(const f of i)c+=f.evaluate(o);return c}],"*":[xt,zo(xt),(o,i)=>{let c=1;for(const f of i)c*=f.evaluate(o);return c}],"-":{type:xt,overloads:[[[xt,xt],(o,[i,c])=>i.evaluate(o)-c.evaluate(o)],[[xt],(o,[i])=>-i.evaluate(o)]]},"/":[xt,[xt,xt],(o,[i,c])=>i.evaluate(o)/c.evaluate(o)],"%":[xt,[xt,xt],(o,[i,c])=>i.evaluate(o)%c.evaluate(o)],ln2:[xt,[],()=>Math.LN2],pi:[xt,[],()=>Math.PI],e:[xt,[],()=>Math.E],"^":[xt,[xt,xt],(o,[i,c])=>Math.pow(i.evaluate(o),c.evaluate(o))],sqrt:[xt,[xt],(o,[i])=>Math.sqrt(i.evaluate(o))],log10:[xt,[xt],(o,[i])=>Math.log(i.evaluate(o))/Math.LN10],ln:[xt,[xt],(o,[i])=>Math.log(i.evaluate(o))],log2:[xt,[xt],(o,[i])=>Math.log(i.evaluate(o))/Math.LN2],sin:[xt,[xt],(o,[i])=>Math.sin(i.evaluate(o))],cos:[xt,[xt],(o,[i])=>Math.cos(i.evaluate(o))],tan:[xt,[xt],(o,[i])=>Math.tan(i.evaluate(o))],asin:[xt,[xt],(o,[i])=>Math.asin(i.evaluate(o))],acos:[xt,[xt],(o,[i])=>Math.acos(i.evaluate(o))],atan:[xt,[xt],(o,[i])=>Math.atan(i.evaluate(o))],min:[xt,zo(xt),(o,i)=>Math.min(...i.map(c=>c.evaluate(o)))],max:[xt,zo(xt),(o,i)=>Math.max(...i.map(c=>c.evaluate(o)))],abs:[xt,[xt],(o,[i])=>Math.abs(i.evaluate(o))],round:[xt,[xt],(o,[i])=>{const c=i.evaluate(o);return c<0?-Math.round(-c):Math.round(c)}],floor:[xt,[xt],(o,[i])=>Math.floor(i.evaluate(o))],ceil:[xt,[xt],(o,[i])=>Math.ceil(i.evaluate(o))],"filter-==":[dn,[gn,yn],(o,[i,c])=>o.properties()[i.value]===c.value],"filter-id-==":[dn,[yn],(o,[i])=>o.id()===i.value],"filter-type-==":[dn,[gn],(o,[i])=>o.geometryType()===i.value],"filter-<":[dn,[gn,yn],(o,[i,c])=>{const f=o.properties()[i.value],m=c.value;return typeof f==typeof m&&f<m}],"filter-id-<":[dn,[yn],(o,[i])=>{const c=o.id(),f=i.value;return typeof c==typeof f&&c<f}],"filter->":[dn,[gn,yn],(o,[i,c])=>{const f=o.properties()[i.value],m=c.value;return typeof f==typeof m&&f>m}],"filter-id->":[dn,[yn],(o,[i])=>{const c=o.id(),f=i.value;return typeof c==typeof f&&c>f}],"filter-<=":[dn,[gn,yn],(o,[i,c])=>{const f=o.properties()[i.value],m=c.value;return typeof f==typeof m&&f<=m}],"filter-id-<=":[dn,[yn],(o,[i])=>{const c=o.id(),f=i.value;return typeof c==typeof f&&c<=f}],"filter->=":[dn,[gn,yn],(o,[i,c])=>{const f=o.properties()[i.value],m=c.value;return typeof f==typeof m&&f>=m}],"filter-id->=":[dn,[yn],(o,[i])=>{const c=o.id(),f=i.value;return typeof c==typeof f&&c>=f}],"filter-has":[dn,[yn],(o,[i])=>i.value in o.properties()],"filter-has-id":[dn,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[dn,[ge(gn)],(o,[i])=>i.value.indexOf(o.geometryType())>=0],"filter-id-in":[dn,[ge(yn)],(o,[i])=>i.value.indexOf(o.id())>=0],"filter-in-small":[dn,[gn,ge(yn)],(o,[i,c])=>c.value.indexOf(o.properties()[i.value])>=0],"filter-in-large":[dn,[gn,ge(yn)],(o,[i,c])=>function(f,m,b,w){for(;b<=w;){const T=b+w>>1;if(m[T]===f)return!0;m[T]>f?w=T-1:b=T+1}return!1}(o.properties()[i.value],c.value,0,c.value.length-1)],all:{type:dn,overloads:[[[dn,dn],(o,[i,c])=>i.evaluate(o)&&c.evaluate(o)],[zo(dn),(o,i)=>{for(const c of i)if(!c.evaluate(o))return!1;return!0}]]},any:{type:dn,overloads:[[[dn,dn],(o,[i,c])=>i.evaluate(o)||c.evaluate(o)],[zo(dn),(o,i)=>{for(const c of i)if(c.evaluate(o))return!0;return!1}]]},"!":[dn,[dn],(o,[i])=>!i.evaluate(o)],"is-supported-script":[dn,[gn],(o,[i])=>{const c=o.globals&&o.globals.isSupportedScript;return!c||c(i.evaluate(o))}],upcase:[gn,[gn],(o,[i])=>i.evaluate(o).toUpperCase()],downcase:[gn,[gn],(o,[i])=>i.evaluate(o).toLowerCase()],concat:[gn,zo(yn),(o,i)=>i.map(c=>qn(c.evaluate(o))).join("")],"resolved-locale":[gn,[As],(o,[i])=>i.evaluate(o).resolvedLocale()]});class sh{constructor(i,c){var f;this.expression=i,this._warningHistory={},this._evaluator=new jd,this._defaultValue=c?(f=c).type==="color"&&Er(f.default)?new Xn(0,0,0,0):f.type==="color"?Xn.parse(f.default)||null:f.type==="padding"?la.parse(f.default)||null:f.type==="variableAnchorOffsetCollection"?Sa.parse(f.default)||null:f.default===void 0?null:f.default:null,this._enumValues=c&&c.type==="enum"?c.values:null}evaluateWithoutErrorHandling(i,c,f,m,b,w){return this._evaluator.globals=i,this._evaluator.feature=c,this._evaluator.featureState=f,this._evaluator.canonical=m,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(i,c,f,m,b,w){this._evaluator.globals=i,this._evaluator.feature=c||null,this._evaluator.featureState=f||null,this._evaluator.canonical=m,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new Lr(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function Eu(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Tl}function Iu(o,i){const c=new mu(Tl,_u,[],i?function(m){const b={color:Ri,string:gn,number:xt,enum:gn,boolean:dn,formatted:fe,padding:q,resolvedImage:W,variableAnchorOffsetCollection:ae};return m.type==="array"?ge(b[m.value]||yn,m.length):b[m.type]}(i):void 0),f=c.parse(o,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?yp(new sh(f,i)):to(c.errors)}class oh{constructor(i,c){this.kind=i,this._styleExpression=c,this.isStateDependent=i!=="constant"&&!pc(c.expression)}evaluateWithoutErrorHandling(i,c,f,m,b,w){return this._styleExpression.evaluateWithoutErrorHandling(i,c,f,m,b,w)}evaluate(i,c,f,m,b,w){return this._styleExpression.evaluate(i,c,f,m,b,w)}}class Pu{constructor(i,c,f,m){this.kind=i,this.zoomStops=f,this._styleExpression=c,this.isStateDependent=i!=="camera"&&!pc(c.expression),this.interpolationType=m}evaluateWithoutErrorHandling(i,c,f,m,b,w){return this._styleExpression.evaluateWithoutErrorHandling(i,c,f,m,b,w)}evaluate(i,c,f,m,b,w){return this._styleExpression.evaluate(i,c,f,m,b,w)}interpolationFactor(i,c,f){return this.interpolationType?ua.interpolationFactor(this.interpolationType,i,c,f):0}}function lh(o,i){const c=Iu(o,i);if(c.result==="error")return c;const f=c.value.expression,m=bu(f);if(!m&&!Al(i))return to([new Sn("","data expressions not supported")]);const b=xu(f,["zoom"]);if(!b&&!_p(i))return to([new Sn("","zoom expressions not supported")]);const w=vc(f);return w||b?w instanceof Sn?to([w]):w instanceof ua&&!ah(i)?to([new Sn("",'"interpolate" expressions cannot be used with this property')]):yp(w?new Pu(m?"camera":"composite",c.value,w.labels,w instanceof ua?w.interpolation:void 0):new oh(m?"constant":"source",c.value)):to([new Sn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class gc{constructor(i,c){this._parameters=i,this._specification=c,fi(this,zn(this._parameters,this._specification))}static deserialize(i){return new gc(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function vc(o){let i=null;if(o instanceof ku)i=vc(o.result);else if(o instanceof Su){for(const c of o.args)if(i=vc(c),i)break}else(o instanceof eo||o instanceof ua)&&o.input instanceof Ca&&o.input.name==="zoom"&&(i=o);return i instanceof Sn||o.eachChild(c=>{const f=vc(c);f instanceof Sn?i=f:!i&&f?i=new Sn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&f&&i!==f&&(i=new Sn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function yc(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const i of o.slice(1))if(!yc(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const Wv={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ch(o){if(o==null)return{filter:()=>!0,needGeometry:!1};yc(o)||(o=Du(o));const i=Iu(o,Wv);if(i.result==="error")throw new Error(i.value.map(c=>`${c.key}: ${c.message}`).join(", "));return{filter:(c,f,m)=>i.value.evaluate(c,f,{},m),needGeometry:xp(o)}}function Yv(o,i){return o<i?-1:o>i?1:0}function xp(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let i=1;i<o.length;i++)if(xp(o[i]))return!0;return!1}function Du(o){if(!o)return!0;const i=o[0];return o.length<=1?i!=="any":i==="=="?uh(o[1],o[2],"=="):i==="!="?_c(uh(o[1],o[2],"==")):i==="<"||i===">"||i==="<="||i===">="?uh(o[1],o[2],i):i==="any"?(c=o.slice(1),["any"].concat(c.map(Du))):i==="all"?["all"].concat(o.slice(1).map(Du)):i==="none"?["all"].concat(o.slice(1).map(Du).map(_c)):i==="in"?wp(o[1],o.slice(2)):i==="!in"?_c(wp(o[1],o.slice(2))):i==="has"?Sp(o[1]):i==="!has"?_c(Sp(o[1])):i!=="within"||o;var c}function uh(o,i,c){switch(o){case"$type":return[`filter-type-${c}`,i];case"$id":return[`filter-id-${c}`,i];default:return[`filter-${c}`,o,i]}}function wp(o,i){if(i.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(c=>typeof c!=typeof i[0])?["filter-in-large",o,["literal",i.sort(Yv)]]:["filter-in-small",o,["literal",i]]}}function Sp(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function _c(o){return["!",o]}function Mu(o){const i=typeof o;if(i==="number"||i==="boolean"||i==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let m="[";for(const b of o)m+=`${Mu(b)},`;return`${m}]`}const c=Object.keys(o).sort();let f="{";for(let m=0;m<c.length;m++)f+=`${JSON.stringify(c[m])}:${Mu(o[c[m]])},`;return`${f}}`}function Lu(o){let i="";for(const c of pt)i+=`/${Mu(o[c])}`;return i}function kp(o){const i=o.value;return i?[new ft(o.key,i,"constants have been deprecated as of v8")]:[]}function Rr(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Bo(o){if(Array.isArray(o))return o.map(Bo);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const i={};for(const c in o)i[c]=Bo(o[c]);return i}return Rr(o)}function Yi(o){const i=o.key,c=o.value,f=o.valueSpec||{},m=o.objectElementValidators||{},b=o.style,w=o.styleSpec,T=o.validateSpec;let P=[];const L=jn(c);if(L!=="object")return[new ft(i,c,`object expected, ${L} found`)];for(const B in c){const U=B.split(".")[0],G=f[U]||f["*"];let K;if(m[U])K=m[U];else if(f[U])K=T;else if(m["*"])K=m["*"];else{if(!f["*"]){P.push(new ft(i,c[B],`unknown property "${B}"`));continue}K=T}P=P.concat(K({key:(i&&`${i}.`)+B,value:c[B],valueSpec:G,style:b,styleSpec:w,object:c,objectKey:B,validateSpec:T},c))}for(const B in f)m[B]||f[B].required&&f[B].default===void 0&&c[B]===void 0&&P.push(new ft(i,c,`missing required property "${B}"`));return P}function El(o){const i=o.value,c=o.valueSpec,f=o.style,m=o.styleSpec,b=o.key,w=o.arrayElementValidator||o.validateSpec;if(jn(i)!=="array")return[new ft(b,i,`array expected, ${jn(i)} found`)];if(c.length&&i.length!==c.length)return[new ft(b,i,`array length ${c.length} expected, length ${i.length} found`)];if(c["min-length"]&&i.length<c["min-length"])return[new ft(b,i,`array length at least ${c["min-length"]} expected, length ${i.length} found`)];let T={type:c.value,values:c.values};m.$version<7&&(T.function=c.function),jn(c.value)==="object"&&(T=c.value);let P=[];for(let L=0;L<i.length;L++)P=P.concat(w({array:i,arrayIndex:L,value:i[L],valueSpec:T,validateSpec:o.validateSpec,style:f,styleSpec:m,key:`${b}[${L}]`}));return P}function bc(o){const i=o.key,c=o.value,f=o.valueSpec;let m=jn(c);return m==="number"&&c!=c&&(m="NaN"),m!=="number"?[new ft(i,c,`number expected, ${m} found`)]:"minimum"in f&&c<f.minimum?[new ft(i,c,`${c} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&c>f.maximum?[new ft(i,c,`${c} is greater than the maximum value ${f.maximum}`)]:[]}function Ru(o){const i=o.valueSpec,c=Rr(o.value.type);let f,m,b,w={};const T=c!=="categorical"&&o.value.property===void 0,P=!T,L=jn(o.value.stops)==="array"&&jn(o.value.stops[0])==="array"&&jn(o.value.stops[0][0])==="object",B=Yi({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(K){if(c==="identity")return[new ft(K.key,K.value,'identity function may not have a "stops" property')];let J=[];const ce=K.value;return J=J.concat(El({key:K.key,value:ce,valueSpec:K.valueSpec,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,arrayElementValidator:U})),jn(ce)==="array"&&ce.length===0&&J.push(new ft(K.key,ce,"array must have at least one stop")),J},default:function(K){return K.validateSpec({key:K.key,value:K.value,valueSpec:i,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec})}}});return c==="identity"&&T&&B.push(new ft(o.key,o.value,'missing required property "property"')),c==="identity"||o.value.stops||B.push(new ft(o.key,o.value,'missing required property "stops"')),c==="exponential"&&o.valueSpec.expression&&!ah(o.valueSpec)&&B.push(new ft(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(P&&!Al(o.valueSpec)?B.push(new ft(o.key,o.value,"property functions not supported")):T&&!_p(o.valueSpec)&&B.push(new ft(o.key,o.value,"zoom functions not supported"))),c!=="categorical"&&!L||o.value.property!==void 0||B.push(new ft(o.key,o.value,'"property" property is required')),B;function U(K){let J=[];const ce=K.value,ve=K.key;if(jn(ce)!=="array")return[new ft(ve,ce,`array expected, ${jn(ce)} found`)];if(ce.length!==2)return[new ft(ve,ce,`array length 2 expected, length ${ce.length} found`)];if(L){if(jn(ce[0])!=="object")return[new ft(ve,ce,`object expected, ${jn(ce[0])} found`)];if(ce[0].zoom===void 0)return[new ft(ve,ce,"object stop key must have zoom")];if(ce[0].value===void 0)return[new ft(ve,ce,"object stop key must have value")];if(b&&b>Rr(ce[0].zoom))return[new ft(ve,ce[0].zoom,"stop zoom values must appear in ascending order")];Rr(ce[0].zoom)!==b&&(b=Rr(ce[0].zoom),m=void 0,w={}),J=J.concat(Yi({key:`${ve}[0]`,value:ce[0],valueSpec:{zoom:{}},validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,objectElementValidators:{zoom:bc,value:G}}))}else J=J.concat(G({key:`${ve}[0]`,value:ce[0],valueSpec:{},validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec},ce));return Eu(Bo(ce[1]))?J.concat([new ft(`${ve}[1]`,ce[1],"expressions are not allowed in function stops.")]):J.concat(K.validateSpec({key:`${ve}[1]`,value:ce[1],valueSpec:i,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec}))}function G(K,J){const ce=jn(K.value),ve=Rr(K.value),xe=K.value!==null?K.value:J;if(f){if(ce!==f)return[new ft(K.key,xe,`${ce} stop domain type must match previous stop domain type ${f}`)]}else f=ce;if(ce!=="number"&&ce!=="string"&&ce!=="boolean")return[new ft(K.key,xe,"stop domain value must be a number, string, or boolean")];if(ce!=="number"&&c!=="categorical"){let Le=`number expected, ${ce} found`;return Al(i)&&c===void 0&&(Le+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ft(K.key,xe,Le)]}return c!=="categorical"||ce!=="number"||isFinite(ve)&&Math.floor(ve)===ve?c!=="categorical"&&ce==="number"&&m!==void 0&&ve<m?[new ft(K.key,xe,"stop domain values must appear in ascending order")]:(m=ve,c==="categorical"&&ve in w?[new ft(K.key,xe,"stop domain values must be unique")]:(w[ve]=!0,[])):[new ft(K.key,xe,`integer expected, found ${ve}`)]}}function Vo(o){const i=(o.expressionContext==="property"?lh:Iu)(Bo(o.value),o.valueSpec);if(i.result==="error")return i.value.map(f=>new ft(`${o.key}${f.key}`,o.value,f.message));const c=i.value.expression||i.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!c.outputDefined())return[new ft(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!pc(c))return[new ft(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!pc(c))return[new ft(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!xu(c,["zoom","feature-state"]))return[new ft(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!bu(c))return[new ft(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xc(o){const i=o.key,c=o.value,f=o.valueSpec,m=[];return Array.isArray(f.values)?f.values.indexOf(Rr(c))===-1&&m.push(new ft(i,c,`expected one of [${f.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(f.values).indexOf(Rr(c))===-1&&m.push(new ft(i,c,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(c)} found`)),m}function Il(o){return yc(Bo(o.value))?Vo(fi({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Cp(o)}function Cp(o){const i=o.value,c=o.key;if(jn(i)!=="array")return[new ft(c,i,`array expected, ${jn(i)} found`)];const f=o.styleSpec;let m,b=[];if(i.length<1)return[new ft(c,i,"filter array must have at least 1 element")];switch(b=b.concat(xc({key:`${c}[0]`,value:i[0],valueSpec:f.filter_operator,style:o.style,styleSpec:o.styleSpec})),Rr(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&Rr(i[1])==="$type"&&b.push(new ft(c,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&b.push(new ft(c,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(m=jn(i[1]),m!=="string"&&b.push(new ft(`${c}[1]`,i[1],`string expected, ${m} found`)));for(let w=2;w<i.length;w++)m=jn(i[w]),Rr(i[1])==="$type"?b=b.concat(xc({key:`${c}[${w}]`,value:i[w],valueSpec:f.geometry_type,style:o.style,styleSpec:o.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&b.push(new ft(`${c}[${w}]`,i[w],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let w=1;w<i.length;w++)b=b.concat(Cp({key:`${c}[${w}]`,value:i[w],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":m=jn(i[1]),i.length!==2?b.push(new ft(c,i,`filter array for "${i[0]}" operator must have 2 elements`)):m!=="string"&&b.push(new ft(`${c}[1]`,i[1],`string expected, ${m} found`));break;case"within":m=jn(i[1]),i.length!==2?b.push(new ft(c,i,`filter array for "${i[0]}" operator must have 2 elements`)):m!=="object"&&b.push(new ft(`${c}[1]`,i[1],`object expected, ${m} found`))}return b}function Tp(o,i){const c=o.key,f=o.validateSpec,m=o.style,b=o.styleSpec,w=o.value,T=o.objectKey,P=b[`${i}_${o.layerType}`];if(!P)return[];const L=T.match(/^(.*)-transition$/);if(i==="paint"&&L&&P[L[1]]&&P[L[1]].transition)return f({key:c,value:w,valueSpec:b.transition,style:m,styleSpec:b});const B=o.valueSpec||P[T];if(!B)return[new ft(c,w,`unknown property "${T}"`)];let U;if(jn(w)==="string"&&Al(B)&&!B.tokens&&(U=/^{([^}]+)}$/.exec(w)))return[new ft(c,w,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(U[1])} }\`.`)];const G=[];return o.layerType==="symbol"&&(T==="text-field"&&m&&!m.glyphs&&G.push(new ft(c,w,'use of "text-field" requires a style "glyphs" property')),T==="text-font"&&Er(Bo(w))&&Rr(w.type)==="identity"&&G.push(new ft(c,w,'"text-font" does not support identity functions'))),G.concat(f({key:o.key,value:w,valueSpec:B,style:m,styleSpec:b,expressionContext:"property",propertyType:i,propertyKey:T}))}function Ap(o){return Tp(o,"paint")}function Ep(o){return Tp(o,"layout")}function Ip(o){let i=[];const c=o.value,f=o.key,m=o.style,b=o.styleSpec;c.type||c.ref||i.push(new ft(f,c,'either "type" or "ref" is required'));let w=Rr(c.type);const T=Rr(c.ref);if(c.id){const P=Rr(c.id);for(let L=0;L<o.arrayIndex;L++){const B=m.layers[L];Rr(B.id)===P&&i.push(new ft(f,c.id,`duplicate layer id "${c.id}", previously used at line ${B.id.__line__}`))}}if("ref"in c){let P;["type","source","source-layer","filter","layout"].forEach(L=>{L in c&&i.push(new ft(f,c[L],`"${L}" is prohibited for ref layers`))}),m.layers.forEach(L=>{Rr(L.id)===T&&(P=L)}),P?P.ref?i.push(new ft(f,c.ref,"ref cannot reference another ref layer")):w=Rr(P.type):i.push(new ft(f,c.ref,`ref layer "${T}" not found`))}else if(w!=="background")if(c.source){const P=m.sources&&m.sources[c.source],L=P&&Rr(P.type);P?L==="vector"&&w==="raster"?i.push(new ft(f,c.source,`layer "${c.id}" requires a raster source`)):L!=="raster-dem"&&w==="hillshade"?i.push(new ft(f,c.source,`layer "${c.id}" requires a raster-dem source`)):L==="raster"&&w!=="raster"?i.push(new ft(f,c.source,`layer "${c.id}" requires a vector source`)):L!=="vector"||c["source-layer"]?L==="raster-dem"&&w!=="hillshade"?i.push(new ft(f,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!c.paint||!c.paint["line-gradient"]||L==="geojson"&&P.lineMetrics||i.push(new ft(f,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new ft(f,c,`layer "${c.id}" must specify a "source-layer"`)):i.push(new ft(f,c.source,`source "${c.source}" not found`))}else i.push(new ft(f,c,'missing required property "source"'));return i=i.concat(Yi({key:f,value:c,valueSpec:b.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${f}.type`,value:c.type,valueSpec:b.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:c,objectKey:"type"}),filter:Il,layout:P=>Yi({layer:c,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":L=>Ep(fi({layerType:w},L))}}),paint:P=>Yi({layer:c,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":L=>Ap(fi({layerType:w},L))}})}})),i}function ts(o){const i=o.value,c=o.key,f=jn(i);return f!=="string"?[new ft(c,i,`string expected, ${f} found`)]:[]}const wc={promoteId:function({key:o,value:i}){if(jn(i)==="string")return ts({key:o,value:i});{const c=[];for(const f in i)c.push(...ts({key:`${o}.${f}`,value:i[f]}));return c}}};function da(o){const i=o.value,c=o.key,f=o.styleSpec,m=o.style,b=o.validateSpec;if(!i.type)return[new ft(c,i,'"type" is required')];const w=Rr(i.type);let T;switch(w){case"vector":case"raster":return T=Yi({key:c,value:i,valueSpec:f[`source_${w.replace("-","_")}`],style:o.style,styleSpec:f,objectElementValidators:wc,validateSpec:b}),T;case"raster-dem":return T=function(P){var L;const B=(L=P.sourceName)!==null&&L!==void 0?L:"",U=P.value,G=P.styleSpec,K=G.source_raster_dem,J=P.style;let ce=[];const ve=jn(U);if(U===void 0)return ce;if(ve!=="object")return ce.push(new ft("source_raster_dem",U,`object expected, ${ve} found`)),ce;const xe=Rr(U.encoding)==="custom",Le=["redFactor","greenFactor","blueFactor","baseShift"],Te=P.value.encoding?`"${P.value.encoding}"`:"Default";for(const Oe in U)!xe&&Le.includes(Oe)?ce.push(new ft(Oe,U[Oe],`In "${B}": "${Oe}" is only valid when "encoding" is set to "custom". ${Te} encoding found`)):K[Oe]?ce=ce.concat(P.validateSpec({key:Oe,value:U[Oe],valueSpec:K[Oe],validateSpec:P.validateSpec,style:J,styleSpec:G})):ce.push(new ft(Oe,U[Oe],`unknown property "${Oe}"`));return ce}({sourceName:c,value:i,style:o.style,styleSpec:f,validateSpec:b}),T;case"geojson":if(T=Yi({key:c,value:i,valueSpec:f.source_geojson,style:m,styleSpec:f,validateSpec:b,objectElementValidators:wc}),i.cluster)for(const P in i.clusterProperties){const[L,B]=i.clusterProperties[P],U=typeof L=="string"?[L,["accumulated"],["get",P]]:L;T.push(...Vo({key:`${c}.${P}.map`,value:B,validateSpec:b,expressionContext:"cluster-map"})),T.push(...Vo({key:`${c}.${P}.reduce`,value:U,validateSpec:b,expressionContext:"cluster-reduce"}))}return T;case"video":return Yi({key:c,value:i,valueSpec:f.source_video,style:m,validateSpec:b,styleSpec:f});case"image":return Yi({key:c,value:i,valueSpec:f.source_image,style:m,validateSpec:b,styleSpec:f});case"canvas":return[new ft(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xc({key:`${c}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:b,styleSpec:f})}}function Sc(o){const i=o.value,c=o.styleSpec,f=c.light,m=o.style;let b=[];const w=jn(i);if(i===void 0)return b;if(w!=="object")return b=b.concat([new ft("light",i,`object expected, ${w} found`)]),b;for(const T in i){const P=T.match(/^(.*)-transition$/);b=b.concat(P&&f[P[1]]&&f[P[1]].transition?o.validateSpec({key:T,value:i[T],valueSpec:c.transition,validateSpec:o.validateSpec,style:m,styleSpec:c}):f[T]?o.validateSpec({key:T,value:i[T],valueSpec:f[T],validateSpec:o.validateSpec,style:m,styleSpec:c}):[new ft(T,i[T],`unknown property "${T}"`)])}return b}function Pp(o){const i=o.value,c=o.styleSpec,f=c.terrain,m=o.style;let b=[];const w=jn(i);if(i===void 0)return b;if(w!=="object")return b=b.concat([new ft("terrain",i,`object expected, ${w} found`)]),b;for(const T in i)b=b.concat(f[T]?o.validateSpec({key:T,value:i[T],valueSpec:f[T],validateSpec:o.validateSpec,style:m,styleSpec:c}):[new ft(T,i[T],`unknown property "${T}"`)]);return b}function Dp(o){let i=[];const c=o.value,f=o.key;if(Array.isArray(c)){const m=[],b=[];for(const w in c)c[w].id&&m.includes(c[w].id)&&i.push(new ft(f,c,`all the sprites' ids must be unique, but ${c[w].id} is duplicated`)),m.push(c[w].id),c[w].url&&b.includes(c[w].url)&&i.push(new ft(f,c,`all the sprites' URLs must be unique, but ${c[w].url} is duplicated`)),b.push(c[w].url),i=i.concat(Yi({key:`${f}[${w}]`,value:c[w],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return i}return ts({key:f,value:c})}const Mp={"*":()=>[],array:El,boolean:function(o){const i=o.value,c=o.key,f=jn(i);return f!=="boolean"?[new ft(c,i,`boolean expected, ${f} found`)]:[]},number:bc,color:function(o){const i=o.key,c=o.value,f=jn(c);return f!=="string"?[new ft(i,c,`color expected, ${f} found`)]:Xn.parse(String(c))?[]:[new ft(i,c,`color expected, "${c}" found`)]},constants:kp,enum:xc,filter:Il,function:Ru,layer:Ip,object:Yi,source:da,light:Sc,terrain:Pp,string:ts,formatted:function(o){return ts(o).length===0?[]:Vo(o)},resolvedImage:function(o){return ts(o).length===0?[]:Vo(o)},padding:function(o){const i=o.key,c=o.value;if(jn(c)==="array"){if(c.length<1||c.length>4)return[new ft(i,c,`padding requires 1 to 4 values; ${c.length} values found`)];const f={type:"number"};let m=[];for(let b=0;b<c.length;b++)m=m.concat(o.validateSpec({key:`${i}[${b}]`,value:c[b],validateSpec:o.validateSpec,valueSpec:f}));return m}return bc({key:i,value:c,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const i=o.key,c=o.value,f=jn(c),m=o.styleSpec;if(f!=="array"||c.length<1||c.length%2!=0)return[new ft(i,c,"variableAnchorOffsetCollection requires a non-empty array of even length")];let b=[];for(let w=0;w<c.length;w+=2)b=b.concat(xc({key:`${i}[${w}]`,value:c[w],valueSpec:m.layout_symbol["text-anchor"]})),b=b.concat(El({key:`${i}[${w+1}]`,value:c[w+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:m}));return b},sprite:Dp};function Es(o){const i=o.value,c=o.valueSpec,f=o.styleSpec;return o.validateSpec=Es,c.expression&&Er(Rr(i))?Ru(o):c.expression&&Eu(Bo(i))?Vo(o):c.type&&Mp[c.type]?Mp[c.type](o):Yi(fi({},o,{valueSpec:c.type?f[c.type]:c}))}function Lp(o){const i=o.value,c=o.key,f=ts(o);return f.length||(i.indexOf("{fontstack}")===-1&&f.push(new ft(c,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&f.push(new ft(c,i,'"glyphs" url must include a "{range}" token'))),f}function Ta(o,i=Ce){let c=[];return c=c.concat(Es({key:"",value:o,valueSpec:i.$root,styleSpec:i,style:o,validateSpec:Es,objectElementValidators:{glyphs:Lp,"*":()=>[]}})),o.constants&&(c=c.concat(kp({key:"constants",value:o.constants,style:o,styleSpec:i,validateSpec:Es}))),Ou(c)}function Is(o){return function(i){return o({...i,validateSpec:Es})}}function Ou(o){return[].concat(o).sort((i,c)=>i.line-c.line)}function Ps(o){return function(...i){return Ou(o.apply(this,i))}}Ta.source=Ps(Is(da)),Ta.sprite=Ps(Is(Dp)),Ta.glyphs=Ps(Is(Lp)),Ta.light=Ps(Is(Sc)),Ta.terrain=Ps(Is(Pp)),Ta.layer=Ps(Is(Ip)),Ta.filter=Ps(Is(Il)),Ta.paintProperty=Ps(Is(Ap)),Ta.layoutProperty=Ps(Is(Ep));const Ds=Ta,Zv=Ds.light,dh=Ds.paintProperty,Rp=Ds.layoutProperty;function zu(o,i){let c=!1;if(i&&i.length)for(const f of i)o.fire(new dt(new Error(f.message))),c=!0;return c}class Pl{constructor(i,c,f){const m=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const w=new Int32Array(this.arrayBuffer);i=w[0],this.d=(c=w[1])+2*(f=w[2]);for(let P=0;P<this.d*this.d;P++){const L=w[3+P],B=w[3+P+1];m.push(L===B?null:w.subarray(L,B))}const T=w[3+m.length+1];this.keys=w.subarray(w[3+m.length],T),this.bboxes=w.subarray(T),this.insert=this._insertReadonly}else{this.d=c+2*f;for(let w=0;w<this.d*this.d;w++)m.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=i,this.padding=f,this.scale=c/i,this.uid=0;const b=f/c*i;this.min=-b,this.max=i+b}insert(i,c,f,m,b){this._forEachCell(c,f,m,b,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(c),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(b)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,c,f,m,b,w){this.cells[b].push(w)}query(i,c,f,m,b){const w=this.min,T=this.max;if(i<=w&&c<=w&&T<=f&&T<=m&&!b)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(i,c,f,m,this._queryCell,P,{},b),P}}_queryCell(i,c,f,m,b,w,T,P){const L=this.cells[b];if(L!==null){const B=this.keys,U=this.bboxes;for(let G=0;G<L.length;G++){const K=L[G];if(T[K]===void 0){const J=4*K;(P?P(U[J+0],U[J+1],U[J+2],U[J+3]):i<=U[J+2]&&c<=U[J+3]&&f>=U[J+0]&&m>=U[J+1])?(T[K]=!0,w.push(B[K])):T[K]=!1}}}}_forEachCell(i,c,f,m,b,w,T,P){const L=this._convertToCellCoord(i),B=this._convertToCellCoord(c),U=this._convertToCellCoord(f),G=this._convertToCellCoord(m);for(let K=L;K<=U;K++)for(let J=B;J<=G;J++){const ce=this.d*J+K;if((!P||P(this._convertFromCellCoord(K),this._convertFromCellCoord(J),this._convertFromCellCoord(K+1),this._convertFromCellCoord(J+1)))&&b.call(this,i,c,f,m,ce,w,T,P))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,c=3+this.cells.length+1+1;let f=0;for(let w=0;w<this.cells.length;w++)f+=this.cells[w].length;const m=new Int32Array(c+f+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let b=c;for(let w=0;w<i.length;w++){const T=i[w];m[3+w]=b,m.set(T,b),b+=T.length}return m[3+i.length]=b,m.set(this.keys,b),b+=this.keys.length,m[3+i.length+1]=b,m.set(this.bboxes,b),b+=this.bboxes.length,m.buffer}static serialize(i,c){const f=i.toArrayBuffer();return c&&c.push(f),{buffer:f}}static deserialize(i){return new Pl(i.buffer)}}const Ms={};function $t(o,i,c={}){if(Ms[o])throw new Error(`${o} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:o,writeable:!1}),Ms[o]={klass:i,omit:c.omit||[],shallow:c.shallow||[]}}$t("Object",Object),$t("TransferableGridIndex",Pl),$t("Color",Xn),$t("Error",Error),$t("AJAXError",at),$t("ResolvedImage",yi),$t("StylePropertyFunction",gc),$t("StyleExpression",sh,{omit:["_evaluator"]}),$t("ZoomDependentExpression",Pu),$t("ZoomConstantExpression",oh),$t("CompoundExpression",Ca,{omit:["_evaluate"]});for(const o in Tl)Tl[o]._classRegistryKey||$t(`Expression_${o}`,Tl[o]);function Fu(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function no(o,i){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(Fu(o)||Pe(o))return i&&i.push(o),o;if(ArrayBuffer.isView(o)){const c=o;return i&&i.push(c.buffer),c}if(o instanceof ImageData)return i&&i.push(o.data.buffer),o;if(Array.isArray(o)){const c=[];for(const f of o)c.push(no(f,i));return c}if(typeof o=="object"){const c=o.constructor,f=c._classRegistryKey;if(!f)throw new Error("can't serialize object of unregistered class");if(!Ms[f])throw new Error(`${f} is not registered.`);const m=c.serialize?c.serialize(o,i):{};if(c.serialize){if(i&&m===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const b in o){if(!o.hasOwnProperty(b)||Ms[f].omit.indexOf(b)>=0)continue;const w=o[b];m[b]=Ms[f].shallow.indexOf(b)>=0?w:no(w,i)}o instanceof Error&&(m.message=o.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(m.$name=f),m}throw new Error("can't serialize object of type "+typeof o)}function Dl(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||Fu(o)||Pe(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Dl);if(typeof o=="object"){const i=o.$name||"Object";if(!Ms[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:c}=Ms[i];if(!c)throw new Error(`can't deserialize unregistered class ${i}`);if(c.deserialize)return c.deserialize(o);const f=Object.create(c.prototype);for(const m of Object.keys(o)){if(m==="$name")continue;const b=o[m];f[m]=Ms[i].shallow.indexOf(m)>=0?b:Dl(b)}return f}throw new Error("can't deserialize object of type "+typeof o)}class Op{constructor(){this.first=!0}update(i,c){const f=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=c),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=f,!0))}}const Vt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function hh(o){for(const i of o)if(ph(i.charCodeAt(0)))return!0;return!1}function fh(o){for(const i of o)if(!Kv(i.charCodeAt(0)))return!1;return!0}function Kv(o){return!(Vt.Arabic(o)||Vt["Arabic Supplement"](o)||Vt["Arabic Extended-A"](o)||Vt["Arabic Presentation Forms-A"](o)||Vt["Arabic Presentation Forms-B"](o))}function ph(o){return!(o!==746&&o!==747&&(o<4352||!(Vt["Bopomofo Extended"](o)||Vt.Bopomofo(o)||Vt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Vt["CJK Compatibility Ideographs"](o)||Vt["CJK Compatibility"](o)||Vt["CJK Radicals Supplement"](o)||Vt["CJK Strokes"](o)||!(!Vt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Vt["CJK Unified Ideographs Extension A"](o)||Vt["CJK Unified Ideographs"](o)||Vt["Enclosed CJK Letters and Months"](o)||Vt["Hangul Compatibility Jamo"](o)||Vt["Hangul Jamo Extended-A"](o)||Vt["Hangul Jamo Extended-B"](o)||Vt["Hangul Jamo"](o)||Vt["Hangul Syllables"](o)||Vt.Hiragana(o)||Vt["Ideographic Description Characters"](o)||Vt.Kanbun(o)||Vt["Kangxi Radicals"](o)||Vt["Katakana Phonetic Extensions"](o)||Vt.Katakana(o)&&o!==12540||!(!Vt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Vt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Vt["Unified Canadian Aboriginal Syllabics"](o)||Vt["Unified Canadian Aboriginal Syllabics Extended"](o)||Vt["Vertical Forms"](o)||Vt["Yijing Hexagram Symbols"](o)||Vt["Yi Syllables"](o)||Vt["Yi Radicals"](o))))}function zp(o){return!(ph(o)||function(i){return!!(Vt["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||Vt["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||Vt["Letterlike Symbols"](i)||Vt["Number Forms"](i)||Vt["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||Vt["Control Pictures"](i)&&i!==9251||Vt["Optical Character Recognition"](i)||Vt["Enclosed Alphanumerics"](i)||Vt["Geometric Shapes"](i)||Vt["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||Vt["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||Vt["CJK Symbols and Punctuation"](i)||Vt.Katakana(i)||Vt["Private Use Area"](i)||Vt["CJK Compatibility Forms"](i)||Vt["Small Form Variants"](i)||Vt["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(o))}function Fp(o){return o>=1424&&o<=2303||Vt["Arabic Presentation Forms-A"](o)||Vt["Arabic Presentation Forms-B"](o)}function Bp(o,i){return!(!i&&Fp(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Vt.Khmer(o))}function Xv(o){for(const i of o)if(Fp(i.charCodeAt(0)))return!0;return!1}const mh="deferred",gh="loading",vh="loaded";let yh=null,Zi="unavailable",ro=null;const kc=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Zi="error"),yh&&yh(o)};function _h(){Cc.fire(new Ke("pluginStateChange",{pluginStatus:Zi,pluginURL:ro}))}const Cc=new gt,bh=function(){return Zi},Vp=function(){if(Zi!==mh||!ro)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Zi=gh,_h(),ro&&re({url:ro},o=>{o?kc(o):(Zi=vh,_h())})},ha={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Zi===vh||ha.applyArabicShaping!=null,isLoading:()=>Zi===gh,setState(o){if(!$e())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Zi=o.pluginStatus,ro=o.pluginURL},isParsed(){if(!$e())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ha.applyArabicShaping!=null&&ha.processBidirectionalText!=null&&ha.processStyledBidirectionalText!=null},getPluginURL(){if(!$e())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return ro}};class mr{constructor(i,c){this.zoom=i,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Op,this.transition={})}isSupportedScript(i){return function(c,f){for(const m of c)if(!Bp(m.charCodeAt(0),f))return!1;return!0}(i,ha.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,c=i-Math.floor(i),f=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*c}}}class Bu{constructor(i,c){this.property=i,this.value=c,this.expression=function(f,m){if(Er(f))return new gc(f,m);if(Eu(f)){const b=lh(f,m);if(b.result==="error")throw new Error(b.value.map(w=>`${w.key}: ${w.message}`).join(", "));return b.value}{let b=f;return m.type==="color"&&typeof f=="string"?b=Xn.parse(f):m.type!=="padding"||typeof f!="number"&&!Array.isArray(f)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(f)&&(b=Sa.parse(f)):b=la.parse(f),{kind:"constant",evaluate:()=>b}}}(c===void 0?i.specification.default:c,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,c,f){return this.property.possiblyEvaluate(this,i,c,f)}}class xh{constructor(i){this.property=i,this.value=new Bu(i,void 0)}transitioned(i,c){return new $p(this.property,this.value,c,H({},i.transition,this.transition),i.now)}untransitioned(){return new $p(this.property,this.value,null,{},0)}}class Np{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return te(this._values[i].value.value)}setValue(i,c){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new xh(this._values[i].property)),this._values[i].value=new Bu(this._values[i].property,c===null?void 0:te(c))}getTransition(i){return te(this._values[i].transition)}setTransition(i,c){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new xh(this._values[i].property)),this._values[i].transition=te(c)||void 0}serialize(){const i={};for(const c of Object.keys(this._values)){const f=this.getValue(c);f!==void 0&&(i[c]=f);const m=this.getTransition(c);m!==void 0&&(i[`${c}-transition`]=m)}return i}transitioned(i,c){const f=new Up(this._properties);for(const m of Object.keys(this._values))f._values[m]=this._values[m].transitioned(i,c._values[m]);return f}untransitioned(){const i=new Up(this._properties);for(const c of Object.keys(this._values))i._values[c]=this._values[c].untransitioned();return i}}class $p{constructor(i,c,f,m,b){this.property=i,this.value=c,this.begin=b+m.delay||0,this.end=this.begin+m.duration||0,i.specification.transition&&(m.delay||m.duration)&&(this.prior=f)}possiblyEvaluate(i,c,f){const m=i.now||0,b=this.value.possiblyEvaluate(i,c,f),w=this.prior;if(w){if(m>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(m<this.begin)return w.possiblyEvaluate(i,c,f);{const T=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(i,c,f),b,function(P){if(P<=0)return 0;if(P>=1)return 1;const L=P*P,B=L*P;return 4*(P<.5?B:3*(P-L)+B-.75)}(T))}}return b}}class Up{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,c,f){const m=new Vu(this._properties);for(const b of Object.keys(this._values))m._values[b]=this._values[b].possiblyEvaluate(i,c,f);return m}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class Jv{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}hasValue(i){return this._values[i].value!==void 0}getValue(i){return te(this._values[i].value)}setValue(i,c){this._values[i]=new Bu(this._values[i].property,c===null?void 0:te(c))}serialize(){const i={};for(const c of Object.keys(this._values)){const f=this.getValue(c);f!==void 0&&(i[c]=f)}return i}possiblyEvaluate(i,c,f){const m=new Vu(this._properties);for(const b of Object.keys(this._values))m._values[b]=this._values[b].possiblyEvaluate(i,c,f);return m}}class Oi{constructor(i,c,f){this.property=i,this.value=c,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,c,f,m){return this.property.evaluate(this.value,this.parameters,i,c,f,m)}}class Vu{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Kt{constructor(i){this.specification=i}possiblyEvaluate(i,c){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(c)}interpolate(i,c,f){const m=ca[this.specification.type];return m?m(i,c,f):i}}class sn{constructor(i,c){this.specification=i,this.overrides=c}possiblyEvaluate(i,c,f,m){return new Oi(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(c,null,{},f,m)}:i.expression,c)}interpolate(i,c,f){if(i.value.kind!=="constant"||c.value.kind!=="constant")return i;if(i.value.value===void 0||c.value.value===void 0)return new Oi(this,{kind:"constant",value:void 0},i.parameters);const m=ca[this.specification.type];if(m){const b=m(i.value.value,c.value.value,f);return new Oi(this,{kind:"constant",value:b},i.parameters)}return i}evaluate(i,c,f,m,b,w){return i.kind==="constant"?i.value:i.evaluate(c,f,m,b,w)}}class Tc extends sn{possiblyEvaluate(i,c,f,m){if(i.value===void 0)return new Oi(this,{kind:"constant",value:void 0},c);if(i.expression.kind==="constant"){const b=i.expression.evaluate(c,null,{},f,m),w=i.property.specification.type==="resolvedImage"&&typeof b!="string"?b.name:b,T=this._calculate(w,w,w,c);return new Oi(this,{kind:"constant",value:T},c)}if(i.expression.kind==="camera"){const b=this._calculate(i.expression.evaluate({zoom:c.zoom-1}),i.expression.evaluate({zoom:c.zoom}),i.expression.evaluate({zoom:c.zoom+1}),c);return new Oi(this,{kind:"constant",value:b},c)}return new Oi(this,i.expression,c)}evaluate(i,c,f,m,b,w){if(i.kind==="source"){const T=i.evaluate(c,f,m,b,w);return this._calculate(T,T,T,c)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(c.zoom)-1},f,m),i.evaluate({zoom:Math.floor(c.zoom)},f,m),i.evaluate({zoom:Math.floor(c.zoom)+1},f,m),c):i.value}_calculate(i,c,f,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:i,to:c}:{from:f,to:c}}interpolate(i){return i}}class wh{constructor(i){this.specification=i}possiblyEvaluate(i,c,f,m){if(i.value!==void 0){if(i.expression.kind==="constant"){const b=i.expression.evaluate(c,null,{},f,m);return this._calculate(b,b,b,c)}return this._calculate(i.expression.evaluate(new mr(Math.floor(c.zoom-1),c)),i.expression.evaluate(new mr(Math.floor(c.zoom),c)),i.expression.evaluate(new mr(Math.floor(c.zoom+1),c)),c)}}_calculate(i,c,f,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:i,to:c}:{from:f,to:c}}interpolate(i){return i}}class Sh{constructor(i){this.specification=i}possiblyEvaluate(i,c,f,m){return!!i.expression.evaluate(c,null,{},f,m)}interpolate(){return!1}}class Gr{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const c in i){const f=i[c];f.specification.overridable&&this.overridableProperties.push(c);const m=this.defaultPropertyValues[c]=new Bu(f,void 0),b=this.defaultTransitionablePropertyValues[c]=new xh(f);this.defaultTransitioningPropertyValues[c]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=m.possiblyEvaluate({})}}}$t("DataDrivenProperty",sn),$t("DataConstantProperty",Kt),$t("CrossFadedDataDrivenProperty",Tc),$t("CrossFadedProperty",wh),$t("ColorRampProperty",Sh);const kh="-transition";class Aa extends gt{constructor(i,c){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),c.layout&&(this._unevaluatedLayout=new Jv(c.layout)),c.paint)){this._transitionablePaint=new Np(c.paint);for(const f in i.paint)this.setPaintProperty(f,i.paint[f],{validate:!1});for(const f in i.layout)this.setLayoutProperty(f,i.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Vu(c.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,c,f={}){c!=null&&this._validate(Rp,`layers.${this.id}.layout.${i}`,i,c,f)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,c):this.visibility=c)}getPaintProperty(i){return i.endsWith(kh)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,c,f={}){if(c!=null&&this._validate(dh,`layers.${this.id}.paint.${i}`,i,c,f))return!1;if(i.endsWith(kh))return this._transitionablePaint.setTransition(i.slice(0,-11),c||void 0),!1;{const m=this._transitionablePaint._values[i],b=m.property.specification["property-type"]==="cross-faded-data-driven",w=m.value.isDataDriven(),T=m.value;this._transitionablePaint.setValue(i,c),this._handleSpecialPaintPropertyUpdate(i);const P=this._transitionablePaint._values[i].value;return P.isDataDriven()||w||b||this._handleOverridablePaintPropertyUpdate(i,T,P)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,c,f){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,c){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,c)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),_e(i,(c,f)=>!(c===void 0||f==="layout"&&!Object.keys(c).length||f==="paint"&&!Object.keys(c).length))}_validate(i,c,f,m,b={}){return(!b||b.validate!==!1)&&zu(this,i.call(Ds,{key:c,layerType:this.type,objectKey:f,value:m,styleSpec:Ce,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const c=this.paint.get(i);if(c instanceof Oi&&Al(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}}const qp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class No{constructor(i,c){this._structArray=i,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Or{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,c){return i._trim(),c&&(i.isTransferred=!0,c.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const c=Object.create(this.prototype);return c.arrayBuffer=i.arrayBuffer,c.length=i.length,c.capacity=i.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Pr(o,i=1){let c=0,f=0;return{members:o.map(m=>{const b=qp[m.type].BYTES_PER_ELEMENT,w=c=Ml(c,Math.max(i,b)),T=m.components||1;return f=Math.max(f,b),c+=b*T,{name:m.name,type:m.type,components:T,offset:w}}),size:Ml(c,Math.max(f,i)),alignment:i}}function Ml(o,i){return Math.ceil(o/i)*i}class Ac extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,c){const f=this.length;return this.resize(f+1),this.emplace(f,i,c)}emplace(i,c,f){const m=2*i;return this.int16[m+0]=c,this.int16[m+1]=f,i}}Ac.prototype.bytesPerElement=4,$t("StructArrayLayout2i4",Ac);class Ec extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,c,f){const m=this.length;return this.resize(m+1),this.emplace(m,i,c,f)}emplace(i,c,f,m){const b=3*i;return this.int16[b+0]=c,this.int16[b+1]=f,this.int16[b+2]=m,i}}Ec.prototype.bytesPerElement=6,$t("StructArrayLayout3i6",Ec);class $o extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,c,f,m){const b=this.length;return this.resize(b+1),this.emplace(b,i,c,f,m)}emplace(i,c,f,m,b){const w=4*i;return this.int16[w+0]=c,this.int16[w+1]=f,this.int16[w+2]=m,this.int16[w+3]=b,i}}$o.prototype.bytesPerElement=8,$t("StructArrayLayout4i8",$o);class Ch extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,c,f,m,b,w){const T=this.length;return this.resize(T+1),this.emplace(T,i,c,f,m,b,w)}emplace(i,c,f,m,b,w,T){const P=6*i;return this.int16[P+0]=c,this.int16[P+1]=f,this.int16[P+2]=m,this.int16[P+3]=b,this.int16[P+4]=w,this.int16[P+5]=T,i}}Ch.prototype.bytesPerElement=12,$t("StructArrayLayout2i4i12",Ch);class Th extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,c,f,m,b,w){const T=this.length;return this.resize(T+1),this.emplace(T,i,c,f,m,b,w)}emplace(i,c,f,m,b,w,T){const P=4*i,L=8*i;return this.int16[P+0]=c,this.int16[P+1]=f,this.uint8[L+4]=m,this.uint8[L+5]=b,this.uint8[L+6]=w,this.uint8[L+7]=T,i}}Th.prototype.bytesPerElement=8,$t("StructArrayLayout2i4ub8",Th);class Ll extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,c){const f=this.length;return this.resize(f+1),this.emplace(f,i,c)}emplace(i,c,f){const m=2*i;return this.float32[m+0]=c,this.float32[m+1]=f,i}}Ll.prototype.bytesPerElement=8,$t("StructArrayLayout2f8",Ll);class Ah extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,c,f,m,b,w,T,P,L,B){const U=this.length;return this.resize(U+1),this.emplace(U,i,c,f,m,b,w,T,P,L,B)}emplace(i,c,f,m,b,w,T,P,L,B,U){const G=10*i;return this.uint16[G+0]=c,this.uint16[G+1]=f,this.uint16[G+2]=m,this.uint16[G+3]=b,this.uint16[G+4]=w,this.uint16[G+5]=T,this.uint16[G+6]=P,this.uint16[G+7]=L,this.uint16[G+8]=B,this.uint16[G+9]=U,i}}Ah.prototype.bytesPerElement=20,$t("StructArrayLayout10ui20",Ah);class Eh extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,c,f,m,b,w,T,P,L,B,U,G){const K=this.length;return this.resize(K+1),this.emplace(K,i,c,f,m,b,w,T,P,L,B,U,G)}emplace(i,c,f,m,b,w,T,P,L,B,U,G,K){const J=12*i;return this.int16[J+0]=c,this.int16[J+1]=f,this.int16[J+2]=m,this.int16[J+3]=b,this.uint16[J+4]=w,this.uint16[J+5]=T,this.uint16[J+6]=P,this.uint16[J+7]=L,this.int16[J+8]=B,this.int16[J+9]=U,this.int16[J+10]=G,this.int16[J+11]=K,i}}Eh.prototype.bytesPerElement=24,$t("StructArrayLayout4i4ui4i24",Eh);class Hn extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,c,f){const m=this.length;return this.resize(m+1),this.emplace(m,i,c,f)}emplace(i,c,f,m){const b=3*i;return this.float32[b+0]=c,this.float32[b+1]=f,this.float32[b+2]=m,i}}Hn.prototype.bytesPerElement=12,$t("StructArrayLayout3f12",Hn);class y extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const c=this.length;return this.resize(c+1),this.emplace(c,i)}emplace(i,c){return this.uint32[1*i+0]=c,i}}y.prototype.bytesPerElement=4,$t("StructArrayLayout1ul4",y);class a extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,c,f,m,b,w,T,P,L){const B=this.length;return this.resize(B+1),this.emplace(B,i,c,f,m,b,w,T,P,L)}emplace(i,c,f,m,b,w,T,P,L,B){const U=10*i,G=5*i;return this.int16[U+0]=c,this.int16[U+1]=f,this.int16[U+2]=m,this.int16[U+3]=b,this.int16[U+4]=w,this.int16[U+5]=T,this.uint32[G+3]=P,this.uint16[U+8]=L,this.uint16[U+9]=B,i}}a.prototype.bytesPerElement=20,$t("StructArrayLayout6i1ul2ui20",a);class d extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,c,f,m,b,w){const T=this.length;return this.resize(T+1),this.emplace(T,i,c,f,m,b,w)}emplace(i,c,f,m,b,w,T){const P=6*i;return this.int16[P+0]=c,this.int16[P+1]=f,this.int16[P+2]=m,this.int16[P+3]=b,this.int16[P+4]=w,this.int16[P+5]=T,i}}d.prototype.bytesPerElement=12,$t("StructArrayLayout2i2i2i12",d);class p extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,c,f,m,b){const w=this.length;return this.resize(w+1),this.emplace(w,i,c,f,m,b)}emplace(i,c,f,m,b,w){const T=4*i,P=8*i;return this.float32[T+0]=c,this.float32[T+1]=f,this.float32[T+2]=m,this.int16[P+6]=b,this.int16[P+7]=w,i}}p.prototype.bytesPerElement=16,$t("StructArrayLayout2f1f2i16",p);class g extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,c,f,m){const b=this.length;return this.resize(b+1),this.emplace(b,i,c,f,m)}emplace(i,c,f,m,b){const w=12*i,T=3*i;return this.uint8[w+0]=c,this.uint8[w+1]=f,this.float32[T+1]=m,this.float32[T+2]=b,i}}g.prototype.bytesPerElement=12,$t("StructArrayLayout2ub2f12",g);class x extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,c,f){const m=this.length;return this.resize(m+1),this.emplace(m,i,c,f)}emplace(i,c,f,m){const b=3*i;return this.uint16[b+0]=c,this.uint16[b+1]=f,this.uint16[b+2]=m,i}}x.prototype.bytesPerElement=6,$t("StructArrayLayout3ui6",x);class A extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,c,f,m,b,w,T,P,L,B,U,G,K,J,ce,ve,xe){const Le=this.length;return this.resize(Le+1),this.emplace(Le,i,c,f,m,b,w,T,P,L,B,U,G,K,J,ce,ve,xe)}emplace(i,c,f,m,b,w,T,P,L,B,U,G,K,J,ce,ve,xe,Le){const Te=24*i,Oe=12*i,je=48*i;return this.int16[Te+0]=c,this.int16[Te+1]=f,this.uint16[Te+2]=m,this.uint16[Te+3]=b,this.uint32[Oe+2]=w,this.uint32[Oe+3]=T,this.uint32[Oe+4]=P,this.uint16[Te+10]=L,this.uint16[Te+11]=B,this.uint16[Te+12]=U,this.float32[Oe+7]=G,this.float32[Oe+8]=K,this.uint8[je+36]=J,this.uint8[je+37]=ce,this.uint8[je+38]=ve,this.uint32[Oe+10]=xe,this.int16[Te+22]=Le,i}}A.prototype.bytesPerElement=48,$t("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",A);class I extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,c,f,m,b,w,T,P,L,B,U,G,K,J,ce,ve,xe,Le,Te,Oe,je,it,Nt,Wt,Ft,Rt,Pt,qt){const Dt=this.length;return this.resize(Dt+1),this.emplace(Dt,i,c,f,m,b,w,T,P,L,B,U,G,K,J,ce,ve,xe,Le,Te,Oe,je,it,Nt,Wt,Ft,Rt,Pt,qt)}emplace(i,c,f,m,b,w,T,P,L,B,U,G,K,J,ce,ve,xe,Le,Te,Oe,je,it,Nt,Wt,Ft,Rt,Pt,qt,Dt){const vt=32*i,en=16*i;return this.int16[vt+0]=c,this.int16[vt+1]=f,this.int16[vt+2]=m,this.int16[vt+3]=b,this.int16[vt+4]=w,this.int16[vt+5]=T,this.int16[vt+6]=P,this.int16[vt+7]=L,this.uint16[vt+8]=B,this.uint16[vt+9]=U,this.uint16[vt+10]=G,this.uint16[vt+11]=K,this.uint16[vt+12]=J,this.uint16[vt+13]=ce,this.uint16[vt+14]=ve,this.uint16[vt+15]=xe,this.uint16[vt+16]=Le,this.uint16[vt+17]=Te,this.uint16[vt+18]=Oe,this.uint16[vt+19]=je,this.uint16[vt+20]=it,this.uint16[vt+21]=Nt,this.uint16[vt+22]=Wt,this.uint32[en+12]=Ft,this.float32[en+13]=Rt,this.float32[en+14]=Pt,this.uint16[vt+30]=qt,this.uint16[vt+31]=Dt,i}}I.prototype.bytesPerElement=64,$t("StructArrayLayout8i15ui1ul2f2ui64",I);class M extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const c=this.length;return this.resize(c+1),this.emplace(c,i)}emplace(i,c){return this.float32[1*i+0]=c,i}}M.prototype.bytesPerElement=4,$t("StructArrayLayout1f4",M);class z extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,c,f){const m=this.length;return this.resize(m+1),this.emplace(m,i,c,f)}emplace(i,c,f,m){const b=3*i;return this.uint16[6*i+0]=c,this.float32[b+1]=f,this.float32[b+2]=m,i}}z.prototype.bytesPerElement=12,$t("StructArrayLayout1ui2f12",z);class V extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,c,f){const m=this.length;return this.resize(m+1),this.emplace(m,i,c,f)}emplace(i,c,f,m){const b=4*i;return this.uint32[2*i+0]=c,this.uint16[b+2]=f,this.uint16[b+3]=m,i}}V.prototype.bytesPerElement=8,$t("StructArrayLayout1ul2ui8",V);class $ extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,c){const f=this.length;return this.resize(f+1),this.emplace(f,i,c)}emplace(i,c,f){const m=2*i;return this.uint16[m+0]=c,this.uint16[m+1]=f,i}}$.prototype.bytesPerElement=4,$t("StructArrayLayout2ui4",$);class Y extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const c=this.length;return this.resize(c+1),this.emplace(c,i)}emplace(i,c){return this.uint16[1*i+0]=c,i}}Y.prototype.bytesPerElement=2,$t("StructArrayLayout1ui2",Y);class de extends Or{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,c,f,m){const b=this.length;return this.resize(b+1),this.emplace(b,i,c,f,m)}emplace(i,c,f,m,b){const w=4*i;return this.float32[w+0]=c,this.float32[w+1]=f,this.float32[w+2]=m,this.float32[w+3]=b,i}}de.prototype.bytesPerElement=16,$t("StructArrayLayout4f16",de);class ue extends No{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new k(this.anchorPointX,this.anchorPointY)}}ue.prototype.size=20;class pe extends a{get(i){return new ue(this,i)}}$t("CollisionBoxArray",pe);class oe extends No{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}oe.prototype.size=48;class Ee extends A{get(i){return new oe(this,i)}}$t("PlacedSymbolArray",Ee);class Ue extends No{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ue.prototype.size=64;class be extends I{get(i){return new Ue(this,i)}}$t("SymbolInstanceArray",be);class De extends M{getoffsetX(i){return this.float32[1*i+0]}}$t("GlyphOffsetArray",De);class We extends Ec{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}$t("SymbolLineVertexArray",We);class Ye extends No{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ye.prototype.size=12;class rt extends z{get(i){return new Ye(this,i)}}$t("TextAnchorOffsetArray",rt);class mt extends No{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}mt.prototype.size=8;class ct extends V{get(i){return new mt(this,i)}}$t("FeatureIndexArray",ct);class Tt extends Ac{}class Gt extends Ac{}class Pn extends Ac{}class Lt extends Ch{}class on extends Th{}class Yt extends Ll{}class Jn extends Ah{}class An extends Eh{}class _n extends Hn{}class Dn extends y{}class $r extends d{}class hr extends g{}class _i extends x{}class ri extends ${}const Wr=Pr([{name:"a_pos",components:2,type:"Int16"}],4),{members:fa}=Wr;class gr{constructor(i=[]){this.segments=i}prepareSegment(i,c,f,m){let b=this.segments[this.segments.length-1];return i>gr.MAX_VERTEX_ARRAY_LENGTH&&me(`Max vertices per segment is ${gr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!b||b.vertexLength+i>gr.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==m)&&(b={vertexOffset:c.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},m!==void 0&&(b.sortKey=m),this.segments.push(b)),b}get(){return this.segments}destroy(){for(const i of this.segments)for(const c in i.vaos)i.vaos[c].destroy()}static simpleSegment(i,c,f,m){return new gr([{vertexOffset:i,primitiveOffset:c,vertexLength:f,primitiveLength:m,vaos:{},sortKey:0}])}}function ns(o,i){return 256*(o=ie(Math.floor(o),0,255))+ie(Math.floor(i),0,255)}gr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,$t("SegmentVector",gr);const rs=Pr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var io={exports:{}},Uo={exports:{}};Uo.exports=function(o,i){var c,f,m,b,w,T,P,L;for(f=o.length-(c=3&o.length),m=i,w=3432918353,T=461845907,L=0;L<f;)P=255&o.charCodeAt(L)|(255&o.charCodeAt(++L))<<8|(255&o.charCodeAt(++L))<<16|(255&o.charCodeAt(++L))<<24,++L,m=27492+(65535&(b=5*(65535&(m=(m^=P=(65535&(P=(P=(65535&P)*w+(((P>>>16)*w&65535)<<16)&4294967295)<<15|P>>>17))*T+(((P>>>16)*T&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(b>>>16)&65535)<<16);switch(P=0,c){case 3:P^=(255&o.charCodeAt(L+2))<<16;case 2:P^=(255&o.charCodeAt(L+1))<<8;case 1:m^=P=(65535&(P=(P=(65535&(P^=255&o.charCodeAt(L)))*w+(((P>>>16)*w&65535)<<16)&4294967295)<<15|P>>>17))*T+(((P>>>16)*T&65535)<<16)&4294967295}return m^=o.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var Rl=Uo.exports,Ai={exports:{}};Ai.exports=function(o,i){for(var c,f=o.length,m=i^f,b=0;f>=4;)c=1540483477*(65535&(c=255&o.charCodeAt(b)|(255&o.charCodeAt(++b))<<8|(255&o.charCodeAt(++b))<<16|(255&o.charCodeAt(++b))<<24))+((1540483477*(c>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),f-=4,++b;switch(f){case 3:m^=(255&o.charCodeAt(b+2))<<16;case 2:m^=(255&o.charCodeAt(b+1))<<8;case 1:m=1540483477*(65535&(m^=255&o.charCodeAt(b)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var bi=Rl,zi=Ai.exports;io.exports=bi,io.exports.murmur3=bi,io.exports.murmur2=zi;var qo=_(io.exports);class Ur{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,c,f,m){this.ids.push(ii(i)),this.positions.push(c,f,m)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const c=ii(i);let f=0,m=this.ids.length-1;for(;f<m;){const w=f+m>>1;this.ids[w]>=c?m=w:f=w+1}const b=[];for(;this.ids[f]===c;)b.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return b}static serialize(i,c){const f=new Float64Array(i.ids),m=new Uint32Array(i.positions);return Ki(f,m,0,f.length-1),c&&c.push(f.buffer,m.buffer),{ids:f,positions:m}}static deserialize(i){const c=new Ur;return c.ids=i.ids,c.positions=i.positions,c.indexed=!0,c}}function ii(o){const i=+o;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:qo(String(o))}function Ki(o,i,c,f){for(;c<f;){const m=o[c+f>>1];let b=c-1,w=f+1;for(;;){do b++;while(o[b]<m);do w--;while(o[w]>m);if(b>=w)break;qr(o,b,w),qr(i,3*b,3*w),qr(i,3*b+1,3*w+1),qr(i,3*b+2,3*w+2)}w-c<f-w?(Ki(o,i,c,w),c=w+1):(Ki(o,i,w+1,f),f=w)}}function qr(o,i,c){const f=o[i];o[i]=o[c],o[c]=f}$t("FeaturePositionMap",Ur);class jo{constructor(i,c){this.gl=i.gl,this.location=c}}class Nu extends jo{constructor(i,c){super(i,c),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class jp extends jo{constructor(i,c){super(i,c),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class Hp extends jo{constructor(i,c){super(i,c),this.current=Xn.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const Qv=new Float32Array(16);function Ih(o){return[ns(255*o.r,255*o.g),ns(255*o.b,255*o.a)]}class is{constructor(i,c,f){this.value=i,this.uniformNames=c.map(m=>`u_${m}`),this.type=f}setUniform(i,c,f){i.set(f.constantOr(this.value))}getBinding(i,c,f){return this.type==="color"?new Hp(i,c):new Nu(i,c)}}class Ho{constructor(i,c){this.uniformNames=c.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=i.tlbr}setUniform(i,c,f,m){const b=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;b&&i.set(b)}getBinding(i,c,f){return f.substr(0,9)==="u_pattern"?new jp(i,c):new Nu(i,c)}}class as{constructor(i,c,f,m){this.expression=i,this.type=f,this.maxValue=0,this.paintVertexAttributes=c.map(b=>({name:`a_${b}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(i,c,f,m,b){const w=this.paintVertexArray.length,T=this.expression.evaluate(new mr(0),c,{},m,[],b);this.paintVertexArray.resize(i),this._setPaintValue(w,i,T)}updatePaintArray(i,c,f,m){const b=this.expression.evaluate({zoom:0},f,m);this._setPaintValue(i,c,b)}_setPaintValue(i,c,f){if(this.type==="color"){const m=Ih(f);for(let b=i;b<c;b++)this.paintVertexArray.emplace(b,m[0],m[1])}else{for(let m=i;m<c;m++)this.paintVertexArray.emplace(m,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ea{constructor(i,c,f,m,b,w){this.expression=i,this.uniformNames=c.map(T=>`u_${T}_t`),this.type=f,this.useIntegerZoom=m,this.zoom=b,this.maxValue=0,this.paintVertexAttributes=c.map(T=>({name:`a_${T}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(i,c,f,m,b){const w=this.expression.evaluate(new mr(this.zoom),c,{},m,[],b),T=this.expression.evaluate(new mr(this.zoom+1),c,{},m,[],b),P=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(P,i,w,T)}updatePaintArray(i,c,f,m){const b=this.expression.evaluate({zoom:this.zoom},f,m),w=this.expression.evaluate({zoom:this.zoom+1},f,m);this._setPaintValue(i,c,b,w)}_setPaintValue(i,c,f,m){if(this.type==="color"){const b=Ih(f),w=Ih(m);for(let T=i;T<c;T++)this.paintVertexArray.emplace(T,b[0],b[1],w[0],w[1])}else{for(let b=i;b<c;b++)this.paintVertexArray.emplace(b,f,m);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(m))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,c){const f=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,m=ie(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);i.set(m)}getBinding(i,c,f){return new Nu(i,c)}}class ss{constructor(i,c,f,m,b,w){this.expression=i,this.type=c,this.useIntegerZoom=f,this.zoom=m,this.layerId=w,this.zoomInPaintVertexArray=new b,this.zoomOutPaintVertexArray=new b}populatePaintArray(i,c,f){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(m,i,c.patterns&&c.patterns[this.layerId],f)}updatePaintArray(i,c,f,m,b){this._setPaintValues(i,c,f.patterns&&f.patterns[this.layerId],b)}_setPaintValues(i,c,f,m){if(!m||!f)return;const{min:b,mid:w,max:T}=f,P=m[b],L=m[w],B=m[T];if(P&&L&&B)for(let U=i;U<c;U++)this.zoomInPaintVertexArray.emplace(U,L.tl[0],L.tl[1],L.br[0],L.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],L.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(U,L.tl[0],L.tl[1],L.br[0],L.br[1],B.tl[0],B.tl[1],B.br[0],B.br[1],L.pixelRatio,B.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,rs.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,rs.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ph{constructor(i,c,f){this.binders={},this._buffers=[];const m=[];for(const b in i.paint._values){if(!f(b))continue;const w=i.paint.get(b);if(!(w instanceof Oi&&Al(w.property.specification)))continue;const T=NP(b,i.type),P=w.value,L=w.property.specification.type,B=w.property.useIntegerZoom,U=w.property.specification["property-type"],G=U==="cross-faded"||U==="cross-faded-data-driven";if(P.kind==="constant")this.binders[b]=G?new Ho(P.value,T):new is(P.value,T,L),m.push(`/u_${b}`);else if(P.kind==="source"||G){const K=Vx(b,L,"source");this.binders[b]=G?new ss(P,L,B,c,K,i.id):new as(P,T,L,K),m.push(`/a_${b}`)}else{const K=Vx(b,L,"composite");this.binders[b]=new Ea(P,T,L,B,c,K),m.push(`/z_${b}`)}}this.cacheKey=m.sort().join("")}getMaxValue(i){const c=this.binders[i];return c instanceof as||c instanceof Ea?c.maxValue:0}populatePaintArrays(i,c,f,m,b){for(const w in this.binders){const T=this.binders[w];(T instanceof as||T instanceof Ea||T instanceof ss)&&T.populatePaintArray(i,c,f,m,b)}}setConstantPatternPositions(i,c){for(const f in this.binders){const m=this.binders[f];m instanceof Ho&&m.setConstantPatternPositions(i,c)}}updatePaintArrays(i,c,f,m,b){let w=!1;for(const T in i){const P=c.getPositions(T);for(const L of P){const B=f.feature(L.index);for(const U in this.binders){const G=this.binders[U];if((G instanceof as||G instanceof Ea||G instanceof ss)&&G.expression.isStateDependent===!0){const K=m.paint.get(U);G.expression=K.value,G.updatePaintArray(L.start,L.end,B,i[T],b),w=!0}}}}return w}defines(){const i=[];for(const c in this.binders){const f=this.binders[c];(f instanceof is||f instanceof Ho)&&i.push(...f.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return i}getBinderAttributes(){const i=[];for(const c in this.binders){const f=this.binders[c];if(f instanceof as||f instanceof Ea)for(let m=0;m<f.paintVertexAttributes.length;m++)i.push(f.paintVertexAttributes[m].name);else if(f instanceof ss)for(let m=0;m<rs.members.length;m++)i.push(rs.members[m].name)}return i}getBinderUniforms(){const i=[];for(const c in this.binders){const f=this.binders[c];if(f instanceof is||f instanceof Ho||f instanceof Ea)for(const m of f.uniformNames)i.push(m)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,c){const f=[];for(const m in this.binders){const b=this.binders[m];if(b instanceof is||b instanceof Ho||b instanceof Ea){for(const w of b.uniformNames)if(c[w]){const T=b.getBinding(i,c[w],w);f.push({name:w,property:m,binding:T})}}}return f}setUniforms(i,c,f,m){for(const{name:b,property:w,binding:T}of c)this.binders[w].setUniform(T,m,f.get(w),b)}updatePaintBuffers(i){this._buffers=[];for(const c in this.binders){const f=this.binders[c];if(i&&f instanceof ss){const m=i.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(f instanceof as||f instanceof Ea)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(i){for(const c in this.binders){const f=this.binders[c];(f instanceof as||f instanceof Ea||f instanceof ss)&&f.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const c=this.binders[i];(c instanceof as||c instanceof Ea||c instanceof ss)&&c.destroy()}}}class Ls{constructor(i,c,f=()=>!0){this.programConfigurations={};for(const m of i)this.programConfigurations[m.id]=new Ph(m,c,f);this.needsUpload=!1,this._featureMap=new Ur,this._bufferOffset=0}populatePaintArrays(i,c,f,m,b,w){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(i,c,m,b,w);c.id!==void 0&&this._featureMap.add(c.id,f,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,c,f,m){for(const b of f)this.needsUpload=this.programConfigurations[b.id].updatePaintArrays(i,this._featureMap,c,b,m)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function NP(o,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${i}-`,"").replace(/-/g,"_")]}function Vx(o,i,c){const f={color:{source:Ll,composite:de},number:{source:M,composite:Ll}},m=function(b){return{"line-pattern":{source:Jn,composite:Jn},"fill-pattern":{source:Jn,composite:Jn},"fill-extrusion-pattern":{source:Jn,composite:Jn}}[b]}(o);return m&&m[c]||f[i][c]}$t("ConstantBinder",is),$t("CrossFadedConstantBinder",Ho),$t("SourceExpressionBinder",as),$t("CrossFadedCompositeBinder",ss),$t("CompositeExpressionBinder",Ea),$t("ProgramConfiguration",Ph,{omit:["_buffers"]}),$t("ProgramConfigurationSet",Ls);const Jr=8192,ey=Math.pow(2,14)-1,Nx=-ey-1;function Ic(o){const i=Jr/o.extent,c=o.loadGeometry();for(let f=0;f<c.length;f++){const m=c[f];for(let b=0;b<m.length;b++){const w=m[b],T=Math.round(w.x*i),P=Math.round(w.y*i);w.x=ie(T,Nx,ey),w.y=ie(P,Nx,ey),(T<w.x||T>w.x+1||P<w.y||P>w.y+1)&&me("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function Pc(o,i){return{type:o.type,id:o.id,properties:o.properties,geometry:i?Ic(o):[]}}function Gp(o,i,c,f,m){o.emplaceBack(2*i+(f+1)/2,2*c+(m+1)/2)}class ty{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(c=>c.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new Gt,this.indexArray=new _i,this.segments=new gr,this.programConfigurations=new Ls(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(i,c,f){const m=this.layers[0],b=[];let w=null,T=!1;m.type==="circle"&&(w=m.layout.get("circle-sort-key"),T=!w.isConstant());for(const{feature:P,id:L,index:B,sourceLayerIndex:U}of i){const G=this.layers[0]._featureFilter.needGeometry,K=Pc(P,G);if(!this.layers[0]._featureFilter.filter(new mr(this.zoom),K,f))continue;const J=T?w.evaluate(K,{},f):void 0,ce={id:L,properties:P.properties,type:P.type,sourceLayerIndex:U,index:B,geometry:G?K.geometry:Ic(P),patterns:{},sortKey:J};b.push(ce)}T&&b.sort((P,L)=>P.sortKey-L.sortKey);for(const P of b){const{geometry:L,index:B,sourceLayerIndex:U}=P,G=i[B].feature;this.addFeature(P,L,B,f),c.featureIndex.insert(G,L,B,U,this.index)}}update(i,c,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,c,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,fa),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,c,f,m){for(const b of c)for(const w of b){const T=w.x,P=w.y;if(T<0||T>=Jr||P<0||P>=Jr)continue;const L=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),B=L.vertexLength;Gp(this.layoutVertexArray,T,P,-1,-1),Gp(this.layoutVertexArray,T,P,1,-1),Gp(this.layoutVertexArray,T,P,1,1),Gp(this.layoutVertexArray,T,P,-1,1),this.indexArray.emplaceBack(B,B+1,B+2),this.indexArray.emplaceBack(B,B+3,B+2),L.vertexLength+=4,L.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,{},m)}}function $x(o,i){for(let c=0;c<o.length;c++)if($u(i,o[c]))return!0;for(let c=0;c<i.length;c++)if($u(o,i[c]))return!0;return!!ny(o,i)}function $P(o,i,c){return!!$u(o,i)||!!ry(i,o,c)}function Ux(o,i){if(o.length===1)return jx(i,o[0]);for(let c=0;c<i.length;c++){const f=i[c];for(let m=0;m<f.length;m++)if($u(o,f[m]))return!0}for(let c=0;c<o.length;c++)if(jx(i,o[c]))return!0;for(let c=0;c<i.length;c++)if(ny(o,i[c]))return!0;return!1}function UP(o,i,c){if(o.length>1){if(ny(o,i))return!0;for(let f=0;f<i.length;f++)if(ry(i[f],o,c))return!0}for(let f=0;f<o.length;f++)if(ry(o[f],i,c))return!0;return!1}function ny(o,i){if(o.length===0||i.length===0)return!1;for(let c=0;c<o.length-1;c++){const f=o[c],m=o[c+1];for(let b=0;b<i.length-1;b++)if(qP(f,m,i[b],i[b+1]))return!0}return!1}function qP(o,i,c,f){return Ve(o,c,f)!==Ve(i,c,f)&&Ve(o,i,c)!==Ve(o,i,f)}function ry(o,i,c){const f=c*c;if(i.length===1)return o.distSqr(i[0])<f;for(let m=1;m<i.length;m++)if(qx(o,i[m-1],i[m])<f)return!0;return!1}function qx(o,i,c){const f=i.distSqr(c);if(f===0)return o.distSqr(i);const m=((o.x-i.x)*(c.x-i.x)+(o.y-i.y)*(c.y-i.y))/f;return o.distSqr(m<0?i:m>1?c:c.sub(i)._mult(m)._add(i))}function jx(o,i){let c,f,m,b=!1;for(let w=0;w<o.length;w++){c=o[w];for(let T=0,P=c.length-1;T<c.length;P=T++)f=c[T],m=c[P],f.y>i.y!=m.y>i.y&&i.x<(m.x-f.x)*(i.y-f.y)/(m.y-f.y)+f.x&&(b=!b)}return b}function $u(o,i){let c=!1;for(let f=0,m=o.length-1;f<o.length;m=f++){const b=o[f],w=o[m];b.y>i.y!=w.y>i.y&&i.x<(w.x-b.x)*(i.y-b.y)/(w.y-b.y)+b.x&&(c=!c)}return c}function jP(o,i,c){const f=c[0],m=c[2];if(o.x<f.x&&i.x<f.x||o.x>m.x&&i.x>m.x||o.y<f.y&&i.y<f.y||o.y>m.y&&i.y>m.y)return!1;const b=Ve(o,i,c[0]);return b!==Ve(o,i,c[1])||b!==Ve(o,i,c[2])||b!==Ve(o,i,c[3])}function Dh(o,i,c){const f=i.paint.get(o).value;return f.kind==="constant"?f.value:c.programConfigurations.get(i.id).getMaxValue(o)}function Wp(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Yp(o,i,c,f,m){if(!i[0]&&!i[1])return o;const b=k.convert(i)._mult(m);c==="viewport"&&b._rotate(-f);const w=[];for(let T=0;T<o.length;T++)w.push(o[T].sub(b));return w}let Hx,Gx;$t("CircleBucket",ty,{omit:["layers"]});var HP={get paint(){return Gx=Gx||new Gr({"circle-radius":new sn(Ce.paint_circle["circle-radius"]),"circle-color":new sn(Ce.paint_circle["circle-color"]),"circle-blur":new sn(Ce.paint_circle["circle-blur"]),"circle-opacity":new sn(Ce.paint_circle["circle-opacity"]),"circle-translate":new Kt(Ce.paint_circle["circle-translate"]),"circle-translate-anchor":new Kt(Ce.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Kt(Ce.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Kt(Ce.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new sn(Ce.paint_circle["circle-stroke-width"]),"circle-stroke-color":new sn(Ce.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new sn(Ce.paint_circle["circle-stroke-opacity"])})},get layout(){return Hx=Hx||new Gr({"circle-sort-key":new sn(Ce.layout_circle["circle-sort-key"])})}},Xi=1e-6,Uu=typeof Float32Array<"u"?Float32Array:Array;function iy(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Wx(o,i,c){var f=i[0],m=i[1],b=i[2],w=i[3],T=i[4],P=i[5],L=i[6],B=i[7],U=i[8],G=i[9],K=i[10],J=i[11],ce=i[12],ve=i[13],xe=i[14],Le=i[15],Te=c[0],Oe=c[1],je=c[2],it=c[3];return o[0]=Te*f+Oe*T+je*U+it*ce,o[1]=Te*m+Oe*P+je*G+it*ve,o[2]=Te*b+Oe*L+je*K+it*xe,o[3]=Te*w+Oe*B+je*J+it*Le,o[4]=(Te=c[4])*f+(Oe=c[5])*T+(je=c[6])*U+(it=c[7])*ce,o[5]=Te*m+Oe*P+je*G+it*ve,o[6]=Te*b+Oe*L+je*K+it*xe,o[7]=Te*w+Oe*B+je*J+it*Le,o[8]=(Te=c[8])*f+(Oe=c[9])*T+(je=c[10])*U+(it=c[11])*ce,o[9]=Te*m+Oe*P+je*G+it*ve,o[10]=Te*b+Oe*L+je*K+it*xe,o[11]=Te*w+Oe*B+je*J+it*Le,o[12]=(Te=c[12])*f+(Oe=c[13])*T+(je=c[14])*U+(it=c[15])*ce,o[13]=Te*m+Oe*P+je*G+it*ve,o[14]=Te*b+Oe*L+je*K+it*xe,o[15]=Te*w+Oe*B+je*J+it*Le,o}Math.hypot||(Math.hypot=function(){for(var o=0,i=arguments.length;i--;)o+=arguments[i]*arguments[i];return Math.sqrt(o)});var Mh,GP=Wx;function Zp(o,i,c){var f=i[0],m=i[1],b=i[2],w=i[3];return o[0]=c[0]*f+c[4]*m+c[8]*b+c[12]*w,o[1]=c[1]*f+c[5]*m+c[9]*b+c[13]*w,o[2]=c[2]*f+c[6]*m+c[10]*b+c[14]*w,o[3]=c[3]*f+c[7]*m+c[11]*b+c[15]*w,o}Mh=new Uu(4),Uu!=Float32Array&&(Mh[0]=0,Mh[1]=0,Mh[2]=0,Mh[3]=0);class WP extends Aa{constructor(i){super(i,HP)}createBucket(i){return new ty(i)}queryRadius(i){const c=i;return Dh("circle-radius",this,c)+Dh("circle-stroke-width",this,c)+Wp(this.paint.get("circle-translate"))}queryIntersectsFeature(i,c,f,m,b,w,T,P){const L=Yp(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,T),B=this.paint.get("circle-radius").evaluate(c,f)+this.paint.get("circle-stroke-width").evaluate(c,f),U=this.paint.get("circle-pitch-alignment")==="map",G=U?L:function(J,ce){return J.map(ve=>Yx(ve,ce))}(L,P),K=U?B*T:B;for(const J of m)for(const ce of J){const ve=U?ce:Yx(ce,P);let xe=K;const Le=Zp([],[ce.x,ce.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?xe*=Le[3]/w.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(xe*=w.cameraToCenterDistance/Le[3]),$P(G,ve,xe))return!0}return!1}}function Yx(o,i){const c=Zp([],[o.x,o.y,0,1],i);return new k(c[0]/c[3],c[1]/c[3])}class Zx extends ty{}let Kx;$t("HeatmapBucket",Zx,{omit:["layers"]});var YP={get paint(){return Kx=Kx||new Gr({"heatmap-radius":new sn(Ce.paint_heatmap["heatmap-radius"]),"heatmap-weight":new sn(Ce.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Kt(Ce.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Sh(Ce.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Kt(Ce.paint_heatmap["heatmap-opacity"])})}};function ay(o,{width:i,height:c},f,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==i*c*f)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${i*c*f}`)}else m=new Uint8Array(i*c*f);return o.width=i,o.height=c,o.data=m,o}function Xx(o,{width:i,height:c},f){if(i===o.width&&c===o.height)return;const m=ay({},{width:i,height:c},f);sy(o,m,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,i),height:Math.min(o.height,c)},f),o.width=i,o.height=c,o.data=m.data}function sy(o,i,c,f,m,b){if(m.width===0||m.height===0)return i;if(m.width>o.width||m.height>o.height||c.x>o.width-m.width||c.y>o.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>i.width||m.height>i.height||f.x>i.width-m.width||f.y>i.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const w=o.data,T=i.data;if(w===T)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<m.height;P++){const L=((c.y+P)*o.width+c.x)*b,B=((f.y+P)*i.width+f.x)*b;for(let U=0;U<m.width*b;U++)T[B+U]=w[L+U]}return i}class Lh{constructor(i,c){ay(this,i,1,c)}resize(i){Xx(this,i,1)}clone(){return new Lh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,c,f,m,b){sy(i,c,f,m,b,1)}}class Na{constructor(i,c){ay(this,i,4,c)}resize(i){Xx(this,i,4)}replace(i,c){c?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new Na({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,c,f,m,b){sy(i,c,f,m,b,4)}}function Jx(o){const i={},c=o.resolution||256,f=o.clips?o.clips.length:1,m=o.image||new Na({width:c,height:f});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);const b=(w,T,P)=>{i[o.evaluationKey]=P;const L=o.expression.evaluate(i);m.data[w+T+0]=Math.floor(255*L.r/L.a),m.data[w+T+1]=Math.floor(255*L.g/L.a),m.data[w+T+2]=Math.floor(255*L.b/L.a),m.data[w+T+3]=Math.floor(255*L.a)};if(o.clips)for(let w=0,T=0;w<f;++w,T+=4*c)for(let P=0,L=0;P<c;P++,L+=4){const B=P/(c-1),{start:U,end:G}=o.clips[w];b(T,L,U*(1-B)+G*B)}else for(let w=0,T=0;w<c;w++,T+=4)b(0,T,w/(c-1));return m}$t("AlphaImage",Lh),$t("RGBAImage",Na);class ZP extends Aa{createBucket(i){return new Zx(i)}constructor(i){super(i,YP),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Jx({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Qx;var KP={get paint(){return Qx=Qx||new Gr({"hillshade-illumination-direction":new Kt(Ce.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Kt(Ce.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Kt(Ce.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Kt(Ce.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Kt(Ce.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Kt(Ce.paint_hillshade["hillshade-accent-color"])})}};class XP extends Aa{constructor(i){super(i,KP)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const JP=Pr([{name:"a_pos",components:2,type:"Int16"}],4),{members:QP}=JP;var oy={exports:{}};function Kp(o,i,c){c=c||2;var f,m,b,w,T,P,L,B=i&&i.length,U=B?i[0]*c:o.length,G=e1(o,0,U,c,!0),K=[];if(!G||G.next===G.prev)return K;if(B&&(G=function(ce,ve,xe,Le){var Te,Oe,je,it=[];for(Te=0,Oe=ve.length;Te<Oe;Te++)(je=e1(ce,ve[Te]*Le,Te<Oe-1?ve[Te+1]*Le:ce.length,Le,!1))===je.next&&(je.steiner=!0),it.push(oD(je));for(it.sort(iD),Te=0;Te<it.length;Te++)xe=aD(it[Te],xe);return xe}(o,i,G,c)),o.length>80*c){f=b=o[0],m=w=o[1];for(var J=c;J<U;J+=c)(T=o[J])<f&&(f=T),(P=o[J+1])<m&&(m=P),T>b&&(b=T),P>w&&(w=P);L=(L=Math.max(b-f,w-m))!==0?32767/L:0}return Rh(G,K,c,f,m,L,0),K}function e1(o,i,c,f,m){var b,w;if(m===uy(o,i,c,f)>0)for(b=i;b<c;b+=f)w=r1(b,o[b],o[b+1],w);else for(b=c-f;b>=i;b-=f)w=r1(b,o[b],o[b+1],w);return w&&Xp(w,w.next)&&(zh(w),w=w.next),w}function Dc(o,i){if(!o)return o;i||(i=o);var c,f=o;do if(c=!1,f.steiner||!Xp(f,f.next)&&Yr(f.prev,f,f.next)!==0)f=f.next;else{if(zh(f),(f=i=f.prev)===f.next)break;c=!0}while(c||f!==i);return i}function Rh(o,i,c,f,m,b,w){if(o){!w&&b&&function(B,U,G,K){var J=B;do J.z===0&&(J.z=ly(J.x,J.y,U,G,K)),J.prevZ=J.prev,J.nextZ=J.next,J=J.next;while(J!==B);J.prevZ.nextZ=null,J.prevZ=null,function(ce){var ve,xe,Le,Te,Oe,je,it,Nt,Wt=1;do{for(xe=ce,ce=null,Oe=null,je=0;xe;){for(je++,Le=xe,it=0,ve=0;ve<Wt&&(it++,Le=Le.nextZ);ve++);for(Nt=Wt;it>0||Nt>0&&Le;)it!==0&&(Nt===0||!Le||xe.z<=Le.z)?(Te=xe,xe=xe.nextZ,it--):(Te=Le,Le=Le.nextZ,Nt--),Oe?Oe.nextZ=Te:ce=Te,Te.prevZ=Oe,Oe=Te;xe=Le}Oe.nextZ=null,Wt*=2}while(je>1)}(J)}(o,f,m,b);for(var T,P,L=o;o.prev!==o.next;)if(T=o.prev,P=o.next,b?tD(o,f,m,b):eD(o))i.push(T.i/c|0),i.push(o.i/c|0),i.push(P.i/c|0),zh(o),o=P.next,L=P.next;else if((o=P)===L){w?w===1?Rh(o=nD(Dc(o),i,c),i,c,f,m,b,2):w===2&&rD(o,i,c,f,m,b):Rh(Dc(o),i,c,f,m,b,1);break}}}function eD(o){var i=o.prev,c=o,f=o.next;if(Yr(i,c,f)>=0)return!1;for(var m=i.x,b=c.x,w=f.x,T=i.y,P=c.y,L=f.y,B=m<b?m<w?m:w:b<w?b:w,U=T<P?T<L?T:L:P<L?P:L,G=m>b?m>w?m:w:b>w?b:w,K=T>P?T>L?T:L:P>L?P:L,J=f.next;J!==i;){if(J.x>=B&&J.x<=G&&J.y>=U&&J.y<=K&&qu(m,T,b,P,w,L,J.x,J.y)&&Yr(J.prev,J,J.next)>=0)return!1;J=J.next}return!0}function tD(o,i,c,f){var m=o.prev,b=o,w=o.next;if(Yr(m,b,w)>=0)return!1;for(var T=m.x,P=b.x,L=w.x,B=m.y,U=b.y,G=w.y,K=T<P?T<L?T:L:P<L?P:L,J=B<U?B<G?B:G:U<G?U:G,ce=T>P?T>L?T:L:P>L?P:L,ve=B>U?B>G?B:G:U>G?U:G,xe=ly(K,J,i,c,f),Le=ly(ce,ve,i,c,f),Te=o.prevZ,Oe=o.nextZ;Te&&Te.z>=xe&&Oe&&Oe.z<=Le;){if(Te.x>=K&&Te.x<=ce&&Te.y>=J&&Te.y<=ve&&Te!==m&&Te!==w&&qu(T,B,P,U,L,G,Te.x,Te.y)&&Yr(Te.prev,Te,Te.next)>=0||(Te=Te.prevZ,Oe.x>=K&&Oe.x<=ce&&Oe.y>=J&&Oe.y<=ve&&Oe!==m&&Oe!==w&&qu(T,B,P,U,L,G,Oe.x,Oe.y)&&Yr(Oe.prev,Oe,Oe.next)>=0))return!1;Oe=Oe.nextZ}for(;Te&&Te.z>=xe;){if(Te.x>=K&&Te.x<=ce&&Te.y>=J&&Te.y<=ve&&Te!==m&&Te!==w&&qu(T,B,P,U,L,G,Te.x,Te.y)&&Yr(Te.prev,Te,Te.next)>=0)return!1;Te=Te.prevZ}for(;Oe&&Oe.z<=Le;){if(Oe.x>=K&&Oe.x<=ce&&Oe.y>=J&&Oe.y<=ve&&Oe!==m&&Oe!==w&&qu(T,B,P,U,L,G,Oe.x,Oe.y)&&Yr(Oe.prev,Oe,Oe.next)>=0)return!1;Oe=Oe.nextZ}return!0}function nD(o,i,c){var f=o;do{var m=f.prev,b=f.next.next;!Xp(m,b)&&t1(m,f,f.next,b)&&Oh(m,b)&&Oh(b,m)&&(i.push(m.i/c|0),i.push(f.i/c|0),i.push(b.i/c|0),zh(f),zh(f.next),f=o=b),f=f.next}while(f!==o);return Dc(f)}function rD(o,i,c,f,m,b){var w=o;do{for(var T=w.next.next;T!==w.prev;){if(w.i!==T.i&&lD(w,T)){var P=n1(w,T);return w=Dc(w,w.next),P=Dc(P,P.next),Rh(w,i,c,f,m,b,0),void Rh(P,i,c,f,m,b,0)}T=T.next}w=w.next}while(w!==o)}function iD(o,i){return o.x-i.x}function aD(o,i){var c=function(m,b){var w,T=b,P=m.x,L=m.y,B=-1/0;do{if(L<=T.y&&L>=T.next.y&&T.next.y!==T.y){var U=T.x+(L-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(U<=P&&U>B&&(B=U,w=T.x<T.next.x?T:T.next,U===P))return w}T=T.next}while(T!==b);if(!w)return null;var G,K=w,J=w.x,ce=w.y,ve=1/0;T=w;do P>=T.x&&T.x>=J&&P!==T.x&&qu(L<ce?P:B,L,J,ce,L<ce?B:P,L,T.x,T.y)&&(G=Math.abs(L-T.y)/(P-T.x),Oh(T,m)&&(G<ve||G===ve&&(T.x>w.x||T.x===w.x&&sD(w,T)))&&(w=T,ve=G)),T=T.next;while(T!==K);return w}(o,i);if(!c)return i;var f=n1(c,o);return Dc(f,f.next),Dc(c,c.next)}function sD(o,i){return Yr(o.prev,o,i.prev)<0&&Yr(i.next,o,o.next)<0}function ly(o,i,c,f,m){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-c)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-f)*m|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function oD(o){var i=o,c=o;do(i.x<c.x||i.x===c.x&&i.y<c.y)&&(c=i),i=i.next;while(i!==o);return c}function qu(o,i,c,f,m,b,w,T){return(m-w)*(i-T)>=(o-w)*(b-T)&&(o-w)*(f-T)>=(c-w)*(i-T)&&(c-w)*(b-T)>=(m-w)*(f-T)}function lD(o,i){return o.next.i!==i.i&&o.prev.i!==i.i&&!function(c,f){var m=c;do{if(m.i!==c.i&&m.next.i!==c.i&&m.i!==f.i&&m.next.i!==f.i&&t1(m,m.next,c,f))return!0;m=m.next}while(m!==c);return!1}(o,i)&&(Oh(o,i)&&Oh(i,o)&&function(c,f){var m=c,b=!1,w=(c.x+f.x)/2,T=(c.y+f.y)/2;do m.y>T!=m.next.y>T&&m.next.y!==m.y&&w<(m.next.x-m.x)*(T-m.y)/(m.next.y-m.y)+m.x&&(b=!b),m=m.next;while(m!==c);return b}(o,i)&&(Yr(o.prev,o,i.prev)||Yr(o,i.prev,i))||Xp(o,i)&&Yr(o.prev,o,o.next)>0&&Yr(i.prev,i,i.next)>0)}function Yr(o,i,c){return(i.y-o.y)*(c.x-i.x)-(i.x-o.x)*(c.y-i.y)}function Xp(o,i){return o.x===i.x&&o.y===i.y}function t1(o,i,c,f){var m=Qp(Yr(o,i,c)),b=Qp(Yr(o,i,f)),w=Qp(Yr(c,f,o)),T=Qp(Yr(c,f,i));return m!==b&&w!==T||!(m!==0||!Jp(o,c,i))||!(b!==0||!Jp(o,f,i))||!(w!==0||!Jp(c,o,f))||!(T!==0||!Jp(c,i,f))}function Jp(o,i,c){return i.x<=Math.max(o.x,c.x)&&i.x>=Math.min(o.x,c.x)&&i.y<=Math.max(o.y,c.y)&&i.y>=Math.min(o.y,c.y)}function Qp(o){return o>0?1:o<0?-1:0}function Oh(o,i){return Yr(o.prev,o,o.next)<0?Yr(o,i,o.next)>=0&&Yr(o,o.prev,i)>=0:Yr(o,i,o.prev)<0||Yr(o,o.next,i)<0}function n1(o,i){var c=new cy(o.i,o.x,o.y),f=new cy(i.i,i.x,i.y),m=o.next,b=i.prev;return o.next=i,i.prev=o,c.next=m,m.prev=c,f.next=c,c.prev=f,b.next=f,f.prev=b,f}function r1(o,i,c,f){var m=new cy(o,i,c);return f?(m.next=f.next,m.prev=f,f.next.prev=m,f.next=m):(m.prev=m,m.next=m),m}function zh(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function cy(o,i,c){this.i=o,this.x=i,this.y=c,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function uy(o,i,c,f){for(var m=0,b=i,w=c-f;b<c;b+=f)m+=(o[w]-o[b])*(o[b+1]+o[w+1]),w=b;return m}oy.exports=Kp,oy.exports.default=Kp,Kp.deviation=function(o,i,c,f){var m=i&&i.length,b=Math.abs(uy(o,0,m?i[0]*c:o.length,c));if(m)for(var w=0,T=i.length;w<T;w++)b-=Math.abs(uy(o,i[w]*c,w<T-1?i[w+1]*c:o.length,c));var P=0;for(w=0;w<f.length;w+=3){var L=f[w]*c,B=f[w+1]*c,U=f[w+2]*c;P+=Math.abs((o[L]-o[U])*(o[B+1]-o[L+1])-(o[L]-o[B])*(o[U+1]-o[L+1]))}return b===0&&P===0?0:Math.abs((P-b)/b)},Kp.flatten=function(o){for(var i=o[0][0].length,c={vertices:[],holes:[],dimensions:i},f=0,m=0;m<o.length;m++){for(var b=0;b<o[m].length;b++)for(var w=0;w<i;w++)c.vertices.push(o[m][b][w]);m>0&&c.holes.push(f+=o[m-1].length)}return c};var i1=_(oy.exports);function cD(o,i,c,f,m){a1(o,i,c||0,f||o.length-1,m||uD)}function a1(o,i,c,f,m){for(;f>c;){if(f-c>600){var b=f-c+1,w=i-c+1,T=Math.log(b),P=.5*Math.exp(2*T/3),L=.5*Math.sqrt(T*P*(b-P)/b)*(w-b/2<0?-1:1);a1(o,i,Math.max(c,Math.floor(i-w*P/b+L)),Math.min(f,Math.floor(i+(b-w)*P/b+L)),m)}var B=o[i],U=c,G=f;for(Fh(o,c,i),m(o[f],B)>0&&Fh(o,c,f);U<G;){for(Fh(o,U,G),U++,G--;m(o[U],B)<0;)U++;for(;m(o[G],B)>0;)G--}m(o[c],B)===0?Fh(o,c,G):Fh(o,++G,f),G<=i&&(c=G+1),i<=G&&(f=G-1)}}function Fh(o,i,c){var f=o[i];o[i]=o[c],o[c]=f}function uD(o,i){return o<i?-1:o>i?1:0}function dy(o,i){const c=o.length;if(c<=1)return[o];const f=[];let m,b;for(let w=0;w<c;w++){const T=Ge(o[w]);T!==0&&(o[w].area=Math.abs(T),b===void 0&&(b=T<0),b===T<0?(m&&f.push(m),m=[o[w]]):m.push(o[w]))}if(m&&f.push(m),i>1)for(let w=0;w<f.length;w++)f[w].length<=i||(cD(f[w],i,1,f[w].length-1,dD),f[w]=f[w].slice(0,i));return f}function dD(o,i){return i.area-o.area}function hy(o,i,c){const f=c.patternDependencies;let m=!1;for(const b of i){const w=b.paint.get(`${o}-pattern`);w.isConstant()||(m=!0);const T=w.constantOr(null);T&&(m=!0,f[T.to]=!0,f[T.from]=!0)}return m}function fy(o,i,c,f,m){const b=m.patternDependencies;for(const w of i){const T=w.paint.get(`${o}-pattern`).value;if(T.kind!=="constant"){let P=T.evaluate({zoom:f-1},c,{},m.availableImages),L=T.evaluate({zoom:f},c,{},m.availableImages),B=T.evaluate({zoom:f+1},c,{},m.availableImages);P=P&&P.name?P.name:P,L=L&&L.name?L.name:L,B=B&&B.name?B.name:B,b[P]=!0,b[L]=!0,b[B]=!0,c.patterns[w.id]={min:P,mid:L,max:B}}}return c}class py{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(c=>c.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Pn,this.indexArray=new _i,this.indexArray2=new ri,this.programConfigurations=new Ls(i.layers,i.zoom),this.segments=new gr,this.segments2=new gr,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(i,c,f){this.hasPattern=hy("fill",this.layers,c);const m=this.layers[0].layout.get("fill-sort-key"),b=!m.isConstant(),w=[];for(const{feature:T,id:P,index:L,sourceLayerIndex:B}of i){const U=this.layers[0]._featureFilter.needGeometry,G=Pc(T,U);if(!this.layers[0]._featureFilter.filter(new mr(this.zoom),G,f))continue;const K=b?m.evaluate(G,{},f,c.availableImages):void 0,J={id:P,properties:T.properties,type:T.type,sourceLayerIndex:B,index:L,geometry:U?G.geometry:Ic(T),patterns:{},sortKey:K};w.push(J)}b&&w.sort((T,P)=>T.sortKey-P.sortKey);for(const T of w){const{geometry:P,index:L,sourceLayerIndex:B}=T;if(this.hasPattern){const U=fy("fill",this.layers,T,this.zoom,c);this.patternFeatures.push(U)}else this.addFeature(T,P,L,f,{});c.featureIndex.insert(i[L].feature,P,L,B,this.index)}}update(i,c,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,c,this.stateDependentLayers,f)}addFeatures(i,c,f){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,c,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,QP),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,c,f,m,b){for(const w of dy(c,500)){let T=0;for(const K of w)T+=K.length;const P=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),L=P.vertexLength,B=[],U=[];for(const K of w){if(K.length===0)continue;K!==w[0]&&U.push(B.length/2);const J=this.segments2.prepareSegment(K.length,this.layoutVertexArray,this.indexArray2),ce=J.vertexLength;this.layoutVertexArray.emplaceBack(K[0].x,K[0].y),this.indexArray2.emplaceBack(ce+K.length-1,ce),B.push(K[0].x),B.push(K[0].y);for(let ve=1;ve<K.length;ve++)this.layoutVertexArray.emplaceBack(K[ve].x,K[ve].y),this.indexArray2.emplaceBack(ce+ve-1,ce+ve),B.push(K[ve].x),B.push(K[ve].y);J.vertexLength+=K.length,J.primitiveLength+=K.length}const G=i1(B,U);for(let K=0;K<G.length;K+=3)this.indexArray.emplaceBack(L+G[K],L+G[K+1],L+G[K+2]);P.vertexLength+=T,P.primitiveLength+=G.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,b,m)}}let s1,o1;$t("FillBucket",py,{omit:["layers","patternFeatures"]});var hD={get paint(){return o1=o1||new Gr({"fill-antialias":new Kt(Ce.paint_fill["fill-antialias"]),"fill-opacity":new sn(Ce.paint_fill["fill-opacity"]),"fill-color":new sn(Ce.paint_fill["fill-color"]),"fill-outline-color":new sn(Ce.paint_fill["fill-outline-color"]),"fill-translate":new Kt(Ce.paint_fill["fill-translate"]),"fill-translate-anchor":new Kt(Ce.paint_fill["fill-translate-anchor"]),"fill-pattern":new Tc(Ce.paint_fill["fill-pattern"])})},get layout(){return s1=s1||new Gr({"fill-sort-key":new sn(Ce.layout_fill["fill-sort-key"])})}};class fD extends Aa{constructor(i){super(i,hD)}recalculate(i,c){super.recalculate(i,c);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new py(i)}queryRadius(){return Wp(this.paint.get("fill-translate"))}queryIntersectsFeature(i,c,f,m,b,w,T){return Ux(Yp(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,T),m)}isTileClipped(){return!0}}const pD=Pr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),mD=Pr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:gD}=pD;var Ol={},vD=S,l1=ju;function ju(o,i,c,f,m){this.properties={},this.extent=c,this.type=0,this._pbf=o,this._geometry=-1,this._keys=f,this._values=m,o.readFields(yD,this,i)}function yD(o,i,c){o==1?i.id=c.readVarint():o==2?function(f,m){for(var b=f.readVarint()+f.pos;f.pos<b;){var w=m._keys[f.readVarint()],T=m._values[f.readVarint()];m.properties[w]=T}}(c,i):o==3?i.type=c.readVarint():o==4&&(i._geometry=c.pos)}function _D(o){for(var i,c,f=0,m=0,b=o.length,w=b-1;m<b;w=m++)f+=((c=o[w]).x-(i=o[m]).x)*(i.y+c.y);return f}ju.types=["Unknown","Point","LineString","Polygon"],ju.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var i,c=o.readVarint()+o.pos,f=1,m=0,b=0,w=0,T=[];o.pos<c;){if(m<=0){var P=o.readVarint();f=7&P,m=P>>3}if(m--,f===1||f===2)b+=o.readSVarint(),w+=o.readSVarint(),f===1&&(i&&T.push(i),i=[]),i.push(new vD(b,w));else{if(f!==7)throw new Error("unknown command "+f);i&&i.push(i[0].clone())}}return i&&T.push(i),T},ju.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var i=o.readVarint()+o.pos,c=1,f=0,m=0,b=0,w=1/0,T=-1/0,P=1/0,L=-1/0;o.pos<i;){if(f<=0){var B=o.readVarint();c=7&B,f=B>>3}if(f--,c===1||c===2)(m+=o.readSVarint())<w&&(w=m),m>T&&(T=m),(b+=o.readSVarint())<P&&(P=b),b>L&&(L=b);else if(c!==7)throw new Error("unknown command "+c)}return[w,P,T,L]},ju.prototype.toGeoJSON=function(o,i,c){var f,m,b=this.extent*Math.pow(2,c),w=this.extent*o,T=this.extent*i,P=this.loadGeometry(),L=ju.types[this.type];function B(K){for(var J=0;J<K.length;J++){var ce=K[J];K[J]=[360*(ce.x+w)/b-180,360/Math.PI*Math.atan(Math.exp((180-360*(ce.y+T)/b)*Math.PI/180))-90]}}switch(this.type){case 1:var U=[];for(f=0;f<P.length;f++)U[f]=P[f][0];B(P=U);break;case 2:for(f=0;f<P.length;f++)B(P[f]);break;case 3:for(P=function(K){var J=K.length;if(J<=1)return[K];for(var ce,ve,xe=[],Le=0;Le<J;Le++){var Te=_D(K[Le]);Te!==0&&(ve===void 0&&(ve=Te<0),ve===Te<0?(ce&&xe.push(ce),ce=[K[Le]]):ce.push(K[Le]))}return ce&&xe.push(ce),xe}(P),f=0;f<P.length;f++)for(m=0;m<P[f].length;m++)B(P[f][m])}P.length===1?P=P[0]:L="Multi"+L;var G={type:"Feature",geometry:{type:L,coordinates:P},properties:this.properties};return"id"in this&&(G.id=this.id),G};var bD=l1,c1=u1;function u1(o,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(xD,this,i),this.length=this._features.length}function xD(o,i,c){o===15?i.version=c.readVarint():o===1?i.name=c.readString():o===5?i.extent=c.readVarint():o===2?i._features.push(c.pos):o===3?i._keys.push(c.readString()):o===4&&i._values.push(function(f){for(var m=null,b=f.readVarint()+f.pos;f.pos<b;){var w=f.readVarint()>>3;m=w===1?f.readString():w===2?f.readFloat():w===3?f.readDouble():w===4?f.readVarint64():w===5?f.readVarint():w===6?f.readSVarint():w===7?f.readBoolean():null}return m}(c))}u1.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var i=this._pbf.readVarint()+this._pbf.pos;return new bD(this._pbf,i,this.extent,this._keys,this._values)};var wD=c1;function SD(o,i,c){if(o===3){var f=new wD(c,c.readVarint()+c.pos);f.length&&(i[f.name]=f)}}Ol.VectorTile=function(o,i){this.layers=o.readFields(SD,{},i)},Ol.VectorTileFeature=l1,Ol.VectorTileLayer=c1;const kD=Ol.VectorTileFeature.types,my=Math.pow(2,13);function Bh(o,i,c,f,m,b,w,T){o.emplaceBack(i,c,2*Math.floor(f*my)+w,m*my*2,b*my*2,Math.round(T))}class gy{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(c=>c.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new Lt,this.centroidVertexArray=new Tt,this.indexArray=new _i,this.programConfigurations=new Ls(i.layers,i.zoom),this.segments=new gr,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(i,c,f){this.features=[],this.hasPattern=hy("fill-extrusion",this.layers,c);for(const{feature:m,id:b,index:w,sourceLayerIndex:T}of i){const P=this.layers[0]._featureFilter.needGeometry,L=Pc(m,P);if(!this.layers[0]._featureFilter.filter(new mr(this.zoom),L,f))continue;const B={id:b,sourceLayerIndex:T,index:w,geometry:P?L.geometry:Ic(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(fy("fill-extrusion",this.layers,B,this.zoom,c)):this.addFeature(B,B.geometry,w,f,{}),c.featureIndex.insert(m,B.geometry,w,T,this.index,!0)}}addFeatures(i,c,f){for(const m of this.features){const{geometry:b}=m;this.addFeature(m,b,m.index,c,f)}}update(i,c,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,c,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,gD),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,mD.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,c,f,m,b){const w={x:0,y:0,vertexCount:0};for(const T of dy(c,500)){let P=0;for(const J of T)P+=J.length;let L=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const J of T){if(J.length===0||TD(J))continue;let ce=0;for(let ve=0;ve<J.length;ve++){const xe=J[ve];if(ve>=1){const Le=J[ve-1];if(!CD(xe,Le)){L.vertexLength+4>gr.MAX_VERTEX_ARRAY_LENGTH&&(L=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Te=xe.sub(Le)._perp()._unit(),Oe=Le.dist(xe);ce+Oe>32768&&(ce=0),Bh(this.layoutVertexArray,xe.x,xe.y,Te.x,Te.y,0,0,ce),Bh(this.layoutVertexArray,xe.x,xe.y,Te.x,Te.y,0,1,ce),w.x+=2*xe.x,w.y+=2*xe.y,w.vertexCount+=2,ce+=Oe,Bh(this.layoutVertexArray,Le.x,Le.y,Te.x,Te.y,0,0,ce),Bh(this.layoutVertexArray,Le.x,Le.y,Te.x,Te.y,0,1,ce),w.x+=2*Le.x,w.y+=2*Le.y,w.vertexCount+=2;const je=L.vertexLength;this.indexArray.emplaceBack(je,je+2,je+1),this.indexArray.emplaceBack(je+1,je+2,je+3),L.vertexLength+=4,L.primitiveLength+=2}}}}if(L.vertexLength+P>gr.MAX_VERTEX_ARRAY_LENGTH&&(L=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),kD[i.type]!=="Polygon")continue;const B=[],U=[],G=L.vertexLength;for(const J of T)if(J.length!==0){J!==T[0]&&U.push(B.length/2);for(let ce=0;ce<J.length;ce++){const ve=J[ce];Bh(this.layoutVertexArray,ve.x,ve.y,0,0,1,1,0),w.x+=ve.x,w.y+=ve.y,w.vertexCount+=1,B.push(ve.x),B.push(ve.y)}}const K=i1(B,U);for(let J=0;J<K.length;J+=3)this.indexArray.emplaceBack(G+K[J],G+K[J+2],G+K[J+1]);L.primitiveLength+=K.length/3,L.vertexLength+=P}for(let T=0;T<w.vertexCount;T++)this.centroidVertexArray.emplaceBack(Math.floor(w.x/w.vertexCount),Math.floor(w.y/w.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,b,m)}}function CD(o,i){return o.x===i.x&&(o.x<0||o.x>Jr)||o.y===i.y&&(o.y<0||o.y>Jr)}function TD(o){return o.every(i=>i.x<0)||o.every(i=>i.x>Jr)||o.every(i=>i.y<0)||o.every(i=>i.y>Jr)}let d1;$t("FillExtrusionBucket",gy,{omit:["layers","features"]});var AD={get paint(){return d1=d1||new Gr({"fill-extrusion-opacity":new Kt(Ce["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new sn(Ce["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Kt(Ce["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Kt(Ce["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Tc(Ce["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new sn(Ce["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new sn(Ce["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Kt(Ce["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class ED extends Aa{constructor(i){super(i,AD)}createBucket(i){return new gy(i)}queryRadius(){return Wp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(i,c,f,m,b,w,T,P){const L=Yp(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,T),B=this.paint.get("fill-extrusion-height").evaluate(c,f),U=this.paint.get("fill-extrusion-base").evaluate(c,f),G=function(J,ce,ve,xe){const Le=[];for(const Te of J){const Oe=[Te.x,Te.y,0,1];Zp(Oe,Oe,ce),Le.push(new k(Oe[0]/Oe[3],Oe[1]/Oe[3]))}return Le}(L,P),K=function(J,ce,ve,xe){const Le=[],Te=[],Oe=xe[8]*ce,je=xe[9]*ce,it=xe[10]*ce,Nt=xe[11]*ce,Wt=xe[8]*ve,Ft=xe[9]*ve,Rt=xe[10]*ve,Pt=xe[11]*ve;for(const qt of J){const Dt=[],vt=[];for(const en of qt){const Zt=en.x,kn=en.y,vr=xe[0]*Zt+xe[4]*kn+xe[12],Sr=xe[1]*Zt+xe[5]*kn+xe[13],si=xe[2]*Zt+xe[6]*kn+xe[14],Ia=xe[3]*Zt+xe[7]*kn+xe[15],Ji=si+it,Qr=Ia+Nt,xi=vr+Wt,Ii=Sr+Ft,Qi=si+Rt,ea=Ia+Pt,oi=new k((vr+Oe)/Qr,(Sr+je)/Qr);oi.z=Ji/Qr,Dt.push(oi);const li=new k(xi/ea,Ii/ea);li.z=Qi/ea,vt.push(li)}Le.push(Dt),Te.push(vt)}return[Le,Te]}(m,U,B,P);return function(J,ce,ve){let xe=1/0;Ux(ve,ce)&&(xe=h1(ve,ce[0]));for(let Le=0;Le<ce.length;Le++){const Te=ce[Le],Oe=J[Le];for(let je=0;je<Te.length-1;je++){const it=Te[je],Nt=[it,Te[je+1],Oe[je+1],Oe[je],it];$x(ve,Nt)&&(xe=Math.min(xe,h1(ve,Nt)))}}return xe!==1/0&&xe}(K[0],K[1],G)}}function Vh(o,i){return o.x*i.x+o.y*i.y}function h1(o,i){if(o.length===1){let c=0;const f=i[c++];let m;for(;!m||f.equals(m);)if(m=i[c++],!m)return 1/0;for(;c<i.length;c++){const b=i[c],w=o[0],T=m.sub(f),P=b.sub(f),L=w.sub(f),B=Vh(T,T),U=Vh(T,P),G=Vh(P,P),K=Vh(L,T),J=Vh(L,P),ce=B*G-U*U,ve=(G*K-U*J)/ce,xe=(B*J-U*K)/ce,Le=f.z*(1-ve-xe)+m.z*ve+b.z*xe;if(isFinite(Le))return Le}return 1/0}{let c=1/0;for(const f of i)c=Math.min(c,f.z);return c}}const ID=Pr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:PD}=ID,DD=Pr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:MD}=DD,LD=Ol.VectorTileFeature.types,RD=Math.cos(Math.PI/180*37.5),f1=Math.pow(2,14)/.5;class vy{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(c=>c.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new on,this.layoutVertexArray2=new Yt,this.indexArray=new _i,this.programConfigurations=new Ls(i.layers,i.zoom),this.segments=new gr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(i,c,f){this.hasPattern=hy("line",this.layers,c);const m=this.layers[0].layout.get("line-sort-key"),b=!m.isConstant(),w=[];for(const{feature:T,id:P,index:L,sourceLayerIndex:B}of i){const U=this.layers[0]._featureFilter.needGeometry,G=Pc(T,U);if(!this.layers[0]._featureFilter.filter(new mr(this.zoom),G,f))continue;const K=b?m.evaluate(G,{},f):void 0,J={id:P,properties:T.properties,type:T.type,sourceLayerIndex:B,index:L,geometry:U?G.geometry:Ic(T),patterns:{},sortKey:K};w.push(J)}b&&w.sort((T,P)=>T.sortKey-P.sortKey);for(const T of w){const{geometry:P,index:L,sourceLayerIndex:B}=T;if(this.hasPattern){const U=fy("line",this.layers,T,this.zoom,c);this.patternFeatures.push(U)}else this.addFeature(T,P,L,f,{});c.featureIndex.insert(i[L].feature,P,L,B,this.index)}}update(i,c,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,c,this.stateDependentLayers,f)}addFeatures(i,c,f){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,c,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,MD)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,PD),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,c,f,m,b){const w=this.layers[0].layout,T=w.get("line-join").evaluate(i,{}),P=w.get("line-cap"),L=w.get("line-miter-limit"),B=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const U of c)this.addLine(U,i,T,P,L,B);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,b,m)}addLine(i,c,f,m,b,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let xe=0;xe<i.length-1;xe++)this.totalDistance+=i[xe].dist(i[xe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T=LD[c.type]==="Polygon";let P=i.length;for(;P>=2&&i[P-1].equals(i[P-2]);)P--;let L=0;for(;L<P-1&&i[L].equals(i[L+1]);)L++;if(P<(T?3:2))return;f==="bevel"&&(b=1.05);const B=this.overscaling<=16?15*Jr/(512*this.overscaling):0,U=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let G,K,J,ce,ve;this.e1=this.e2=-1,T&&(G=i[P-2],ve=i[L].sub(G)._unit()._perp());for(let xe=L;xe<P;xe++){if(J=xe===P-1?T?i[L+1]:void 0:i[xe+1],J&&i[xe].equals(J))continue;ve&&(ce=ve),G&&(K=G),G=i[xe],ve=J?J.sub(G)._unit()._perp():ce,ce=ce||ve;let Le=ce.add(ve);Le.x===0&&Le.y===0||Le._unit();const Te=ce.x*ve.x+ce.y*ve.y,Oe=Le.x*ve.x+Le.y*ve.y,je=Oe!==0?1/Oe:1/0,it=2*Math.sqrt(2-2*Oe),Nt=Oe<RD&&K&&J,Wt=ce.x*ve.y-ce.y*ve.x>0;if(Nt&&xe>L){const Pt=G.dist(K);if(Pt>2*B){const qt=G.sub(G.sub(K)._mult(B/Pt)._round());this.updateDistance(K,qt),this.addCurrentVertex(qt,ce,0,0,U),K=qt}}const Ft=K&&J;let Rt=Ft?f:T?"butt":m;if(Ft&&Rt==="round"&&(je<w?Rt="miter":je<=2&&(Rt="fakeround")),Rt==="miter"&&je>b&&(Rt="bevel"),Rt==="bevel"&&(je>2&&(Rt="flipbevel"),je<b&&(Rt="miter")),K&&this.updateDistance(K,G),Rt==="miter")Le._mult(je),this.addCurrentVertex(G,Le,0,0,U);else if(Rt==="flipbevel"){if(je>100)Le=ve.mult(-1);else{const Pt=je*ce.add(ve).mag()/ce.sub(ve).mag();Le._perp()._mult(Pt*(Wt?-1:1))}this.addCurrentVertex(G,Le,0,0,U),this.addCurrentVertex(G,Le.mult(-1),0,0,U)}else if(Rt==="bevel"||Rt==="fakeround"){const Pt=-Math.sqrt(je*je-1),qt=Wt?Pt:0,Dt=Wt?0:Pt;if(K&&this.addCurrentVertex(G,ce,qt,Dt,U),Rt==="fakeround"){const vt=Math.round(180*it/Math.PI/20);for(let en=1;en<vt;en++){let Zt=en/vt;if(Zt!==.5){const vr=Zt-.5;Zt+=Zt*vr*(Zt-1)*((1.0904+Te*(Te*(3.55645-1.43519*Te)-3.2452))*vr*vr+(.848013+Te*(.215638*Te-1.06021)))}const kn=ve.sub(ce)._mult(Zt)._add(ce)._unit()._mult(Wt?-1:1);this.addHalfVertex(G,kn.x,kn.y,!1,Wt,0,U)}}J&&this.addCurrentVertex(G,ve,-qt,-Dt,U)}else if(Rt==="butt")this.addCurrentVertex(G,Le,0,0,U);else if(Rt==="square"){const Pt=K?1:-1;this.addCurrentVertex(G,Le,Pt,Pt,U)}else Rt==="round"&&(K&&(this.addCurrentVertex(G,ce,0,0,U),this.addCurrentVertex(G,ce,1,1,U,!0)),J&&(this.addCurrentVertex(G,ve,-1,-1,U,!0),this.addCurrentVertex(G,ve,0,0,U)));if(Nt&&xe<P-1){const Pt=G.dist(J);if(Pt>2*B){const qt=G.add(J.sub(G)._mult(B/Pt)._round());this.updateDistance(G,qt),this.addCurrentVertex(qt,ve,0,0,U),G=qt}}}}addCurrentVertex(i,c,f,m,b,w=!1){const T=c.y*m-c.x,P=-c.y-c.x*m;this.addHalfVertex(i,c.x+c.y*f,c.y-c.x*f,w,!1,f,b),this.addHalfVertex(i,T,P,w,!0,-m,b),this.distance>f1/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,c,f,m,b,w))}addHalfVertex({x:i,y:c},f,m,b,w,T,P){const L=.5*(this.lineClips?this.scaledDistance*(f1-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(b?1:0),(c<<1)+(w?1:0),Math.round(63*f)+128,Math.round(63*m)+128,1+(T===0?0:T<0?-1:1)|(63&L)<<2,L>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const B=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,B),P.primitiveLength++),w?this.e2=B:this.e1=B}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,c){this.distance+=i.dist(c),this.updateScaledDistance()}}let p1,m1;$t("LineBucket",vy,{omit:["layers","patternFeatures"]});var g1={get paint(){return m1=m1||new Gr({"line-opacity":new sn(Ce.paint_line["line-opacity"]),"line-color":new sn(Ce.paint_line["line-color"]),"line-translate":new Kt(Ce.paint_line["line-translate"]),"line-translate-anchor":new Kt(Ce.paint_line["line-translate-anchor"]),"line-width":new sn(Ce.paint_line["line-width"]),"line-gap-width":new sn(Ce.paint_line["line-gap-width"]),"line-offset":new sn(Ce.paint_line["line-offset"]),"line-blur":new sn(Ce.paint_line["line-blur"]),"line-dasharray":new wh(Ce.paint_line["line-dasharray"]),"line-pattern":new Tc(Ce.paint_line["line-pattern"]),"line-gradient":new Sh(Ce.paint_line["line-gradient"])})},get layout(){return p1=p1||new Gr({"line-cap":new Kt(Ce.layout_line["line-cap"]),"line-join":new sn(Ce.layout_line["line-join"]),"line-miter-limit":new Kt(Ce.layout_line["line-miter-limit"]),"line-round-limit":new Kt(Ce.layout_line["line-round-limit"]),"line-sort-key":new sn(Ce.layout_line["line-sort-key"])})}};class OD extends sn{possiblyEvaluate(i,c){return c=new mr(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(i,c)}evaluate(i,c,f,m){return c=H({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(i,c,f,m)}}let em;class zD extends Aa{constructor(i){super(i,g1),this.gradientVersion=0,em||(em=new OD(g1.paint.properties["line-width"].specification),em.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const c=this.gradientExpression();this.stepInterpolant=!!function(f){return f._styleExpression!==void 0}(c)&&c._styleExpression.expression instanceof eo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,c){super.recalculate(i,c),this.paint._values["line-floorwidth"]=em.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new vy(i)}queryRadius(i){const c=i,f=v1(Dh("line-width",this,c),Dh("line-gap-width",this,c)),m=Dh("line-offset",this,c);return f/2+Math.abs(m)+Wp(this.paint.get("line-translate"))}queryIntersectsFeature(i,c,f,m,b,w,T){const P=Yp(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,T),L=T/2*v1(this.paint.get("line-width").evaluate(c,f),this.paint.get("line-gap-width").evaluate(c,f)),B=this.paint.get("line-offset").evaluate(c,f);return B&&(m=function(U,G){const K=[];for(let J=0;J<U.length;J++){const ce=U[J],ve=[];for(let xe=0;xe<ce.length;xe++){const Le=ce[xe-1],Te=ce[xe],Oe=ce[xe+1],je=xe===0?new k(0,0):Te.sub(Le)._unit()._perp(),it=xe===ce.length-1?new k(0,0):Oe.sub(Te)._unit()._perp(),Nt=je._add(it)._unit(),Wt=Nt.x*it.x+Nt.y*it.y;Wt!==0&&Nt._mult(1/Wt),ve.push(Nt._mult(G)._add(Te))}K.push(ve)}return K}(m,B*T)),function(U,G,K){for(let J=0;J<G.length;J++){const ce=G[J];if(U.length>=3){for(let ve=0;ve<ce.length;ve++)if($u(U,ce[ve]))return!0}if(UP(U,ce,K))return!0}return!1}(P,m,L)}isTileClipped(){return!0}}function v1(o,i){return i>0?i+2*o:o}const FD=Pr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),BD=Pr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Pr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const VD=Pr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Pr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const y1=Pr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ND=Pr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function $D(o,i,c){return o.sections.forEach(f=>{f.text=function(m,b,w){const T=b.layout.get("text-transform").evaluate(w,{});return T==="uppercase"?m=m.toLocaleUpperCase():T==="lowercase"&&(m=m.toLocaleLowerCase()),ha.applyArabicShaping&&(m=ha.applyArabicShaping(m)),m}(f.text,i,c)}),o}Pr([{name:"triangle",components:3,type:"Uint16"}]),Pr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Pr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Pr([{type:"Float32",name:"offsetX"}]),Pr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Pr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Nh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var ai=24,_1=ir,b1=function(o,i,c,f,m){var b,w,T=8*m-f-1,P=(1<<T)-1,L=P>>1,B=-7,U=c?m-1:0,G=c?-1:1,K=o[i+U];for(U+=G,b=K&(1<<-B)-1,K>>=-B,B+=T;B>0;b=256*b+o[i+U],U+=G,B-=8);for(w=b&(1<<-B)-1,b>>=-B,B+=f;B>0;w=256*w+o[i+U],U+=G,B-=8);if(b===0)b=1-L;else{if(b===P)return w?NaN:1/0*(K?-1:1);w+=Math.pow(2,f),b-=L}return(K?-1:1)*w*Math.pow(2,b-f)},x1=function(o,i,c,f,m,b){var w,T,P,L=8*b-m-1,B=(1<<L)-1,U=B>>1,G=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,K=f?0:b-1,J=f?1:-1,ce=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(T=isNaN(i)?1:0,w=B):(w=Math.floor(Math.log(i)/Math.LN2),i*(P=Math.pow(2,-w))<1&&(w--,P*=2),(i+=w+U>=1?G/P:G*Math.pow(2,1-U))*P>=2&&(w++,P/=2),w+U>=B?(T=0,w=B):w+U>=1?(T=(i*P-1)*Math.pow(2,m),w+=U):(T=i*Math.pow(2,U-1)*Math.pow(2,m),w=0));m>=8;o[c+K]=255&T,K+=J,T/=256,m-=8);for(w=w<<m|T,L+=m;L>0;o[c+K]=255&w,K+=J,w/=256,L-=8);o[c+K-J]|=128*ce};function ir(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}ir.Varint=0,ir.Fixed64=1,ir.Bytes=2,ir.Fixed32=5;var yy=4294967296,w1=1/yy,S1=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Go(o){return o.type===ir.Bytes?o.readVarint()+o.pos:o.pos+1}function Hu(o,i,c){return c?4294967296*i+(o>>>0):4294967296*(i>>>0)+(o>>>0)}function k1(o,i,c){var f=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));c.realloc(f);for(var m=c.pos-1;m>=o;m--)c.buf[m+f]=c.buf[m]}function UD(o,i){for(var c=0;c<o.length;c++)i.writeVarint(o[c])}function qD(o,i){for(var c=0;c<o.length;c++)i.writeSVarint(o[c])}function jD(o,i){for(var c=0;c<o.length;c++)i.writeFloat(o[c])}function HD(o,i){for(var c=0;c<o.length;c++)i.writeDouble(o[c])}function GD(o,i){for(var c=0;c<o.length;c++)i.writeBoolean(o[c])}function WD(o,i){for(var c=0;c<o.length;c++)i.writeFixed32(o[c])}function YD(o,i){for(var c=0;c<o.length;c++)i.writeSFixed32(o[c])}function ZD(o,i){for(var c=0;c<o.length;c++)i.writeFixed64(o[c])}function KD(o,i){for(var c=0;c<o.length;c++)i.writeSFixed64(o[c])}function tm(o,i){return(o[i]|o[i+1]<<8|o[i+2]<<16)+16777216*o[i+3]}function Gu(o,i,c){o[c]=i,o[c+1]=i>>>8,o[c+2]=i>>>16,o[c+3]=i>>>24}function C1(o,i){return(o[i]|o[i+1]<<8|o[i+2]<<16)+(o[i+3]<<24)}ir.prototype={destroy:function(){this.buf=null},readFields:function(o,i,c){for(c=c||this.length;this.pos<c;){var f=this.readVarint(),m=f>>3,b=this.pos;this.type=7&f,o(m,i,this),this.pos===b&&this.skip(f)}return i},readMessage:function(o,i){return this.readFields(o,i,this.readVarint()+this.pos)},readFixed32:function(){var o=tm(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=C1(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=tm(this.buf,this.pos)+tm(this.buf,this.pos+4)*yy;return this.pos+=8,o},readSFixed64:function(){var o=tm(this.buf,this.pos)+C1(this.buf,this.pos+4)*yy;return this.pos+=8,o},readFloat:function(){var o=b1(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=b1(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var i,c,f=this.buf;return i=127&(c=f[this.pos++]),c<128?i:(i|=(127&(c=f[this.pos++]))<<7,c<128?i:(i|=(127&(c=f[this.pos++]))<<14,c<128?i:(i|=(127&(c=f[this.pos++]))<<21,c<128?i:function(m,b,w){var T,P,L=w.buf;if(T=(112&(P=L[w.pos++]))>>4,P<128||(T|=(127&(P=L[w.pos++]))<<3,P<128)||(T|=(127&(P=L[w.pos++]))<<10,P<128)||(T|=(127&(P=L[w.pos++]))<<17,P<128)||(T|=(127&(P=L[w.pos++]))<<24,P<128)||(T|=(1&(P=L[w.pos++]))<<31,P<128))return Hu(m,T,b);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(c=f[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,i=this.pos;return this.pos=o,o-i>=12&&S1?function(c,f,m){return S1.decode(c.subarray(f,m))}(this.buf,i,o):function(c,f,m){for(var b="",w=f;w<m;){var T,P,L,B=c[w],U=null,G=B>239?4:B>223?3:B>191?2:1;if(w+G>m)break;G===1?B<128&&(U=B):G===2?(192&(T=c[w+1]))==128&&(U=(31&B)<<6|63&T)<=127&&(U=null):G===3?(P=c[w+2],(192&(T=c[w+1]))==128&&(192&P)==128&&((U=(15&B)<<12|(63&T)<<6|63&P)<=2047||U>=55296&&U<=57343)&&(U=null)):G===4&&(P=c[w+2],L=c[w+3],(192&(T=c[w+1]))==128&&(192&P)==128&&(192&L)==128&&((U=(15&B)<<18|(63&T)<<12|(63&P)<<6|63&L)<=65535||U>=1114112)&&(U=null)),U===null?(U=65533,G=1):U>65535&&(U-=65536,b+=String.fromCharCode(U>>>10&1023|55296),U=56320|1023&U),b+=String.fromCharCode(U),w+=G}return b}(this.buf,i,o)},readBytes:function(){var o=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,o);return this.pos=o,i},readPackedVarint:function(o,i){if(this.type!==ir.Bytes)return o.push(this.readVarint(i));var c=Go(this);for(o=o||[];this.pos<c;)o.push(this.readVarint(i));return o},readPackedSVarint:function(o){if(this.type!==ir.Bytes)return o.push(this.readSVarint());var i=Go(this);for(o=o||[];this.pos<i;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==ir.Bytes)return o.push(this.readBoolean());var i=Go(this);for(o=o||[];this.pos<i;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==ir.Bytes)return o.push(this.readFloat());var i=Go(this);for(o=o||[];this.pos<i;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==ir.Bytes)return o.push(this.readDouble());var i=Go(this);for(o=o||[];this.pos<i;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==ir.Bytes)return o.push(this.readFixed32());var i=Go(this);for(o=o||[];this.pos<i;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==ir.Bytes)return o.push(this.readSFixed32());var i=Go(this);for(o=o||[];this.pos<i;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==ir.Bytes)return o.push(this.readFixed64());var i=Go(this);for(o=o||[];this.pos<i;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==ir.Bytes)return o.push(this.readSFixed64());var i=Go(this);for(o=o||[];this.pos<i;)o.push(this.readSFixed64());return o},skip:function(o){var i=7&o;if(i===ir.Varint)for(;this.buf[this.pos++]>127;);else if(i===ir.Bytes)this.pos=this.readVarint()+this.pos;else if(i===ir.Fixed32)this.pos+=4;else{if(i!==ir.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(o,i){this.writeVarint(o<<3|i)},realloc:function(o){for(var i=this.length||16;i<this.pos+o;)i*=2;if(i!==this.length){var c=new Uint8Array(i);c.set(this.buf),this.buf=c,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Gu(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Gu(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Gu(this.buf,-1&o,this.pos),Gu(this.buf,Math.floor(o*w1),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Gu(this.buf,-1&o,this.pos),Gu(this.buf,Math.floor(o*w1),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(i,c){var f,m;if(i>=0?(f=i%4294967296|0,m=i/4294967296|0):(m=~(-i/4294967296),4294967295^(f=~(-i%4294967296))?f=f+1|0:(f=0,m=m+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");c.realloc(10),function(b,w,T){T.buf[T.pos++]=127&b|128,b>>>=7,T.buf[T.pos++]=127&b|128,b>>>=7,T.buf[T.pos++]=127&b|128,b>>>=7,T.buf[T.pos++]=127&b|128,T.buf[T.pos]=127&(b>>>=7)}(f,0,c),function(b,w){var T=(7&b)<<4;w.buf[w.pos++]|=T|((b>>>=3)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b)))))}(m,c)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var i=this.pos;this.pos=function(f,m,b){for(var w,T,P=0;P<m.length;P++){if((w=m.charCodeAt(P))>55295&&w<57344){if(!T){w>56319||P+1===m.length?(f[b++]=239,f[b++]=191,f[b++]=189):T=w;continue}if(w<56320){f[b++]=239,f[b++]=191,f[b++]=189,T=w;continue}w=T-55296<<10|w-56320|65536,T=null}else T&&(f[b++]=239,f[b++]=191,f[b++]=189,T=null);w<128?f[b++]=w:(w<2048?f[b++]=w>>6|192:(w<65536?f[b++]=w>>12|224:(f[b++]=w>>18|240,f[b++]=w>>12&63|128),f[b++]=w>>6&63|128),f[b++]=63&w|128)}return b}(this.buf,o,this.pos);var c=this.pos-i;c>=128&&k1(i,c,this),this.pos=i-1,this.writeVarint(c),this.pos+=c},writeFloat:function(o){this.realloc(4),x1(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),x1(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var i=o.length;this.writeVarint(i),this.realloc(i);for(var c=0;c<i;c++)this.buf[this.pos++]=o[c]},writeRawMessage:function(o,i){this.pos++;var c=this.pos;o(i,this);var f=this.pos-c;f>=128&&k1(c,f,this),this.pos=c-1,this.writeVarint(f),this.pos+=f},writeMessage:function(o,i,c){this.writeTag(o,ir.Bytes),this.writeRawMessage(i,c)},writePackedVarint:function(o,i){i.length&&this.writeMessage(o,UD,i)},writePackedSVarint:function(o,i){i.length&&this.writeMessage(o,qD,i)},writePackedBoolean:function(o,i){i.length&&this.writeMessage(o,GD,i)},writePackedFloat:function(o,i){i.length&&this.writeMessage(o,jD,i)},writePackedDouble:function(o,i){i.length&&this.writeMessage(o,HD,i)},writePackedFixed32:function(o,i){i.length&&this.writeMessage(o,WD,i)},writePackedSFixed32:function(o,i){i.length&&this.writeMessage(o,YD,i)},writePackedFixed64:function(o,i){i.length&&this.writeMessage(o,ZD,i)},writePackedSFixed64:function(o,i){i.length&&this.writeMessage(o,KD,i)},writeBytesField:function(o,i){this.writeTag(o,ir.Bytes),this.writeBytes(i)},writeFixed32Field:function(o,i){this.writeTag(o,ir.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(o,i){this.writeTag(o,ir.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(o,i){this.writeTag(o,ir.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(o,i){this.writeTag(o,ir.Fixed64),this.writeSFixed64(i)},writeVarintField:function(o,i){this.writeTag(o,ir.Varint),this.writeVarint(i)},writeSVarintField:function(o,i){this.writeTag(o,ir.Varint),this.writeSVarint(i)},writeStringField:function(o,i){this.writeTag(o,ir.Bytes),this.writeString(i)},writeFloatField:function(o,i){this.writeTag(o,ir.Fixed32),this.writeFloat(i)},writeDoubleField:function(o,i){this.writeTag(o,ir.Fixed64),this.writeDouble(i)},writeBooleanField:function(o,i){this.writeVarintField(o,!!i)}};var _y=_(_1);const by=3;function XD(o,i,c){o===1&&c.readMessage(JD,i)}function JD(o,i,c){if(o===3){const{id:f,bitmap:m,width:b,height:w,left:T,top:P,advance:L}=c.readMessage(QD,{});i.push({id:f,bitmap:new Lh({width:b+2*by,height:w+2*by},m),metrics:{width:b,height:w,left:T,top:P,advance:L}})}}function QD(o,i,c){o===1?i.id=c.readVarint():o===2?i.bitmap=c.readBytes():o===3?i.width=c.readVarint():o===4?i.height=c.readVarint():o===5?i.left=c.readSVarint():o===6?i.top=c.readSVarint():o===7&&(i.advance=c.readVarint())}const T1=by;function A1(o){let i=0,c=0;for(const w of o)i+=w.w*w.h,c=Math.max(c,w.w);o.sort((w,T)=>T.h-w.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),c),h:1/0}];let m=0,b=0;for(const w of o)for(let T=f.length-1;T>=0;T--){const P=f[T];if(!(w.w>P.w||w.h>P.h)){if(w.x=P.x,w.y=P.y,b=Math.max(b,w.y+w.h),m=Math.max(m,w.x+w.w),w.w===P.w&&w.h===P.h){const L=f.pop();T<f.length&&(f[T]=L)}else w.h===P.h?(P.x+=w.w,P.w-=w.w):w.w===P.w?(P.y+=w.h,P.h-=w.h):(f.push({x:P.x+w.w,y:P.y,w:P.w-w.w,h:w.h}),P.y+=w.h,P.h-=w.h);break}}return{w:m,h:b,fill:i/(m*b)||0}}const pa=1;class xy{constructor(i,{pixelRatio:c,version:f,stretchX:m,stretchY:b,content:w}){this.paddedRect=i,this.pixelRatio=c,this.stretchX=m,this.stretchY=b,this.content=w,this.version=f}get tl(){return[this.paddedRect.x+pa,this.paddedRect.y+pa]}get br(){return[this.paddedRect.x+this.paddedRect.w-pa,this.paddedRect.y+this.paddedRect.h-pa]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*pa)/this.pixelRatio,(this.paddedRect.h-2*pa)/this.pixelRatio]}}class E1{constructor(i,c){const f={},m={};this.haveRenderCallbacks=[];const b=[];this.addImages(i,f,b),this.addImages(c,m,b);const{w,h:T}=A1(b),P=new Na({width:w||1,height:T||1});for(const L in i){const B=i[L],U=f[L].paddedRect;Na.copy(B.data,P,{x:0,y:0},{x:U.x+pa,y:U.y+pa},B.data)}for(const L in c){const B=c[L],U=m[L].paddedRect,G=U.x+pa,K=U.y+pa,J=B.data.width,ce=B.data.height;Na.copy(B.data,P,{x:0,y:0},{x:G,y:K},B.data),Na.copy(B.data,P,{x:0,y:ce-1},{x:G,y:K-1},{width:J,height:1}),Na.copy(B.data,P,{x:0,y:0},{x:G,y:K+ce},{width:J,height:1}),Na.copy(B.data,P,{x:J-1,y:0},{x:G-1,y:K},{width:1,height:ce}),Na.copy(B.data,P,{x:0,y:0},{x:G+J,y:K},{width:1,height:ce})}this.image=P,this.iconPositions=f,this.patternPositions=m}addImages(i,c,f){for(const m in i){const b=i[m],w={x:0,y:0,w:b.data.width+2*pa,h:b.data.height+2*pa};f.push(w),c[m]=new xy(w,b),b.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(i,c){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in i.updatedImages)this.patchUpdatedImage(this.iconPositions[f],i.getImage(f),c),this.patchUpdatedImage(this.patternPositions[f],i.getImage(f),c)}patchUpdatedImage(i,c,f){if(!i||!c||i.version===c.version)return;i.version=c.version;const[m,b]=i.tl;f.update(c.data,void 0,{x:m,y:b})}}var zl;$t("ImagePosition",xy),$t("ImageAtlas",E1),l.ai=void 0,(zl=l.ai||(l.ai={}))[zl.none=0]="none",zl[zl.horizontal=1]="horizontal",zl[zl.vertical=2]="vertical",zl[zl.horizontalOnly=3]="horizontalOnly";const $h=-17;class Uh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,c){const f=new Uh;return f.scale=i||1,f.fontStack=c,f}static forImage(i){const c=new Uh;return c.imageName=i,c}}class Wu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,c){const f=new Wu;for(let m=0;m<i.sections.length;m++){const b=i.sections[m];b.image?f.addImageSection(b):f.addTextSection(b,c)}return f}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let c="";for(let f=0;f<i.length;f++){const m=i.charCodeAt(f+1)||null,b=i.charCodeAt(f-1)||null;c+=m&&zp(m)&&!Nh[i[f+1]]||b&&zp(b)&&!Nh[i[f-1]]||!Nh[i[f]]?i[f]:Nh[i[f]]}return c}(this.text)}trim(){let i=0;for(let f=0;f<this.text.length&&rm[this.text.charCodeAt(f)];f++)i++;let c=this.text.length;for(let f=this.text.length-1;f>=0&&f>=i&&rm[this.text.charCodeAt(f)];f--)c--;this.text=this.text.substring(i,c),this.sectionIndex=this.sectionIndex.slice(i,c)}substring(i,c){const f=new Wu;return f.text=this.text.substring(i,c),f.sectionIndex=this.sectionIndex.slice(i,c),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,c)=>Math.max(i,this.sections[c].scale),0)}addTextSection(i,c){this.text+=i.text,this.sections.push(Uh.forText(i.scale,i.fontStack||c));const f=this.sections.length-1;for(let m=0;m<i.text.length;++m)this.sectionIndex.push(f)}addImageSection(i){const c=i.image?i.image.name:"";if(c.length===0)return void me("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Uh.forImage(c)),this.sectionIndex.push(this.sections.length-1)):me("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function nm(o,i,c,f,m,b,w,T,P,L,B,U,G,K,J,ce){const ve=Wu.fromFeature(o,m);let xe;U===l.ai.vertical&&ve.verticalizePunctuation();const{processBidirectionalText:Le,processStyledBidirectionalText:Te}=ha;if(Le&&ve.sections.length===1){xe=[];const it=Le(ve.toString(),wy(ve,L,b,i,f,K,J));for(const Nt of it){const Wt=new Wu;Wt.text=Nt,Wt.sections=ve.sections;for(let Ft=0;Ft<Nt.length;Ft++)Wt.sectionIndex.push(0);xe.push(Wt)}}else if(Te){xe=[];const it=Te(ve.text,ve.sectionIndex,wy(ve,L,b,i,f,K,J));for(const Nt of it){const Wt=new Wu;Wt.text=Nt[0],Wt.sectionIndex=Nt[1],Wt.sections=ve.sections,xe.push(Wt)}}else xe=function(it,Nt){const Wt=[],Ft=it.text;let Rt=0;for(const Pt of Nt)Wt.push(it.substring(Rt,Pt)),Rt=Pt;return Rt<Ft.length&&Wt.push(it.substring(Rt,Ft.length)),Wt}(ve,wy(ve,L,b,i,f,K,J));const Oe=[],je={positionedLines:Oe,text:ve.toString(),top:B[1],bottom:B[1],left:B[0],right:B[0],writingMode:U,iconsInText:!1,verticalizable:!1};return function(it,Nt,Wt,Ft,Rt,Pt,qt,Dt,vt,en,Zt,kn){let vr=0,Sr=$h,si=0,Ia=0;const Ji=Dt==="right"?1:Dt==="left"?0:.5;let Qr=0;for(const oi of Rt){oi.trim();const li=oi.getMaxScale(),Fi=(li-1)*ai,ta={positionedGlyphs:[],lineOffset:0};it.positionedLines[Qr]=ta;const Bi=ta.positionedGlyphs;let ma=0;if(!oi.length()){Sr+=Pt,++Qr;continue}for(let ci=0;ci<oi.length();ci++){const Mn=oi.getSection(ci),Vi=oi.getSectionIndex(ci),Pi=oi.getCharCode(ci);let ui=0,os=null,Rs=null,Os=null,Wo=ai;const ls=!(vt===l.ai.horizontal||!Zt&&!ph(Pi)||Zt&&(rm[Pi]||(xi=Pi,Vt.Arabic(xi)||Vt["Arabic Supplement"](xi)||Vt["Arabic Extended-A"](xi)||Vt["Arabic Presentation Forms-A"](xi)||Vt["Arabic Presentation Forms-B"](xi))));if(Mn.imageName){const Ua=Ft[Mn.imageName];if(!Ua)continue;Os=Mn.imageName,it.iconsInText=it.iconsInText||!0,Rs=Ua.paddedRect;const va=Ua.displaySize;Mn.scale=Mn.scale*ai/kn,os={width:va[0],height:va[1],left:pa,top:-T1,advance:ls?va[1]:va[0]},ui=Fi+(ai-va[1]*Mn.scale),Wo=os.advance;const Yo=ls?va[0]*Mn.scale-ai*li:va[1]*Mn.scale-ai*li;Yo>0&&Yo>ma&&(ma=Yo)}else{const Ua=Wt[Mn.fontStack],va=Ua&&Ua[Pi];if(va&&va.rect)Rs=va.rect,os=va.metrics;else{const Yo=Nt[Mn.fontStack],Wh=Yo&&Yo[Pi];if(!Wh)continue;os=Wh.metrics}ui=(li-Mn.scale)*ai}ls?(it.verticalizable=!0,Bi.push({glyph:Pi,imageName:Os,x:vr,y:Sr+ui,vertical:ls,scale:Mn.scale,fontStack:Mn.fontStack,sectionIndex:Vi,metrics:os,rect:Rs}),vr+=Wo*Mn.scale+en):(Bi.push({glyph:Pi,imageName:Os,x:vr,y:Sr+ui,vertical:ls,scale:Mn.scale,fontStack:Mn.fontStack,sectionIndex:Vi,metrics:os,rect:Rs}),vr+=os.advance*Mn.scale+en)}Bi.length!==0&&(si=Math.max(vr-en,si),nM(Bi,0,Bi.length-1,Ji,ma)),vr=0;const ga=Pt*li+ma;ta.lineOffset=Math.max(ma,Fi),Sr+=ga,Ia=Math.max(ga,Ia),++Qr}var xi;const Ii=Sr-$h,{horizontalAlign:Qi,verticalAlign:ea}=Sy(qt);(function(oi,li,Fi,ta,Bi,ma,ga,ci,Mn){const Vi=(li-Fi)*Bi;let Pi=0;Pi=ma!==ga?-ci*ta-$h:(-ta*Mn+.5)*ga;for(const ui of oi)for(const os of ui.positionedGlyphs)os.x+=Vi,os.y+=Pi})(it.positionedLines,Ji,Qi,ea,si,Ia,Pt,Ii,Rt.length),it.top+=-ea*Ii,it.bottom=it.top+Ii,it.left+=-Qi*si,it.right=it.left+si}(je,i,c,f,xe,w,T,P,U,L,G,ce),!function(it){for(const Nt of it)if(Nt.positionedGlyphs.length!==0)return!1;return!0}(Oe)&&je}const rm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},eM={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function I1(o,i,c,f,m,b){if(i.imageName){const w=f[i.imageName];return w?w.displaySize[0]*i.scale*ai/b+m:0}{const w=c[i.fontStack],T=w&&w[o];return T?T.metrics.advance*i.scale+m:0}}function P1(o,i,c,f){const m=Math.pow(o-i,2);return f?o<i?m/2:2*m:m+Math.abs(c)*c}function tM(o,i,c){let f=0;return o===10&&(f-=1e4),c&&(f+=150),o!==40&&o!==65288||(f+=50),i!==41&&i!==65289||(f+=50),f}function D1(o,i,c,f,m,b){let w=null,T=P1(i,c,m,b);for(const P of f){const L=P1(i-P.x,c,m,b)+P.badness;L<=T&&(w=P,T=L)}return{index:o,x:i,priorBreak:w,badness:T}}function M1(o){return o?M1(o.priorBreak).concat(o.index):[]}function wy(o,i,c,f,m,b,w){if(b!=="point")return[];if(!o)return[];const T=[],P=function(G,K,J,ce,ve,xe){let Le=0;for(let Te=0;Te<G.length();Te++){const Oe=G.getSection(Te);Le+=I1(G.getCharCode(Te),Oe,ce,ve,K,xe)}return Le/Math.max(1,Math.ceil(Le/J))}(o,i,c,f,m,w),L=o.text.indexOf("")>=0;let B=0;for(let G=0;G<o.length();G++){const K=o.getSection(G),J=o.getCharCode(G);if(rm[J]||(B+=I1(J,K,f,m,i,w)),G<o.length()-1){const ce=!((U=J)<11904||!(Vt["Bopomofo Extended"](U)||Vt.Bopomofo(U)||Vt["CJK Compatibility Forms"](U)||Vt["CJK Compatibility Ideographs"](U)||Vt["CJK Compatibility"](U)||Vt["CJK Radicals Supplement"](U)||Vt["CJK Strokes"](U)||Vt["CJK Symbols and Punctuation"](U)||Vt["CJK Unified Ideographs Extension A"](U)||Vt["CJK Unified Ideographs"](U)||Vt["Enclosed CJK Letters and Months"](U)||Vt["Halfwidth and Fullwidth Forms"](U)||Vt.Hiragana(U)||Vt["Ideographic Description Characters"](U)||Vt["Kangxi Radicals"](U)||Vt["Katakana Phonetic Extensions"](U)||Vt.Katakana(U)||Vt["Vertical Forms"](U)||Vt["Yi Radicals"](U)||Vt["Yi Syllables"](U)));(eM[J]||ce||K.imageName)&&T.push(D1(G+1,B,P,T,tM(J,o.getCharCode(G+1),ce&&L),!1))}}var U;return M1(D1(o.length(),B,P,T,0,!0))}function Sy(o){let i=.5,c=.5;switch(o){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:i,verticalAlign:c}}function nM(o,i,c,f,m){if(!f&&!m)return;const b=o[c],w=(o[c].x+b.metrics.advance*b.scale)*f;for(let T=i;T<=c;T++)o[T].x-=w,o[T].y+=m}function rM(o,i,c){const{horizontalAlign:f,verticalAlign:m}=Sy(c),b=i[0]-o.displaySize[0]*f,w=i[1]-o.displaySize[1]*m;return{image:o,top:w,bottom:w+o.displaySize[1],left:b,right:b+o.displaySize[0]}}function L1(o,i,c,f,m,b){const w=o.image;let T;if(w.content){const ve=w.content,xe=w.pixelRatio||1;T=[ve[0]/xe,ve[1]/xe,w.displaySize[0]-ve[2]/xe,w.displaySize[1]-ve[3]/xe]}const P=i.left*b,L=i.right*b;let B,U,G,K;c==="width"||c==="both"?(K=m[0]+P-f[3],U=m[0]+L+f[1]):(K=m[0]+(P+L-w.displaySize[0])/2,U=K+w.displaySize[0]);const J=i.top*b,ce=i.bottom*b;return c==="height"||c==="both"?(B=m[1]+J-f[0],G=m[1]+ce+f[2]):(B=m[1]+(J+ce-w.displaySize[1])/2,G=B+w.displaySize[1]),{image:w,top:B,right:U,bottom:G,left:K,collisionPadding:T}}const qh=255,ao=128,Fl=qh*ao;function R1(o,i){const{expression:c}=i;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new mr(o+1))};if(c.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:m}=c;let b=0;for(;b<f.length&&f[b]<=o;)b++;b=Math.max(0,b-1);let w=b;for(;w<f.length&&f[w]<o+1;)w++;w=Math.min(f.length-1,w);const T=f[b],P=f[w];return c.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:P,interpolationType:m}:{kind:"camera",minZoom:T,maxZoom:P,minSize:c.evaluate(new mr(T)),maxSize:c.evaluate(new mr(P)),interpolationType:m}}}function ky(o,i,c){let f="never";const m=o.get(i);return m?f=m:o.get(c)&&(f="always"),f}const iM=Ol.VectorTileFeature.types,aM=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function im(o,i,c,f,m,b,w,T,P,L,B,U,G){const K=T?Math.min(Fl,Math.round(T[0])):0,J=T?Math.min(Fl,Math.round(T[1])):0;o.emplaceBack(i,c,Math.round(32*f),Math.round(32*m),b,w,(K<<1)+(P?1:0),J,16*L,16*B,256*U,256*G)}function Cy(o,i,c){o.emplaceBack(i.x,i.y,c),o.emplaceBack(i.x,i.y,c),o.emplaceBack(i.x,i.y,c),o.emplaceBack(i.x,i.y,c)}function sM(o){for(const i of o.sections)if(Xv(i.text))return!0;return!1}class Ty{constructor(i){this.layoutVertexArray=new An,this.indexArray=new _i,this.programConfigurations=i,this.segments=new gr,this.dynamicLayoutVertexArray=new _n,this.opacityVertexArray=new Dn,this.hasVisibleVertices=!1,this.placedSymbolArray=new Ee}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,c,f,m){this.isEmpty()||(f&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,FD.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,BD.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,aM,!0),this.opacityVertexBuffer.itemSize=1),(f||m)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}$t("SymbolBuffers",Ty);class Ay{constructor(i,c,f){this.layoutVertexArray=new i,this.layoutAttributes=c,this.indexArray=new f,this.segments=new gr,this.collisionVertexArray=new hr}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,VD.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}$t("CollisionBuffers",Ay);class Yu{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(w=>w.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=iy([]),this.placementViewportMatrix=iy([]);const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=R1(this.zoom,c["text-size"]),this.iconSizeData=R1(this.zoom,c["icon-size"]);const f=this.layers[0].layout,m=f.get("symbol-sort-key"),b=f.get("symbol-z-order");this.canOverlap=ky(f,"text-overlap","text-allow-overlap")!=="never"||ky(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(w=>l.ai[w])),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=i.sourceID}createArrays(){this.text=new Ty(new Ls(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new Ty(new Ls(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new De,this.lineVertexArray=new We,this.symbolInstances=new be,this.textAnchorOffsets=new rt}calculateGlyphDependencies(i,c,f,m,b){for(let w=0;w<i.length;w++)if(c[i.charCodeAt(w)]=!0,(f||m)&&b){const T=Nh[i.charAt(w)];T&&(c[T.charCodeAt(0)]=!0)}}populate(i,c,f){const m=this.layers[0],b=m.layout,w=b.get("text-font"),T=b.get("text-field"),P=b.get("icon-image"),L=(T.value.kind!=="constant"||T.value.value instanceof Ti&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(w.value.kind!=="constant"||w.value.value.length>0),B=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,U=b.get("symbol-sort-key");if(this.features=[],!L&&!B)return;const G=c.iconDependencies,K=c.glyphDependencies,J=c.availableImages,ce=new mr(this.zoom);for(const{feature:ve,id:xe,index:Le,sourceLayerIndex:Te}of i){const Oe=m._featureFilter.needGeometry,je=Pc(ve,Oe);if(!m._featureFilter.filter(ce,je,f))continue;let it,Nt;if(Oe||(je.geometry=Ic(ve)),L){const Ft=m.getValueAndResolveTokens("text-field",je,f,J),Rt=Ti.factory(Ft);sM(Rt)&&(this.hasRTLText=!0),(!this.hasRTLText||bh()==="unavailable"||this.hasRTLText&&ha.isParsed())&&(it=$D(Rt,m,je))}if(B){const Ft=m.getValueAndResolveTokens("icon-image",je,f,J);Nt=Ft instanceof yi?Ft:yi.fromString(Ft)}if(!it&&!Nt)continue;const Wt=this.sortFeaturesByKey?U.evaluate(je,{},f):void 0;if(this.features.push({id:xe,text:it,icon:Nt,index:Le,sourceLayerIndex:Te,geometry:je.geometry,properties:ve.properties,type:iM[ve.type],sortKey:Wt}),Nt&&(G[Nt.name]=!0),it){const Ft=w.evaluate(je,{},f).join(","),Rt=b.get("text-rotation-alignment")!=="viewport"&&b.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ai.vertical)>=0;for(const Pt of it.sections)if(Pt.image)G[Pt.image.name]=!0;else{const qt=hh(it.toString()),Dt=Pt.fontStack||Ft,vt=K[Dt]=K[Dt]||{};this.calculateGlyphDependencies(Pt.text,vt,Rt,this.allowVerticalPlacement,qt)}}}b.get("symbol-placement")==="line"&&(this.features=function(ve){const xe={},Le={},Te=[];let Oe=0;function je(Ft){Te.push(ve[Ft]),Oe++}function it(Ft,Rt,Pt){const qt=Le[Ft];return delete Le[Ft],Le[Rt]=qt,Te[qt].geometry[0].pop(),Te[qt].geometry[0]=Te[qt].geometry[0].concat(Pt[0]),qt}function Nt(Ft,Rt,Pt){const qt=xe[Rt];return delete xe[Rt],xe[Ft]=qt,Te[qt].geometry[0].shift(),Te[qt].geometry[0]=Pt[0].concat(Te[qt].geometry[0]),qt}function Wt(Ft,Rt,Pt){const qt=Pt?Rt[0][Rt[0].length-1]:Rt[0][0];return`${Ft}:${qt.x}:${qt.y}`}for(let Ft=0;Ft<ve.length;Ft++){const Rt=ve[Ft],Pt=Rt.geometry,qt=Rt.text?Rt.text.toString():null;if(!qt){je(Ft);continue}const Dt=Wt(qt,Pt),vt=Wt(qt,Pt,!0);if(Dt in Le&&vt in xe&&Le[Dt]!==xe[vt]){const en=Nt(Dt,vt,Pt),Zt=it(Dt,vt,Te[en].geometry);delete xe[Dt],delete Le[vt],Le[Wt(qt,Te[Zt].geometry,!0)]=Zt,Te[en].geometry=null}else Dt in Le?it(Dt,vt,Pt):vt in xe?Nt(Dt,vt,Pt):(je(Ft),xe[Dt]=Oe-1,Le[vt]=Oe-1)}return Te.filter(Ft=>Ft.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ve,xe)=>ve.sortKey-xe.sortKey)}update(i,c,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,c,this.layers,f),this.icon.programConfigurations.updatePaintArrays(i,c,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,c){const f=this.lineVertexArray.length;if(i.segment!==void 0){let m=i.dist(c[i.segment+1]),b=i.dist(c[i.segment]);const w={};for(let T=i.segment+1;T<c.length;T++)w[T]={x:c[T].x,y:c[T].y,tileUnitDistanceFromAnchor:m},T<c.length-1&&(m+=c[T+1].dist(c[T]));for(let T=i.segment||0;T>=0;T--)w[T]={x:c[T].x,y:c[T].y,tileUnitDistanceFromAnchor:b},T>0&&(b+=c[T-1].dist(c[T]));for(let T=0;T<c.length;T++){const P=w[T];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(i,c,f,m,b,w,T,P,L,B,U,G){const K=i.indexArray,J=i.layoutVertexArray,ce=i.segments.prepareSegment(4*c.length,J,K,this.canOverlap?w.sortKey:void 0),ve=this.glyphOffsetArray.length,xe=ce.vertexLength,Le=this.allowVerticalPlacement&&T===l.ai.vertical?Math.PI/2:0,Te=w.text&&w.text.sections;for(let Oe=0;Oe<c.length;Oe++){const{tl:je,tr:it,bl:Nt,br:Wt,tex:Ft,pixelOffsetTL:Rt,pixelOffsetBR:Pt,minFontScaleX:qt,minFontScaleY:Dt,glyphOffset:vt,isSDF:en,sectionIndex:Zt}=c[Oe],kn=ce.vertexLength,vr=vt[1];im(J,P.x,P.y,je.x,vr+je.y,Ft.x,Ft.y,f,en,Rt.x,Rt.y,qt,Dt),im(J,P.x,P.y,it.x,vr+it.y,Ft.x+Ft.w,Ft.y,f,en,Pt.x,Rt.y,qt,Dt),im(J,P.x,P.y,Nt.x,vr+Nt.y,Ft.x,Ft.y+Ft.h,f,en,Rt.x,Pt.y,qt,Dt),im(J,P.x,P.y,Wt.x,vr+Wt.y,Ft.x+Ft.w,Ft.y+Ft.h,f,en,Pt.x,Pt.y,qt,Dt),Cy(i.dynamicLayoutVertexArray,P,Le),K.emplaceBack(kn,kn+1,kn+2),K.emplaceBack(kn+1,kn+2,kn+3),ce.vertexLength+=4,ce.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(vt[0]),Oe!==c.length-1&&Zt===c[Oe+1].sectionIndex||i.programConfigurations.populatePaintArrays(J.length,w,w.index,{},G,Te&&Te[Zt])}i.placedSymbolArray.emplaceBack(P.x,P.y,ve,this.glyphOffsetArray.length-ve,xe,L,B,P.segment,f?f[0]:0,f?f[1]:0,m[0],m[1],T,0,!1,0,U)}_addCollisionDebugVertex(i,c,f,m,b,w){return c.emplaceBack(0,0),i.emplaceBack(f.x,f.y,m,b,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(i,c,f,m,b,w,T){const P=b.segments.prepareSegment(4,b.layoutVertexArray,b.indexArray),L=P.vertexLength,B=b.layoutVertexArray,U=b.collisionVertexArray,G=T.anchorX,K=T.anchorY;this._addCollisionDebugVertex(B,U,w,G,K,new k(i,c)),this._addCollisionDebugVertex(B,U,w,G,K,new k(f,c)),this._addCollisionDebugVertex(B,U,w,G,K,new k(f,m)),this._addCollisionDebugVertex(B,U,w,G,K,new k(i,m)),P.vertexLength+=4;const J=b.indexArray;J.emplaceBack(L,L+1),J.emplaceBack(L+1,L+2),J.emplaceBack(L+2,L+3),J.emplaceBack(L+3,L),P.primitiveLength+=4}addDebugCollisionBoxes(i,c,f,m){for(let b=i;b<c;b++){const w=this.collisionBoxArray.get(b);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,m?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ay($r,y1.members,ri),this.iconCollisionBox=new Ay($r,y1.members,ri);for(let i=0;i<this.symbolInstances.length;i++){const c=this.symbolInstances.get(i);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(i,c,f,m,b,w,T,P,L){const B={};for(let U=c;U<f;U++){const G=i.get(U);B.textBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},B.textFeatureIndex=G.featureIndex;break}for(let U=m;U<b;U++){const G=i.get(U);B.verticalTextBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},B.verticalTextFeatureIndex=G.featureIndex;break}for(let U=w;U<T;U++){const G=i.get(U);B.iconBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},B.iconFeatureIndex=G.featureIndex;break}for(let U=P;U<L;U++){const G=i.get(U);B.verticalIconBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},B.verticalIconFeatureIndex=G.featureIndex;break}return B}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const f=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,c){const f=i.placedSymbolArray.get(c),m=f.vertexStartIndex+4*f.numGlyphs;for(let b=f.vertexStartIndex;b<m;b+=4)i.indexArray.emplaceBack(b,b+1,b+2),i.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const c=Math.sin(i),f=Math.cos(i),m=[],b=[],w=[];for(let T=0;T<this.symbolInstances.length;++T){w.push(T);const P=this.symbolInstances.get(T);m.push(0|Math.round(c*P.anchorX+f*P.anchorY)),b.push(P.featureIndex)}return w.sort((T,P)=>m[T]-m[P]||b[P]-b[T]),w}addToSortKeyRanges(i,c){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===c?f.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const f=this.symbolInstances.get(c);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((m,b,w)=>{m>=0&&w.indexOf(m)===b&&this.addIndicesForPlacedSymbol(this.text,m)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let O1,z1;$t("SymbolBucket",Yu,{omit:["layers","collisionBoxArray","features","compareText"]}),Yu.MAX_GLYPHS=65535,Yu.addDynamicAttributes=Cy;var Ey={get paint(){return z1=z1||new Gr({"icon-opacity":new sn(Ce.paint_symbol["icon-opacity"]),"icon-color":new sn(Ce.paint_symbol["icon-color"]),"icon-halo-color":new sn(Ce.paint_symbol["icon-halo-color"]),"icon-halo-width":new sn(Ce.paint_symbol["icon-halo-width"]),"icon-halo-blur":new sn(Ce.paint_symbol["icon-halo-blur"]),"icon-translate":new Kt(Ce.paint_symbol["icon-translate"]),"icon-translate-anchor":new Kt(Ce.paint_symbol["icon-translate-anchor"]),"text-opacity":new sn(Ce.paint_symbol["text-opacity"]),"text-color":new sn(Ce.paint_symbol["text-color"],{runtimeType:Ri,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new sn(Ce.paint_symbol["text-halo-color"]),"text-halo-width":new sn(Ce.paint_symbol["text-halo-width"]),"text-halo-blur":new sn(Ce.paint_symbol["text-halo-blur"]),"text-translate":new Kt(Ce.paint_symbol["text-translate"]),"text-translate-anchor":new Kt(Ce.paint_symbol["text-translate-anchor"])})},get layout(){return O1=O1||new Gr({"symbol-placement":new Kt(Ce.layout_symbol["symbol-placement"]),"symbol-spacing":new Kt(Ce.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Kt(Ce.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new sn(Ce.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Kt(Ce.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Kt(Ce.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Kt(Ce.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Kt(Ce.layout_symbol["icon-ignore-placement"]),"icon-optional":new Kt(Ce.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Kt(Ce.layout_symbol["icon-rotation-alignment"]),"icon-size":new sn(Ce.layout_symbol["icon-size"]),"icon-text-fit":new Kt(Ce.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Kt(Ce.layout_symbol["icon-text-fit-padding"]),"icon-image":new sn(Ce.layout_symbol["icon-image"]),"icon-rotate":new sn(Ce.layout_symbol["icon-rotate"]),"icon-padding":new sn(Ce.layout_symbol["icon-padding"]),"icon-keep-upright":new Kt(Ce.layout_symbol["icon-keep-upright"]),"icon-offset":new sn(Ce.layout_symbol["icon-offset"]),"icon-anchor":new sn(Ce.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Kt(Ce.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Kt(Ce.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Kt(Ce.layout_symbol["text-rotation-alignment"]),"text-field":new sn(Ce.layout_symbol["text-field"]),"text-font":new sn(Ce.layout_symbol["text-font"]),"text-size":new sn(Ce.layout_symbol["text-size"]),"text-max-width":new sn(Ce.layout_symbol["text-max-width"]),"text-line-height":new Kt(Ce.layout_symbol["text-line-height"]),"text-letter-spacing":new sn(Ce.layout_symbol["text-letter-spacing"]),"text-justify":new sn(Ce.layout_symbol["text-justify"]),"text-radial-offset":new sn(Ce.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Kt(Ce.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new sn(Ce.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new sn(Ce.layout_symbol["text-anchor"]),"text-max-angle":new Kt(Ce.layout_symbol["text-max-angle"]),"text-writing-mode":new Kt(Ce.layout_symbol["text-writing-mode"]),"text-rotate":new sn(Ce.layout_symbol["text-rotate"]),"text-padding":new Kt(Ce.layout_symbol["text-padding"]),"text-keep-upright":new Kt(Ce.layout_symbol["text-keep-upright"]),"text-transform":new sn(Ce.layout_symbol["text-transform"]),"text-offset":new sn(Ce.layout_symbol["text-offset"]),"text-allow-overlap":new Kt(Ce.layout_symbol["text-allow-overlap"]),"text-overlap":new Kt(Ce.layout_symbol["text-overlap"]),"text-ignore-placement":new Kt(Ce.layout_symbol["text-ignore-placement"]),"text-optional":new Kt(Ce.layout_symbol["text-optional"])})}};class F1{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:ur,this.defaultValue=i}evaluate(i){if(i.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(i.formattedSection))return c.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}$t("FormatSectionOverride",F1,{omit:["defaultValue"]});class am extends Aa{constructor(i){super(i,Ey)}recalculate(i,c){if(super.recalculate(i,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const m=[];for(const b of f)m.indexOf(b)<0&&m.push(b);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,c,f,m){const b=this.layout.get(i).evaluate(c,{},f,m),w=this._unevaluatedLayout._values[i];return w.isDataDriven()||Eu(w.value)||!b?b:function(T,P){return P.replace(/{([^{}]+)}/g,(L,B)=>T&&B in T?String(T[B]):"")}(c.properties,b)}createBucket(i){return new Yu(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const i of Ey.paint.overridableProperties){if(!am.hasPaintOverride(this.layout,i))continue;const c=this.paint.get(i),f=new F1(c),m=new sh(f,c.property.specification);let b=null;b=c.value.kind==="constant"||c.value.kind==="source"?new oh("source",m):new Pu("composite",m,c.value.zoomStops),this.paint._values[i]=new Oi(c.property,b,c.parameters)}}_handleOverridablePaintPropertyUpdate(i,c,f){return!(!this.layout||c.isDataDriven()||f.isDataDriven())&&am.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,c){const f=i.get("text-field"),m=Ey.paint.properties[c];let b=!1;const w=T=>{for(const P of T)if(m.overrides&&m.overrides.hasOverride(P))return void(b=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Ti)w(f.value.value.sections);else if(f.value.kind==="source"){const T=L=>{b||(L instanceof Ro&&Ar(L.value)===fe?w(L.value.sections):L instanceof Au?w(L.sections):L.eachChild(T))},P=f.value;P._styleExpression&&T(P._styleExpression.expression)}return b}}let B1;var oM={get paint(){return B1=B1||new Gr({"background-color":new Kt(Ce.paint_background["background-color"]),"background-pattern":new wh(Ce.paint_background["background-pattern"]),"background-opacity":new Kt(Ce.paint_background["background-opacity"])})}};class lM extends Aa{constructor(i){super(i,oM)}}let V1;var cM={get paint(){return V1=V1||new Gr({"raster-opacity":new Kt(Ce.paint_raster["raster-opacity"]),"raster-hue-rotate":new Kt(Ce.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Kt(Ce.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Kt(Ce.paint_raster["raster-brightness-max"]),"raster-saturation":new Kt(Ce.paint_raster["raster-saturation"]),"raster-contrast":new Kt(Ce.paint_raster["raster-contrast"]),"raster-resampling":new Kt(Ce.paint_raster["raster-resampling"]),"raster-fade-duration":new Kt(Ce.paint_raster["raster-fade-duration"])})}};class uM extends Aa{constructor(i){super(i,cM)}}class dM extends Aa{constructor(i){super(i,{}),this.onAdd=c=>{this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},this.onRemove=c=>{this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class hM{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Iy=63710088e-1;class Bl{constructor(i,c){if(isNaN(i)||isNaN(c))throw new Error(`Invalid LngLat object: (${i}, ${c})`);if(this.lng=+i,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Bl(se(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const c=Math.PI/180,f=this.lat*c,m=i.lat*c,b=Math.sin(f)*Math.sin(m)+Math.cos(f)*Math.cos(m)*Math.cos((i.lng-this.lng)*c);return Iy*Math.acos(Math.min(b,1))}static convert(i){if(i instanceof Bl)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Bl(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Bl(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const N1=2*Math.PI*Iy;function $1(o){return N1*Math.cos(o*Math.PI/180)}function U1(o){return(180+o)/360}function q1(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function j1(o,i){return o/$1(i)}function H1(o){return 360*o-180}function Py(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class sm{constructor(i,c,f=0){this.x=+i,this.y=+c,this.z=+f}static fromLngLat(i,c=0){const f=Bl.convert(i);return new sm(U1(f.lng),q1(f.lat),j1(c,f.lat))}toLngLat(){return new Bl(H1(this.x),Py(this.y))}toAltitude(){return this.z*$1(Py(this.y))}meterInMercatorCoordinateUnits(){return 1/N1*(i=Py(this.y),1/Math.cos(i*Math.PI/180));var i}}function G1(o,i,c){var f=2*Math.PI*6378137/256/Math.pow(2,c);return[o*f-2*Math.PI*6378137/2,i*f-2*Math.PI*6378137/2]}class Dy{constructor(i,c,f){if(i<0||i>25||f<0||f>=Math.pow(2,i)||c<0||c>=Math.pow(2,i))throw new Error(`x=${c}, y=${f}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=c,this.y=f,this.key=jh(0,i,i,c,f)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,c,f){const m=(w=this.y,T=this.z,P=G1(256*(b=this.x),256*(w=Math.pow(2,T)-w-1),T),L=G1(256*(b+1),256*(w+1),T),P[0]+","+P[1]+","+L[0]+","+L[1]);var b,w,T,P,L;const B=function(U,G,K){let J,ce="";for(let ve=U;ve>0;ve--)J=1<<ve-1,ce+=(G&J?1:0)+(K&J?2:0);return ce}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,B).replace(/{bbox-epsg-3857}/g,m)}isChildOf(i){const c=this.z-i.z;return c>0&&i.x===this.x>>c&&i.y===this.y>>c}getTilePoint(i){const c=Math.pow(2,this.z);return new k((i.x*c-this.x)*Jr,(i.y*c-this.y)*Jr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class W1{constructor(i,c){this.wrap=i,this.canonical=c,this.key=jh(i,c.z,c.z,c.x,c.y)}}class $a{constructor(i,c,f,m,b){if(i<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${f}`);this.overscaledZ=i,this.wrap=c,this.canonical=new Dy(f,+m,+b),this.key=jh(c,i,f,m,b)}clone(){return new $a(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-i;return i>this.canonical.z?new $a(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new $a(i,this.wrap,i,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(i,c){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-i;return i>this.canonical.z?jh(this.wrap*+c,i,this.canonical.z,this.canonical.x,this.canonical.y):jh(this.wrap*+c,i,i,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(i){if(i.wrap!==this.wrap)return!1;const c=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>c&&i.canonical.y===this.canonical.y>>c}children(i){if(this.overscaledZ>=i)return[new $a(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,f=2*this.canonical.x,m=2*this.canonical.y;return[new $a(c,this.wrap,c,f,m),new $a(c,this.wrap,c,f+1,m),new $a(c,this.wrap,c,f,m+1),new $a(c,this.wrap,c,f+1,m+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new $a(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new $a(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new W1(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new sm(i.x-this.wrap,i.y))}}function jh(o,i,c,f,m){(o*=2)<0&&(o=-1*o-1);const b=1<<c;return(b*b*o+b*m+f).toString(36)+c.toString(36)+i.toString(36)}$t("CanonicalTileID",Dy),$t("OverscaledTileID",$a,{omit:["posMatrix"]});class Y1{constructor(i,c,f,m=1,b=1,w=1,T=0){if(this.uid=i,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void me(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=c.height;const P=this.dim=c.height-2;switch(this.data=new Uint32Array(c.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=b,this.blueFactor=w,this.baseShift=T;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let L=0;L<P;L++)this.data[this._idx(-1,L)]=this.data[this._idx(0,L)],this.data[this._idx(P,L)]=this.data[this._idx(P-1,L)],this.data[this._idx(L,-1)]=this.data[this._idx(L,0)],this.data[this._idx(L,P)]=this.data[this._idx(L,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let L=0;L<P;L++)for(let B=0;B<P;B++){const U=this.get(L,B);U>this.max&&(this.max=U),U<this.min&&(this.min=U)}}get(i,c){const f=new Uint8Array(this.data.buffer),m=4*this._idx(i,c);return this.unpack(f[m],f[m+1],f[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,c){if(i<-1||i>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(i+1)}unpack(i,c,f){return i*this.redFactor+c*this.greenFactor+f*this.blueFactor-this.baseShift}getPixels(){return new Na({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,c,f){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let m=c*this.dim,b=c*this.dim+this.dim,w=f*this.dim,T=f*this.dim+this.dim;switch(c){case-1:m=b-1;break;case 1:b=m+1}switch(f){case-1:w=T-1;break;case 1:T=w+1}const P=-c*this.dim,L=-f*this.dim;for(let B=w;B<T;B++)for(let U=m;U<b;U++)this.data[this._idx(U,B)]=i.data[this._idx(U+P,B+L)]}}$t("DEMData",Y1);class Z1{constructor(i){this._stringToNumber={},this._numberToString=[];for(let c=0;c<i.length;c++){const f=i[c];this._stringToNumber[f]=c,this._numberToString[c]=f}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class K1{constructor(i,c,f,m,b){this.type="Feature",this._vectorTileFeature=i,i._z=c,i._x=f,i._y=m,this.properties=i.properties,this.id=b}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&(i[c]=this[c]);return i}}class X1{constructor(i,c){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Pl(Jr,16,0),this.grid3D=new Pl(Jr,16,0),this.featureIndexArray=new ct,this.promoteId=c}insert(i,c,f,m,b,w){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,m,b);const P=w?this.grid3D:this.grid;for(let L=0;L<c.length;L++){const B=c[L],U=[1/0,1/0,-1/0,-1/0];for(let G=0;G<B.length;G++){const K=B[G];U[0]=Math.min(U[0],K.x),U[1]=Math.min(U[1],K.y),U[2]=Math.max(U[2],K.x),U[3]=Math.max(U[3],K.y)}U[0]<Jr&&U[1]<Jr&&U[2]>=0&&U[3]>=0&&P.insert(T,U[0],U[1],U[2],U[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ol.VectorTile(new _y(this.rawTileData)).layers,this.sourceLayerCoder=new Z1(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,c,f,m){this.loadVTLayers();const b=i.params||{},w=Jr/i.tileSize/i.scale,T=ch(b.filter),P=i.queryGeometry,L=i.queryPadding*w,B=Q1(P),U=this.grid.query(B.minX-L,B.minY-L,B.maxX+L,B.maxY+L),G=Q1(i.cameraQueryGeometry),K=this.grid3D.query(G.minX-L,G.minY-L,G.maxX+L,G.maxY+L,(ve,xe,Le,Te)=>function(Oe,je,it,Nt,Wt){for(const Rt of Oe)if(je<=Rt.x&&it<=Rt.y&&Nt>=Rt.x&&Wt>=Rt.y)return!0;const Ft=[new k(je,it),new k(je,Wt),new k(Nt,Wt),new k(Nt,it)];if(Oe.length>2){for(const Rt of Ft)if($u(Oe,Rt))return!0}for(let Rt=0;Rt<Oe.length-1;Rt++)if(jP(Oe[Rt],Oe[Rt+1],Ft))return!0;return!1}(i.cameraQueryGeometry,ve-L,xe-L,Le+L,Te+L));for(const ve of K)U.push(ve);U.sort(fM);const J={};let ce;for(let ve=0;ve<U.length;ve++){const xe=U[ve];if(xe===ce)continue;ce=xe;const Le=this.featureIndexArray.get(xe);let Te=null;this.loadMatchingFeature(J,Le.bucketIndex,Le.sourceLayerIndex,Le.featureIndex,T,b.layers,b.availableImages,c,f,m,(Oe,je,it)=>(Te||(Te=Ic(Oe)),je.queryIntersectsFeature(P,Oe,it,Te,this.z,i.transform,w,i.pixelPosMatrix)))}return J}loadMatchingFeature(i,c,f,m,b,w,T,P,L,B,U){const G=this.bucketLayerIDs[c];if(w&&!function(ve,xe){for(let Le=0;Le<ve.length;Le++)if(xe.indexOf(ve[Le])>=0)return!0;return!1}(w,G))return;const K=this.sourceLayerCoder.decode(f),J=this.vtLayers[K].feature(m);if(b.needGeometry){const ve=Pc(J,!0);if(!b.filter(new mr(this.tileID.overscaledZ),ve,this.tileID.canonical))return}else if(!b.filter(new mr(this.tileID.overscaledZ),J))return;const ce=this.getId(J,K);for(let ve=0;ve<G.length;ve++){const xe=G[ve];if(w&&w.indexOf(xe)<0)continue;const Le=P[xe];if(!Le)continue;let Te={};ce&&B&&(Te=B.getState(Le.sourceLayer||"_geojsonTileLayer",ce));const Oe=H({},L[xe]);Oe.paint=J1(Oe.paint,Le.paint,J,Te,T),Oe.layout=J1(Oe.layout,Le.layout,J,Te,T);const je=!U||U(J,Le,Te);if(!je)continue;const it=new K1(J,this.z,this.x,this.y,ce);it.layer=Oe;let Nt=i[xe];Nt===void 0&&(Nt=i[xe]=[]),Nt.push({featureIndex:m,feature:it,intersectionZ:je})}}lookupSymbolFeatures(i,c,f,m,b,w,T,P){const L={};this.loadVTLayers();const B=ch(b);for(const U of i)this.loadMatchingFeature(L,f,m,U,B,w,T,P,c);return L}hasLayer(i){for(const c of this.bucketLayerIDs)for(const f of c)if(i===f)return!0;return!1}getId(i,c){let f=i.id;return this.promoteId&&(f=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]],typeof f=="boolean"&&(f=Number(f))),f}}function J1(o,i,c,f,m){return ne(o,(b,w)=>{const T=i instanceof Vu?i.get(w):null;return T&&T.evaluate?T.evaluate(c,f,m):T})}function Q1(o){let i=1/0,c=1/0,f=-1/0,m=-1/0;for(const b of o)i=Math.min(i,b.x),c=Math.min(c,b.y),f=Math.max(f,b.x),m=Math.max(m,b.y);return{minX:i,minY:c,maxX:f,maxY:m}}function fM(o,i){return i-o}function ew(o,i,c,f,m){const b=[];for(let w=0;w<o.length;w++){const T=o[w];let P;for(let L=0;L<T.length-1;L++){let B=T[L],U=T[L+1];B.x<i&&U.x<i||(B.x<i?B=new k(i,B.y+(i-B.x)/(U.x-B.x)*(U.y-B.y))._round():U.x<i&&(U=new k(i,B.y+(i-B.x)/(U.x-B.x)*(U.y-B.y))._round()),B.y<c&&U.y<c||(B.y<c?B=new k(B.x+(c-B.y)/(U.y-B.y)*(U.x-B.x),c)._round():U.y<c&&(U=new k(B.x+(c-B.y)/(U.y-B.y)*(U.x-B.x),c)._round()),B.x>=f&&U.x>=f||(B.x>=f?B=new k(f,B.y+(f-B.x)/(U.x-B.x)*(U.y-B.y))._round():U.x>=f&&(U=new k(f,B.y+(f-B.x)/(U.x-B.x)*(U.y-B.y))._round()),B.y>=m&&U.y>=m||(B.y>=m?B=new k(B.x+(m-B.y)/(U.y-B.y)*(U.x-B.x),m)._round():U.y>=m&&(U=new k(B.x+(m-B.y)/(U.y-B.y)*(U.x-B.x),m)._round()),P&&B.equals(P[P.length-1])||(P=[B],b.push(P)),P.push(U)))))}}return b}$t("FeatureIndex",X1,{omit:["rawTileData","sourceLayerCoder"]});class Vl extends k{constructor(i,c,f,m){super(i,c),this.angle=f,m!==void 0&&(this.segment=m)}clone(){return new Vl(this.x,this.y,this.angle,this.segment)}}function tw(o,i,c,f,m){if(i.segment===void 0||c===0)return!0;let b=i,w=i.segment+1,T=0;for(;T>-c/2;){if(w--,w<0)return!1;T-=o[w].dist(b),b=o[w]}T+=o[w].dist(o[w+1]),w++;const P=[];let L=0;for(;T<c/2;){const B=o[w],U=o[w+1];if(!U)return!1;let G=o[w-1].angleTo(B)-B.angleTo(U);for(G=Math.abs((G+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:T,angleDelta:G}),L+=G;T-P[0].distance>f;)L-=P.shift().angleDelta;if(L>m)return!1;w++,T+=B.dist(U)}return!0}function nw(o){let i=0;for(let c=0;c<o.length-1;c++)i+=o[c].dist(o[c+1]);return i}function rw(o,i,c){return o?.6*i*c:0}function iw(o,i){return Math.max(o?o.right-o.left:0,i?i.right-i.left:0)}function pM(o,i,c,f,m,b){const w=rw(c,m,b),T=iw(c,f)*b;let P=0;const L=nw(o)/2;for(let B=0;B<o.length-1;B++){const U=o[B],G=o[B+1],K=U.dist(G);if(P+K>L){const J=(L-P)/K,ce=ca.number(U.x,G.x,J),ve=ca.number(U.y,G.y,J),xe=new Vl(ce,ve,G.angleTo(U),B);return xe._round(),!w||tw(o,xe,T,w,i)?xe:void 0}P+=K}}function mM(o,i,c,f,m,b,w,T,P){const L=rw(f,b,w),B=iw(f,m),U=B*w,G=o[0].x===0||o[0].x===P||o[0].y===0||o[0].y===P;return i-U<i/4&&(i=U+i/4),aw(o,G?i/2*T%i:(B/2+2*b)*w*T%i,i,L,c,U,G,!1,P)}function aw(o,i,c,f,m,b,w,T,P){const L=b/2,B=nw(o);let U=0,G=i-c,K=[];for(let J=0;J<o.length-1;J++){const ce=o[J],ve=o[J+1],xe=ce.dist(ve),Le=ve.angleTo(ce);for(;G+c<U+xe;){G+=c;const Te=(G-U)/xe,Oe=ca.number(ce.x,ve.x,Te),je=ca.number(ce.y,ve.y,Te);if(Oe>=0&&Oe<P&&je>=0&&je<P&&G-L>=0&&G+L<=B){const it=new Vl(Oe,je,Le,J);it._round(),f&&!tw(o,it,b,f,m)||K.push(it)}}U+=xe}return T||K.length||w||(K=aw(o,U/2,c,f,m,b,w,!0,P)),K}$t("Anchor",Vl);const Zu=pa;function sw(o,i,c,f){const m=[],b=o.image,w=b.pixelRatio,T=b.paddedRect.w-2*Zu,P=b.paddedRect.h-2*Zu,L=o.right-o.left,B=o.bottom-o.top,U=b.stretchX||[[0,T]],G=b.stretchY||[[0,P]],K=(Pt,qt)=>Pt+qt[1]-qt[0],J=U.reduce(K,0),ce=G.reduce(K,0),ve=T-J,xe=P-ce;let Le=0,Te=J,Oe=0,je=ce,it=0,Nt=ve,Wt=0,Ft=xe;if(b.content&&f){const Pt=b.content;Le=om(U,0,Pt[0]),Oe=om(G,0,Pt[1]),Te=om(U,Pt[0],Pt[2]),je=om(G,Pt[1],Pt[3]),it=Pt[0]-Le,Wt=Pt[1]-Oe,Nt=Pt[2]-Pt[0]-Te,Ft=Pt[3]-Pt[1]-je}const Rt=(Pt,qt,Dt,vt)=>{const en=lm(Pt.stretch-Le,Te,L,o.left),Zt=cm(Pt.fixed-it,Nt,Pt.stretch,J),kn=lm(qt.stretch-Oe,je,B,o.top),vr=cm(qt.fixed-Wt,Ft,qt.stretch,ce),Sr=lm(Dt.stretch-Le,Te,L,o.left),si=cm(Dt.fixed-it,Nt,Dt.stretch,J),Ia=lm(vt.stretch-Oe,je,B,o.top),Ji=cm(vt.fixed-Wt,Ft,vt.stretch,ce),Qr=new k(en,kn),xi=new k(Sr,kn),Ii=new k(Sr,Ia),Qi=new k(en,Ia),ea=new k(Zt/w,vr/w),oi=new k(si/w,Ji/w),li=i*Math.PI/180;if(li){const Bi=Math.sin(li),ma=Math.cos(li),ga=[ma,-Bi,Bi,ma];Qr._matMult(ga),xi._matMult(ga),Qi._matMult(ga),Ii._matMult(ga)}const Fi=Pt.stretch+Pt.fixed,ta=qt.stretch+qt.fixed;return{tl:Qr,tr:xi,bl:Qi,br:Ii,tex:{x:b.paddedRect.x+Zu+Fi,y:b.paddedRect.y+Zu+ta,w:Dt.stretch+Dt.fixed-Fi,h:vt.stretch+vt.fixed-ta},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ea,pixelOffsetBR:oi,minFontScaleX:Nt/w/L,minFontScaleY:Ft/w/B,isSDF:c}};if(f&&(b.stretchX||b.stretchY)){const Pt=ow(U,ve,J),qt=ow(G,xe,ce);for(let Dt=0;Dt<Pt.length-1;Dt++){const vt=Pt[Dt],en=Pt[Dt+1];for(let Zt=0;Zt<qt.length-1;Zt++)m.push(Rt(vt,qt[Zt],en,qt[Zt+1]))}}else m.push(Rt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:P+1}));return m}function om(o,i,c){let f=0;for(const m of o)f+=Math.max(i,Math.min(c,m[1]))-Math.max(i,Math.min(c,m[0]));return f}function ow(o,i,c){const f=[{fixed:-Zu,stretch:0}];for(const[m,b]of o){const w=f[f.length-1];f.push({fixed:m-w.stretch,stretch:w.stretch}),f.push({fixed:m-w.stretch,stretch:w.stretch+(b-m)})}return f.push({fixed:i+Zu,stretch:c}),f}function lm(o,i,c,f){return o/i*c+f}function cm(o,i,c,f){return o-i*c/f}class um{constructor(i,c,f,m,b,w,T,P,L,B){if(this.boxStartIndex=i.length,L){let U=w.top,G=w.bottom;const K=w.collisionPadding;K&&(U-=K[1],G+=K[3]);let J=G-U;J>0&&(J=Math.max(10,J),this.circleDiameter=J)}else{let U=w.top*T-P[0],G=w.bottom*T+P[2],K=w.left*T-P[3],J=w.right*T+P[1];const ce=w.collisionPadding;if(ce&&(K-=ce[0]*T,U-=ce[1]*T,J+=ce[2]*T,G+=ce[3]*T),B){const ve=new k(K,U),xe=new k(J,U),Le=new k(K,G),Te=new k(J,G),Oe=B*Math.PI/180;ve._rotate(Oe),xe._rotate(Oe),Le._rotate(Oe),Te._rotate(Oe),K=Math.min(ve.x,xe.x,Le.x,Te.x),J=Math.max(ve.x,xe.x,Le.x,Te.x),U=Math.min(ve.y,xe.y,Le.y,Te.y),G=Math.max(ve.y,xe.y,Le.y,Te.y)}i.emplaceBack(c.x,c.y,K,U,J,G,f,m,b)}this.boxEndIndex=i.length}}class gM{constructor(i=[],c=vM){if(this.data=i,this.length=this.data.length,this.compare=c,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],c=this.data.pop();return this.length--,this.length>0&&(this.data[0]=c,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:c,compare:f}=this,m=c[i];for(;i>0;){const b=i-1>>1,w=c[b];if(f(m,w)>=0)break;c[i]=w,i=b}c[i]=m}_down(i){const{data:c,compare:f}=this,m=this.length>>1,b=c[i];for(;i<m;){let w=1+(i<<1),T=c[w];const P=w+1;if(P<this.length&&f(c[P],T)<0&&(w=P,T=c[P]),f(T,b)>=0)break;c[i]=T,i=w}c[i]=b}}function vM(o,i){return o<i?-1:o>i?1:0}function yM(o,i=1,c=!1){let f=1/0,m=1/0,b=-1/0,w=-1/0;const T=o[0];for(let K=0;K<T.length;K++){const J=T[K];(!K||J.x<f)&&(f=J.x),(!K||J.y<m)&&(m=J.y),(!K||J.x>b)&&(b=J.x),(!K||J.y>w)&&(w=J.y)}const P=Math.min(b-f,w-m);let L=P/2;const B=new gM([],_M);if(P===0)return new k(f,m);for(let K=f;K<b;K+=P)for(let J=m;J<w;J+=P)B.push(new Ku(K+L,J+L,L,o));let U=function(K){let J=0,ce=0,ve=0;const xe=K[0];for(let Le=0,Te=xe.length,Oe=Te-1;Le<Te;Oe=Le++){const je=xe[Le],it=xe[Oe],Nt=je.x*it.y-it.x*je.y;ce+=(je.x+it.x)*Nt,ve+=(je.y+it.y)*Nt,J+=3*Nt}return new Ku(ce/J,ve/J,0,K)}(o),G=B.length;for(;B.length;){const K=B.pop();(K.d>U.d||!U.d)&&(U=K,c&&console.log("found best %d after %d probes",Math.round(1e4*K.d)/1e4,G)),K.max-U.d<=i||(L=K.h/2,B.push(new Ku(K.p.x-L,K.p.y-L,L,o)),B.push(new Ku(K.p.x+L,K.p.y-L,L,o)),B.push(new Ku(K.p.x-L,K.p.y+L,L,o)),B.push(new Ku(K.p.x+L,K.p.y+L,L,o)),G+=4)}return c&&(console.log(`num probes: ${G}`),console.log(`best distance: ${U.d}`)),U.p}function _M(o,i){return i.max-o.max}function Ku(o,i,c,f){this.p=new k(o,i),this.h=c,this.d=function(m,b){let w=!1,T=1/0;for(let P=0;P<b.length;P++){const L=b[P];for(let B=0,U=L.length,G=U-1;B<U;G=B++){const K=L[B],J=L[G];K.y>m.y!=J.y>m.y&&m.x<(J.x-K.x)*(m.y-K.y)/(J.y-K.y)+K.x&&(w=!w),T=Math.min(T,qx(m,K,J))}}return(w?1:-1)*Math.sqrt(T)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}var Ei;l.aq=void 0,(Ei=l.aq||(l.aq={}))[Ei.center=1]="center",Ei[Ei.left=2]="left",Ei[Ei.right=3]="right",Ei[Ei.top=4]="top",Ei[Ei.bottom=5]="bottom",Ei[Ei["top-left"]=6]="top-left",Ei[Ei["top-right"]=7]="top-right",Ei[Ei["bottom-left"]=8]="bottom-left",Ei[Ei["bottom-right"]=9]="bottom-right";const Nl=7,My=Number.POSITIVE_INFINITY;function lw(o,i){return i[1]!==My?function(c,f,m){let b=0,w=0;switch(f=Math.abs(f),m=Math.abs(m),c){case"top-right":case"top-left":case"top":w=m-Nl;break;case"bottom-right":case"bottom-left":case"bottom":w=-m+Nl}switch(c){case"top-right":case"bottom-right":case"right":b=-f;break;case"top-left":case"bottom-left":case"left":b=f}return[b,w]}(o,i[0],i[1]):function(c,f){let m=0,b=0;f<0&&(f=0);const w=f/Math.SQRT2;switch(c){case"top-right":case"top-left":b=w-Nl;break;case"bottom-right":case"bottom-left":b=-w+Nl;break;case"bottom":b=-f+Nl;break;case"top":b=f-Nl}switch(c){case"top-right":case"bottom-right":m=-w;break;case"top-left":case"bottom-left":m=w;break;case"left":m=f;break;case"right":m=-f}return[m,b]}(o,i[0])}function cw(o,i,c){var f;const m=o.layout,b=(f=m.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(i,{},c);if(b){const T=b.values,P=[];for(let L=0;L<T.length;L+=2){const B=P[L]=T[L],U=T[L+1].map(G=>G*ai);B.startsWith("top")?U[1]-=Nl:B.startsWith("bottom")&&(U[1]+=Nl),P[L+1]=U}return new Sa(P)}const w=m.get("text-variable-anchor");if(w){let T;T=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(i,{},c)*ai,My]:m.get("text-offset").evaluate(i,{},c).map(L=>L*ai);const P=[];for(const L of w)P.push(L,lw(L,T));return new Sa(P)}return null}function Ly(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function bM(o,i,c,f,m,b,w,T,P,L,B){let U=b.textMaxSize.evaluate(i,{});U===void 0&&(U=w);const G=o.layers[0].layout,K=G.get("icon-offset").evaluate(i,{},B),J=dw(c.horizontal),ce=w/24,ve=o.tilePixelRatio*ce,xe=o.tilePixelRatio*U/24,Le=o.tilePixelRatio*T,Te=o.tilePixelRatio*G.get("symbol-spacing"),Oe=G.get("text-padding")*o.tilePixelRatio,je=function(vt,en,Zt,kn=1){const vr=vt.get("icon-padding").evaluate(en,{},Zt),Sr=vr&&vr.values;return[Sr[0]*kn,Sr[1]*kn,Sr[2]*kn,Sr[3]*kn]}(G,i,B,o.tilePixelRatio),it=G.get("text-max-angle")/180*Math.PI,Nt=G.get("text-rotation-alignment")!=="viewport"&&G.get("symbol-placement")!=="point",Wt=G.get("icon-rotation-alignment")==="map"&&G.get("symbol-placement")!=="point",Ft=G.get("symbol-placement"),Rt=Te/2,Pt=G.get("icon-text-fit");let qt;f&&Pt!=="none"&&(o.allowVerticalPlacement&&c.vertical&&(qt=L1(f,c.vertical,Pt,G.get("icon-text-fit-padding"),K,ce)),J&&(f=L1(f,J,Pt,G.get("icon-text-fit-padding"),K,ce)));const Dt=(vt,en)=>{en.x<0||en.x>=Jr||en.y<0||en.y>=Jr||function(Zt,kn,vr,Sr,si,Ia,Ji,Qr,xi,Ii,Qi,ea,oi,li,Fi,ta,Bi,ma,ga,ci,Mn,Vi,Pi,ui,os){const Rs=Zt.addToLineVertexArray(kn,vr);let Os,Wo,ls,Ua,va=0,Yo=0,Wh=0,mw=0,$y=-1,Uy=-1;const Zo={};let gw=qo("");if(Zt.allowVerticalPlacement&&Sr.vertical){const Ni=Qr.layout.get("text-rotate").evaluate(Mn,{},ui)+90;ls=new um(xi,kn,Ii,Qi,ea,Sr.vertical,oi,li,Fi,Ni),Ji&&(Ua=new um(xi,kn,Ii,Qi,ea,Ji,Bi,ma,Fi,Ni))}if(si){const Ni=Qr.layout.get("icon-rotate").evaluate(Mn,{}),qa=Qr.layout.get("icon-text-fit")!=="none",Mc=sw(si,Ni,Pi,qa),Fs=Ji?sw(Ji,Ni,Pi,qa):void 0;Wo=new um(xi,kn,Ii,Qi,ea,si,Bi,ma,!1,Ni),va=4*Mc.length;const Lc=Zt.iconSizeData;let so=null;Lc.kind==="source"?(so=[ao*Qr.layout.get("icon-size").evaluate(Mn,{})],so[0]>Fl&&me(`${Zt.layerIds[0]}: Value for "icon-size" is >= ${qh}. Reduce your "icon-size".`)):Lc.kind==="composite"&&(so=[ao*Vi.compositeIconSizes[0].evaluate(Mn,{},ui),ao*Vi.compositeIconSizes[1].evaluate(Mn,{},ui)],(so[0]>Fl||so[1]>Fl)&&me(`${Zt.layerIds[0]}: Value for "icon-size" is >= ${qh}. Reduce your "icon-size".`)),Zt.addSymbols(Zt.icon,Mc,so,ci,ga,Mn,l.ai.none,kn,Rs.lineStartIndex,Rs.lineLength,-1,ui),$y=Zt.icon.placedSymbolArray.length-1,Fs&&(Yo=4*Fs.length,Zt.addSymbols(Zt.icon,Fs,so,ci,ga,Mn,l.ai.vertical,kn,Rs.lineStartIndex,Rs.lineLength,-1,ui),Uy=Zt.icon.placedSymbolArray.length-1)}const vw=Object.keys(Sr.horizontal);for(const Ni of vw){const qa=Sr.horizontal[Ni];if(!Os){gw=qo(qa.text);const Fs=Qr.layout.get("text-rotate").evaluate(Mn,{},ui);Os=new um(xi,kn,Ii,Qi,ea,qa,oi,li,Fi,Fs)}const Mc=qa.positionedLines.length===1;if(Wh+=uw(Zt,kn,qa,Ia,Qr,Fi,Mn,ta,Rs,Sr.vertical?l.ai.horizontal:l.ai.horizontalOnly,Mc?vw:[Ni],Zo,$y,Vi,ui),Mc)break}Sr.vertical&&(mw+=uw(Zt,kn,Sr.vertical,Ia,Qr,Fi,Mn,ta,Rs,l.ai.vertical,["vertical"],Zo,Uy,Vi,ui));const SM=Os?Os.boxStartIndex:Zt.collisionBoxArray.length,kM=Os?Os.boxEndIndex:Zt.collisionBoxArray.length,CM=ls?ls.boxStartIndex:Zt.collisionBoxArray.length,TM=ls?ls.boxEndIndex:Zt.collisionBoxArray.length,AM=Wo?Wo.boxStartIndex:Zt.collisionBoxArray.length,EM=Wo?Wo.boxEndIndex:Zt.collisionBoxArray.length,IM=Ua?Ua.boxStartIndex:Zt.collisionBoxArray.length,PM=Ua?Ua.boxEndIndex:Zt.collisionBoxArray.length;let zs=-1;const hm=(Ni,qa)=>Ni&&Ni.circleDiameter?Math.max(Ni.circleDiameter,qa):qa;zs=hm(Os,zs),zs=hm(ls,zs),zs=hm(Wo,zs),zs=hm(Ua,zs);const yw=zs>-1?1:0;yw&&(zs*=os/ai),Zt.glyphOffsetArray.length>=Yu.MAX_GLYPHS&&me("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Mn.sortKey!==void 0&&Zt.addToSortKeyRanges(Zt.symbolInstances.length,Mn.sortKey);const DM=cw(Qr,Mn,ui),[MM,LM]=function(Ni,qa){const Mc=Ni.length,Fs=qa==null?void 0:qa.values;if((Fs==null?void 0:Fs.length)>0)for(let Lc=0;Lc<Fs.length;Lc+=2){const so=Fs[Lc+1];Ni.emplaceBack(l.aq[Fs[Lc]],so[0],so[1])}return[Mc,Ni.length]}(Zt.textAnchorOffsets,DM);Zt.symbolInstances.emplaceBack(kn.x,kn.y,Zo.right>=0?Zo.right:-1,Zo.center>=0?Zo.center:-1,Zo.left>=0?Zo.left:-1,Zo.vertical||-1,$y,Uy,gw,SM,kM,CM,TM,AM,EM,IM,PM,Ii,Wh,mw,va,Yo,yw,0,oi,zs,MM,LM)}(o,en,vt,c,f,m,qt,o.layers[0],o.collisionBoxArray,i.index,i.sourceLayerIndex,o.index,ve,[Oe,Oe,Oe,Oe],Nt,P,Le,je,Wt,K,i,b,L,B,w)};if(Ft==="line")for(const vt of ew(i.geometry,0,0,Jr,Jr)){const en=mM(vt,Te,it,c.vertical||J,f,24,xe,o.overscaling,Jr);for(const Zt of en)J&&xM(o,J.text,Rt,Zt)||Dt(vt,Zt)}else if(Ft==="line-center"){for(const vt of i.geometry)if(vt.length>1){const en=pM(vt,it,c.vertical||J,f,24,xe);en&&Dt(vt,en)}}else if(i.type==="Polygon")for(const vt of dy(i.geometry,0)){const en=yM(vt,16);Dt(vt[0],new Vl(en.x,en.y,0))}else if(i.type==="LineString")for(const vt of i.geometry)Dt(vt,new Vl(vt[0].x,vt[0].y,0));else if(i.type==="Point")for(const vt of i.geometry)for(const en of vt)Dt([en],new Vl(en.x,en.y,0))}function uw(o,i,c,f,m,b,w,T,P,L,B,U,G,K,J){const ce=function(Le,Te,Oe,je,it,Nt,Wt,Ft){const Rt=je.layout.get("text-rotate").evaluate(Nt,{})*Math.PI/180,Pt=[];for(const qt of Te.positionedLines)for(const Dt of qt.positionedGlyphs){if(!Dt.rect)continue;const vt=Dt.rect||{};let en=T1+1,Zt=!0,kn=1,vr=0;const Sr=(it||Ft)&&Dt.vertical,si=Dt.metrics.advance*Dt.scale/2;if(Ft&&Te.verticalizable&&(vr=qt.lineOffset/2-(Dt.imageName?-(ai-Dt.metrics.width*Dt.scale)/2:(Dt.scale-1)*ai)),Dt.imageName){const ci=Wt[Dt.imageName];Zt=ci.sdf,kn=ci.pixelRatio,en=pa/kn}const Ia=it?[Dt.x+si,Dt.y]:[0,0];let Ji=it?[0,0]:[Dt.x+si+Oe[0],Dt.y+Oe[1]-vr],Qr=[0,0];Sr&&(Qr=Ji,Ji=[0,0]);const xi=Dt.metrics.isDoubleResolution?2:1,Ii=(Dt.metrics.left-en)*Dt.scale-si+Ji[0],Qi=(-Dt.metrics.top-en)*Dt.scale+Ji[1],ea=Ii+vt.w/xi*Dt.scale/kn,oi=Qi+vt.h/xi*Dt.scale/kn,li=new k(Ii,Qi),Fi=new k(ea,Qi),ta=new k(Ii,oi),Bi=new k(ea,oi);if(Sr){const ci=new k(-si,si-$h),Mn=-Math.PI/2,Vi=ai/2-si,Pi=new k(5-$h-Vi,-(Dt.imageName?Vi:0)),ui=new k(...Qr);li._rotateAround(Mn,ci)._add(Pi)._add(ui),Fi._rotateAround(Mn,ci)._add(Pi)._add(ui),ta._rotateAround(Mn,ci)._add(Pi)._add(ui),Bi._rotateAround(Mn,ci)._add(Pi)._add(ui)}if(Rt){const ci=Math.sin(Rt),Mn=Math.cos(Rt),Vi=[Mn,-ci,ci,Mn];li._matMult(Vi),Fi._matMult(Vi),ta._matMult(Vi),Bi._matMult(Vi)}const ma=new k(0,0),ga=new k(0,0);Pt.push({tl:li,tr:Fi,bl:ta,br:Bi,tex:vt,writingMode:Te.writingMode,glyphOffset:Ia,sectionIndex:Dt.sectionIndex,isSDF:Zt,pixelOffsetTL:ma,pixelOffsetBR:ga,minFontScaleX:0,minFontScaleY:0})}return Pt}(0,c,T,m,b,w,f,o.allowVerticalPlacement),ve=o.textSizeData;let xe=null;ve.kind==="source"?(xe=[ao*m.layout.get("text-size").evaluate(w,{})],xe[0]>Fl&&me(`${o.layerIds[0]}: Value for "text-size" is >= ${qh}. Reduce your "text-size".`)):ve.kind==="composite"&&(xe=[ao*K.compositeTextSizes[0].evaluate(w,{},J),ao*K.compositeTextSizes[1].evaluate(w,{},J)],(xe[0]>Fl||xe[1]>Fl)&&me(`${o.layerIds[0]}: Value for "text-size" is >= ${qh}. Reduce your "text-size".`)),o.addSymbols(o.text,ce,xe,T,b,w,L,i,P.lineStartIndex,P.lineLength,G,J);for(const Le of B)U[Le]=o.text.placedSymbolArray.length-1;return 4*ce.length}function dw(o){for(const i in o)return o[i];return null}function xM(o,i,c,f){const m=o.compareText;if(i in m){const b=m[i];for(let w=b.length-1;w>=0;w--)if(f.dist(b[w])<c)return!0}else m[i]=[];return m[i].push(f),!1}const hw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Ry{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[c,f]=new Uint8Array(i,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=f>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const b=hw[15&f];if(!b)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(i,2,1),[T]=new Uint32Array(i,4,1);return new Ry(T,w,b,i)}constructor(i,c=64,f=Float64Array,m){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=f,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const b=hw.indexOf(this.ArrayType),w=2*i*this.ArrayType.BYTES_PER_ELEMENT,T=i*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-T%8)%8;if(b<0)throw new Error(`Unexpected typed array class: ${f}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+T+P,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+w+T+P),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+T+P,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+b]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=i)}add(i,c){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=i,this.coords[this._pos++]=c,f}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return Oy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,c,f,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:w,nodeSize:T}=this,P=[0,b.length-1,0],L=[];for(;P.length;){const B=P.pop()||0,U=P.pop()||0,G=P.pop()||0;if(U-G<=T){for(let ve=G;ve<=U;ve++){const xe=w[2*ve],Le=w[2*ve+1];xe>=i&&xe<=f&&Le>=c&&Le<=m&&L.push(b[ve])}continue}const K=G+U>>1,J=w[2*K],ce=w[2*K+1];J>=i&&J<=f&&ce>=c&&ce<=m&&L.push(b[K]),(B===0?i<=J:c<=ce)&&(P.push(G),P.push(K-1),P.push(1-B)),(B===0?f>=J:m>=ce)&&(P.push(K+1),P.push(U),P.push(1-B))}return L}within(i,c,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:b,nodeSize:w}=this,T=[0,m.length-1,0],P=[],L=f*f;for(;T.length;){const B=T.pop()||0,U=T.pop()||0,G=T.pop()||0;if(U-G<=w){for(let ve=G;ve<=U;ve++)pw(b[2*ve],b[2*ve+1],i,c)<=L&&P.push(m[ve]);continue}const K=G+U>>1,J=b[2*K],ce=b[2*K+1];pw(J,ce,i,c)<=L&&P.push(m[K]),(B===0?i-f<=J:c-f<=ce)&&(T.push(G),T.push(K-1),T.push(1-B)),(B===0?i+f>=J:c+f>=ce)&&(T.push(K+1),T.push(U),T.push(1-B))}return P}}function Oy(o,i,c,f,m,b){if(m-f<=c)return;const w=f+m>>1;fw(o,i,w,f,m,b),Oy(o,i,c,f,w-1,1-b),Oy(o,i,c,w+1,m,1-b)}function fw(o,i,c,f,m,b){for(;m>f;){if(m-f>600){const L=m-f+1,B=c-f+1,U=Math.log(L),G=.5*Math.exp(2*U/3),K=.5*Math.sqrt(U*G*(L-G)/L)*(B-L/2<0?-1:1);fw(o,i,c,Math.max(f,Math.floor(c-B*G/L+K)),Math.min(m,Math.floor(c+(L-B)*G/L+K)),b)}const w=i[2*c+b];let T=f,P=m;for(Hh(o,i,f,c),i[2*m+b]>w&&Hh(o,i,f,m);T<P;){for(Hh(o,i,T,P),T++,P--;i[2*T+b]<w;)T++;for(;i[2*P+b]>w;)P--}i[2*f+b]===w?Hh(o,i,f,P):(P++,Hh(o,i,P,m)),P<=c&&(f=P+1),c<=P&&(m=P-1)}}function Hh(o,i,c,f){zy(o,c,f),zy(i,2*c,2*f),zy(i,2*c+1,2*f+1)}function zy(o,i,c){const f=o[i];o[i]=o[c],o[c]=f}function pw(o,i,c,f){const m=o-c,b=i-f;return m*m+b*b}var Fy;l.bh=void 0,(Fy=l.bh||(l.bh={})).create="create",Fy.load="load",Fy.fullLoad="fullLoad";let dm=null,Gh=[];const By=1e3/60,Vy="loadTime",Ny="fullLoadTime",wM={mark(o){performance.mark(o)},frame(o){const i=o;dm!=null&&Gh.push(i-dm),dm=i},clearMetrics(){dm=null,Gh=[],performance.clearMeasures(Vy),performance.clearMeasures(Ny);for(const o in l.bh)performance.clearMarks(l.bh[o])},getPerformanceMetrics(){performance.measure(Vy,l.bh.create,l.bh.load),performance.measure(Ny,l.bh.create,l.bh.fullLoad);const o=performance.getEntriesByName(Vy)[0].duration,i=performance.getEntriesByName(Ny)[0].duration,c=Gh.length,f=1/(Gh.reduce((b,w)=>b+w,0)/c/1e3),m=Gh.filter(b=>b>By).reduce((b,w)=>b+(w-By)/By,0);return{loadTime:o,fullLoadTime:i,fps:f,percentDroppedFrames:m/(c+m)*100,totalFrames:c}}};l.$=function(o,i,c){var f,m,b,w,T,P,L,B,U,G,K,J,ce=c[0],ve=c[1],xe=c[2];return i===o?(o[12]=i[0]*ce+i[4]*ve+i[8]*xe+i[12],o[13]=i[1]*ce+i[5]*ve+i[9]*xe+i[13],o[14]=i[2]*ce+i[6]*ve+i[10]*xe+i[14],o[15]=i[3]*ce+i[7]*ve+i[11]*xe+i[15]):(m=i[1],b=i[2],w=i[3],T=i[4],P=i[5],L=i[6],B=i[7],U=i[8],G=i[9],K=i[10],J=i[11],o[0]=f=i[0],o[1]=m,o[2]=b,o[3]=w,o[4]=T,o[5]=P,o[6]=L,o[7]=B,o[8]=U,o[9]=G,o[10]=K,o[11]=J,o[12]=f*ce+T*ve+U*xe+i[12],o[13]=m*ce+P*ve+G*xe+i[13],o[14]=b*ce+L*ve+K*xe+i[14],o[15]=w*ce+B*ve+J*xe+i[15]),o},l.A=Uu,l.B=ca,l.C=class{constructor(o,i,c){this.receive=f=>{const m=f.data,b=m.id;if(b&&(!m.targetMapId||this.mapId===m.targetMapId))if(m.type==="<cancel>"){delete this.tasks[b];const w=this.cancelCallbacks[b];delete this.cancelCallbacks[b],w&&w()}else $e()||m.mustQueue?(this.tasks[b]=m,this.taskQueue.push(b),this.invoker.trigger()):this.processTask(b,m)},this.process=()=>{if(!this.taskQueue.length)return;const f=this.taskQueue.shift(),m=this.tasks[f];delete this.tasks[f],this.taskQueue.length&&this.invoker.trigger(),m&&this.processTask(f,m)},this.target=o,this.parent=i,this.mapId=c,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new hM(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=$e()?o:window}send(o,i,c,f,m=!1){const b=Math.round(1e18*Math.random()).toString(36).substring(0,10);c&&(this.callbacks[b]=c);const w=[],T={id:b,type:o,hasCallback:!!c,targetMapId:f,mustQueue:m,sourceMapId:this.mapId,data:no(i,w)};return this.target.postMessage(T,{transfer:w}),{cancel:()=>{c&&delete this.callbacks[b],this.target.postMessage({id:b,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}processTask(o,i){if(i.type==="<response>"){const c=this.callbacks[o];delete this.callbacks[o],c&&(i.error?c(Dl(i.error)):c(null,Dl(i.data)))}else{let c=!1;const f=[],m=i.hasCallback?(T,P)=>{c=!0,delete this.cancelCallbacks[o];const L={id:o,type:"<response>",sourceMapId:this.mapId,error:T?no(T):null,data:no(P,f)};this.target.postMessage(L,{transfer:f})}:T=>{c=!0};let b=null;const w=Dl(i.data);if(this.parent[i.type])b=this.parent[i.type](i.sourceMapId,w,m);else if("getWorkerSource"in this.parent){const T=i.type.split(".");b=this.parent.getWorkerSource(i.sourceMapId,T[0],w.source)[T[1]](w,m)}else m(new Error(`Could not find function ${i.type}`));!c&&b&&b.cancel&&(this.cancelCallbacks[o]=b.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.D=Kt,l.E=gt,l.F=function(o,i){const c={};for(let f=0;f<i.length;f++){const m=i[f];m in o&&(c[m]=o[m])}return c},l.G=U1,l.H=q1,l.I=xy,l.J=j,l.K=X,l.L=Bl,l.M=Je,l.N=Jr,l.O=$a,l.P=k,l.Q=Pr,l.R=Na,l.S=gr,l.T=Np,l.U=sm,l.V=class extends $o{},l.W=Dy,l.X=function(o,i){const c=window.document.createElement("video");c.muted=!0,c.onloadstart=function(){i(null,c)};for(let f=0;f<o.length;f++){const m=window.document.createElement("source");he(o[f])||(c.crossOrigin="Anonymous"),m.src=o[f],c.appendChild(m)}return{cancel:()=>{}}},l.Y=ft,l.Z=function(){var o=new Uu(16);return Uu!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},l._=v,l.a=Pe,l.a$=class extends Y{},l.a0=function(o,i,c){var f=c[0],m=c[1],b=c[2];return o[0]=i[0]*f,o[1]=i[1]*f,o[2]=i[2]*f,o[3]=i[3]*f,o[4]=i[4]*m,o[5]=i[5]*m,o[6]=i[6]*m,o[7]=i[7]*m,o[8]=i[8]*b,o[9]=i[9]*b,o[10]=i[10]*b,o[11]=i[11]*b,o[12]=i[12],o[13]=i[13],o[14]=i[14],o[15]=i[15],o},l.a1=Wx,l.a2=function(){return Z++},l.a3=pe,l.a4=Yu,l.a5=function(){ha.isLoading()||ha.isLoaded()||bh()!=="deferred"||Vp()},l.a6=ch,l.a7=Pc,l.a8=mr,l.a9=K1,l.aA=kc,l.aB=function(o){o=o.slice();const i=Object.create(null);for(let c=0;c<o.length;c++)i[o[c].id]=o[c];for(let c=0;c<o.length;c++)"ref"in o[c]&&(o[c]=Qe(o[c],i[o[c].ref]));return o},l.aC=function(o){if(o.type==="custom")return new dM(o);switch(o.type){case"background":return new lM(o);case"circle":return new WP(o);case"fill":return new fD(o);case"fill-extrusion":return new ED(o);case"heatmap":return new ZP(o);case"hillshade":return new XP(o);case"line":return new zD(o);case"raster":return new uM(o);case"symbol":return new am(o)}},l.aD=te,l.aE=function(o,i){if(!o)return[{command:Et.setStyle,args:[i]}];let c=[];try{if(!st(o.version,i.version))return[{command:Et.setStyle,args:[i]}];st(o.center,i.center)||c.push({command:Et.setCenter,args:[i.center]}),st(o.zoom,i.zoom)||c.push({command:Et.setZoom,args:[i.zoom]}),st(o.bearing,i.bearing)||c.push({command:Et.setBearing,args:[i.bearing]}),st(o.pitch,i.pitch)||c.push({command:Et.setPitch,args:[i.pitch]}),st(o.sprite,i.sprite)||c.push({command:Et.setSprite,args:[i.sprite]}),st(o.glyphs,i.glyphs)||c.push({command:Et.setGlyphs,args:[i.glyphs]}),st(o.transition,i.transition)||c.push({command:Et.setTransition,args:[i.transition]}),st(o.light,i.light)||c.push({command:Et.setLight,args:[i.light]});const f={},m=[];(function(w,T,P,L){let B;for(B in T=T||{},w=w||{})Object.prototype.hasOwnProperty.call(w,B)&&(Object.prototype.hasOwnProperty.call(T,B)||an(B,P,L));for(B in T)Object.prototype.hasOwnProperty.call(T,B)&&(Object.prototype.hasOwnProperty.call(w,B)?st(w[B],T[B])||(w[B].type==="geojson"&&T[B].type==="geojson"&&Tn(w,T,B)?P.push({command:Et.setGeoJSONSourceData,args:[B,T[B].data]}):ln(B,T,P,L)):It(B,T,P))})(o.sources,i.sources,m,f);const b=[];o.layers&&o.layers.forEach(w=>{f[w.source]?c.push({command:Et.removeLayer,args:[w.id]}):b.push(w)}),c=c.concat(m),function(w,T,P){T=T||[];const L=(w=w||[]).map(Vn),B=T.map(Vn),U=w.reduce(lr,{}),G=T.reduce(lr,{}),K=L.slice(),J=Object.create(null);let ce,ve,xe,Le,Te,Oe,je;for(ce=0,ve=0;ce<L.length;ce++)xe=L[ce],Object.prototype.hasOwnProperty.call(G,xe)?ve++:(P.push({command:Et.removeLayer,args:[xe]}),K.splice(K.indexOf(xe,ve),1));for(ce=0,ve=0;ce<B.length;ce++)xe=B[B.length-1-ce],K[K.length-1-ce]!==xe&&(Object.prototype.hasOwnProperty.call(U,xe)?(P.push({command:Et.removeLayer,args:[xe]}),K.splice(K.lastIndexOf(xe,K.length-ve),1)):ve++,Oe=K[K.length-ce],P.push({command:Et.addLayer,args:[G[xe],Oe]}),K.splice(K.length-ce,0,xe),J[xe]=!0);for(ce=0;ce<B.length;ce++)if(xe=B[ce],Le=U[xe],Te=G[xe],!J[xe]&&!st(Le,Te))if(st(Le.source,Te.source)&&st(Le["source-layer"],Te["source-layer"])&&st(Le.type,Te.type)){for(je in In(Le.layout,Te.layout,P,xe,null,Et.setLayoutProperty),In(Le.paint,Te.paint,P,xe,null,Et.setPaintProperty),st(Le.filter,Te.filter)||P.push({command:Et.setFilter,args:[xe,Te.filter]}),st(Le.minzoom,Te.minzoom)&&st(Le.maxzoom,Te.maxzoom)||P.push({command:Et.setLayerZoomRange,args:[xe,Te.minzoom,Te.maxzoom]}),Le)Object.prototype.hasOwnProperty.call(Le,je)&&je!=="layout"&&je!=="paint"&&je!=="filter"&&je!=="metadata"&&je!=="minzoom"&&je!=="maxzoom"&&(je.indexOf("paint.")===0?In(Le[je],Te[je],P,xe,je.slice(6),Et.setPaintProperty):st(Le[je],Te[je])||P.push({command:Et.setLayerProperty,args:[xe,je,Te[je]]}));for(je in Te)Object.prototype.hasOwnProperty.call(Te,je)&&!Object.prototype.hasOwnProperty.call(Le,je)&&je!=="layout"&&je!=="paint"&&je!=="filter"&&je!=="metadata"&&je!=="minzoom"&&je!=="maxzoom"&&(je.indexOf("paint.")===0?In(Le[je],Te[je],P,xe,je.slice(6),Et.setPaintProperty):st(Le[je],Te[je])||P.push({command:Et.setLayerProperty,args:[xe,je,Te[je]]}))}else P.push({command:Et.removeLayer,args:[xe]}),Oe=K[K.lastIndexOf(xe)+1],P.push({command:Et.addLayer,args:[Te,Oe]})}(b,i.layers,c)}catch(f){console.warn("Unable to compute style diff:",f),c=[{command:Et.setStyle,args:[i]}]}return c},l.aF=function(o){const i=[],c=o.id;return c===void 0&&i.push({message:`layers.${c}: missing required property "id"`}),o.render===void 0&&i.push({message:`layers.${c}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&i.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),i},l.aG=function o(i,c){if(Array.isArray(i)){if(!Array.isArray(c)||i.length!==c.length)return!1;for(let f=0;f<i.length;f++)if(!o(i[f],c[f]))return!1;return!0}if(typeof i=="object"&&i!==null&&c!==null){if(typeof c!="object"||Object.keys(i).length!==Object.keys(c).length)return!1;for(const f in i)if(!o(i[f],c[f]))return!1;return!0}return i===c},l.aH=ne,l.aI=_e,l.aJ=Cc,l.aK=function(o){return o({pluginStatus:Zi,pluginURL:ro}),Cc.on("pluginStateChange",o),o},l.aL=class extends jo{constructor(o,i){super(o,i),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},l.aM=Nu,l.aN=class extends jo{constructor(o,i){super(o,i),this.current=Qv}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let i=1;i<16;i++)if(o[i]!==this.current[i]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},l.aO=jp,l.aP=class extends jo{constructor(o,i){super(o,i),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},l.aQ=class extends jo{constructor(o,i){super(o,i),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},l.aR=Hp,l.aS=function(o,i,c,f,m,b,w){var T=1/(i-c),P=1/(f-m),L=1/(b-w);return o[0]=-2*T,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*P,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*L,o[11]=0,o[12]=(i+c)*T,o[13]=(m+f)*P,o[14]=(w+b)*L,o[15]=1,o},l.aT=Xn,l.aU=GP,l.aV=class extends p{},l.aW=ND,l.aX=class extends x{},l.aY=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},l.aZ=Jx,l.a_=Tt,l.aa=function(o){const i={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,f,m,b)=>{const w=m||b;return i[f]=!w||w.toLowerCase(),""}),i["max-age"]){const c=parseInt(i["max-age"],10);isNaN(c)?delete i["max-age"]:i["max-age"]=c}return i},l.ab=function(o,i){const c=[];for(const f in o)f in i||c.push(f);return c},l.ac=function(o){if(ke==null){const i=o.navigator?o.navigator.userAgent:null;ke=!!o.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return ke},l.ad=ie,l.ae=function(o,i,c){var f=Math.sin(c),m=Math.cos(c),b=i[0],w=i[1],T=i[2],P=i[3],L=i[4],B=i[5],U=i[6],G=i[7];return i!==o&&(o[8]=i[8],o[9]=i[9],o[10]=i[10],o[11]=i[11],o[12]=i[12],o[13]=i[13],o[14]=i[14],o[15]=i[15]),o[0]=b*m+L*f,o[1]=w*m+B*f,o[2]=T*m+U*f,o[3]=P*m+G*f,o[4]=L*m-b*f,o[5]=B*m-w*f,o[6]=U*m-T*f,o[7]=G*m-P*f,o},l.af=function(o){var i=new Uu(16);return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[8]=o[8],i[9]=o[9],i[10]=o[10],i[11]=o[11],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15],i},l.ag=Zp,l.ah=function(o,i){let c=0,f=0;if(o.kind==="constant")f=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:m,minZoom:b,maxZoom:w}=o,T=m?ie(ua.interpolationFactor(m,i,b,w),0,1):0;o.kind==="camera"?f=ca.number(o.minSize,o.maxSize,T):c=T}return{uSizeT:c,uSize:f}},l.aj=function(o,{uSize:i,uSizeT:c},{lowerSize:f,upperSize:m}){return o.kind==="source"?f/ao:o.kind==="composite"?ca.number(f/ao,m/ao,c):i},l.ak=Cy,l.al=function(o,i,c,f){const m=i.y-o.y,b=i.x-o.x,w=f.y-c.y,T=f.x-c.x,P=w*b-T*m;if(P===0)return null;const L=(T*(o.y-c.y)-w*(o.x-c.x))/P;return new k(o.x+L*b,o.y+L*m)},l.am=ew,l.an=$x,l.ao=iy,l.ap=ai,l.ar=ky,l.as=function(o,i){var c=i[0],f=i[1],m=i[2],b=i[3],w=i[4],T=i[5],P=i[6],L=i[7],B=i[8],U=i[9],G=i[10],K=i[11],J=i[12],ce=i[13],ve=i[14],xe=i[15],Le=c*T-f*w,Te=c*P-m*w,Oe=c*L-b*w,je=f*P-m*T,it=f*L-b*T,Nt=m*L-b*P,Wt=B*ce-U*J,Ft=B*ve-G*J,Rt=B*xe-K*J,Pt=U*ve-G*ce,qt=U*xe-K*ce,Dt=G*xe-K*ve,vt=Le*Dt-Te*qt+Oe*Pt+je*Rt-it*Ft+Nt*Wt;return vt?(o[0]=(T*Dt-P*qt+L*Pt)*(vt=1/vt),o[1]=(m*qt-f*Dt-b*Pt)*vt,o[2]=(ce*Nt-ve*it+xe*je)*vt,o[3]=(G*it-U*Nt-K*je)*vt,o[4]=(P*Rt-w*Dt-L*Ft)*vt,o[5]=(c*Dt-m*Rt+b*Ft)*vt,o[6]=(ve*Oe-J*Nt-xe*Te)*vt,o[7]=(B*Nt-G*Oe+K*Te)*vt,o[8]=(w*qt-T*Rt+L*Wt)*vt,o[9]=(f*Rt-c*qt-b*Wt)*vt,o[10]=(J*it-ce*Oe+xe*Le)*vt,o[11]=(U*Oe-B*it-K*Le)*vt,o[12]=(T*Ft-w*Pt-P*Wt)*vt,o[13]=(c*Pt-f*Ft+m*Wt)*vt,o[14]=(ce*Te-J*je-ve*Le)*vt,o[15]=(B*je-U*Te+G*Le)*vt,o):null},l.at=Ly,l.au=Sy,l.av=Ry,l.aw=function(){const o={},i=Ce.$version;for(const c in Ce.$root){const f=Ce.$root[c];if(f.required){let m=null;m=c==="version"?i:f.type==="array"?[]:{},m!=null&&(o[c]=m)}}return o},l.ax=Et,l.ay=Op,l.az=qe,l.b=function(o,i){const c=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(c).then(f=>{i(null,f)}).catch(f=>{i(new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},l.b0=_i,l.b1=function(o,i){var c=o[0],f=o[1],m=o[2],b=o[3],w=o[4],T=o[5],P=o[6],L=o[7],B=o[8],U=o[9],G=o[10],K=o[11],J=o[12],ce=o[13],ve=o[14],xe=o[15],Le=i[0],Te=i[1],Oe=i[2],je=i[3],it=i[4],Nt=i[5],Wt=i[6],Ft=i[7],Rt=i[8],Pt=i[9],qt=i[10],Dt=i[11],vt=i[12],en=i[13],Zt=i[14],kn=i[15];return Math.abs(c-Le)<=Xi*Math.max(1,Math.abs(c),Math.abs(Le))&&Math.abs(f-Te)<=Xi*Math.max(1,Math.abs(f),Math.abs(Te))&&Math.abs(m-Oe)<=Xi*Math.max(1,Math.abs(m),Math.abs(Oe))&&Math.abs(b-je)<=Xi*Math.max(1,Math.abs(b),Math.abs(je))&&Math.abs(w-it)<=Xi*Math.max(1,Math.abs(w),Math.abs(it))&&Math.abs(T-Nt)<=Xi*Math.max(1,Math.abs(T),Math.abs(Nt))&&Math.abs(P-Wt)<=Xi*Math.max(1,Math.abs(P),Math.abs(Wt))&&Math.abs(L-Ft)<=Xi*Math.max(1,Math.abs(L),Math.abs(Ft))&&Math.abs(B-Rt)<=Xi*Math.max(1,Math.abs(B),Math.abs(Rt))&&Math.abs(U-Pt)<=Xi*Math.max(1,Math.abs(U),Math.abs(Pt))&&Math.abs(G-qt)<=Xi*Math.max(1,Math.abs(G),Math.abs(qt))&&Math.abs(K-Dt)<=Xi*Math.max(1,Math.abs(K),Math.abs(Dt))&&Math.abs(J-vt)<=Xi*Math.max(1,Math.abs(J),Math.abs(vt))&&Math.abs(ce-en)<=Xi*Math.max(1,Math.abs(ce),Math.abs(en))&&Math.abs(ve-Zt)<=Xi*Math.max(1,Math.abs(ve),Math.abs(Zt))&&Math.abs(xe-kn)<=Xi*Math.max(1,Math.abs(xe),Math.abs(kn))},l.b2=function(o,i){return o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5],o[6]=i[6],o[7]=i[7],o[8]=i[8],o[9]=i[9],o[10]=i[10],o[11]=i[11],o[12]=i[12],o[13]=i[13],o[14]=i[14],o[15]=i[15],o},l.b3=function(o,i,c){return o[0]=i[0]*c[0],o[1]=i[1]*c[1],o[2]=i[2]*c[2],o[3]=i[3]*c[3],o},l.b4=function(o,i){return o[0]*i[0]+o[1]*i[1]+o[2]*i[2]+o[3]*i[3]},l.b5=se,l.b6=W1,l.b7=j1,l.b8=function(o,i,c,f,m){var b,w=1/Math.tan(i/2);return o[0]=w/c,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=w,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,m!=null&&m!==1/0?(o[10]=(m+f)*(b=1/(f-m)),o[14]=2*m*f*b):(o[10]=-1,o[14]=-2*f),o},l.b9=function(o,i,c){var f=Math.sin(c),m=Math.cos(c),b=i[4],w=i[5],T=i[6],P=i[7],L=i[8],B=i[9],U=i[10],G=i[11];return i!==o&&(o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[12]=i[12],o[13]=i[13],o[14]=i[14],o[15]=i[15]),o[4]=b*m+L*f,o[5]=w*m+B*f,o[6]=T*m+U*f,o[7]=P*m+G*f,o[8]=L*m-b*f,o[9]=B*m-w*f,o[10]=U*m-T*f,o[11]=G*m-P*f,o},l.bA=S,l.bB=_1,l.bC=Iu,l.bD=ha,l.ba=ee,l.bb=le,l.bc=function(o,i){return o[0]=i[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=i[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},l.bd=class extends Ec{},l.be=Iy,l.bf=H1,l.bg=wM,l.bi=at,l.bj=function(o,i,c=!1){if(Zi===mh||Zi===gh||Zi===vh)throw new Error("setRTLTextPlugin cannot be called multiple times.");ro=St.resolveURL(o),Zi=mh,yh=i,_h(),c||Vp()},l.bk=bh,l.bl=function(o,i){const c={};for(let m=0;m<o.length;m++){const b=i&&i[o[m].id]||Lu(o[m]);i&&(i[o[m].id]=b);let w=c[b];w||(w=c[b]=[]),w.push(o[m])}const f=[];for(const m in c)f.push(c[m]);return f},l.bm=$t,l.bn=Z1,l.bo=X1,l.bp=E1,l.bq=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Jr/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const i=o.bucket.layers[0],c=i.layout,f=i._unevaluatedLayout._values,m={layoutIconSize:f["icon-size"].possiblyEvaluate(new mr(o.bucket.zoom+1),o.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new mr(o.bucket.zoom+1),o.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new mr(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:L,maxZoom:B}=o.bucket.textSizeData;m.compositeTextSizes=[f["text-size"].possiblyEvaluate(new mr(L),o.canonical),f["text-size"].possiblyEvaluate(new mr(B),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:L,maxZoom:B}=o.bucket.iconSizeData;m.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new mr(L),o.canonical),f["icon-size"].possiblyEvaluate(new mr(B),o.canonical)]}const b=c.get("text-line-height")*ai,w=c.get("text-rotation-alignment")!=="viewport"&&c.get("symbol-placement")!=="point",T=c.get("text-keep-upright"),P=c.get("text-size");for(const L of o.bucket.features){const B=c.get("text-font").evaluate(L,{},o.canonical).join(","),U=P.evaluate(L,{},o.canonical),G=m.layoutTextSize.evaluate(L,{},o.canonical),K=m.layoutIconSize.evaluate(L,{},o.canonical),J={horizontal:{},vertical:void 0},ce=L.text;let ve,xe=[0,0];if(ce){const Oe=ce.toString(),je=c.get("text-letter-spacing").evaluate(L,{},o.canonical)*ai,it=fh(Oe)?je:0,Nt=c.get("text-anchor").evaluate(L,{},o.canonical),Wt=cw(i,L,o.canonical);if(!Wt){const Dt=c.get("text-radial-offset").evaluate(L,{},o.canonical);xe=Dt?lw(Nt,[Dt*ai,My]):c.get("text-offset").evaluate(L,{},o.canonical).map(vt=>vt*ai)}let Ft=w?"center":c.get("text-justify").evaluate(L,{},o.canonical);const Rt=c.get("symbol-placement"),Pt=Rt==="point"?c.get("text-max-width").evaluate(L,{},o.canonical)*ai:0,qt=()=>{o.bucket.allowVerticalPlacement&&hh(Oe)&&(J.vertical=nm(ce,o.glyphMap,o.glyphPositions,o.imagePositions,B,Pt,b,Nt,"left",it,xe,l.ai.vertical,!0,Rt,G,U))};if(!w&&Wt){const Dt=new Set;if(Ft==="auto")for(let en=0;en<Wt.values.length;en+=2)Dt.add(Ly(Wt.values[en]));else Dt.add(Ft);let vt=!1;for(const en of Dt)if(!J.horizontal[en])if(vt)J.horizontal[en]=J.horizontal[0];else{const Zt=nm(ce,o.glyphMap,o.glyphPositions,o.imagePositions,B,Pt,b,"center",en,it,xe,l.ai.horizontal,!1,Rt,G,U);Zt&&(J.horizontal[en]=Zt,vt=Zt.positionedLines.length===1)}qt()}else{Ft==="auto"&&(Ft=Ly(Nt));const Dt=nm(ce,o.glyphMap,o.glyphPositions,o.imagePositions,B,Pt,b,Nt,Ft,it,xe,l.ai.horizontal,!1,Rt,G,U);Dt&&(J.horizontal[Ft]=Dt),qt(),hh(Oe)&&w&&T&&(J.vertical=nm(ce,o.glyphMap,o.glyphPositions,o.imagePositions,B,Pt,b,Nt,Ft,it,xe,l.ai.vertical,!1,Rt,G,U))}}let Le=!1;if(L.icon&&L.icon.name){const Oe=o.imageMap[L.icon.name];Oe&&(ve=rM(o.imagePositions[L.icon.name],c.get("icon-offset").evaluate(L,{},o.canonical),c.get("icon-anchor").evaluate(L,{},o.canonical)),Le=!!Oe.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Le:o.bucket.sdfIcons!==Le&&me("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Oe.pixelRatio!==o.bucket.pixelRatio||c.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Te=dw(J.horizontal)||J.vertical;o.bucket.iconsInText=!!Te&&Te.iconsInText,(Te||ve)&&bM(o.bucket,L,J,ve,o.imageMap,m,G,K,xe,Le,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},l.br=vy,l.bs=py,l.bt=gy,l.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},l.bv=_y,l.bw=Ol,l.bx=function(o,i,c,f,m){return v(this,void 0,void 0,function*(){if(X())try{return yield Je(o,i,c,f,m)}catch{}return function(b,w,T,P,L){const B=b.width,U=b.height;Ne&&tt||(Ne=new OffscreenCanvas(B,U),tt=Ne.getContext("2d",{willReadFrequently:!0})),Ne.width=B,Ne.height=U,tt.drawImage(b,0,0,B,U);const G=tt.getImageData(w,T,P,L);return tt.clearRect(0,0,B,U),G.data}(o,i,c,f,m)})},l.by=Y1,l.bz=_,l.c=Fe,l.d=function(o,i){const c=new Image;c.onload=()=>{i(null,c),URL.revokeObjectURL(c.src),c.onload=null,window.requestAnimationFrame(()=>{c.src=Ze})},c.onerror=()=>i(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(o)],{type:"image/png"});c.src=o.byteLength?URL.createObjectURL(f):Ze},l.e=H,l.f=function(o,i){return Bt(H(o,{type:"json"}),i)},l.g=Be,l.h=St,l.i=$e,l.j=dt,l.k=Ke,l.l=re,l.m=Bt,l.n=function(o){return new _y(o).readFields(XD,[])},l.o=function(o,i,c){if(!o.length)return c(null,[]);let f=o.length;const m=new Array(o.length);let b=null;o.forEach((w,T)=>{i(w,(P,L)=>{P&&(b=P),m[T]=L,--f==0&&c(b,m)})})},l.p=A1,l.q=Lh,l.r=Gr,l.s=he,l.t=Zv,l.u=Vt,l.v=Ce,l.w=me,l.x=zu,l.y=Ds,l.z=function([o,i,c]){return i+=90,i*=Math.PI/180,c*=Math.PI/180,{x:o*Math.cos(i)*Math.sin(c),y:o*Math.sin(i)*Math.sin(c),z:o*Math.cos(c)}}}),u(["./shared"],function(l){class v{constructor(q){this.keyCache={},q&&this.replace(q)}replace(q){this._layerConfigs={},this._layers={},this.update(q,[])}update(q,W){for(const ge of q){this._layerConfigs[ge.id]=ge;const ye=this._layers[ge.id]=l.aC(ge);ye._featureFilter=l.a6(ye.filter),this.keyCache[ge.id]&&delete this.keyCache[ge.id]}for(const ge of W)delete this.keyCache[ge],delete this._layerConfigs[ge],delete this._layers[ge];this.familiesBySource={};const ae=l.bl(Object.values(this._layerConfigs),this.keyCache);for(const ge of ae){const ye=ge.map(nt=>this._layers[nt.id]),Re=ye[0];if(Re.visibility==="none")continue;const Ae=Re.source||"";let we=this.familiesBySource[Ae];we||(we=this.familiesBySource[Ae]={});const Me=Re.sourceLayer||"_geojsonTileLayer";let et=we[Me];et||(et=we[Me]=[]),et.push(ye)}}}class _{constructor(q){const W={},ae=[];for(const Ae in q){const we=q[Ae],Me=W[Ae]={};for(const et in we){const nt=we[+et];if(!nt||nt.bitmap.width===0||nt.bitmap.height===0)continue;const ot={x:0,y:0,w:nt.bitmap.width+2,h:nt.bitmap.height+2};ae.push(ot),Me[et]={rect:ot,metrics:nt.metrics}}}const{w:ge,h:ye}=l.p(ae),Re=new l.q({width:ge||1,height:ye||1});for(const Ae in q){const we=q[Ae];for(const Me in we){const et=we[+Me];if(!et||et.bitmap.width===0||et.bitmap.height===0)continue;const nt=W[Ae][Me].rect;l.q.copy(et.bitmap,Re,{x:0,y:0},{x:nt.x+1,y:nt.y+1},et.bitmap)}}this.image=Re,this.positions=W}}l.bm("GlyphAtlas",_);class S{constructor(q){this.tileID=new l.O(q.tileID.overscaledZ,q.tileID.wrap,q.tileID.canonical.z,q.tileID.canonical.x,q.tileID.canonical.y),this.uid=q.uid,this.zoom=q.zoom,this.pixelRatio=q.pixelRatio,this.tileSize=q.tileSize,this.source=q.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=q.showCollisionBoxes,this.collectResourceTiming=!!q.collectResourceTiming,this.returnDependencies=!!q.returnDependencies,this.promoteId=q.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(q,W,ae,ge,ye){this.status="parsing",this.data=q,this.collisionBoxArray=new l.a3;const Re=new l.bn(Object.keys(q.layers).sort()),Ae=new l.bo(this.tileID,this.promoteId);Ae.bucketLayerIDs=[];const we={},Me={featureIndex:Ae,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ae},et=W.familiesBySource[this.source];for(const Nn in et){const Fn=q.layers[Nn];if(!Fn)continue;Fn.version===1&&l.w(`Vector tile source "${this.source}" layer "${Nn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ci=Re.encode(Nn),dr=[];for(let Xr=0;Xr<Fn.length;Xr++){const vi=Fn.feature(Xr),wa=Ae.getId(vi,Nn);dr.push({feature:vi,id:wa,index:Xr,sourceLayerIndex:Ci})}for(const Xr of et[Nn]){const vi=Xr[0];vi.source!==this.source&&l.w(`layer.source = ${vi.source} does not equal this.source = ${this.source}`),vi.minzoom&&this.zoom<Math.floor(vi.minzoom)||vi.maxzoom&&this.zoom>=vi.maxzoom||vi.visibility!=="none"&&(C(Xr,this.zoom,ae),(we[vi.id]=vi.createBucket({index:Ae.bucketLayerIDs.length,layers:Xr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ci,sourceID:this.source})).populate(dr,Me,this.tileID.canonical),Ae.bucketLayerIDs.push(Xr.map(wa=>wa.id)))}}let nt,ot,Qt,un;const Ht=l.aH(Me.glyphDependencies,Nn=>Object.keys(Nn).map(Number));this.inFlightDependencies.forEach(Nn=>Nn==null?void 0:Nn.cancel()),this.inFlightDependencies=[];const tn=++this.dependencySentinel;Object.keys(Ht).length?this.inFlightDependencies.push(ge.send("getGlyphs",{uid:this.uid,stacks:Ht,source:this.source,tileID:this.tileID,type:"glyphs"},(Nn,Fn)=>{tn===this.dependencySentinel&&(nt||(nt=Nn,ot=Fn,rr.call(this)))})):ot={};const hn=Object.keys(Me.iconDependencies);hn.length?this.inFlightDependencies.push(ge.send("getImages",{icons:hn,source:this.source,tileID:this.tileID,type:"icons"},(Nn,Fn)=>{tn===this.dependencySentinel&&(nt||(nt=Nn,Qt=Fn,rr.call(this)))})):Qt={};const Gn=Object.keys(Me.patternDependencies);function rr(){if(nt)return ye(nt);if(ot&&Qt&&un){const Nn=new _(ot),Fn=new l.bp(Qt,un);for(const Ci in we){const dr=we[Ci];dr instanceof l.a4?(C(dr.layers,this.zoom,ae),l.bq({bucket:dr,glyphMap:ot,glyphPositions:Nn.positions,imageMap:Qt,imagePositions:Fn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):dr.hasPattern&&(dr instanceof l.br||dr instanceof l.bs||dr instanceof l.bt)&&(C(dr.layers,this.zoom,ae),dr.addFeatures(Me,this.tileID.canonical,Fn.patternPositions))}this.status="done",ye(null,{buckets:Object.values(we).filter(Ci=>!Ci.isEmpty()),featureIndex:Ae,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Nn.image,imageAtlas:Fn,glyphMap:this.returnDependencies?ot:null,iconMap:this.returnDependencies?Qt:null,glyphPositions:this.returnDependencies?Nn.positions:null})}}Gn.length?this.inFlightDependencies.push(ge.send("getImages",{icons:Gn,source:this.source,tileID:this.tileID,type:"patterns"},(Nn,Fn)=>{tn===this.dependencySentinel&&(nt||(nt=Nn,un=Fn,rr.call(this)))})):un={},rr.call(this)}}function C(fe,q,W){const ae=new l.a8(q);for(const ge of fe)ge.recalculate(ae,W)}function k(fe,q){const W=l.l(fe.request,(ae,ge,ye,Re)=>{if(ae)q(ae);else if(ge)try{const Ae=new l.bw.VectorTile(new l.bv(ge));q(null,{vectorTile:Ae,rawData:ge,cacheControl:ye,expires:Re})}catch(Ae){const we=new Uint8Array(ge);let Me=`Unable to parse the tile at ${fe.request.url}, `;Me+=we[0]===31&&we[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ae.messge}`,q(new Error(Me))}});return()=>{W.cancel(),q()}}class D{constructor(q,W,ae,ge){this.actor=q,this.layerIndex=W,this.availableImages=ae,this.loadVectorData=ge||k,this.fetching={},this.loading={},this.loaded={}}loadTile(q,W){const ae=q.uid;this.loading||(this.loading={});const ge=!!(q&&q.request&&q.request.collectResourceTiming)&&new l.bu(q.request),ye=this.loading[ae]=new S(q);ye.abort=this.loadVectorData(q,(Re,Ae)=>{if(delete this.loading[ae],Re||!Ae)return ye.status="done",this.loaded[ae]=ye,W(Re);const we=Ae.rawData,Me={};Ae.expires&&(Me.expires=Ae.expires),Ae.cacheControl&&(Me.cacheControl=Ae.cacheControl);const et={};if(ge){const nt=ge.finish();nt&&(et.resourceTiming=JSON.parse(JSON.stringify(nt)))}ye.vectorTile=Ae.vectorTile,ye.parse(Ae.vectorTile,this.layerIndex,this.availableImages,this.actor,(nt,ot)=>{if(delete this.fetching[ae],nt||!ot)return W(nt);W(null,l.e({rawTileData:we.slice(0)},ot,Me,et))}),this.loaded=this.loaded||{},this.loaded[ae]=ye,this.fetching[ae]={rawTileData:we,cacheControl:Me,resourceTiming:et}})}reloadTile(q,W){const ae=this.loaded,ge=q.uid;if(ae&&ae[ge]){const ye=ae[ge];ye.showCollisionBoxes=q.showCollisionBoxes,ye.status==="parsing"?ye.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor,(Re,Ae)=>{if(Re||!Ae)return W(Re,Ae);let we;if(this.fetching[ge]){const{rawTileData:Me,cacheControl:et,resourceTiming:nt}=this.fetching[ge];delete this.fetching[ge],we=l.e({rawTileData:Me.slice(0)},Ae,et,nt)}else we=Ae;W(null,we)}):ye.status==="done"&&(ye.vectorTile?ye.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor,W):W())}}abortTile(q,W){const ae=this.loading,ge=q.uid;ae&&ae[ge]&&ae[ge].abort&&(ae[ge].abort(),delete ae[ge]),W()}removeTile(q,W){const ae=this.loaded,ge=q.uid;ae&&ae[ge]&&delete ae[ge],W()}}class O{constructor(){this.loaded={}}loadTile(q,W){return l._(this,void 0,void 0,function*(){const{uid:ae,encoding:ge,rawImageData:ye,redFactor:Re,greenFactor:Ae,blueFactor:we,baseShift:Me}=q,et=ye.width+2,nt=ye.height+2,ot=l.a(ye)?new l.R({width:et,height:nt},yield l.bx(ye,-1,-1,et,nt)):ye,Qt=new l.by(ae,ot,ge,Re,Ae,we,Me);this.loaded=this.loaded||{},this.loaded[ae]=Qt,W(null,Qt)})}removeTile(q){const W=this.loaded,ae=q.uid;W&&W[ae]&&delete W[ae]}}function R(fe,q){if(fe.length!==0){F(fe[0],q);for(var W=1;W<fe.length;W++)F(fe[W],!q)}}function F(fe,q){for(var W=0,ae=0,ge=0,ye=fe.length,Re=ye-1;ge<ye;Re=ge++){var Ae=(fe[ge][0]-fe[Re][0])*(fe[Re][1]+fe[ge][1]),we=W+Ae;ae+=Math.abs(W)>=Math.abs(Ae)?W-we+Ae:Ae-we+W,W=we}W+ae>=0!=!!q&&fe.reverse()}var N=l.bz(function fe(q,W){var ae,ge=q&&q.type;if(ge==="FeatureCollection")for(ae=0;ae<q.features.length;ae++)fe(q.features[ae],W);else if(ge==="GeometryCollection")for(ae=0;ae<q.geometries.length;ae++)fe(q.geometries[ae],W);else if(ge==="Feature")fe(q.geometry,W);else if(ge==="Polygon")R(q.coordinates,W);else if(ge==="MultiPolygon")for(ae=0;ae<q.coordinates.length;ae++)R(q.coordinates[ae],W);return q});const j=l.bw.VectorTileFeature.prototype.toGeoJSON;var X={exports:{}},ee=l.bA,le=l.bw.VectorTileFeature,ie=se;function se(fe,q){this.options=q||{},this.features=fe,this.length=fe.length}function H(fe,q){this.id=typeof fe.id=="number"?fe.id:void 0,this.type=fe.type,this.rawGeometry=fe.type===1?[fe.geometry]:fe.geometry,this.properties=fe.tags,this.extent=q||4096}se.prototype.feature=function(fe){return new H(this.features[fe],this.options.extent)},H.prototype.loadGeometry=function(){var fe=this.rawGeometry;this.geometry=[];for(var q=0;q<fe.length;q++){for(var W=fe[q],ae=[],ge=0;ge<W.length;ge++)ae.push(new ee(W[ge][0],W[ge][1]));this.geometry.push(ae)}return this.geometry},H.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var fe=this.geometry,q=1/0,W=-1/0,ae=1/0,ge=-1/0,ye=0;ye<fe.length;ye++)for(var Re=fe[ye],Ae=0;Ae<Re.length;Ae++){var we=Re[Ae];q=Math.min(q,we.x),W=Math.max(W,we.x),ae=Math.min(ae,we.y),ge=Math.max(ge,we.y)}return[q,ae,W,ge]},H.prototype.toGeoJSON=le.prototype.toGeoJSON;var Z=l.bB,ne=ie;function _e(fe){var q=new Z;return function(W,ae){for(var ge in W.layers)ae.writeMessage(3,te,W.layers[ge])}(fe,q),q.finish()}function te(fe,q){var W;q.writeVarintField(15,fe.version||1),q.writeStringField(1,fe.name||""),q.writeVarintField(5,fe.extent||4096);var ae={keys:[],values:[],keycache:{},valuecache:{}};for(W=0;W<fe.length;W++)ae.feature=fe.feature(W),q.writeMessage(2,Se,ae);var ge=ae.keys;for(W=0;W<ge.length;W++)q.writeStringField(3,ge[W]);var ye=ae.values;for(W=0;W<ye.length;W++)q.writeMessage(4,ke,ye[W])}function Se(fe,q){var W=fe.feature;W.id!==void 0&&q.writeVarintField(1,W.id),q.writeMessage(2,me,fe),q.writeVarintField(3,W.type),q.writeMessage(4,$e,W)}function me(fe,q){var W=fe.feature,ae=fe.keys,ge=fe.values,ye=fe.keycache,Re=fe.valuecache;for(var Ae in W.properties){var we=W.properties[Ae],Me=ye[Ae];if(we!==null){Me===void 0&&(ae.push(Ae),ye[Ae]=Me=ae.length-1),q.writeVarint(Me);var et=typeof we;et!=="string"&&et!=="boolean"&&et!=="number"&&(we=JSON.stringify(we));var nt=et+":"+we,ot=Re[nt];ot===void 0&&(ge.push(we),Re[nt]=ot=ge.length-1),q.writeVarint(ot)}}}function Ve(fe,q){return(q<<3)+(7&fe)}function Ge(fe){return fe<<1^fe>>31}function $e(fe,q){for(var W=fe.loadGeometry(),ae=fe.type,ge=0,ye=0,Re=W.length,Ae=0;Ae<Re;Ae++){var we=W[Ae],Me=1;ae===1&&(Me=we.length),q.writeVarint(Ve(1,Me));for(var et=ae===3?we.length-1:we.length,nt=0;nt<et;nt++){nt===1&&ae!==1&&q.writeVarint(Ve(2,et-1));var ot=we[nt].x-ge,Qt=we[nt].y-ye;q.writeVarint(Ge(ot)),q.writeVarint(Ge(Qt)),ge+=ot,ye+=Qt}ae===3&&q.writeVarint(Ve(7,1))}}function ke(fe,q){var W=typeof fe;W==="string"?q.writeStringField(1,fe):W==="boolean"?q.writeBooleanField(7,fe):W==="number"&&(fe%1!=0?q.writeDoubleField(3,fe):fe<0?q.writeSVarintField(6,fe):q.writeVarintField(5,fe))}X.exports=_e,X.exports.fromVectorTileJs=_e,X.exports.fromGeojsonVt=function(fe,q){q=q||{};var W={};for(var ae in fe)W[ae]=new ne(fe[ae].features,q),W[ae].name=ae,W[ae].version=q.version,W[ae].extent=q.extent;return _e({layers:W})},X.exports.GeoJSONWrapper=ne;var Pe=l.bz(X.exports);const Ze={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:fe=>fe},Je=Math.fround||(Ne=new Float32Array(1),fe=>(Ne[0]=+fe,Ne[0]));var Ne;const tt=3,_t=5,kt=6;class St{constructor(q){this.options=Object.assign(Object.create(Ze),q),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(q){const{log:W,minZoom:ae,maxZoom:ge}=this.options;W&&console.time("total time");const ye=`prepare ${q.length} points`;W&&console.time(ye),this.points=q;const Re=[];for(let we=0;we<q.length;we++){const Me=q[we];if(!Me.geometry)continue;const[et,nt]=Me.geometry.coordinates,ot=Je(qe(et)),Qt=Je(Be(nt));Re.push(ot,Qt,1/0,we,-1,1),this.options.reduce&&Re.push(0)}let Ae=this.trees[ge+1]=this._createTree(Re);W&&console.timeEnd(ye);for(let we=ge;we>=ae;we--){const Me=+Date.now();Ae=this.trees[we]=this._createTree(this._cluster(Ae,we)),W&&console.log("z%d: %d clusters in %dms",we,Ae.numItems,+Date.now()-Me)}return W&&console.timeEnd("total time"),this}getClusters(q,W){let ae=((q[0]+180)%360+360)%360-180;const ge=Math.max(-90,Math.min(90,q[1]));let ye=q[2]===180?180:((q[2]+180)%360+360)%360-180;const Re=Math.max(-90,Math.min(90,q[3]));if(q[2]-q[0]>=360)ae=-180,ye=180;else if(ae>ye){const nt=this.getClusters([ae,ge,180,Re],W),ot=this.getClusters([-180,ge,ye,Re],W);return nt.concat(ot)}const Ae=this.trees[this._limitZoom(W)],we=Ae.range(qe(ae),Be(Re),qe(ye),Be(ge)),Me=Ae.data,et=[];for(const nt of we){const ot=this.stride*nt;et.push(Me[ot+_t]>1?Fe(Me,ot,this.clusterProps):this.points[Me[ot+tt]])}return et}getChildren(q){const W=this._getOriginId(q),ae=this._getOriginZoom(q),ge="No cluster with the specified id.",ye=this.trees[ae];if(!ye)throw new Error(ge);const Re=ye.data;if(W*this.stride>=Re.length)throw new Error(ge);const Ae=this.options.radius/(this.options.extent*Math.pow(2,ae-1)),we=ye.within(Re[W*this.stride],Re[W*this.stride+1],Ae),Me=[];for(const et of we){const nt=et*this.stride;Re[nt+4]===q&&Me.push(Re[nt+_t]>1?Fe(Re,nt,this.clusterProps):this.points[Re[nt+tt]])}if(Me.length===0)throw new Error(ge);return Me}getLeaves(q,W,ae){const ge=[];return this._appendLeaves(ge,q,W=W||10,ae=ae||0,0),ge}getTile(q,W,ae){const ge=this.trees[this._limitZoom(q)],ye=Math.pow(2,q),{extent:Re,radius:Ae}=this.options,we=Ae/Re,Me=(ae-we)/ye,et=(ae+1+we)/ye,nt={features:[]};return this._addTileFeatures(ge.range((W-we)/ye,Me,(W+1+we)/ye,et),ge.data,W,ae,ye,nt),W===0&&this._addTileFeatures(ge.range(1-we/ye,Me,1,et),ge.data,ye,ae,ye,nt),W===ye-1&&this._addTileFeatures(ge.range(0,Me,we/ye,et),ge.data,-1,ae,ye,nt),nt.features.length?nt:null}getClusterExpansionZoom(q){let W=this._getOriginZoom(q)-1;for(;W<=this.options.maxZoom;){const ae=this.getChildren(q);if(W++,ae.length!==1)break;q=ae[0].properties.cluster_id}return W}_appendLeaves(q,W,ae,ge,ye){const Re=this.getChildren(W);for(const Ae of Re){const we=Ae.properties;if(we&&we.cluster?ye+we.point_count<=ge?ye+=we.point_count:ye=this._appendLeaves(q,we.cluster_id,ae,ge,ye):ye<ge?ye++:q.push(Ae),q.length===ae)break}return ye}_createTree(q){const W=new l.av(q.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ae=0;ae<q.length;ae+=this.stride)W.add(q[ae],q[ae+1]);return W.finish(),W.data=q,W}_addTileFeatures(q,W,ae,ge,ye,Re){for(const Ae of q){const we=Ae*this.stride,Me=W[we+_t]>1;let et,nt,ot;if(Me)et=at(W,we,this.clusterProps),nt=W[we],ot=W[we+1];else{const Ht=this.points[W[we+tt]];et=Ht.properties;const[tn,hn]=Ht.geometry.coordinates;nt=qe(tn),ot=Be(hn)}const Qt={type:1,geometry:[[Math.round(this.options.extent*(nt*ye-ae)),Math.round(this.options.extent*(ot*ye-ge))]],tags:et};let un;un=Me||this.options.generateId?W[we+tt]:this.points[W[we+tt]].id,un!==void 0&&(Qt.id=un),Re.features.push(Qt)}}_limitZoom(q){return Math.max(this.options.minZoom,Math.min(Math.floor(+q),this.options.maxZoom+1))}_cluster(q,W){const{radius:ae,extent:ge,reduce:ye,minPoints:Re}=this.options,Ae=ae/(ge*Math.pow(2,W)),we=q.data,Me=[],et=this.stride;for(let nt=0;nt<we.length;nt+=et){if(we[nt+2]<=W)continue;we[nt+2]=W;const ot=we[nt],Qt=we[nt+1],un=q.within(we[nt],we[nt+1],Ae),Ht=we[nt+_t];let tn=Ht;for(const hn of un){const Gn=hn*et;we[Gn+2]>W&&(tn+=we[Gn+_t])}if(tn>Ht&&tn>=Re){let hn,Gn=ot*Ht,rr=Qt*Ht,Nn=-1;const Fn=((nt/et|0)<<5)+(W+1)+this.points.length;for(const Ci of un){const dr=Ci*et;if(we[dr+2]<=W)continue;we[dr+2]=W;const Xr=we[dr+_t];Gn+=we[dr]*Xr,rr+=we[dr+1]*Xr,we[dr+4]=Fn,ye&&(hn||(hn=this._map(we,nt,!0),Nn=this.clusterProps.length,this.clusterProps.push(hn)),ye(hn,this._map(we,dr)))}we[nt+4]=Fn,Me.push(Gn/tn,rr/tn,1/0,Fn,-1,tn),ye&&Me.push(Nn)}else{for(let hn=0;hn<et;hn++)Me.push(we[nt+hn]);if(tn>1)for(const hn of un){const Gn=hn*et;if(!(we[Gn+2]<=W)){we[Gn+2]=W;for(let rr=0;rr<et;rr++)Me.push(we[Gn+rr])}}}}return Me}_getOriginId(q){return q-this.points.length>>5}_getOriginZoom(q){return(q-this.points.length)%32}_map(q,W,ae){if(q[W+_t]>1){const Re=this.clusterProps[q[W+kt]];return ae?Object.assign({},Re):Re}const ge=this.points[q[W+tt]].properties,ye=this.options.map(ge);return ae&&ye===ge?Object.assign({},ye):ye}}function Fe(fe,q,W){return{type:"Feature",id:fe[q+tt],properties:at(fe,q,W),geometry:{type:"Point",coordinates:[(ae=fe[q],360*(ae-.5)),bt(fe[q+1])]}};var ae}function at(fe,q,W){const ae=fe[q+_t],ge=ae>=1e4?`${Math.round(ae/1e3)}k`:ae>=1e3?Math.round(ae/100)/10+"k":ae,ye=fe[q+kt],Re=ye===-1?{}:Object.assign({},W[ye]);return Object.assign(Re,{cluster:!0,cluster_id:fe[q+tt],point_count:ae,point_count_abbreviated:ge})}function qe(fe){return fe/360+.5}function Be(fe){const q=Math.sin(fe*Math.PI/180),W=.5-.25*Math.log((1+q)/(1-q))/Math.PI;return W<0?0:W>1?1:W}function bt(fe){const q=(180-360*fe)*Math.PI/180;return 360*Math.atan(Math.exp(q))/Math.PI-90}function Bt(fe,q,W,ae){for(var ge,ye=ae,Re=W-q>>1,Ae=W-q,we=fe[q],Me=fe[q+1],et=fe[W],nt=fe[W+1],ot=q+3;ot<W;ot+=3){var Qt=re(fe[ot],fe[ot+1],we,Me,et,nt);if(Qt>ye)ge=ot,ye=Qt;else if(Qt===ye){var un=Math.abs(ot-Re);un<Ae&&(ge=ot,Ae=un)}}ye>ae&&(ge-q>3&&Bt(fe,q,ge,ae),fe[ge+2]=ye,W-ge>3&&Bt(fe,ge,W,ae))}function re(fe,q,W,ae,ge,ye){var Re=ge-W,Ae=ye-ae;if(Re!==0||Ae!==0){var we=((fe-W)*Re+(q-ae)*Ae)/(Re*Re+Ae*Ae);we>1?(W=ge,ae=ye):we>0&&(W+=Re*we,ae+=Ae*we)}return(Re=fe-W)*Re+(Ae=q-ae)*Ae}function he(fe,q,W,ae){var ge={id:fe===void 0?null:fe,type:q,geometry:W,tags:ae,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ye){var Re=ye.geometry,Ae=ye.type;if(Ae==="Point"||Ae==="MultiPoint"||Ae==="LineString")ze(ye,Re);else if(Ae==="Polygon"||Ae==="MultiLineString")for(var we=0;we<Re.length;we++)ze(ye,Re[we]);else if(Ae==="MultiPolygon")for(we=0;we<Re.length;we++)for(var Me=0;Me<Re[we].length;Me++)ze(ye,Re[we][Me])}(ge),ge}function ze(fe,q){for(var W=0;W<q.length;W+=3)fe.minX=Math.min(fe.minX,q[W]),fe.minY=Math.min(fe.minY,q[W+1]),fe.maxX=Math.max(fe.maxX,q[W]),fe.maxY=Math.max(fe.maxY,q[W+1])}function He(fe,q,W,ae){if(q.geometry){var ge=q.geometry.coordinates,ye=q.geometry.type,Re=Math.pow(W.tolerance/((1<<W.maxZoom)*W.extent),2),Ae=[],we=q.id;if(W.promoteId?we=q.properties[W.promoteId]:W.generateId&&(we=ae||0),ye==="Point")Ke(ge,Ae);else if(ye==="MultiPoint")for(var Me=0;Me<ge.length;Me++)Ke(ge[Me],Ae);else if(ye==="LineString")dt(ge,Ae,Re,!1);else if(ye==="MultiLineString"){if(W.lineMetrics){for(Me=0;Me<ge.length;Me++)dt(ge[Me],Ae=[],Re,!1),fe.push(he(we,"LineString",Ae,q.properties));return}gt(ge,Ae,Re,!1)}else if(ye==="Polygon")gt(ge,Ae,Re,!0);else{if(ye!=="MultiPolygon"){if(ye==="GeometryCollection"){for(Me=0;Me<q.geometry.geometries.length;Me++)He(fe,{id:we,geometry:q.geometry.geometries[Me],properties:q.properties},W,ae);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Me=0;Me<ge.length;Me++){var et=[];gt(ge[Me],et,Re,!0),Ae.push(et)}}fe.push(he(we,ye,Ae,q.properties))}}function Ke(fe,q){q.push(Ce(fe[0])),q.push(pt(fe[1])),q.push(0)}function dt(fe,q,W,ae){for(var ge,ye,Re=0,Ae=0;Ae<fe.length;Ae++){var we=Ce(fe[Ae][0]),Me=pt(fe[Ae][1]);q.push(we),q.push(Me),q.push(0),Ae>0&&(Re+=ae?(ge*Me-we*ye)/2:Math.sqrt(Math.pow(we-ge,2)+Math.pow(Me-ye,2))),ge=we,ye=Me}var et=q.length-3;q[2]=1,Bt(q,0,et,W),q[et+2]=1,q.size=Math.abs(Re),q.start=0,q.end=q.size}function gt(fe,q,W,ae){for(var ge=0;ge<fe.length;ge++){var ye=[];dt(fe[ge],ye,W,ae),q.push(ye)}}function Ce(fe){return fe/360+.5}function pt(fe){var q=Math.sin(fe*Math.PI/180),W=.5-.25*Math.log((1+q)/(1-q))/Math.PI;return W<0?0:W>1?1:W}function Qe(fe,q,W,ae,ge,ye,Re,Ae){if(ae/=q,ye>=(W/=q)&&Re<ae)return fe;if(Re<W||ye>=ae)return null;for(var we=[],Me=0;Me<fe.length;Me++){var et=fe[Me],nt=et.geometry,ot=et.type,Qt=ge===0?et.minX:et.minY,un=ge===0?et.maxX:et.maxY;if(Qt>=W&&un<ae)we.push(et);else if(!(un<W||Qt>=ae)){var Ht=[];if(ot==="Point"||ot==="MultiPoint")st(nt,Ht,W,ae,ge);else if(ot==="LineString")Et(nt,Ht,W,ae,ge,!1,Ae.lineMetrics);else if(ot==="MultiLineString")an(nt,Ht,W,ae,ge,!1);else if(ot==="Polygon")an(nt,Ht,W,ae,ge,!0);else if(ot==="MultiPolygon")for(var tn=0;tn<nt.length;tn++){var hn=[];an(nt[tn],hn,W,ae,ge,!0),hn.length&&Ht.push(hn)}if(Ht.length){if(Ae.lineMetrics&&ot==="LineString"){for(tn=0;tn<Ht.length;tn++)we.push(he(et.id,ot,Ht[tn],et.tags));continue}ot!=="LineString"&&ot!=="MultiLineString"||(Ht.length===1?(ot="LineString",Ht=Ht[0]):ot="MultiLineString"),ot!=="Point"&&ot!=="MultiPoint"||(ot=Ht.length===3?"Point":"MultiPoint"),we.push(he(et.id,ot,Ht,et.tags))}}}return we.length?we:null}function st(fe,q,W,ae,ge){for(var ye=0;ye<fe.length;ye+=3){var Re=fe[ye+ge];Re>=W&&Re<=ae&&(q.push(fe[ye]),q.push(fe[ye+1]),q.push(fe[ye+2]))}}function Et(fe,q,W,ae,ge,ye,Re){for(var Ae,we,Me=It(fe),et=ge===0?Tn:In,nt=fe.start,ot=0;ot<fe.length-3;ot+=3){var Qt=fe[ot],un=fe[ot+1],Ht=fe[ot+2],tn=fe[ot+3],hn=fe[ot+4],Gn=ge===0?Qt:un,rr=ge===0?tn:hn,Nn=!1;Re&&(Ae=Math.sqrt(Math.pow(Qt-tn,2)+Math.pow(un-hn,2))),Gn<W?rr>W&&(we=et(Me,Qt,un,tn,hn,W),Re&&(Me.start=nt+Ae*we)):Gn>ae?rr<ae&&(we=et(Me,Qt,un,tn,hn,ae),Re&&(Me.start=nt+Ae*we)):ln(Me,Qt,un,Ht),rr<W&&Gn>=W&&(we=et(Me,Qt,un,tn,hn,W),Nn=!0),rr>ae&&Gn<=ae&&(we=et(Me,Qt,un,tn,hn,ae),Nn=!0),!ye&&Nn&&(Re&&(Me.end=nt+Ae*we),q.push(Me),Me=It(fe)),Re&&(nt+=Ae)}var Fn=fe.length-3;Qt=fe[Fn],un=fe[Fn+1],Ht=fe[Fn+2],(Gn=ge===0?Qt:un)>=W&&Gn<=ae&&ln(Me,Qt,un,Ht),Fn=Me.length-3,ye&&Fn>=3&&(Me[Fn]!==Me[0]||Me[Fn+1]!==Me[1])&&ln(Me,Me[0],Me[1],Me[2]),Me.length&&q.push(Me)}function It(fe){var q=[];return q.size=fe.size,q.start=fe.start,q.end=fe.end,q}function an(fe,q,W,ae,ge,ye){for(var Re=0;Re<fe.length;Re++)Et(fe[Re],q,W,ae,ge,ye,!1)}function ln(fe,q,W,ae){fe.push(q),fe.push(W),fe.push(ae)}function Tn(fe,q,W,ae,ge,ye){var Re=(ye-q)/(ae-q);return fe.push(ye),fe.push(W+(ge-W)*Re),fe.push(1),Re}function In(fe,q,W,ae,ge,ye){var Re=(ye-W)/(ge-W);return fe.push(q+(ae-q)*Re),fe.push(ye),fe.push(1),Re}function Vn(fe,q){for(var W=[],ae=0;ae<fe.length;ae++){var ge,ye=fe[ae],Re=ye.type;if(Re==="Point"||Re==="MultiPoint"||Re==="LineString")ge=lr(ye.geometry,q);else if(Re==="MultiLineString"||Re==="Polygon"){ge=[];for(var Ae=0;Ae<ye.geometry.length;Ae++)ge.push(lr(ye.geometry[Ae],q))}else if(Re==="MultiPolygon")for(ge=[],Ae=0;Ae<ye.geometry.length;Ae++){for(var we=[],Me=0;Me<ye.geometry[Ae].length;Me++)we.push(lr(ye.geometry[Ae][Me],q));ge.push(we)}W.push(he(ye.id,Re,ge,ye.tags))}return W}function lr(fe,q){var W=[];W.size=fe.size,fe.start!==void 0&&(W.start=fe.start,W.end=fe.end);for(var ae=0;ae<fe.length;ae+=3)W.push(fe[ae]+q,fe[ae+1],fe[ae+2]);return W}function ft(fe,q){if(fe.transformed)return fe;var W,ae,ge,ye=1<<fe.z,Re=fe.x,Ae=fe.y;for(W=0;W<fe.features.length;W++){var we=fe.features[W],Me=we.geometry,et=we.type;if(we.geometry=[],et===1)for(ae=0;ae<Me.length;ae+=2)we.geometry.push(fi(Me[ae],Me[ae+1],q,ye,Re,Ae));else for(ae=0;ae<Me.length;ae++){var nt=[];for(ge=0;ge<Me[ae].length;ge+=2)nt.push(fi(Me[ae][ge],Me[ae][ge+1],q,ye,Re,Ae));we.geometry.push(nt)}}return fe.transformed=!0,fe}function fi(fe,q,W,ae,ge,ye){return[Math.round(W*(fe*ae-ge)),Math.round(W*(q*ae-ye))]}function Sn(fe,q,W,ae,ge){for(var ye=q===ge.maxZoom?0:ge.tolerance/((1<<q)*ge.extent),Re={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:W,y:ae,z:q,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ae=0;Ae<fe.length;Ae++){Re.numFeatures++,oa(Re,fe[Ae],ye,ge);var we=fe[Ae].minX,Me=fe[Ae].minY,et=fe[Ae].maxX,nt=fe[Ae].maxY;we<Re.minX&&(Re.minX=we),Me<Re.minY&&(Re.minY=Me),et>Re.maxX&&(Re.maxX=et),nt>Re.maxY&&(Re.maxY=nt)}return Re}function oa(fe,q,W,ae){var ge=q.geometry,ye=q.type,Re=[];if(ye==="Point"||ye==="MultiPoint")for(var Ae=0;Ae<ge.length;Ae+=3)Re.push(ge[Ae]),Re.push(ge[Ae+1]),fe.numPoints++,fe.numSimplified++;else if(ye==="LineString")ur(Re,ge,fe,W,!1,!1);else if(ye==="MultiLineString"||ye==="Polygon")for(Ae=0;Ae<ge.length;Ae++)ur(Re,ge[Ae],fe,W,ye==="Polygon",Ae===0);else if(ye==="MultiPolygon")for(var we=0;we<ge.length;we++){var Me=ge[we];for(Ae=0;Ae<Me.length;Ae++)ur(Re,Me[Ae],fe,W,!0,Ae===0)}if(Re.length){var et=q.tags||null;if(ye==="LineString"&&ae.lineMetrics){for(var nt in et={},q.tags)et[nt]=q.tags[nt];et.mapbox_clip_start=ge.start/ge.size,et.mapbox_clip_end=ge.end/ge.size}var ot={geometry:Re,type:ye==="Polygon"||ye==="MultiPolygon"?3:ye==="LineString"||ye==="MultiLineString"?2:1,tags:et};q.id!==null&&(ot.id=q.id),fe.features.push(ot)}}function ur(fe,q,W,ae,ge,ye){var Re=ae*ae;if(ae>0&&q.size<(ge?Re:ae))W.numPoints+=q.length/3;else{for(var Ae=[],we=0;we<q.length;we+=3)(ae===0||q[we+2]>Re)&&(W.numSimplified++,Ae.push(q[we]),Ae.push(q[we+1])),W.numPoints++;ge&&function(Me,et){for(var nt=0,ot=0,Qt=Me.length,un=Qt-2;ot<Qt;un=ot,ot+=2)nt+=(Me[ot]-Me[un])*(Me[ot+1]+Me[un+1]);if(nt>0===et)for(ot=0,Qt=Me.length;ot<Qt/2;ot+=2){var Ht=Me[ot],tn=Me[ot+1];Me[ot]=Me[Qt-2-ot],Me[ot+1]=Me[Qt-1-ot],Me[Qt-2-ot]=Ht,Me[Qt-1-ot]=tn}}(Ae,ye),fe.push(Ae)}}function xt(fe,q){var W=(q=this.options=function(ge,ye){for(var Re in ye)ge[Re]=ye[Re];return ge}(Object.create(this.options),q)).debug;if(W&&console.time("preprocess data"),q.maxZoom<0||q.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(q.promoteId&&q.generateId)throw new Error("promoteId and generateId cannot be used together.");var ae=function(ge,ye){var Re=[];if(ge.type==="FeatureCollection")for(var Ae=0;Ae<ge.features.length;Ae++)He(Re,ge.features[Ae],ye,Ae);else He(Re,ge.type==="Feature"?ge:{geometry:ge},ye);return Re}(fe,q);this.tiles={},this.tileCoords=[],W&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",q.indexMaxZoom,q.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ae=function(ge,ye){var Re=ye.buffer/ye.extent,Ae=ge,we=Qe(ge,1,-1-Re,Re,0,-1,2,ye),Me=Qe(ge,1,1-Re,2+Re,0,-1,2,ye);return(we||Me)&&(Ae=Qe(ge,1,-Re,1+Re,0,-1,2,ye)||[],we&&(Ae=Vn(we,1).concat(Ae)),Me&&(Ae=Ae.concat(Vn(Me,-1)))),Ae}(ae,q),ae.length&&this.splitTile(ae,0,0,0),W&&(ae.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function gn(fe,q,W){return 32*((1<<fe)*W+q)+fe}function dn(fe,q){return q?fe.properties[q]:fe.id}function Ri(fe,q){if(fe==null)return!0;if(fe.type==="Feature")return dn(fe,q)!=null;if(fe.type==="FeatureCollection"){const W=new Set;for(const ae of fe.features){const ge=dn(ae,q);if(ge==null||W.has(ge))return!1;W.add(ge)}return!0}return!1}function es(fe,q){const W=new Map;if(fe!=null)if(fe.type==="Feature")W.set(dn(fe,q),fe);else for(const ae of fe.features)W.set(dn(ae,q),ae);return W}xt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},xt.prototype.splitTile=function(fe,q,W,ae,ge,ye,Re){for(var Ae=[fe,q,W,ae],we=this.options,Me=we.debug;Ae.length;){ae=Ae.pop(),W=Ae.pop(),q=Ae.pop(),fe=Ae.pop();var et=1<<q,nt=gn(q,W,ae),ot=this.tiles[nt];if(!ot&&(Me>1&&console.time("creation"),ot=this.tiles[nt]=Sn(fe,q,W,ae,we),this.tileCoords.push({z:q,x:W,y:ae}),Me)){Me>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",q,W,ae,ot.numFeatures,ot.numPoints,ot.numSimplified),console.timeEnd("creation"));var Qt="z"+q;this.stats[Qt]=(this.stats[Qt]||0)+1,this.total++}if(ot.source=fe,ge){if(q===we.maxZoom||q===ge)continue;var un=1<<ge-q;if(W!==Math.floor(ye/un)||ae!==Math.floor(Re/un))continue}else if(q===we.indexMaxZoom||ot.numPoints<=we.indexMaxPoints)continue;if(ot.source=null,fe.length!==0){Me>1&&console.time("clipping");var Ht,tn,hn,Gn,rr,Nn,Fn=.5*we.buffer/we.extent,Ci=.5-Fn,dr=.5+Fn,Xr=1+Fn;Ht=tn=hn=Gn=null,rr=Qe(fe,et,W-Fn,W+dr,0,ot.minX,ot.maxX,we),Nn=Qe(fe,et,W+Ci,W+Xr,0,ot.minX,ot.maxX,we),fe=null,rr&&(Ht=Qe(rr,et,ae-Fn,ae+dr,1,ot.minY,ot.maxY,we),tn=Qe(rr,et,ae+Ci,ae+Xr,1,ot.minY,ot.maxY,we),rr=null),Nn&&(hn=Qe(Nn,et,ae-Fn,ae+dr,1,ot.minY,ot.maxY,we),Gn=Qe(Nn,et,ae+Ci,ae+Xr,1,ot.minY,ot.maxY,we),Nn=null),Me>1&&console.timeEnd("clipping"),Ae.push(Ht||[],q+1,2*W,2*ae),Ae.push(tn||[],q+1,2*W,2*ae+1),Ae.push(hn||[],q+1,2*W+1,2*ae),Ae.push(Gn||[],q+1,2*W+1,2*ae+1)}}},xt.prototype.getTile=function(fe,q,W){var ae=this.options,ge=ae.extent,ye=ae.debug;if(fe<0||fe>24)return null;var Re=1<<fe,Ae=gn(fe,q=(q%Re+Re)%Re,W);if(this.tiles[Ae])return ft(this.tiles[Ae],ge);ye>1&&console.log("drilling down to z%d-%d-%d",fe,q,W);for(var we,Me=fe,et=q,nt=W;!we&&Me>0;)Me--,et=Math.floor(et/2),nt=Math.floor(nt/2),we=this.tiles[gn(Me,et,nt)];return we&&we.source?(ye>1&&console.log("found parent tile z%d-%d-%d",Me,et,nt),ye>1&&console.time("drilling down"),this.splitTile(we.source,Me,et,nt,fe,q,W),ye>1&&console.timeEnd("drilling down"),this.tiles[Ae]?ft(this.tiles[Ae],ge):null):null};class yn extends D{constructor(q,W,ae,ge){super(q,W,ae),this._dataUpdateable=new Map,this.loadGeoJSON=(ye,Re)=>{const{promoteId:Ae}=ye;if(ye.request)return l.f(ye.request,(we,Me,et,nt)=>{this._dataUpdateable=Ri(Me,Ae)?es(Me,Ae):void 0,Re(we,Me,et,nt)});if(typeof ye.data=="string")try{const we=JSON.parse(ye.data);this._dataUpdateable=Ri(we,Ae)?es(we,Ae):void 0,Re(null,we)}catch{Re(new Error(`Input data given to '${ye.source}' is not a valid GeoJSON object.`))}else ye.dataDiff?this._dataUpdateable?(function(we,Me,et){var nt,ot,Qt,un;if(Me.removeAll&&we.clear(),Me.remove)for(const Ht of Me.remove)we.delete(Ht);if(Me.add)for(const Ht of Me.add){const tn=dn(Ht,et);tn!=null&&we.set(tn,Ht)}if(Me.update)for(const Ht of Me.update){let tn=we.get(Ht.id);if(tn==null)continue;const hn=!Ht.removeAllProperties&&(((nt=Ht.removeProperties)===null||nt===void 0?void 0:nt.length)>0||((ot=Ht.addOrUpdateProperties)===null||ot===void 0?void 0:ot.length)>0);if((Ht.newGeometry||Ht.removeAllProperties||hn)&&(tn=Object.assign({},tn),we.set(Ht.id,tn),hn&&(tn.properties=Object.assign({},tn.properties))),Ht.newGeometry&&(tn.geometry=Ht.newGeometry),Ht.removeAllProperties)tn.properties={};else if(((Qt=Ht.removeProperties)===null||Qt===void 0?void 0:Qt.length)>0)for(const Gn of Ht.removeProperties)Object.prototype.hasOwnProperty.call(tn.properties,Gn)&&delete tn.properties[Gn];if(((un=Ht.addOrUpdateProperties)===null||un===void 0?void 0:un.length)>0)for(const{key:Gn,value:rr}of Ht.addOrUpdateProperties)tn.properties[Gn]=rr}}(this._dataUpdateable,ye.dataDiff,Ae),Re(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Re(new Error(`Cannot update existing geojson data in ${ye.source}`)):Re(new Error(`Input data given to '${ye.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,ge&&(this.loadGeoJSON=ge)}loadGeoJSONTile(q,W){const ae=q.tileID.canonical;if(!this._geoJSONIndex)return W(null,null);const ge=this._geoJSONIndex.getTile(ae.z,ae.x,ae.y);if(!ge)return W(null,null);const ye=new class{constructor(Ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.N,this.length=Ae.length,this._features=Ae}feature(Ae){return new class{constructor(we){this._feature=we,this.extent=l.N,this.type=we.type,this.properties=we.tags,"id"in we&&!isNaN(we.id)&&(this.id=parseInt(we.id,10))}loadGeometry(){if(this._feature.type===1){const we=[];for(const Me of this._feature.geometry)we.push([new l.P(Me[0],Me[1])]);return we}{const we=[];for(const Me of this._feature.geometry){const et=[];for(const nt of Me)et.push(new l.P(nt[0],nt[1]));we.push(et)}return we}}toGeoJSON(we,Me,et){return j.call(this,we,Me,et)}}(this._features[Ae])}}(ge.features);let Re=Pe(ye);Re.byteOffset===0&&Re.byteLength===Re.buffer.byteLength||(Re=new Uint8Array(Re)),W(null,{vectorTile:ye,rawData:Re.buffer})}loadData(q,W){var ae;(ae=this._pendingRequest)===null||ae===void 0||ae.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const ge=!!(q&&q.request&&q.request.collectResourceTiming)&&new l.bu(q.request);this._pendingCallback=W,this._pendingRequest=this.loadGeoJSON(q,(ye,Re)=>{if(delete this._pendingCallback,delete this._pendingRequest,ye||!Re)return W(ye);if(typeof Re!="object")return W(new Error(`Input data given to '${q.source}' is not a valid GeoJSON object.`));{N(Re,!0);try{if(q.filter){const we=l.bC(q.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(we.result==="error")throw new Error(we.value.map(et=>`${et.key}: ${et.message}`).join(", "));Re={type:"FeatureCollection",features:Re.features.filter(et=>we.value.evaluate({zoom:0},et))}}this._geoJSONIndex=q.cluster?new St(function({superclusterOptions:we,clusterProperties:Me}){if(!Me||!we)return we;const et={},nt={},ot={accumulated:null,zoom:0},Qt={properties:null},un=Object.keys(Me);for(const Ht of un){const[tn,hn]=Me[Ht],Gn=l.bC(hn),rr=l.bC(typeof tn=="string"?[tn,["accumulated"],["get",Ht]]:tn);et[Ht]=Gn.value,nt[Ht]=rr.value}return we.map=Ht=>{Qt.properties=Ht;const tn={};for(const hn of un)tn[hn]=et[hn].evaluate(ot,Qt);return tn},we.reduce=(Ht,tn)=>{Qt.properties=tn;for(const hn of un)ot.accumulated=Ht[hn],Ht[hn]=nt[hn].evaluate(ot,Qt)},we}(q)).load(Re.features):function(we,Me){return new xt(we,Me)}(Re,q.geojsonVtOptions)}catch(we){return W(we)}this.loaded={};const Ae={};if(ge){const we=ge.finish();we&&(Ae.resourceTiming={},Ae.resourceTiming[q.source]=JSON.parse(JSON.stringify(we)))}W(null,Ae)}})}reloadTile(q,W){const ae=this.loaded;return ae&&ae[q.uid]?super.reloadTile(q,W):this.loadTile(q,W)}removeSource(q,W){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),W()}getClusterExpansionZoom(q,W){try{W(null,this._geoJSONIndex.getClusterExpansionZoom(q.clusterId))}catch(ae){W(ae)}}getClusterChildren(q,W){try{W(null,this._geoJSONIndex.getChildren(q.clusterId))}catch(ae){W(ae)}}getClusterLeaves(q,W){try{W(null,this._geoJSONIndex.getLeaves(q.clusterId,q.limit,q.offset))}catch(ae){W(ae)}}}class As{constructor(q){this.self=q,this.actor=new l.C(q,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:D,geojson:yn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(W,ae)=>{if(this.workerSourceTypes[W])throw new Error(`Worker source with name "${W}" already registered.`);this.workerSourceTypes[W]=ae},this.self.registerRTLTextPlugin=W=>{if(l.bD.isParsed())throw new Error("RTL text plugin already registered.");l.bD.applyArabicShaping=W.applyArabicShaping,l.bD.processBidirectionalText=W.processBidirectionalText,l.bD.processStyledBidirectionalText=W.processStyledBidirectionalText}}setReferrer(q,W){this.referrer=W}setImages(q,W,ae){this.availableImages[q]=W;for(const ge in this.workerSources[q]){const ye=this.workerSources[q][ge];for(const Re in ye)ye[Re].availableImages=W}ae()}setLayers(q,W,ae){this.getLayerIndex(q).replace(W),ae()}updateLayers(q,W,ae){this.getLayerIndex(q).update(W.layers,W.removedIds),ae()}loadTile(q,W,ae){this.getWorkerSource(q,W.type,W.source).loadTile(W,ae)}loadDEMTile(q,W,ae){this.getDEMWorkerSource(q,W.source).loadTile(W,ae)}reloadTile(q,W,ae){this.getWorkerSource(q,W.type,W.source).reloadTile(W,ae)}abortTile(q,W,ae){this.getWorkerSource(q,W.type,W.source).abortTile(W,ae)}removeTile(q,W,ae){this.getWorkerSource(q,W.type,W.source).removeTile(W,ae)}removeDEMTile(q,W){this.getDEMWorkerSource(q,W.source).removeTile(W)}removeSource(q,W,ae){if(!this.workerSources[q]||!this.workerSources[q][W.type]||!this.workerSources[q][W.type][W.source])return;const ge=this.workerSources[q][W.type][W.source];delete this.workerSources[q][W.type][W.source],ge.removeSource!==void 0?ge.removeSource(W,ae):ae()}loadWorkerSource(q,W,ae){try{this.self.importScripts(W.url),ae()}catch(ge){ae(ge.toString())}}syncRTLPluginState(q,W,ae){try{l.bD.setState(W);const ge=l.bD.getPluginURL();if(l.bD.isLoaded()&&!l.bD.isParsed()&&ge!=null){this.self.importScripts(ge);const ye=l.bD.isParsed();ae(ye?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ge}`),ye)}}catch(ge){ae(ge.toString())}}getAvailableImages(q){let W=this.availableImages[q];return W||(W=[]),W}getLayerIndex(q){let W=this.layerIndexes[q];return W||(W=this.layerIndexes[q]=new v),W}getWorkerSource(q,W,ae){return this.workerSources[q]||(this.workerSources[q]={}),this.workerSources[q][W]||(this.workerSources[q][W]={}),this.workerSources[q][W][ae]||(this.workerSources[q][W][ae]=new this.workerSourceTypes[W]({send:(ge,ye,Re)=>{this.actor.send(ge,ye,Re,q)}},this.getLayerIndex(q),this.getAvailableImages(q))),this.workerSources[q][W][ae]}getDEMWorkerSource(q,W){return this.demWorkerSources[q]||(this.demWorkerSources[q]={}),this.demWorkerSources[q][W]||(this.demWorkerSources[q][W]=new O),this.demWorkerSources[q][W]}}return l.i()&&(self.worker=new As(self)),As}),u(["./shared"],function(l){var v="3.6.2";class _{static testProp(a){if(!_.docStyle)return a[0];for(let d=0;d<a.length;d++)if(a[d]in _.docStyle)return a[d];return a[0]}static create(a,d,p){const g=window.document.createElement(a);return d!==void 0&&(g.className=d),p&&p.appendChild(g),g}static createNS(a,d){return window.document.createElementNS(a,d)}static disableDrag(){_.docStyle&&_.selectProp&&(_.userSelect=_.docStyle[_.selectProp],_.docStyle[_.selectProp]="none")}static enableDrag(){_.docStyle&&_.selectProp&&(_.docStyle[_.selectProp]=_.userSelect)}static setTransform(a,d){a.style[_.transformProp]=d}static addEventListener(a,d,p,g={}){a.addEventListener(d,p,"passive"in g?g:g.capture)}static removeEventListener(a,d,p,g={}){a.removeEventListener(d,p,"passive"in g?g:g.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",_.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",_.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",_.suppressClickInternal,!0)},0)}static mousePos(a,d){const p=a.getBoundingClientRect();return new l.P(d.clientX-p.left-a.clientLeft,d.clientY-p.top-a.clientTop)}static touchPos(a,d){const p=a.getBoundingClientRect(),g=[];for(let x=0;x<d.length;x++)g.push(new l.P(d[x].clientX-p.left-a.clientLeft,d[x].clientY-p.top-a.clientTop));return g}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}}_.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,_.selectProp=_.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),_.transformProp=_.testProp(["transform","WebkitTransform"]);const S={supported:!1,testSupport:function(y){!D&&k&&(O?R(y):C=y)}};let C,k,D=!1,O=!1;function R(y){const a=y.createTexture();y.bindTexture(y.TEXTURE_2D,a);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,k),y.isContextLost())return;S.supported=!0}catch{}y.deleteTexture(a),D=!0}var F,N;typeof document<"u"&&(k=document.createElement("img"),k.onload=function(){C&&R(C),C=null,O=!0},k.onerror=function(){D=!0,C=null},k.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let a,d,p,g;y.resetRequestQueue=()=>{a=[],d=0,p=0,g={}},y.addThrottleControl=z=>{const V=p++;return g[V]=z,V},y.removeThrottleControl=z=>{delete g[z],I()},y.getImage=(z,V,$=!0)=>{S.supported&&(z.headers||(z.headers={}),z.headers.accept="image/webp,*/*");const Y={requestParameters:z,supportImageRefresh:$,callback:V,cancelled:!1,completed:!1,cancel:()=>{Y.completed||Y.cancelled||(Y.cancelled=!0,Y.innerRequest&&(Y.innerRequest.cancel(),d--),I())}};return a.push(Y),I(),Y};const x=z=>{const{requestParameters:V,supportImageRefresh:$,callback:Y}=z;return l.e(V,{type:"image"}),($!==!1||l.i()||l.g(V.url)||V.headers&&!Object.keys(V.headers).reduce((de,ue)=>de&&ue==="accept",!0)?l.m:M)(V,(de,ue,pe,oe)=>{A(z,Y,de,ue,pe,oe)})},A=(z,V,$,Y,de,ue)=>{$?V($):Y instanceof HTMLImageElement||l.a(Y)?V(null,Y):Y&&((pe,oe)=>{typeof createImageBitmap=="function"?l.b(pe,oe):l.d(pe,oe)})(Y,(pe,oe)=>{pe!=null?V(pe):oe!=null&&V(null,oe,{cacheControl:de,expires:ue})}),z.cancelled||(z.completed=!0,d--,I())},I=()=>{const z=(()=>{const V=Object.keys(g);let $=!1;if(V.length>0){for(const Y of V)if($=g[Y](),$)break}return $})()?l.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let V=d;V<z&&a.length>0;V++){const $=a.shift();if($.cancelled){V--;continue}const Y=x($);d++,$.innerRequest=Y}},M=(z,V)=>{const $=new Image,Y=z.url;let de=!1;const ue=z.credentials;return ue&&ue==="include"?$.crossOrigin="use-credentials":(ue&&ue==="same-origin"||!l.s(Y))&&($.crossOrigin="anonymous"),$.fetchPriority="high",$.onload=()=>{V(null,$),$.onerror=$.onload=null},$.onerror=()=>{de||V(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),$.onerror=$.onload=null},$.src=Y,{cancel:()=>{de=!0,$.src=""}}}}(F||(F={})),F.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(N||(N={}));class j{constructor(a){this._transformRequestFn=a}transformRequest(a,d){return this._transformRequestFn&&this._transformRequestFn(a,d)||{url:a}}normalizeSpriteURL(a,d,p){const g=function(x){const A=x.match(X);if(!A)throw new Error(`Unable to parse URL "${x}"`);return{protocol:A[1],authority:A[2],path:A[3]||"/",params:A[4]?A[4].split("&"):[]}}(a);return g.path+=`${d}${p}`,function(x){const A=x.params.length?`?${x.params.join("&")}`:"";return`${x.protocol}://${x.authority}${x.path}${A}`}(g)}setTransformRequest(a){this._transformRequestFn=a}}const X=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ee(y){var a=new l.A(3);return a[0]=y[0],a[1]=y[1],a[2]=y[2],a}var le,ie=function(y,a,d){return y[0]=a[0]-d[0],y[1]=a[1]-d[1],y[2]=a[2]-d[2],y};le=new l.A(3),l.A!=Float32Array&&(le[0]=0,le[1]=0,le[2]=0);var se=function(y){var a=y[0],d=y[1];return a*a+d*d};function H(y){const a=[];if(typeof y=="string")a.push({id:"default",url:y});else if(y&&y.length>0){const d=[];for(const{id:p,url:g}of y){const x=`${p}${g}`;d.indexOf(x)===-1&&(d.push(x),a.push({id:p,url:g}))}}return a}function Z(y,a,d,p,g){if(p)return void y(p);if(g!==Object.values(a).length||g!==Object.values(d).length)return;const x={};for(const A in a){x[A]={};const I=l.h.getImageCanvasContext(d[A]),M=a[A];for(const z in M){const{width:V,height:$,x:Y,y:de,sdf:ue,pixelRatio:pe,stretchX:oe,stretchY:Ee,content:Ue}=M[z];x[A][z]={data:null,pixelRatio:pe,sdf:ue,stretchX:oe,stretchY:Ee,content:Ue,spriteData:{width:V,height:$,x:Y,y:de,context:I}}}}y(null,x)}(function(){var y=new l.A(2);l.A!=Float32Array&&(y[0]=0,y[1]=0)})();class ne{constructor(a,d,p,g){this.context=a,this.format=p,this.texture=a.gl.createTexture(),this.update(d,g)}update(a,d,p){const{width:g,height:x}=a,A=!(this.size&&this.size[0]===g&&this.size[1]===x||p),{context:I}=this,{gl:M}=I;if(this.useMipmap=!!(d&&d.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),I.pixelStoreUnpackFlipY.set(!1),I.pixelStoreUnpack.set(1),I.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!d||d.premultiply!==!1)),A)this.size=[g,x],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||l.a(a)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,a):M.texImage2D(M.TEXTURE_2D,0,this.format,g,x,0,this.format,M.UNSIGNED_BYTE,a.data);else{const{x:z,y:V}=p||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||l.a(a)?M.texSubImage2D(M.TEXTURE_2D,0,z,V,M.RGBA,M.UNSIGNED_BYTE,a):M.texSubImage2D(M.TEXTURE_2D,0,z,V,g,x,M.RGBA,M.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(a,d,p){const{context:g}=this,{gl:x}=g;x.bindTexture(x.TEXTURE_2D,this.texture),p!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=x.LINEAR),a!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,a),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,p||a),this.filter=a),d!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,d),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}function _e(y){const{userImage:a}=y;return!!(a&&a.render&&a.render())&&(y.data.replace(new Uint8Array(a.data.buffer)),!0)}class te extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(const{ids:d,callback:p}of this.requestors)this._notify(d,p);this.requestors=[]}}getImage(a){const d=this.images[a];if(d&&!d.data&&d.spriteData){const p=d.spriteData;d.data=new l.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),d.spriteData=null}return d}addImage(a,d){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,d)&&(this.images[a]=d)}_validate(a,d){let p=!0;const g=d.data||d.spriteData;return this._validateStretch(d.stretchX,g&&g.width)||(this.fire(new l.j(new Error(`Image "${a}" has invalid "stretchX" value`))),p=!1),this._validateStretch(d.stretchY,g&&g.height)||(this.fire(new l.j(new Error(`Image "${a}" has invalid "stretchY" value`))),p=!1),this._validateContent(d.content,d)||(this.fire(new l.j(new Error(`Image "${a}" has invalid "content" value`))),p=!1),p}_validateStretch(a,d){if(!a)return!0;let p=0;for(const g of a){if(g[0]<p||g[1]<g[0]||d<g[1])return!1;p=g[1]}return!0}_validateContent(a,d){if(!a)return!0;if(a.length!==4)return!1;const p=d.spriteData,g=p&&p.width||d.data.width,x=p&&p.height||d.data.height;return!(a[0]<0||g<a[0]||a[1]<0||x<a[1]||a[2]<0||g<a[2]||a[3]<0||x<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,d,p=!0){const g=this.getImage(a);if(p&&(g.data.width!==d.data.width||g.data.height!==d.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=g.version+1,this.images[a]=d,this.updatedImages[a]=!0}removeImage(a){const d=this.images[a];delete this.images[a],delete this.patterns[a],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a,d){let p=!0;if(!this.isLoaded())for(const g of a)this.images[g]||(p=!1);this.isLoaded()||p?this._notify(a,d):this.requestors.push({ids:a,callback:d})}_notify(a,d){const p={};for(const g of a){let x=this.getImage(g);x||(this.fire(new l.k("styleimagemissing",{id:g})),x=this.getImage(g)),x?p[g]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,hasRenderCallback:!!(x.userImage&&x.userImage.render)}:l.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,p)}getPixelSize(){const{width:a,height:d}=this.atlasImage;return{width:a,height:d}}getPattern(a){const d=this.patterns[a],p=this.getImage(a);if(!p)return null;if(d&&d.position.version===p.version)return d.position;if(d)d.position.version=p.version;else{const g={w:p.data.width+2,h:p.data.height+2,x:0,y:0},x=new l.I(g,p);this.patterns[a]={bin:g,position:x}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){const d=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ne(a,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const a=[];for(const x in this.patterns)a.push(this.patterns[x].bin);const{w:d,h:p}=l.p(a),g=this.atlasImage;g.resize({width:d||1,height:p||1});for(const x in this.patterns){const{bin:A}=this.patterns[x],I=A.x+1,M=A.y+1,z=this.getImage(x).data,V=z.width,$=z.height;l.R.copy(z,g,{x:0,y:0},{x:I,y:M},{width:V,height:$}),l.R.copy(z,g,{x:0,y:$-1},{x:I,y:M-1},{width:V,height:1}),l.R.copy(z,g,{x:0,y:0},{x:I,y:M+$},{width:V,height:1}),l.R.copy(z,g,{x:V-1,y:0},{x:I-1,y:M},{width:1,height:$}),l.R.copy(z,g,{x:0,y:0},{x:I+V,y:M},{width:1,height:$})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(const d of a){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const p=this.getImage(d);p||l.w(`Image with ID: "${d}" was not found`),_e(p)&&this.updateImage(d,p)}}}const Se=1e20;function me(y,a,d,p,g,x,A,I,M){for(let z=a;z<a+p;z++)Ve(y,d*x+z,x,g,A,I,M);for(let z=d;z<d+g;z++)Ve(y,z*x+a,1,p,A,I,M)}function Ve(y,a,d,p,g,x,A){x[0]=0,A[0]=-Se,A[1]=Se,g[0]=y[a];for(let I=1,M=0,z=0;I<p;I++){g[I]=y[a+I*d];const V=I*I;do{const $=x[M];z=(g[I]-g[$]+V-$*$)/(I-$)/2}while(z<=A[M]&&--M>-1);M++,x[M]=I,A[M]=z,A[M+1]=Se}for(let I=0,M=0;I<p;I++){for(;A[M+1]<I;)M++;const z=x[M],V=I-z;y[a+I*d]=g[z]+V*V}}class Ge{constructor(a,d){this.requestManager=a,this.localIdeographFontFamily=d,this.entries={}}setURL(a){this.url=a}getGlyphs(a,d){const p=[];for(const g in a)for(const x of a[g])p.push({stack:g,id:x});l.o(p,({stack:g,id:x},A)=>{let I=this.entries[g];I||(I=this.entries[g]={glyphs:{},requests:{},ranges:{}});let M=I.glyphs[x];if(M!==void 0)return void A(null,{stack:g,id:x,glyph:M});if(M=this._tinySDF(I,g,x),M)return I.glyphs[x]=M,void A(null,{stack:g,id:x,glyph:M});const z=Math.floor(x/256);if(256*z>65535)return void A(new Error("glyphs > 65535 not supported"));if(I.ranges[z])return void A(null,{stack:g,id:x,glyph:M});if(!this.url)return void A(new Error("glyphsUrl is not set"));let V=I.requests[z];V||(V=I.requests[z]=[],Ge.loadGlyphRange(g,z,this.url,this.requestManager,($,Y)=>{if(Y){for(const de in Y)this._doesCharSupportLocalGlyph(+de)||(I.glyphs[+de]=Y[+de]);I.ranges[z]=!0}for(const de of V)de($,Y);delete I.requests[z]})),V.push(($,Y)=>{$?A($):Y&&A(null,{stack:g,id:x,glyph:Y[x]||null})})},(g,x)=>{if(g)d(g);else if(x){const A={};for(const{stack:I,id:M,glyph:z}of x)(A[I]||(A[I]={}))[M]=z&&{id:z.id,bitmap:z.bitmap.clone(),metrics:z.metrics};d(null,A)}})}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&(l.u["CJK Unified Ideographs"](a)||l.u["Hangul Syllables"](a)||l.u.Hiragana(a)||l.u.Katakana(a))}_tinySDF(a,d,p){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(p))return;let x=a.tinySDF;if(!x){let I="400";/bold/i.test(d)?I="900":/medium/i.test(d)?I="500":/light/i.test(d)&&(I="200"),x=a.tinySDF=new Ge.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:I})}const A=x.draw(String.fromCharCode(p));return{id:p,bitmap:new l.q({width:A.width||60,height:A.height||60},A.data),metrics:{width:A.glyphWidth/2||24,height:A.glyphHeight/2||24,left:A.glyphLeft/2+.5||0,top:A.glyphTop/2-27.5||-8,advance:A.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ge.loadGlyphRange=function(y,a,d,p,g){const x=256*a,A=x+255,I=p.transformRequest(d.replace("{fontstack}",y).replace("{range}",`${x}-${A}`),N.Glyphs);l.l(I,(M,z)=>{if(M)g(M);else if(z){const V={};for(const $ of l.n(z))V[$.id]=$;g(null,V)}})},Ge.TinySDF=class{constructor({fontSize:y=24,buffer:a=3,radius:d=8,cutoff:p=.25,fontFamily:g="sans-serif",fontWeight:x="normal",fontStyle:A="normal"}={}){this.buffer=a,this.cutoff=p,this.radius=d;const I=this.size=y+4*a,M=this._createCanvas(I),z=this.ctx=M.getContext("2d",{willReadFrequently:!0});z.font=`${A} ${x} ${y}px ${g}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(I*I),this.gridInner=new Float64Array(I*I),this.f=new Float64Array(I),this.z=new Float64Array(I+1),this.v=new Uint16Array(I)}_createCanvas(y){const a=document.createElement("canvas");return a.width=a.height=y,a}draw(y){const{width:a,actualBoundingBoxAscent:d,actualBoundingBoxDescent:p,actualBoundingBoxLeft:g,actualBoundingBoxRight:x}=this.ctx.measureText(y),A=Math.ceil(d),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-g))),M=Math.min(this.size-this.buffer,A+Math.ceil(p)),z=I+2*this.buffer,V=M+2*this.buffer,$=Math.max(z*V,0),Y=new Uint8ClampedArray($),de={data:Y,width:z,height:V,glyphWidth:I,glyphHeight:M,glyphTop:A,glyphLeft:0,glyphAdvance:a};if(I===0||M===0)return de;const{ctx:ue,buffer:pe,gridInner:oe,gridOuter:Ee}=this;ue.clearRect(pe,pe,I,M),ue.fillText(y,pe,pe+A);const Ue=ue.getImageData(pe,pe,I,M);Ee.fill(Se,0,$),oe.fill(0,0,$);for(let be=0;be<M;be++)for(let De=0;De<I;De++){const We=Ue.data[4*(be*I+De)+3]/255;if(We===0)continue;const Ye=(be+pe)*z+De+pe;if(We===1)Ee[Ye]=0,oe[Ye]=Se;else{const rt=.5-We;Ee[Ye]=rt>0?rt*rt:0,oe[Ye]=rt<0?rt*rt:0}}me(Ee,0,0,z,V,z,this.f,this.v,this.z),me(oe,pe,pe,I,M,z,this.f,this.v,this.z);for(let be=0;be<$;be++){const De=Math.sqrt(Ee[be])-Math.sqrt(oe[be]);Y[be]=Math.round(255-255*(De/this.radius+this.cutoff))}return de}};class $e{constructor(){this.specification=l.v.light.position}possiblyEvaluate(a,d){return l.z(a.expression.evaluate(d))}interpolate(a,d,p){return{x:l.B.number(a.x,d.x,p),y:l.B.number(a.y,d.y,p),z:l.B.number(a.z,d.z,p)}}}let ke;class Pe extends l.E{constructor(a){super(),ke=ke||new l.r({anchor:new l.D(l.v.light.anchor),position:new $e,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(ke),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,d={}){if(!this._validate(l.t,a,d))for(const p in a){const g=a[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,d,p){return(!p||p.validate!==!1)&&l.x(this,a.call(l.y,l.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}}class Ze{constructor(a,d){this.width=a,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,d){const p=a.join(",")+String(d);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(a,d)),this.dashEntry[p]}getDashRanges(a,d,p){const g=[];let x=a.length%2==1?-a[a.length-1]*p:0,A=a[0]*p,I=!0;g.push({left:x,right:A,isDash:I,zeroLength:a[0]===0});let M=a[0];for(let z=1;z<a.length;z++){I=!I;const V=a[z];x=M*p,M+=V,A=M*p,g.push({left:x,right:A,isDash:I,zeroLength:V===0})}return g}addRoundDash(a,d,p){const g=d/2;for(let x=-p;x<=p;x++){const A=this.width*(this.nextRow+p+x);let I=0,M=a[I];for(let z=0;z<this.width;z++){z/M.right>1&&(M=a[++I]);const V=Math.abs(z-M.left),$=Math.abs(z-M.right),Y=Math.min(V,$);let de;const ue=x/p*(g+1);if(M.isDash){const pe=g-Math.abs(ue);de=Math.sqrt(Y*Y+pe*pe)}else de=g-Math.sqrt(Y*Y+ue*ue);this.data[A+z]=Math.max(0,Math.min(255,de+128))}}}addRegularDash(a){for(let I=a.length-1;I>=0;--I){const M=a[I],z=a[I+1];M.zeroLength?a.splice(I,1):z&&z.isDash===M.isDash&&(z.left=M.left,a.splice(I,1))}const d=a[0],p=a[a.length-1];d.isDash===p.isDash&&(d.left=p.left-this.width,p.right=d.right+this.width);const g=this.width*this.nextRow;let x=0,A=a[x];for(let I=0;I<this.width;I++){I/A.right>1&&(A=a[++x]);const M=Math.abs(I-A.left),z=Math.abs(I-A.right),V=Math.min(M,z);this.data[g+I]=Math.max(0,Math.min(255,(A.isDash?V:-V)+128))}}addDash(a,d){const p=d?7:0,g=2*p+1;if(this.nextRow+g>this.height)return l.w("LineAtlas out of space"),null;let x=0;for(let I=0;I<a.length;I++)x+=a[I];if(x!==0){const I=this.width/x,M=this.getDashRanges(a,this.width,I);d?this.addRoundDash(M,I,p):this.addRegularDash(M)}const A={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:x};return this.nextRow+=g,this.dirty=!0,A}bind(a){const d=a.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}class Je{constructor(a,d,p){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=p;const g=this.workerPool.acquire(p);for(let x=0;x<g.length;x++){const A=new l.C(g[x],d,p);A.name=`Worker ${x}`,this.actors.push(A)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,d,p){l.o(this.actors,(g,x)=>{g.send(a,d,x)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],a&&this.workerPool.release(this.id)}}function Ne(y,a,d){const p=function(g,x){if(g)return d(g);if(x){const A=l.F(l.e(x,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);x.vector_layers&&(A.vectorLayers=x.vector_layers,A.vectorLayerIds=A.vectorLayers.map(I=>I.id)),d(null,A)}};return y.url?l.f(a.transformRequest(y.url,N.Source),p):l.h.frame(()=>p(null,y))}class tt{constructor(a,d){a&&(d?this.setSouthWest(a).setNorthEast(d):Array.isArray(a)&&(a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof l.L?new l.L(a.lng,a.lat):l.L.convert(a),this}setSouthWest(a){return this._sw=a instanceof l.L?new l.L(a.lng,a.lat):l.L.convert(a),this}extend(a){const d=this._sw,p=this._ne;let g,x;if(a instanceof l.L)g=a,x=a;else{if(!(a instanceof tt))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(tt.convert(a)):this.extend(l.L.convert(a)):a&&("lng"in a||"lon"in a)&&"lat"in a?this.extend(l.L.convert(a)):this;if(g=a._sw,x=a._ne,!g||!x)return this}return d||p?(d.lng=Math.min(g.lng,d.lng),d.lat=Math.min(g.lat,d.lat),p.lng=Math.max(x.lng,p.lng),p.lat=Math.max(x.lat,p.lat)):(this._sw=new l.L(g.lng,g.lat),this._ne=new l.L(x.lng,x.lat)),this}getCenter(){return new l.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.L(this.getWest(),this.getNorth())}getSouthEast(){return new l.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:d,lat:p}=l.L.convert(a);let g=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&g}static convert(a){return a instanceof tt?a:a&&new tt(a)}static fromLngLat(a,d=0){const p=360*d/40075017,g=p/Math.cos(Math.PI/180*a.lat);return new tt(new l.L(a.lng-g,a.lat-p),new l.L(a.lng+g,a.lat+p))}}class _t{constructor(a,d,p){this.bounds=tt.convert(this.validateBounds(a)),this.minzoom=d||0,this.maxzoom=p||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const d=Math.pow(2,a.z),p=Math.floor(l.G(this.bounds.getWest())*d),g=Math.floor(l.H(this.bounds.getNorth())*d),x=Math.ceil(l.G(this.bounds.getEast())*d),A=Math.ceil(l.H(this.bounds.getSouth())*d);return a.x>=p&&a.x<x&&a.y>=g&&a.y<A}}class kt extends l.E{constructor(a,d,p,g){if(super(),this.load=()=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Ne(this._options,this.map._requestManager,(x,A)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),x?this.fire(new l.j(x)):A&&(l.e(this,A),A.bounds&&(this.tileBounds=new _t(A.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>l.e({},this._options),this.id=a,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.F(d,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.cancel(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(a,d){const p=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(p,N.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(A,I){return delete a.request,a.aborted?d(null):A&&A.status!==404?d(A):(I&&I.resourceTiming&&(a.resourceTiming=I.resourceTiming),this.map._refreshExpiredTiles&&I&&a.setExpiryData(I),a.loadVectorData(I,this.map.painter),d(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired"?a.state==="loading"?a.reloadCallback=d:a.request=a.actor.send("reloadTile",g,x.bind(this)):(a.actor=this.dispatcher.getActor(),a.request=a.actor.send("loadTile",g,x.bind(this)))}abortTile(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id},void 0)}unloadTile(a){a.unloadVectorData(),a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class St extends l.E{constructor(a,d,p,g){super(),this.id=a,this.dispatcher=p,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},d),l.e(this,l.F(d,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Ne(this._options,this.map._requestManager,(a,d)=>{this._tileJSONRequest=null,this._loaded=!0,a?this.fire(new l.j(a)):d&&(l.e(this,d),d.bounds&&(this.tileBounds=new _t(d.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.cancel(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}serialize(){return l.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a,d){const p=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.request=F.getImage(this.map._requestManager.transformRequest(p,N.Tile),(g,x,A)=>{if(delete a.request,a.aborted)a.state="unloaded",d(null);else if(g)a.state="errored",d(g);else if(x){this.map._refreshExpiredTiles&&A&&a.setExpiryData(A);const I=this.map.painter.context,M=I.gl;a.texture=this.map.painter.getTileTexture(x.width),a.texture?a.texture.update(x,{useMipmap:!0}):(a.texture=new ne(I,x,M.RGBA,{useMipmap:!0}),a.texture.bind(M.LINEAR,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),I.extTextureFilterAnisotropic&&M.texParameterf(M.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax)),a.state="loaded",d(null)}},this.map._refreshExpiredTiles)}abortTile(a,d){a.request&&(a.request.cancel(),delete a.request),d()}unloadTile(a,d){a.texture&&this.map.painter.saveTileTexture(a.texture),d()}hasTransition(){return!1}}class Fe extends St{constructor(a,d,p,g){super(a,d,p,g),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(a,d){const p=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(p,N.Tile);function x(A,I){A&&(a.state="errored",d(A)),I&&(a.dem=I,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded",d(null))}a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.request=F.getImage(g,(A,I,M)=>l._(this,void 0,void 0,function*(){if(delete a.request,a.aborted)a.state="unloaded",d(null);else if(A)a.state="errored",d(A);else if(I){this.map._refreshExpiredTiles&&a.setExpiryData(M);const z=l.a(I)&&l.J()?I:yield function($){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.K()){const Y=$.width+2,de=$.height+2;try{return new l.R({width:Y,height:de},yield l.M($,-1,-1,Y,de))}catch{}}return l.h.getImageData($,1)})}(I),V={uid:a.uid,coord:a.tileID,source:this.id,rawImageData:z,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};a.actor&&a.state!=="expired"||(a.actor=this.dispatcher.getActor(),a.actor.send("loadDEMTile",V,x))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(a){const d=a.canonical,p=Math.pow(2,d.z),g=(d.x-1+p)%p,x=d.x===0?a.wrap-1:a.wrap,A=(d.x+1+p)%p,I=d.x+1===p?a.wrap+1:a.wrap,M={};return M[new l.O(a.overscaledZ,x,d.z,g,d.y).key]={backfilled:!1},M[new l.O(a.overscaledZ,I,d.z,A,d.y).key]={backfilled:!1},d.y>0&&(M[new l.O(a.overscaledZ,x,d.z,g,d.y-1).key]={backfilled:!1},M[new l.O(a.overscaledZ,a.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},M[new l.O(a.overscaledZ,I,d.z,A,d.y-1).key]={backfilled:!1}),d.y+1<p&&(M[new l.O(a.overscaledZ,x,d.z,g,d.y+1).key]={backfilled:!1},M[new l.O(a.overscaledZ,a.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},M[new l.O(a.overscaledZ,I,d.z,A,d.y+1).key]={backfilled:!1}),M}unloadTile(a){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&a.actor.send("removeDEMTile",{uid:a.uid,source:this.id})}}class at extends l.E{constructor(a,d,p,g){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>l.e({},this._options,{type:this.type,data:this._data}),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(g),this._data=d.data,this._options=l.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const x=l.N/this.tileSize;this.workerOptions=l.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*x,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*x,extent:l.N,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:l.N,radius:(d.clusterRadius||50)*x,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._updateWorkerData(),this}updateData(a){return this._updateWorkerData(a),this}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(a.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=a.clusterRadius),a.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=a.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(a,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:a,source:this.id},d),this}getClusterChildren(a,d){return this.actor.send("geojson.getClusterChildren",{clusterId:a,source:this.id},d),this}getClusterLeaves(a,d,p,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:a,limit:d,offset:p},g),this}_updateWorkerData(a){const d=l.e({},this.workerOptions);a?d.dataDiff=a:typeof this._data=="string"?(d.request=this.map._requestManager.transformRequest(l.h.resolveURL(this._data),N.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,d,(p,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let x=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(x=g.resourceTiming[this.id].slice(0)),p)return void this.fire(new l.j(p));const A={dataType:"source"};this._collectResourceTiming&&x&&x.length>0&&l.e(A,{resourceTiming:x}),this.fire(new l.k("data",Object.assign(Object.assign({},A),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},A),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(a,d){const p=a.actor?"reloadTile":"loadTile";a.actor=this.actor;const g={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};a.request=this.actor.send(p,g,(x,A)=>(delete a.request,a.unloadVectorData(),a.aborted?d(null):x?d(x):(a.loadVectorData(A,this.map.painter,p==="reloadTile"),d(null))))}abortTile(a){a.request&&(a.request.cancel(),delete a.request),a.aborted=!0}unloadTile(a){a.unloadVectorData(),this.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var qe=l.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Be extends l.E{constructor(a,d,p,g){super(),this.load=(x,A)=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=F.getImage(this.map._requestManager.transformRequest(this.url,N.Image),(I,M)=>{this._request=null,this._loaded=!0,I?this.fire(new l.j(I)):M&&(this.image=M,x&&(this.coordinates=x),A&&A(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const x=this.map.painter.context,A=x.gl;this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,qe.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ne(x,this.image,A.RGBA),this.texture.bind(A.LINEAR,A.CLAMP_TO_EDGE));let I=!1;for(const M in this.tiles){const z=this.tiles[M];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,I=!0)}I&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=a,this.dispatcher=p,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=d}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=a.url,this.load(a.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(a){this.coordinates=a;const d=a.map(l.U.fromLngLat);this.tileID=function(g){let x=1/0,A=1/0,I=-1/0,M=-1/0;for(const Y of g)x=Math.min(x,Y.x),A=Math.min(A,Y.y),I=Math.max(I,Y.x),M=Math.max(M,Y.y);const z=Math.max(I-x,M-A),V=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),$=Math.pow(2,V);return new l.W(V,Math.floor((x+I)/2*$),Math.floor((A+M)/2*$))}(d),this.minzoom=this.maxzoom=this.tileID.z;const p=d.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new l.V,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,l.N,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,l.N),this._boundsArray.emplaceBack(p[2].x,p[2].y,l.N,l.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(a,d){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},d(null)):(a.state="errored",d(null))}hasTransition(){return!1}}class bt extends Be{constructor(a,d,p,g){super(a,d,p,g),this.load=()=>{this._loaded=!1;const x=this.options;this.urls=[];for(const A of x.urls)this.urls.push(this.map._requestManager.transformRequest(A,N.Source).url);l.X(this.urls,(A,I)=>{this._loaded=!0,A?this.fire(new l.j(A)):I&&(this.video=I,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const x=this.map.painter.context,A=x.gl;this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,qe.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(A.LINEAR,A.CLAMP_TO_EDGE),A.texSubImage2D(A.TEXTURE_2D,0,0,0,A.RGBA,A.UNSIGNED_BYTE,this.video)):(this.texture=new ne(x,this.video,A.RGBA),this.texture.bind(A.LINEAR,A.CLAMP_TO_EDGE));let I=!1;for(const M in this.tiles){const z=this.tiles[M];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,I=!0)}I&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=d}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){const d=this.video.seekable;a<d.start(0)||a>d.end(0)?this.fire(new l.j(new l.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Bt extends Be{constructor(a,d,p,g){super(a,d,p,g),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let x=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,x=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,x=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const A=this.map.painter.context,I=A.gl;this.boundsBuffer||(this.boundsBuffer=A.createVertexBuffer(this._boundsArray,qe.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?(x||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ne(A,this.canvas,I.RGBA,{premultiply:!0});let M=!1;for(const z in this.tiles){const V=this.tiles[z];V.state!=="loaded"&&(V.state="loaded",V.texture=this.texture,M=!0)}M&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(A=>typeof A!="number"))||this.fire(new l.j(new l.Y(`sources.${a}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.Y(`sources.${a}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new l.j(new l.Y(`sources.${a}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.Y(`sources.${a}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.Y(`sources.${a}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}const re={},he=y=>{switch(y){case"geojson":return at;case"image":return Be;case"raster":return St;case"raster-dem":return Fe;case"vector":return kt;case"video":return bt;case"canvas":return Bt}return re[y]};function ze(y,a){const d=l.Z();return l.$(d,d,[1,1,0]),l.a0(d,d,[.5*y.width,.5*y.height,1]),l.a1(d,d,y.calculatePosMatrix(a.toUnwrapped()))}function He(y,a,d,p,g,x){const A=function($,Y,de){if($)for(const ue of $){const pe=Y[ue];if(pe&&pe.source===de&&pe.type==="fill-extrusion")return!0}else for(const ue in Y){const pe=Y[ue];if(pe.source===de&&pe.type==="fill-extrusion")return!0}return!1}(g&&g.layers,a,y.id),I=x.maxPitchScaleFactor(),M=y.tilesIn(p,I,A);M.sort(Ke);const z=[];for(const $ of M)z.push({wrappedTileID:$.tileID.wrapped().key,queryResults:$.tile.queryRenderedFeatures(a,d,y._state,$.queryGeometry,$.cameraQueryGeometry,$.scale,g,x,I,ze(y.transform,$.tileID))});const V=function($){const Y={},de={};for(const ue of $){const pe=ue.queryResults,oe=ue.wrappedTileID,Ee=de[oe]=de[oe]||{};for(const Ue in pe){const be=pe[Ue],De=Ee[Ue]=Ee[Ue]||{},We=Y[Ue]=Y[Ue]||[];for(const Ye of be)De[Ye.featureIndex]||(De[Ye.featureIndex]=!0,We.push(Ye))}}return Y}(z);for(const $ in V)V[$].forEach(Y=>{const de=Y.feature,ue=y.getFeatureState(de.layer["source-layer"],de.id);de.source=de.layer.source,de.layer["source-layer"]&&(de.sourceLayer=de.layer["source-layer"]),de.state=ue});return V}function Ke(y,a){const d=y.tileID,p=a.tileID;return d.overscaledZ-p.overscaledZ||d.canonical.y-p.canonical.y||d.wrap-p.wrap||d.canonical.x-p.canonical.x}class dt{constructor(a,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=a,this.uid=l.a2(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){const d=a+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,d,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(g,x){const A={};if(!x)return A;for(const I of g){const M=I.layerIds.map(z=>x.getLayer(z)).filter(Boolean);if(M.length!==0){I.layers=M,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map(z=>M.filter(V=>V.id===z)[0]));for(const z of M)A[z.id]=I}}return A}(a.buckets,d.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const x=this.buckets[g];if(x instanceof l.a4){if(this.hasSymbolBuckets=!0,!p)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const x=this.buckets[g];if(x instanceof l.a4&&x.hasRTLText){this.hasRTLText=!0,l.a5();break}}this.queryPadding=0;for(const g in this.buckets){const x=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(g).queryRadius(x))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new l.a3}unloadVectorData(){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(const p in this.buckets){const g=this.buckets[p];g.uploadPending()&&g.upload(a)}const d=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ne(a,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ne(a,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,d,p,g,x,A,I,M,z,V){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:x,scale:A,tileSize:this.tileSize,pixelPosMatrix:V,transform:M,params:I,queryPadding:this.queryPadding*z},a,d,p):{}}querySourceFeatures(a,d){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const g=p.loadVTLayers(),x=d&&d.sourceLayer?d.sourceLayer:"",A=g._geojsonTileLayer||g[x];if(!A)return;const I=l.a6(d&&d.filter),{z:M,x:z,y:V}=this.tileID.canonical,$={z:M,x:z,y:V};for(let Y=0;Y<A.length;Y++){const de=A.feature(Y);if(I.needGeometry){const oe=l.a7(de,!0);if(!I.filter(new l.a8(this.tileID.overscaledZ),oe,this.tileID.canonical))continue}else if(!I.filter(new l.a8(this.tileID.overscaledZ),de))continue;const ue=p.getId(de,x),pe=new l.a9(de,M,z,V,ue);pe.tile=$,a.push(pe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const d=this.expirationTime;if(a.cacheControl){const p=l.aa(a.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const p=Date.now();let g=!1;if(this.expirationTime>p)g=!1;else if(d)if(this.expirationTime<d)g=!0;else{const x=this.expirationTime-d;x?this.expirationTime=p+Math.max(x,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!d.style.hasLayer(g))continue;const x=this.buckets[g],A=x.layers[0].sourceLayer||"_geojsonTileLayer",I=p[A],M=a[A];if(!I||!M||Object.keys(M).length===0)continue;x.update(M,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});const z=d&&d.style&&d.style.getLayer(g);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=l.h.now()+a}setDependencies(a,d){const p={};for(const g of d)p[g]=!0;this.dependencies[a]=p}hasDependency(a,d){for(const p of a){const g=this.dependencies[p];if(g){for(const x of d)if(g[x])return!0}}return!1}}class gt{constructor(a,d){this.max=a,this.onRemove=d,this.reset()}reset(){for(const a in this.data)for(const d of this.data[a])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(a,d,p){const g=a.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const x={value:d,timeout:void 0};if(p!==void 0&&(x.timeout=setTimeout(()=>{this.remove(a,x)},p)),this.data[g].push(x),this.order.push(g),this.order.length>this.max){const A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const d=this.data[a].shift();return d.timeout&&clearTimeout(d.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),d.value}getByKey(a){const d=this.data[a];return d?d[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,d){if(!this.has(a))return this;const p=a.wrapped().key,g=d===void 0?0:this.data[p].indexOf(d),x=this.data[p][g];return this.data[p].splice(g,1),x.timeout&&clearTimeout(x.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(x.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(a){const d=[];for(const p in this.data)for(const g of this.data[p])a(g.value)||d.push(g);for(const p of d)this.remove(p.value.tileID,p)}}class Ce{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,d,p){const g=String(d);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][g]=this.stateChanges[a][g]||{},l.e(this.stateChanges[a][g],p),this.deletedStates[a]===null){this.deletedStates[a]={};for(const x in this.state[a])x!==g&&(this.deletedStates[a][x]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][g]===null){this.deletedStates[a][g]={};for(const x in this.state[a][g])p[x]||(this.deletedStates[a][g][x]=null)}else for(const x in p)this.deletedStates[a]&&this.deletedStates[a][g]&&this.deletedStates[a][g][x]===null&&delete this.deletedStates[a][g][x]}removeFeatureState(a,d,p){if(this.deletedStates[a]===null)return;const g=String(d);if(this.deletedStates[a]=this.deletedStates[a]||{},p&&d!==void 0)this.deletedStates[a][g]!==null&&(this.deletedStates[a][g]=this.deletedStates[a][g]||{},this.deletedStates[a][g][p]=null);else if(d!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][g])for(p in this.deletedStates[a][g]={},this.stateChanges[a][g])this.deletedStates[a][g][p]=null;else this.deletedStates[a][g]=null;else this.deletedStates[a]=null}getState(a,d){const p=String(d),g=l.e({},(this.state[a]||{})[p],(this.stateChanges[a]||{})[p]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){const x=this.deletedStates[a][d];if(x===null)return{};for(const A in x)delete g[A]}return g}initializeTileState(a,d){a.setFeatureState(this.state,d)}coalesceChanges(a,d){const p={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const x={};for(const A in this.stateChanges[g])this.state[g][A]||(this.state[g][A]={}),l.e(this.state[g][A],this.stateChanges[g][A]),x[A]=this.state[g][A];p[g]=x}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const x={};if(this.deletedStates[g]===null)for(const A in this.state[g])x[A]={},this.state[g][A]={};else for(const A in this.deletedStates[g]){if(this.deletedStates[g][A]===null)this.state[g][A]={};else for(const I of Object.keys(this.deletedStates[g][A]))delete this.state[g][A][I];x[A]=this.state[g][A]}p[g]=p[g]||{},l.e(p[g],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const g in a)a[g].setFeatureState(p,d)}}class pt extends l.E{constructor(a,d,p){super(),this.id=a,this.dispatcher=p,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,x,A,I)=>{const M=new(he(x.type))(g,x,A,I);if(M.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${M.id}`);return M})(a,d,p,this),this._tiles={},this._cache=new gt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ce,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const a in this._tiles){const d=this._tiles[a];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,d){return this._source.loadTile(a,d)}_unloadTile(a){if(this._source.unloadTile)return this._source.unloadTile(a,()=>{})}_abortTile(a){this._source.abortTile&&this._source.abortTile(a,()=>{}),this._source.fire(new l.k("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const p=this._tiles[d];p.upload(a),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(Qe).map(a=>a.key)}getRenderableIds(a){const d=[];for(const p in this._tiles)this._isIdRenderable(p,a)&&d.push(this._tiles[p]);return a?d.sort((p,g)=>{const x=p.tileID,A=g.tileID,I=new l.P(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),M=new l.P(A.canonical.x,A.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-A.overscaledZ||M.y-I.y||M.x-I.x}).map(p=>p.tileID.key):d.map(p=>p.tileID).sort(Qe).map(p=>p.key)}hasRenderableParent(a){const d=this.findLoadedParent(a,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(a,d){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(d||!this._tiles[a].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")}}_reloadTile(a,d){const p=this._tiles[a];p&&(p.state!=="loading"&&(p.state=d),this._loadTile(p,this._tileLoaded.bind(this,p,a,d)))}_tileLoaded(a,d,p,g){if(g)return a.state="errored",void(g.status!==404?this._source.fire(new l.j(g,{tile:a})):this.update(this.transform,this.terrain));a.timeAdded=l.h.now(),p==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(d,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){const d=this.getRenderableIds();for(let g=0;g<d.length;g++){const x=d[g];if(a.neighboringTiles&&a.neighboringTiles[x]){const A=this.getTileByID(x);p(a,A),p(A,a)}}function p(g,x){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let A=x.tileID.canonical.x-g.tileID.canonical.x;const I=x.tileID.canonical.y-g.tileID.canonical.y,M=Math.pow(2,g.tileID.canonical.z),z=x.tileID.key;A===0&&I===0||Math.abs(I)>1||(Math.abs(A)>1&&(Math.abs(A+M)===1?A+=M:Math.abs(A-M)===1&&(A-=M)),x.dem&&g.dem&&(g.dem.backfillBorder(x.dem,A,I),g.neighboringTiles&&g.neighboringTiles[z]&&(g.neighboringTiles[z].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,d,p,g){for(const x in this._tiles){let A=this._tiles[x];if(g[x]||!A.hasData()||A.tileID.overscaledZ<=d||A.tileID.overscaledZ>p)continue;let I=A.tileID;for(;A&&A.tileID.overscaledZ>d+1;){const z=A.tileID.scaledTo(A.tileID.overscaledZ-1);A=this._tiles[z.key],A&&A.hasData()&&(I=z)}let M=I;for(;M.overscaledZ>d;)if(M=M.scaledTo(M.overscaledZ-1),a[M.key]){g[I.key]=I;break}}}findLoadedParent(a,d){if(a.key in this._loadedParentTiles){const p=this._loadedParentTiles[a.key];return p&&p.tileID.overscaledZ>=d?p:null}for(let p=a.overscaledZ-1;p>=d;p--){const g=a.scaledTo(p),x=this._getLoadedTile(g);if(x)return x}}_getLoadedTile(a){const d=this._tiles[a.key];return d&&d.hasData()?d:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){const d=Math.ceil(a.width/this._source.tileSize)+1,p=Math.ceil(a.height/this._source.tileSize)+1,g=Math.floor(d*p*(this._maxTileCacheZoomLevels===null?l.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(x)}handleWrapJump(a){const d=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,d){const p={};for(const g in this._tiles){const x=this._tiles[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+d),p[x.tileID.key]=x}this._tiles=p;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(a,d){if(this.transform=a,this.terrain=d,!this._sourceLoaded||this._paused)return;let p;this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(V=>new l.O(V.canonical.z,V.wrap,V.canonical.z,V.canonical.x,V.canonical.y)):(p=a.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(p=p.filter(V=>this._source.hasTile(V)))):p=[];const g=a.coveringZoomLevel(this._source),x=Math.max(g-pt.maxOverzooming,this._source.minzoom),A=Math.max(g+pt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const V={};for(const $ of p)if($.canonical.z>this._source.minzoom){const Y=$.scaledTo($.canonical.z-1);V[Y.key]=Y;const de=$.scaledTo(Math.max(this._source.minzoom,Math.min($.canonical.z,5)));V[de.key]=de}p=p.concat(Object.values(V))}const I=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,I&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(p,g);if(st(this._source.type)){const V={},$={},Y=Object.keys(M),de=l.h.now();for(const ue of Y){const pe=M[ue],oe=this._tiles[ue];if(!oe||oe.fadeEndTime!==0&&oe.fadeEndTime<=de)continue;const Ee=this.findLoadedParent(pe,x);Ee&&(this._addTile(Ee.tileID),V[Ee.tileID.key]=Ee.tileID),$[ue]=pe}this._retainLoadedChildren($,g,A,M);for(const ue in V)M[ue]||(this._coveredTiles[ue]=!0,M[ue]=V[ue]);if(d){const ue={},pe={};for(const oe of p)this._tiles[oe.key].hasData()?ue[oe.key]=oe:pe[oe.key]=oe;for(const oe in pe){const Ee=pe[oe].children(this._source.maxzoom);this._tiles[Ee[0].key]&&this._tiles[Ee[1].key]&&this._tiles[Ee[2].key]&&this._tiles[Ee[3].key]&&(ue[Ee[0].key]=M[Ee[0].key]=Ee[0],ue[Ee[1].key]=M[Ee[1].key]=Ee[1],ue[Ee[2].key]=M[Ee[2].key]=Ee[2],ue[Ee[3].key]=M[Ee[3].key]=Ee[3],delete pe[oe])}for(const oe in pe){const Ee=this.findLoadedParent(pe[oe],this._source.minzoom);if(Ee){ue[Ee.tileID.key]=M[Ee.tileID.key]=Ee.tileID;for(const Ue in ue)ue[Ue].isChildOf(Ee.tileID)&&delete ue[Ue]}}for(const oe in this._tiles)ue[oe]||(this._coveredTiles[oe]=!0)}}for(const V in M)this._tiles[V].clearFadeHold();const z=l.ab(this._tiles,M);for(const V of z){const $=this._tiles[V];$.hasSymbolBuckets&&!$.holdingForFade()?$.setHoldDuration(this.map._fadeDuration):$.hasSymbolBuckets&&!$.symbolFadeFinished()||this._removeTile(V)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,d){const p={},g={},x=Math.max(d-pt.maxOverzooming,this._source.minzoom),A=Math.max(d+pt.maxUnderzooming,this._source.minzoom),I={};for(const M of a){const z=this._addTile(M);p[M.key]=M,z.hasData()||d<this._source.maxzoom&&(I[M.key]=M)}this._retainLoadedChildren(I,d,A,p);for(const M of a){let z=this._tiles[M.key];if(z.hasData())continue;if(d+1>this._source.maxzoom){const $=M.children(this._source.maxzoom)[0],Y=this.getTile($);if(Y&&Y.hasData()){p[$.key]=$;continue}}else{const $=M.children(this._source.maxzoom);if(p[$[0].key]&&p[$[1].key]&&p[$[2].key]&&p[$[3].key])continue}let V=z.wasRequested();for(let $=M.overscaledZ-1;$>=x;--$){const Y=M.scaledTo($);if(g[Y.key])break;if(g[Y.key]=!0,z=this.getTile(Y),!z&&V&&(z=this._addTile(Y)),z){const de=z.hasData();if((V||de)&&(p[Y.key]=Y),V=z.wasRequested(),de)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const d=[];let p,g=this._tiles[a].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){p=this._loadedParentTiles[g.key];break}d.push(g.key);const x=g.scaledTo(g.overscaledZ-1);if(p=this._getLoadedTile(x),p)break;g=x}for(const x of d)this._loadedParentTiles[x]=p}}_addTile(a){let d=this._tiles[a.key];if(d)return d;d=this._cache.getAndRemove(a),d&&(this._setTileReloadTimer(a.key,d),d.tileID=a,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,d)));const p=d;return d||(d=new dt(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(d,this._tileLoaded.bind(this,d,a.key,d.state))),d.uses++,this._tiles[a.key]=d,p||this._source.fire(new l.k("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(a,d){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const p=d.getExpiryTimeout();p&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},p))}_removeTile(a){const d=this._tiles[a];d&&(d.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,d,p){const g=[],x=this.transform;if(!x)return g;const A=p?x.getCameraQueryGeometry(a):a,I=a.map(ue=>x.pointCoordinate(ue,this.terrain)),M=A.map(ue=>x.pointCoordinate(ue,this.terrain)),z=this.getIds();let V=1/0,$=1/0,Y=-1/0,de=-1/0;for(const ue of M)V=Math.min(V,ue.x),$=Math.min($,ue.y),Y=Math.max(Y,ue.x),de=Math.max(de,ue.y);for(let ue=0;ue<z.length;ue++){const pe=this._tiles[z[ue]];if(pe.holdingForFade())continue;const oe=pe.tileID,Ee=Math.pow(2,x.zoom-pe.tileID.overscaledZ),Ue=d*pe.queryPadding*l.N/pe.tileSize/Ee,be=[oe.getTilePoint(new l.U(V,$)),oe.getTilePoint(new l.U(Y,de))];if(be[0].x-Ue<l.N&&be[0].y-Ue<l.N&&be[1].x+Ue>=0&&be[1].y+Ue>=0){const De=I.map(Ye=>oe.getTilePoint(Ye)),We=M.map(Ye=>oe.getTilePoint(Ye));g.push({tile:pe,tileID:oe,queryGeometry:De,cameraQueryGeometry:We,scale:Ee})}}return g}getVisibleCoordinates(a){const d=this.getRenderableIds(a).map(p=>this._tiles[p].tileID);for(const p of d)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(st(this._source.type)){const a=l.h.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=a)return!0}return!1}setFeatureState(a,d,p){this._state.updateState(a=a||"_geojsonTileLayer",d,p)}removeFeatureState(a,d,p){this._state.removeFeatureState(a=a||"_geojsonTileLayer",d,p)}getFeatureState(a,d){return this._state.getState(a=a||"_geojsonTileLayer",d)}setDependencies(a,d,p){const g=this._tiles[a];g&&g.setDependencies(d,p)}reloadTilesForDependencies(a,d){for(const p in this._tiles)this._tiles[p].hasDependency(a,d)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(a,d))}}function Qe(y,a){const d=Math.abs(2*y.wrap)-+(y.wrap<0),p=Math.abs(2*a.wrap)-+(a.wrap<0);return y.overscaledZ-a.overscaledZ||p-d||a.canonical.y-y.canonical.y||a.canonical.x-y.canonical.x}function st(y){return y==="raster"||y==="image"||y==="video"}pt.maxOverzooming=10,pt.maxUnderzooming=3;const Et="mapboxgl_preloaded_worker_pool";class It{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<It.workerCount;)this.workers.push(new Worker(l.c.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Et]}numActive(){return Object.keys(this.active).length}}const an=Math.floor(l.h.hardwareConcurrency/2);let ln;function Tn(){return ln||(ln=new It),ln}It.workerCount=l.ac(globalThis)?Math.max(Math.min(an,3),1):1;class In{constructor(a,d){this.reset(a,d)}reset(a,d){this.points=a||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=l.ad(a,0,1);let d=1,p=this._distances[d];const g=a*this.paddedLength+this.padding;for(;p<g&&d<this._distances.length;)p=this._distances[++d];const x=d-1,A=this._distances[x],I=p-A,M=I>0?(g-A)/I:0;return this.points[x].mult(1-M).add(this.points[d].mult(M))}}function Vn(y,a){let d=!0;return y==="always"||y!=="never"&&a!=="never"||(d=!1),d}class lr{constructor(a,d,p){const g=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(a/p),this.yCellCount=Math.ceil(d/p);for(let A=0;A<this.xCellCount*this.yCellCount;A++)g.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=d,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,d,p,g,x){this._forEachCell(d,p,g,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(d),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(x)}insertCircle(a,d,p,g){this._forEachCell(d-g,p-g,d+g,p+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(d),this.circles.push(p),this.circles.push(g)}_insertBoxCell(a,d,p,g,x,A){this.boxCells[x].push(A)}_insertCircleCell(a,d,p,g,x,A){this.circleCells[x].push(A)}_query(a,d,p,g,x,A,I){if(p<0||a>this.width||g<0||d>this.height)return[];const M=[];if(a<=0&&d<=0&&this.width<=p&&this.height<=g){if(x)return[{key:null,x1:a,y1:d,x2:p,y2:g}];for(let z=0;z<this.boxKeys.length;z++)M.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const V=this.circles[3*z],$=this.circles[3*z+1],Y=this.circles[3*z+2];M.push({key:this.circleKeys[z],x1:V-Y,y1:$-Y,x2:V+Y,y2:$+Y})}}else this._forEachCell(a,d,p,g,this._queryCell,M,{hitTest:x,overlapMode:A,seenUids:{box:{},circle:{}}},I);return M}query(a,d,p,g){return this._query(a,d,p,g,!1,null)}hitTest(a,d,p,g,x,A){return this._query(a,d,p,g,!0,x,A).length>0}hitTestCircle(a,d,p,g,x){const A=a-p,I=a+p,M=d-p,z=d+p;if(I<0||A>this.width||z<0||M>this.height)return!1;const V=[];return this._forEachCell(A,M,I,z,this._queryCellCircle,V,{hitTest:!0,overlapMode:g,circle:{x:a,y:d,radius:p},seenUids:{box:{},circle:{}}},x),V.length>0}_queryCell(a,d,p,g,x,A,I,M){const{seenUids:z,hitTest:V,overlapMode:$}=I,Y=this.boxCells[x];if(Y!==null){const ue=this.bboxes;for(const pe of Y)if(!z.box[pe]){z.box[pe]=!0;const oe=4*pe,Ee=this.boxKeys[pe];if(a<=ue[oe+2]&&d<=ue[oe+3]&&p>=ue[oe+0]&&g>=ue[oe+1]&&(!M||M(Ee))&&(!V||!Vn($,Ee.overlapMode))&&(A.push({key:Ee,x1:ue[oe],y1:ue[oe+1],x2:ue[oe+2],y2:ue[oe+3]}),V))return!0}}const de=this.circleCells[x];if(de!==null){const ue=this.circles;for(const pe of de)if(!z.circle[pe]){z.circle[pe]=!0;const oe=3*pe,Ee=this.circleKeys[pe];if(this._circleAndRectCollide(ue[oe],ue[oe+1],ue[oe+2],a,d,p,g)&&(!M||M(Ee))&&(!V||!Vn($,Ee.overlapMode))){const Ue=ue[oe],be=ue[oe+1],De=ue[oe+2];if(A.push({key:Ee,x1:Ue-De,y1:be-De,x2:Ue+De,y2:be+De}),V)return!0}}}return!1}_queryCellCircle(a,d,p,g,x,A,I,M){const{circle:z,seenUids:V,overlapMode:$}=I,Y=this.boxCells[x];if(Y!==null){const ue=this.bboxes;for(const pe of Y)if(!V.box[pe]){V.box[pe]=!0;const oe=4*pe,Ee=this.boxKeys[pe];if(this._circleAndRectCollide(z.x,z.y,z.radius,ue[oe+0],ue[oe+1],ue[oe+2],ue[oe+3])&&(!M||M(Ee))&&!Vn($,Ee.overlapMode))return A.push(!0),!0}}const de=this.circleCells[x];if(de!==null){const ue=this.circles;for(const pe of de)if(!V.circle[pe]){V.circle[pe]=!0;const oe=3*pe,Ee=this.circleKeys[pe];if(this._circlesCollide(ue[oe],ue[oe+1],ue[oe+2],z.x,z.y,z.radius)&&(!M||M(Ee))&&!Vn($,Ee.overlapMode))return A.push(!0),!0}}}_forEachCell(a,d,p,g,x,A,I,M){const z=this._convertToXCellCoord(a),V=this._convertToYCellCoord(d),$=this._convertToXCellCoord(p),Y=this._convertToYCellCoord(g);for(let de=z;de<=$;de++)for(let ue=V;ue<=Y;ue++)if(x.call(this,a,d,p,g,this.xCellCount*ue+de,A,I,M))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,d,p,g,x,A){const I=g-a,M=x-d,z=p+A;return z*z>I*I+M*M}_circleAndRectCollide(a,d,p,g,x,A,I){const M=(A-g)/2,z=Math.abs(a-(g+M));if(z>M+p)return!1;const V=(I-x)/2,$=Math.abs(d-(x+V));if($>V+p)return!1;if(z<=M||$<=V)return!0;const Y=z-M,de=$-V;return Y*Y+de*de<=p*p}}function ft(y,a,d,p,g){const x=l.Z();return a?(l.a0(x,x,[1/g,1/g,1]),d||l.ae(x,x,p.angle)):l.a1(x,p.labelPlaneMatrix,y),x}function fi(y,a,d,p,g){if(a){const x=l.af(y);return l.a0(x,x,[g,g,1]),d||l.ae(x,x,-p.angle),x}return p.glCoordMatrix}function Sn(y,a,d){let p;d?(p=[y.x,y.y,d(y.x,y.y),1],l.ag(p,p,a)):(p=[y.x,y.y,0,1],ge(p,p,a));const g=p[3];return{point:new l.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g}}function oa(y,a){return .5+y/a*.5}function ur(y,a){const d=y[0]/y[3],p=y[1]/y[3];return d>=-a[0]&&d<=a[0]&&p>=-a[1]&&p<=a[1]}function xt(y,a,d,p,g,x,A,I,M,z){const V=p?y.textSizeData:y.iconSizeData,$=l.ah(V,d.transform.zoom),Y=[256/d.width*2+1,256/d.height*2+1],de=p?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;de.clear();const ue=y.lineVertexArray,pe=p?y.text.placedSymbolArray:y.icon.placedSymbolArray,oe=d.transform.width/d.transform.height;let Ee=!1;for(let Ue=0;Ue<pe.length;Ue++){const be=pe.get(Ue);if(be.hidden||be.writingMode===l.ai.vertical&&!Ee){ae(be.numGlyphs,de);continue}let De;if(Ee=!1,z?(De=[be.anchorX,be.anchorY,z(be.anchorX,be.anchorY),1],l.ag(De,De,a)):(De=[be.anchorX,be.anchorY,0,1],ge(De,De,a)),!ur(De,Y)){ae(be.numGlyphs,de);continue}const We=oa(d.transform.cameraToCenterDistance,De[3]),Ye=l.aj(V,$,be),rt=A?Ye/We:Ye*We,mt=new l.P(be.anchorX,be.anchorY),ct=Sn(mt,g,z).point,Tt={projections:{},offsets:{}},Gt=Ri(be,rt,!1,I,a,g,x,y.glyphOffsetArray,ue,de,ct,mt,Tt,oe,M,z);Ee=Gt.useVertical,(Gt.notEnoughRoom||Ee||Gt.needsFlipping&&Ri(be,rt,!0,I,a,g,x,y.glyphOffsetArray,ue,de,ct,mt,Tt,oe,M,z).notEnoughRoom)&&ae(be.numGlyphs,de)}p?y.text.dynamicLayoutVertexBuffer.updateData(de):y.icon.dynamicLayoutVertexBuffer.updateData(de)}function gn(y,a,d,p,g,x,A,I,M,z,V,$,Y){const de=I.glyphStartIndex+I.numGlyphs,ue=I.lineStartIndex,pe=I.lineStartIndex+I.lineLength,oe=a.getoffsetX(I.glyphStartIndex),Ee=a.getoffsetX(de-1),Ue=q(y*oe,d,p,g,x,A,I.segment,ue,pe,M,z,V,$,Y);if(!Ue)return null;const be=q(y*Ee,d,p,g,x,A,I.segment,ue,pe,M,z,V,$,Y);return be?{first:Ue,last:be}:null}function dn(y,a,d,p){return y===l.ai.horizontal&&Math.abs(d.y-a.y)>Math.abs(d.x-a.x)*p?{useVertical:!0}:(y===l.ai.vertical?a.y<d.y:a.x>d.x)?{needsFlipping:!0}:null}function Ri(y,a,d,p,g,x,A,I,M,z,V,$,Y,de,ue,pe){const oe=a/24,Ee=y.lineOffsetX*oe,Ue=y.lineOffsetY*oe;let be;if(y.numGlyphs>1){const De=y.glyphStartIndex+y.numGlyphs,We=y.lineStartIndex,Ye=y.lineStartIndex+y.lineLength,rt=gn(oe,I,Ee,Ue,d,V,$,y,M,x,Y,ue,pe);if(!rt)return{notEnoughRoom:!0};const mt=Sn(rt.first.point,A,pe).point,ct=Sn(rt.last.point,A,pe).point;if(p&&!d){const Tt=dn(y.writingMode,mt,ct,de);if(Tt)return Tt}be=[rt.first];for(let Tt=y.glyphStartIndex+1;Tt<De-1;Tt++)be.push(q(oe*I.getoffsetX(Tt),Ee,Ue,d,V,$,y.segment,We,Ye,M,x,Y,ue,pe));be.push(rt.last)}else{if(p&&!d){const We=Sn($,g,pe).point,Ye=y.lineStartIndex+y.segment+1,rt=new l.P(M.getx(Ye),M.gety(Ye)),mt=Sn(rt,g,pe),ct=mt.signedDistanceFromCamera>0?mt.point:es($,rt,We,1,g,pe),Tt=dn(y.writingMode,We,ct,de);if(Tt)return Tt}const De=q(oe*I.getoffsetX(y.glyphStartIndex),Ee,Ue,d,V,$,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,M,x,Y,ue,pe);if(!De)return{notEnoughRoom:!0};be=[De]}for(const De of be)l.ak(z,De.point,De.angle);return{}}function es(y,a,d,p,g,x){const A=Sn(y.add(y.sub(a)._unit()),g,x).point,I=d.sub(A);return d.add(I._mult(p/I.mag()))}function yn(y,a){const{projectionCache:d,lineVertexArray:p,labelPlaneMatrix:g,tileAnchorPoint:x,distanceFromAnchor:A,getElevation:I,previousVertex:M,direction:z,absOffsetX:V}=a;if(d.projections[y])return d.projections[y];const $=new l.P(p.getx(y),p.gety(y)),Y=Sn($,g,I);if(Y.signedDistanceFromCamera>0)return d.projections[y]=Y.point,Y.point;const de=y-z;return es(A===0?x:new l.P(p.getx(de),p.gety(de)),$,M,V-A+1,g,I)}function As(y,a,d){return y._unit()._perp()._mult(a*d)}function fe(y,a,d,p,g,x,A,I){const{projectionCache:M,direction:z}=I;if(M.offsets[y])return M.offsets[y];const V=d.add(a);if(y+z<p||y+z>=g)return M.offsets[y]=V,V;const $=yn(y+z,I),Y=As($.sub(d),A,z),de=d.add(Y),ue=$.add(Y);return M.offsets[y]=l.al(x,V,de,ue)||V,M.offsets[y]}function q(y,a,d,p,g,x,A,I,M,z,V,$,Y,de){const ue=p?y-a:y+a;let pe=ue>0?1:-1,oe=0;p&&(pe*=-1,oe=Math.PI),pe<0&&(oe+=Math.PI);let Ee,Ue,be=pe>0?I+A:I+A+1,De=g,We=g,Ye=0,rt=0;const mt=Math.abs(ue),ct=[];let Tt;for(;Ye+rt<=mt;){if(be+=pe,be<I||be>=M)return null;Ye+=rt,We=De,Ue=Ee;const Lt={projectionCache:$,lineVertexArray:z,labelPlaneMatrix:V,tileAnchorPoint:x,distanceFromAnchor:Ye,getElevation:de,previousVertex:We,direction:pe,absOffsetX:mt};if(De=yn(be,Lt),d===0)ct.push(We),Tt=De.sub(We);else{let on;const Yt=De.sub(We);on=Yt.mag()===0?As(yn(be+pe,Lt).sub(De),d,pe):As(Yt,d,pe),Ue||(Ue=We.add(on)),Ee=fe(be,on,De,I,M,Ue,d,Lt),ct.push(Ue),Tt=Ee.sub(Ue)}rt=Tt.mag()}const Gt=Tt._mult((mt-Ye)/rt)._add(Ue||We),Pn=oe+Math.atan2(De.y-We.y,De.x-We.x);return ct.push(Gt),{point:Gt,angle:Y?Pn:0,path:ct}}const W=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ae(y,a){for(let d=0;d<y;d++){const p=a.length;a.resize(p+4),a.float32.set(W,3*p)}}function ge(y,a,d){const p=a[0],g=a[1];return y[0]=d[0]*p+d[4]*g+d[12],y[1]=d[1]*p+d[5]*g+d[13],y[3]=d[3]*p+d[7]*g+d[15],y}const ye=100;class Re{constructor(a,d=new lr(a.width+200,a.height+200,25),p=new lr(a.width+200,a.height+200,25)){this.transform=a,this.grid=d,this.ignoredGrid=p,this.pitchfactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+ye,this.screenBottomBoundary=a.height+ye,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,d,p,g,x,A){const I=this.projectAndGetPerspectiveRatio(g,a.anchorPointX,a.anchorPointY,A),M=p*I.perspectiveRatio,z=a.x1*M+I.point.x,V=a.y1*M+I.point.y,$=a.x2*M+I.point.x,Y=a.y2*M+I.point.y;return!this.isInsideGrid(z,V,$,Y)||d!=="always"&&this.grid.hitTest(z,V,$,Y,d,x)||I.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[z,V,$,Y],offscreen:this.isOffscreen(z,V,$,Y)}}placeCollisionCircles(a,d,p,g,x,A,I,M,z,V,$,Y,de,ue){const pe=[],oe=new l.P(d.anchorX,d.anchorY),Ee=Sn(oe,A,ue),Ue=oa(this.transform.cameraToCenterDistance,Ee.signedDistanceFromCamera),be=(V?x/Ue:x*Ue)/l.ap,De=Sn(oe,I,ue).point,We=gn(be,g,d.lineOffsetX*be,d.lineOffsetY*be,!1,De,oe,d,p,I,{projections:{},offsets:{}},!1,ue);let Ye=!1,rt=!1,mt=!0;if(We){const ct=.5*Y*Ue+de,Tt=new l.P(-100,-100),Gt=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Pn=new In,Lt=We.first,on=We.last;let Yt=[];for(let _n=Lt.path.length-1;_n>=1;_n--)Yt.push(Lt.path[_n]);for(let _n=1;_n<on.path.length;_n++)Yt.push(on.path[_n]);const Jn=2.5*ct;if(M){const _n=Yt.map(Dn=>Sn(Dn,M,ue));Yt=_n.some(Dn=>Dn.signedDistanceFromCamera<=0)?[]:_n.map(Dn=>Dn.point)}let An=[];if(Yt.length>0){const _n=Yt[0].clone(),Dn=Yt[0].clone();for(let $r=1;$r<Yt.length;$r++)_n.x=Math.min(_n.x,Yt[$r].x),_n.y=Math.min(_n.y,Yt[$r].y),Dn.x=Math.max(Dn.x,Yt[$r].x),Dn.y=Math.max(Dn.y,Yt[$r].y);An=_n.x>=Tt.x&&Dn.x<=Gt.x&&_n.y>=Tt.y&&Dn.y<=Gt.y?[Yt]:Dn.x<Tt.x||_n.x>Gt.x||Dn.y<Tt.y||_n.y>Gt.y?[]:l.am([Yt],Tt.x,Tt.y,Gt.x,Gt.y)}for(const _n of An){Pn.reset(_n,.25*ct);let Dn=0;Dn=Pn.length<=.5*ct?1:Math.ceil(Pn.paddedLength/Jn)+1;for(let $r=0;$r<Dn;$r++){const hr=$r/Math.max(Dn-1,1),_i=Pn.lerp(hr),ri=_i.x+ye,Wr=_i.y+ye;pe.push(ri,Wr,ct,0);const fa=ri-ct,gr=Wr-ct,ns=ri+ct,rs=Wr+ct;if(mt=mt&&this.isOffscreen(fa,gr,ns,rs),rt=rt||this.isInsideGrid(fa,gr,ns,rs),a!=="always"&&this.grid.hitTestCircle(ri,Wr,ct,a,$)&&(Ye=!0,!z))return{circles:[],offscreen:!1,collisionDetected:Ye}}}}return{circles:!z&&Ye||!rt||Ue<this.perspectiveRatioCutoff?[]:pe,offscreen:mt,collisionDetected:Ye}}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let p=1/0,g=1/0,x=-1/0,A=-1/0;for(const V of a){const $=new l.P(V.x+ye,V.y+ye);p=Math.min(p,$.x),g=Math.min(g,$.y),x=Math.max(x,$.x),A=Math.max(A,$.y),d.push($)}const I=this.grid.query(p,g,x,A).concat(this.ignoredGrid.query(p,g,x,A)),M={},z={};for(const V of I){const $=V.key;if(M[$.bucketInstanceId]===void 0&&(M[$.bucketInstanceId]={}),M[$.bucketInstanceId][$.featureIndex])continue;const Y=[new l.P(V.x1,V.y1),new l.P(V.x2,V.y1),new l.P(V.x2,V.y2),new l.P(V.x1,V.y2)];l.an(d,Y)&&(M[$.bucketInstanceId][$.featureIndex]=!0,z[$.bucketInstanceId]===void 0&&(z[$.bucketInstanceId]=[]),z[$.bucketInstanceId].push($.featureIndex))}return z}insertCollisionBox(a,d,p,g,x,A){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:x,collisionGroupID:A,overlapMode:d},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,d,p,g,x,A){const I=p?this.ignoredGrid:this.grid,M={bucketInstanceId:g,featureIndex:x,collisionGroupID:A,overlapMode:d};for(let z=0;z<a.length;z+=4)I.insertCircle(M,a[z],a[z+1],a[z+2])}projectAndGetPerspectiveRatio(a,d,p,g){let x;return g?(x=[d,p,g(d,p),1],l.ag(x,x,a)):(x=[d,p,0,1],ge(x,x,a)),{point:new l.P((x[0]/x[3]+1)/2*this.transform.width+ye,(-x[1]/x[3]+1)/2*this.transform.height+ye),perspectiveRatio:.5+this.transform.cameraToCenterDistance/x[3]*.5}}isOffscreen(a,d,p,g){return p<ye||a>=this.screenRightBoundary||g<ye||d>this.screenBottomBoundary}isInsideGrid(a,d,p,g){return p>=0&&a<this.gridRightBoundary&&g>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const a=l.ao([]);return l.$(a,a,[-100,-100,0]),a}}function Ae(y,a,d){return a*(l.N/(y.tileSize*Math.pow(2,d-y.tileID.overscaledZ)))}class we{constructor(a,d,p,g){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?d:-d))):g&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Me{constructor(a,d,p,g,x){this.text=new we(a?a.text:null,d,p,x),this.icon=new we(a?a.icon:null,d,g,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class et{constructor(a,d,p){this.text=a,this.icon=d,this.skipFade=p}}class nt{constructor(){this.invProjMatrix=l.Z(),this.viewportMatrix=l.Z(),this.circles=[]}}class ot{constructor(a,d,p,g,x){this.bucketInstanceId=a,this.featureIndex=d,this.sourceLayerIndex=p,this.bucketIndex=g,this.tileID=x}}class Qt{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const d=++this.maxGroupID;this.collisionGroups[a]={ID:d,predicate:p=>p.collisionGroupID===d}}return this.collisionGroups[a]}}function un(y,a,d,p,g){const{horizontalAlign:x,verticalAlign:A}=l.au(y);return new l.P(-(x-.5)*a+p[0]*g,-(A-.5)*d+p[1]*g)}function Ht(y,a,d,p,g,x){const{x1:A,x2:I,y1:M,y2:z,anchorPointX:V,anchorPointY:$}=y,Y=new l.P(a,d);return p&&Y._rotate(g?x:-x),{x1:A+Y.x,y1:M+Y.y,x2:I+Y.x,y2:z+Y.y,anchorPointX:V,anchorPointY:$}}class tn{constructor(a,d,p,g,x){this.transform=a.clone(),this.terrain=d,this.collisionIndex=new Re(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Qt(g),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(a,d,p,g){const x=p.getBucket(d),A=p.latestFeatureIndex;if(!x||!A||d.id!==x.layerIds[0])return;const I=p.collisionBoxArray,M=x.layers[0].layout,z=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),V=p.tileSize/l.N,$=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),Y=M.get("text-pitch-alignment")==="map",de=M.get("text-rotation-alignment")==="map",ue=Ae(p,1,this.transform.zoom),pe=ft($,Y,de,this.transform,ue);let oe=null;if(Y){const Ue=fi($,Y,de,this.transform,ue);oe=l.a1([],this.transform.labelPlaneMatrix,Ue)}this.retainedQueryData[x.bucketInstanceId]=new ot(x.bucketInstanceId,A,x.sourceLayerIndex,x.index,p.tileID);const Ee={bucket:x,layout:M,posMatrix:$,textLabelPlaneMatrix:pe,labelToScreenMatrix:oe,scale:z,textPixelRatio:V,holdingForFade:p.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:l.ah(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(g)for(const Ue of x.sortKeyRanges){const{sortKey:be,symbolInstanceStart:De,symbolInstanceEnd:We}=Ue;a.push({sortKey:be,symbolInstanceStart:De,symbolInstanceEnd:We,parameters:Ee})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:Ee})}attemptAnchorPlacement(a,d,p,g,x,A,I,M,z,V,$,Y,de,ue,pe,oe){const Ee=l.aq[a.textAnchor],Ue=[a.textOffset0,a.textOffset1],be=un(Ee,p,g,Ue,x),De=this.collisionIndex.placeCollisionBox(Ht(d,be.x,be.y,A,I,this.transform.angle),$,M,z,V.predicate,oe);if((!pe||this.collisionIndex.placeCollisionBox(Ht(pe,be.x,be.y,A,I,this.transform.angle),$,M,z,V.predicate,oe).box.length!==0)&&De.box.length>0){let We;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID].text&&(We=this.prevPlacement.variableOffsets[Y.crossTileID].anchor),Y.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Y.crossTileID]={textOffset:Ue,width:p,height:g,anchor:Ee,textBoxScale:x,prevAnchor:We},this.markUsedJustification(de,Ee,Y,ue),de.allowVerticalPlacement&&(this.markUsedOrientation(de,ue,Y),this.placedOrientations[Y.crossTileID]=ue),{shift:be,placedGlyphBoxes:De}}}placeLayerBucketPart(a,d,p){const{bucket:g,layout:x,posMatrix:A,textLabelPlaneMatrix:I,labelToScreenMatrix:M,textPixelRatio:z,holdingForFade:V,collisionBoxArray:$,partiallyEvaluatedTextSize:Y,collisionGroup:de}=a.parameters,ue=x.get("text-optional"),pe=x.get("icon-optional"),oe=l.ar(x,"text-overlap","text-allow-overlap"),Ee=oe==="always",Ue=l.ar(x,"icon-overlap","icon-allow-overlap"),be=Ue==="always",De=x.get("text-rotation-alignment")==="map",We=x.get("text-pitch-alignment")==="map",Ye=x.get("icon-text-fit")!=="none",rt=x.get("symbol-z-order")==="viewport-y",mt=Ee&&(be||!g.hasIconData()||pe),ct=be&&(Ee||!g.hasTextData()||ue);!g.collisionArrays&&$&&g.deserializeCollisionBoxes($);const Tt=this.retainedQueryData[g.bucketInstanceId].tileID,Gt=this.terrain?(Lt,on)=>this.terrain.getElevation(Tt,Lt,on):null,Pn=(Lt,on)=>{var Yt,Jn;if(d[Lt.crossTileID])return;if(V)return void(this.placements[Lt.crossTileID]=new et(!1,!1,!1));let An=!1,_n=!1,Dn=!0,$r=null,hr={box:null,offscreen:null},_i={box:null,offscreen:null},ri=null,Wr=null,fa=null,gr=0,ns=0,rs=0;on.textFeatureIndex?gr=on.textFeatureIndex:Lt.useRuntimeCollisionCircles&&(gr=Lt.featureIndex),on.verticalTextFeatureIndex&&(ns=on.verticalTextFeatureIndex);const io=on.textBox;if(io){const Ai=Ur=>{let ii=l.ai.horizontal;if(g.allowVerticalPlacement&&!Ur&&this.prevPlacement){const Ki=this.prevPlacement.placedOrientations[Lt.crossTileID];Ki&&(this.placedOrientations[Lt.crossTileID]=Ki,ii=Ki,this.markUsedOrientation(g,ii,Lt))}return ii},bi=(Ur,ii)=>{if(g.allowVerticalPlacement&&Lt.numVerticalGlyphVertices>0&&on.verticalTextBox){for(const Ki of g.writingModes)if(Ki===l.ai.vertical?(hr=ii(),_i=hr):hr=Ur(),hr&&hr.box&&hr.box.length)break}else hr=Ur()},zi=Lt.textAnchorOffsetStartIndex,qo=Lt.textAnchorOffsetEndIndex;if(qo===zi){const Ur=(ii,Ki)=>{const qr=this.collisionIndex.placeCollisionBox(ii,oe,z,A,de.predicate,Gt);return qr&&qr.box&&qr.box.length&&(this.markUsedOrientation(g,Ki,Lt),this.placedOrientations[Lt.crossTileID]=Ki),qr};bi(()=>Ur(io,l.ai.horizontal),()=>{const ii=on.verticalTextBox;return g.allowVerticalPlacement&&Lt.numVerticalGlyphVertices>0&&ii?Ur(ii,l.ai.vertical):{box:null,offscreen:null}}),Ai(hr&&hr.box&&hr.box.length)}else{let Ur=l.aq[(Jn=(Yt=this.prevPlacement)===null||Yt===void 0?void 0:Yt.variableOffsets[Lt.crossTileID])===null||Jn===void 0?void 0:Jn.anchor];const ii=(qr,jo,Nu)=>{const jp=qr.x2-qr.x1,Hp=qr.y2-qr.y1,Qv=Lt.textBoxScale,Ih=Ye&&Ue==="never"?jo:null;let is={box:[],offscreen:!1},Ho=oe==="never"?1:2,as="never";Ur&&Ho++;for(let Ea=0;Ea<Ho;Ea++){for(let ss=zi;ss<qo;ss++){const Ph=g.textAnchorOffsets.get(ss);if(Ur&&Ph.textAnchor!==Ur)continue;const Ls=this.attemptAnchorPlacement(Ph,qr,jp,Hp,Qv,De,We,z,A,de,as,Lt,g,Nu,Ih,Gt);if(Ls&&(is=Ls.placedGlyphBoxes,is&&is.box&&is.box.length))return An=!0,$r=Ls.shift,is}Ur?Ur=null:as=oe}return is};bi(()=>ii(io,on.iconBox,l.ai.horizontal),()=>{const qr=on.verticalTextBox;return g.allowVerticalPlacement&&!(hr&&hr.box&&hr.box.length)&&Lt.numVerticalGlyphVertices>0&&qr?ii(qr,on.verticalIconBox,l.ai.vertical):{box:null,offscreen:null}}),hr&&(An=hr.box,Dn=hr.offscreen);const Ki=Ai(hr&&hr.box);if(!An&&this.prevPlacement){const qr=this.prevPlacement.variableOffsets[Lt.crossTileID];qr&&(this.variableOffsets[Lt.crossTileID]=qr,this.markUsedJustification(g,qr.anchor,Lt,Ki))}}}if(ri=hr,An=ri&&ri.box&&ri.box.length>0,Dn=ri&&ri.offscreen,Lt.useRuntimeCollisionCircles){const Ai=g.text.placedSymbolArray.get(Lt.centerJustifiedTextSymbolIndex),bi=l.aj(g.textSizeData,Y,Ai),zi=x.get("text-padding");Wr=this.collisionIndex.placeCollisionCircles(oe,Ai,g.lineVertexArray,g.glyphOffsetArray,bi,A,I,M,p,We,de.predicate,Lt.collisionCircleDiameter,zi,Gt),Wr.circles.length&&Wr.collisionDetected&&!p&&l.w("Collisions detected, but collision boxes are not shown"),An=Ee||Wr.circles.length>0&&!Wr.collisionDetected,Dn=Dn&&Wr.offscreen}if(on.iconFeatureIndex&&(rs=on.iconFeatureIndex),on.iconBox){const Ai=bi=>{const zi=Ye&&$r?Ht(bi,$r.x,$r.y,De,We,this.transform.angle):bi;return this.collisionIndex.placeCollisionBox(zi,Ue,z,A,de.predicate,Gt)};_i&&_i.box&&_i.box.length&&on.verticalIconBox?(fa=Ai(on.verticalIconBox),_n=fa.box.length>0):(fa=Ai(on.iconBox),_n=fa.box.length>0),Dn=Dn&&fa.offscreen}const Uo=ue||Lt.numHorizontalGlyphVertices===0&&Lt.numVerticalGlyphVertices===0,Rl=pe||Lt.numIconVertices===0;if(Uo||Rl?Rl?Uo||(_n=_n&&An):An=_n&&An:_n=An=_n&&An,An&&ri&&ri.box&&this.collisionIndex.insertCollisionBox(ri.box,oe,x.get("text-ignore-placement"),g.bucketInstanceId,_i&&_i.box&&ns?ns:gr,de.ID),_n&&fa&&this.collisionIndex.insertCollisionBox(fa.box,Ue,x.get("icon-ignore-placement"),g.bucketInstanceId,rs,de.ID),Wr&&(An&&this.collisionIndex.insertCollisionCircles(Wr.circles,oe,x.get("text-ignore-placement"),g.bucketInstanceId,gr,de.ID),p)){const Ai=g.bucketInstanceId;let bi=this.collisionCircleArrays[Ai];bi===void 0&&(bi=this.collisionCircleArrays[Ai]=new nt);for(let zi=0;zi<Wr.circles.length;zi+=4)bi.circles.push(Wr.circles[zi+0]),bi.circles.push(Wr.circles[zi+1]),bi.circles.push(Wr.circles[zi+2]),bi.circles.push(Wr.collisionDetected?1:0)}if(Lt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Lt.crossTileID]=new et(An||mt,_n||ct,Dn||g.justReloaded),d[Lt.crossTileID]=!0};if(rt){if(a.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Lt=g.getSortedSymbolIndexes(this.transform.angle);for(let on=Lt.length-1;on>=0;--on){const Yt=Lt[on];Pn(g.symbolInstances.get(Yt),g.collisionArrays[Yt])}}else for(let Lt=a.symbolInstanceStart;Lt<a.symbolInstanceEnd;Lt++)Pn(g.symbolInstances.get(Lt),g.collisionArrays[Lt]);if(p&&g.bucketInstanceId in this.collisionCircleArrays){const Lt=this.collisionCircleArrays[g.bucketInstanceId];l.as(Lt.invProjMatrix,A),Lt.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(a,d,p,g){let x;x=g===l.ai.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[l.at(d)];const A=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const I of A)I>=0&&(a.text.placedSymbolArray.get(I).crossTileID=x>=0&&I!==x?0:p.crossTileID)}markUsedOrientation(a,d,p){const g=d===l.ai.horizontal||d===l.ai.horizontalOnly?d:0,x=d===l.ai.vertical?d:0,A=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const I of A)a.text.placedSymbolArray.get(I).placedOrientation=g;p.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let p=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const g=d?d.symbolFadeChange(a):1,x=d?d.opacities:{},A=d?d.variableOffsets:{},I=d?d.placedOrientations:{};for(const M in this.placements){const z=this.placements[M],V=x[M];V?(this.opacities[M]=new Me(V,g,z.text,z.icon),p=p||z.text!==V.text.placed||z.icon!==V.icon.placed):(this.opacities[M]=new Me(null,g,z.text,z.icon,z.skipFade),p=p||z.text||z.icon)}for(const M in x){const z=x[M];if(!this.opacities[M]){const V=new Me(z,g,!1,!1);V.isHidden()||(this.opacities[M]=V,p=p||z.text.placed||z.icon.placed)}}for(const M in A)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=A[M]);for(const M in I)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=I[M]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:a)}updateLayerOpacities(a,d){const p={};for(const g of d){const x=g.getBucket(a);x&&g.latestFeatureIndex&&a.id===x.layerIds[0]&&this.updateBucketOpacities(x,p,g.collisionBoxArray)}}updateBucketOpacities(a,d,p){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const g=a.layers[0],x=g.layout,A=new Me(null,0,!1,!1,!0),I=x.get("text-allow-overlap"),M=x.get("icon-allow-overlap"),z=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),V=x.get("text-rotation-alignment")==="map",$=x.get("text-pitch-alignment")==="map",Y=x.get("icon-text-fit")!=="none",de=new Me(null,0,I&&(M||!a.hasIconData()||x.get("icon-optional")),M&&(I||!a.hasTextData()||x.get("text-optional")),!0);!a.collisionArrays&&p&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(p);const ue=(pe,oe,Ee)=>{for(let Ue=0;Ue<oe/4;Ue++)pe.opacityVertexArray.emplaceBack(Ee);pe.hasVisibleVertices=pe.hasVisibleVertices||Ee!==wa};for(let pe=0;pe<a.symbolInstances.length;pe++){const oe=a.symbolInstances.get(pe),{numHorizontalGlyphVertices:Ee,numVerticalGlyphVertices:Ue,crossTileID:be}=oe;let De=this.opacities[be];d[be]?De=A:De||(De=de,this.opacities[be]=De),d[be]=!0;const We=oe.numIconVertices>0,Ye=this.placedOrientations[oe.crossTileID],rt=Ye===l.ai.vertical,mt=Ye===l.ai.horizontal||Ye===l.ai.horizontalOnly;if(Ee>0||Ue>0){const ct=vi(De.text);ue(a.text,Ee,rt?wa:ct),ue(a.text,Ue,mt?wa:ct);const Tt=De.text.isHidden();[oe.rightJustifiedTextSymbolIndex,oe.centerJustifiedTextSymbolIndex,oe.leftJustifiedTextSymbolIndex].forEach(Lt=>{Lt>=0&&(a.text.placedSymbolArray.get(Lt).hidden=Tt||rt?1:0)}),oe.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(oe.verticalPlacedTextSymbolIndex).hidden=Tt||mt?1:0);const Gt=this.variableOffsets[oe.crossTileID];Gt&&this.markUsedJustification(a,Gt.anchor,oe,Ye);const Pn=this.placedOrientations[oe.crossTileID];Pn&&(this.markUsedJustification(a,"left",oe,Pn),this.markUsedOrientation(a,Pn,oe))}if(We){const ct=vi(De.icon),Tt=!(Y&&oe.verticalPlacedIconSymbolIndex&&rt);oe.placedIconSymbolIndex>=0&&(ue(a.icon,oe.numIconVertices,Tt?ct:wa),a.icon.placedSymbolArray.get(oe.placedIconSymbolIndex).hidden=De.icon.isHidden()),oe.verticalPlacedIconSymbolIndex>=0&&(ue(a.icon,oe.numVerticalIconVertices,Tt?wa:ct),a.icon.placedSymbolArray.get(oe.verticalPlacedIconSymbolIndex).hidden=De.icon.isHidden())}if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const ct=a.collisionArrays[pe];if(ct){let Tt=new l.P(0,0);if(ct.textBox||ct.verticalTextBox){let Pn=!0;if(z){const Lt=this.variableOffsets[be];Lt?(Tt=un(Lt.anchor,Lt.width,Lt.height,Lt.textOffset,Lt.textBoxScale),V&&Tt._rotate($?this.transform.angle:-this.transform.angle)):Pn=!1}ct.textBox&&hn(a.textCollisionBox.collisionVertexArray,De.text.placed,!Pn||rt,Tt.x,Tt.y),ct.verticalTextBox&&hn(a.textCollisionBox.collisionVertexArray,De.text.placed,!Pn||mt,Tt.x,Tt.y)}const Gt=!!(!mt&&ct.verticalIconBox);ct.iconBox&&hn(a.iconCollisionBox.collisionVertexArray,De.icon.placed,Gt,Y?Tt.x:0,Y?Tt.y:0),ct.verticalIconBox&&hn(a.iconCollisionBox.collisionVertexArray,De.icon.placed,!Gt,Y?Tt.x:0,Y?Tt.y:0)}}}if(a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);if(a.bucketInstanceId in this.collisionCircleArrays){const pe=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=pe.invProjMatrix,a.placementViewportMatrix=pe.viewportMatrix,a.collisionCircleArray=pe.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,d){const p=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*p>a}setStale(){this.stale=!0}}function hn(y,a,d,p,g){y.emplaceBack(a?1:0,d?1:0,p||0,g||0),y.emplaceBack(a?1:0,d?1:0,p||0,g||0),y.emplaceBack(a?1:0,d?1:0,p||0,g||0),y.emplaceBack(a?1:0,d?1:0,p||0,g||0)}const Gn=Math.pow(2,25),rr=Math.pow(2,24),Nn=Math.pow(2,17),Fn=Math.pow(2,16),Ci=Math.pow(2,9),dr=Math.pow(2,8),Xr=Math.pow(2,1);function vi(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const a=y.placed?1:0,d=Math.floor(127*y.opacity);return d*Gn+a*rr+d*Nn+a*Fn+d*Ci+a*dr+d*Xr+a}const wa=0;class sp{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,d,p,g,x){const A=this._bucketParts;for(;this._currentTileIndex<a.length;)if(d.getBucketParts(A,g,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort((I,M)=>I.sortKey-M.sortKey));this._currentPartIndex<A.length;)if(d.placeLayerBucketPart(A[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,x())return!0;return!1}}class xl{constructor(a,d,p,g,x,A,I,M){this.placement=new tn(a,d,A,I,M),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(a,d,p){const g=l.h.now(),x=()=>!this._forceFullPlacement&&l.h.now()-g>2;for(;this._currentPlacementIndex>=0;){const A=d[a[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(A.type==="symbol"&&(!A.minzoom||A.minzoom<=I)&&(!A.maxzoom||A.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new sp(A)),this._inProgressLayer.continuePlacement(p[A.source],this.placement,this._showCollisionBoxes,A,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const wl=512/l.N/2;class zv{constructor(a,d,p){this.tileID=a,this.bucketInstanceId=p,this._symbolsByKey={};const g=new Map;for(let x=0;x<d.length;x++){const A=d.get(x),I=A.key,M=g.get(I);M?M.push(A):g.set(I,[A])}for(const[x,A]of g){const I={positions:A.map(M=>({x:Math.floor(M.anchorX*wl),y:Math.floor(M.anchorY*wl)})),crossTileIDs:A.map(M=>M.crossTileID)};if(I.positions.length>128){const M=new l.av(I.positions.length,16,Uint16Array);for(const{x:z,y:V}of I.positions)M.add(z,V);M.finish(),delete I.positions,I.index=M}this._symbolsByKey[x]=I}}getScaledCoordinates(a,d){const{x:p,y:g,z:x}=this.tileID.canonical,{x:A,y:I,z:M}=d.canonical,z=wl/Math.pow(2,M-x),V=(I*l.N+a.anchorY)*z,$=g*l.N*wl;return{x:Math.floor((A*l.N+a.anchorX)*z-p*l.N*wl),y:Math.floor(V-$)}}findMatches(a,d,p){const g=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let x=0;x<a.length;x++){const A=a.get(x);if(A.crossTileID)continue;const I=this._symbolsByKey[A.key];if(!I)continue;const M=this.getScaledCoordinates(A,d);if(I.index){const z=I.index.range(M.x-g,M.y-g,M.x+g,M.y+g).sort();for(const V of z){const $=I.crossTileIDs[V];if(!p[$]){p[$]=!0,A.crossTileID=$;break}}}else if(I.positions)for(let z=0;z<I.positions.length;z++){const V=I.positions[z],$=I.crossTileIDs[z];if(Math.abs(V.x-M.x)<=g&&Math.abs(V.y-M.y)<=g&&!p[$]){p[$]=!0,A.crossTileID=$;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:a})=>a)}}class Xn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ud{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const d=Math.round((a-this.lng)/360);if(d!==0)for(const p in this.indexes){const g=this.indexes[p],x={};for(const A in g){const I=g[A];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+d),x[I.tileID.key]=I}this.indexes[p]=x}this.lng=a}addBucket(a,d,p){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let x=0;x<d.symbolInstances.length;x++)d.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});const g=this.usedCrossTileIDs[a.overscaledZ];for(const x in this.indexes){const A=this.indexes[x];if(Number(x)>a.overscaledZ)for(const I in A){const M=A[I];M.tileID.isChildOf(a)&&M.findMatches(d.symbolInstances,a,g)}else{const I=A[a.scaledTo(Number(x)).key];I&&I.findMatches(d.symbolInstances,a,g)}}for(let x=0;x<d.symbolInstances.length;x++){const A=d.symbolInstances.get(x);A.crossTileID||(A.crossTileID=p.generate(),g[A.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new zv(a,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(a,d){for(const p of d.getCrossTileIDsLists())for(const g of p)delete this.usedCrossTileIDs[a][g]}removeStaleBuckets(a){let d=!1;for(const p in this.indexes){const g=this.indexes[p];for(const x in g)a[g[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,g[x]),delete g[x],d=!0)}return d}}class hu{constructor(){this.layerIndexes={},this.crossTileIDs=new Xn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,d,p){let g=this.layerIndexes[a.id];g===void 0&&(g=this.layerIndexes[a.id]=new Ud);let x=!1;const A={};g.handleWrapJump(p);for(const I of d){const M=I.getBucket(a);M&&a.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(I.tileID,M,this.crossTileIDs)&&(x=!0),A[M.bucketInstanceId]=!0)}return g.removeStaleBuckets(A)&&(x=!0),x}pruneUnusedLayers(a){const d={};a.forEach(p=>{d[p]=!0});for(const p in this.layerIndexes)d[p]||delete this.layerIndexes[p]}}const Ti=(y,a)=>l.x(y,a&&a.filter(d=>d.identifier!=="source.canvas")),la=l.F(l.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Fv=l.F(l.ax,["setCenter","setZoom","setBearing","setPitch"]),Sa=l.aw();class yi extends l.E{constructor(a,d={}){super(),this.map=a,this.dispatcher=new Je(Tn(),this,a._getMapId()),this.imageManager=new te,this.imageManager.setEventedParent(this),this.glyphManager=new Ge(a._requestManager,d.localIdeographFontFamily),this.lineAtlas=new Ze(256,512),this.crossTileSymbolIndex=new hu,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.az());const p=this;this._rtlTextPluginCallback=yi.registerForPluginStateChange(g=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(x,A)=>{if(l.aA(x),A&&A.every(I=>I))for(const I in p.sourceCaches){const M=p.sourceCaches[I].getSource().type;M!=="vector"&&M!=="geojson"||p.sourceCaches[I].reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const x=this.sourceCaches[g.sourceId];if(!x)return;const A=x.getSource();if(A&&A.vectorLayerIds)for(const I in this._layers){const M=this._layers[I];M.source===A.id&&this._validateLayer(M)}})}loadURL(a,d={},p){this.fire(new l.k("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;const g=this.map._requestManager.transformRequest(a,N.Style);this._request=l.f(g,(x,A)=>{this._request=null,x?this.fire(new l.j(x)):A&&this._load(A,d,p)})}loadJSON(a,d={},p){this.fire(new l.k("dataloading",{dataType:"style"})),this._request=l.h.frame(()=>{this._request=null,d.validate=d.validate!==!1,this._load(a,d,p)})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(Sa,{validate:!1})}_load(a,d,p){var g;const x=d.transformStyle?d.transformStyle(p,a):a;if(!d.validate||!Ti(this,l.y(x))){this._loaded=!0,this.stylesheet=x;for(const A in x.sources)this.addSource(A,x.sources[A],{validate:!1});x.sprite?this._loadSprite(x.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(x.glyphs),this._createLayers(),this.light=new Pe(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const a=l.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",a),this._order=a.map(d=>d.id),this._layers={},this._serializedLayers=null;for(const d of a){const p=l.aC(d);p.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=p}}_loadSprite(a,d=!1,p=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,x,A,I){const M=H(g),z=M.length,V=A>1?"@2x":"",$={},Y={},de={};for(const{id:ue,url:pe}of M){const oe=x.transformRequest(x.normalizeSpriteURL(pe,V,".json"),N.SpriteJSON),Ee=`${ue}_${oe.url}`;$[Ee]=l.f(oe,(De,We)=>{delete $[Ee],Y[ue]=We,Z(I,Y,de,De,z)});const Ue=x.transformRequest(x.normalizeSpriteURL(pe,V,".png"),N.SpriteImage),be=`${ue}_${Ue.url}`;$[be]=F.getImage(Ue,(De,We)=>{delete $[be],de[ue]=We,Z(I,Y,de,De,z)})}return{cancel(){for(const ue of Object.values($))ue.cancel()}}}(a,this.map._requestManager,this.map.getPixelRatio(),(g,x)=>{if(this._spriteRequest=null,g)this.fire(new l.j(g));else if(x)for(const A in x){this._spritesImagesIds[A]=[];const I=this._spritesImagesIds[A]?this._spritesImagesIds[A].filter(M=>!(M in x)):[];for(const M of I)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in x[A]){const z=A==="default"?M:`${A}:${M}`;this._spritesImagesIds[A].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,x[A][M],!1):this.imageManager.addImage(z,x[A][M]),d&&(this._changedImages[z]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),p&&p(g)})}_unloadSprite(){for(const a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(a){const d=this.sourceCaches[a.source];if(!d)return;const p=a.sourceLayer;if(!p)return;const g=d.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(p)===-1)&&this.fire(new l.j(new Error(`Source layer "${p}" does not exist on source "${g.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a){const d=this._serializedAllLayers();if(!a||a.length===0)return Object.values(d);const p=[];for(const g of a)d[g]&&p.push(d[g]);return p}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};const d=Object.keys(this._layers);for(const p of d){const g=this._layers[p];g.type!=="custom"&&(a[p]=g.serialize())}return a}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(const a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;const d=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(g.length||x.length)&&this._updateWorkerLayers(g,x);for(const A in this._updatedSources){const I=this._updatedSources[A];if(I==="reload")this._reloadSource(A);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(A)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const A in this._updatedPaintProps)this._layers[A].updateTransitions(a);this.light.updateTransitions(a),this._resetUpdates()}const p={};for(const g in this.sourceCaches){const x=this.sourceCaches[g];p[g]=x.used,x.used=!1}for(const g of this._order){const x=this._layers[g];x.recalculate(a,this._availableImages),!x.isHidden(a.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const g in p){const x=this.sourceCaches[g];p[g]!==x.used&&x.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(a),this.z=a.zoom,d&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=Object.keys(this._changedImages);if(a.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(a),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,d={}){this._checkLoaded();const p=this.serialize();if(a=d.transformStyle?d.transformStyle(p,a):a,Ti(this,l.y(a)))return!1;(a=l.aD(a)).layers=l.aB(a.layers);const g=l.aE(p,a).filter(A=>!(A.command in Fv));if(g.length===0)return!1;const x=g.filter(A=>!(A.command in la));if(x.length>0)throw new Error(`Unimplemented: ${x.map(A=>A.command).join(", ")}.`);for(const A of g)A.command!=="setTransition"&&this[A.command].apply(this,A.args);return this.stylesheet=a,this._serializedLayers=null,!0}addImage(a,d){if(this.getImage(a))return this.fire(new l.j(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,d),this._afterImageUpdated(a)}updateImage(a,d){this.imageManager.updateImage(a,d)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new l.j(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,d,p={}){if(this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error(`Source "${a}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(l.y.source,`sources.${a}`,d,null,p))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const g=this.sourceCaches[a]=new pt(a,d,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:a})),g.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===a)return this.fire(new l.j(new Error(`Source "${a}" cannot be removed while layer "${p}" is using it.`)));const d=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],d.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,d){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error(`There is no source with this ID=${a}`);const p=this.sourceCaches[a].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(d),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,d,p={}){this._checkLoaded();const g=a.id;if(this.getLayer(g))return void this.fire(new l.j(new Error(`Layer "${g}" already exists on this map.`)));let x;if(a.type==="custom"){if(Ti(this,l.aF(a)))return;x=l.aC(a)}else{if("source"in a&&typeof a.source=="object"&&(this.addSource(g,a.source),a=l.aD(a),a=l.e(a,{source:g})),this._validate(l.y.layer,`layers.${g}`,a,{arrayIndex:-1},p))return;x=l.aC(a),this._validateLayer(x),x.setEventedParent(this,{layer:{id:g}})}const A=d?this._order.indexOf(d):this._order.length;if(d&&A===-1)this.fire(new l.j(new Error(`Cannot add layer "${g}" before non-existing layer "${d}".`)));else{if(this._order.splice(A,0,g),this._layerOrderChanged=!0,this._layers[g]=x,this._removedLayers[g]&&x.source&&x.type!=="custom"){const I=this._removedLayers[g];delete this._removedLayers[g],I.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(a,d){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new l.j(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===d)return;const p=this._order.indexOf(a);this._order.splice(p,1);const g=d?this._order.indexOf(d):this._order.length;d&&g===-1?this.fire(new l.j(new Error(`Cannot move layer "${a}" before non-existing layer "${d}".`))):(this._order.splice(g,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();const d=this._layers[a];if(!d)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${a}".`)));d.setEventedParent(null);const p=this._order.indexOf(a);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=d,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],d.onRemove&&d.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,d,p){this._checkLoaded();const g=this.getLayer(a);g?g.minzoom===d&&g.maxzoom===p||(d!=null&&(g.minzoom=d),p!=null&&(g.maxzoom=p),this._updateLayer(g)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,d,p={}){this._checkLoaded();const g=this.getLayer(a);if(g){if(!l.aG(g.filter,d))return d==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(l.y.filter,`layers.${g.id}.filter`,d,null,p)||(g.filter=l.aD(d),this._updateLayer(g)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return l.aD(this.getLayer(a).filter)}setLayoutProperty(a,d,p,g={}){this._checkLoaded();const x=this.getLayer(a);x?l.aG(x.getLayoutProperty(d),p)||(x.setLayoutProperty(d,p,g),this._updateLayer(x)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,d){const p=this.getLayer(a);if(p)return p.getLayoutProperty(d);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,d,p,g={}){this._checkLoaded();const x=this.getLayer(a);x?l.aG(x.getPaintProperty(d),p)||(x.setPaintProperty(d,p,g)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new l.j(new Error(`Cannot style non-existing layer "${a}".`)))}getPaintProperty(a,d){return this.getLayer(a).getPaintProperty(d)}setFeatureState(a,d){this._checkLoaded();const p=a.source,g=a.sourceLayer,x=this.sourceCaches[p];if(x===void 0)return void this.fire(new l.j(new Error(`The source '${p}' does not exist in the map's style.`)));const A=x.getSource().type;A==="geojson"&&g?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):A!=="vector"||g?(a.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),x.setFeatureState(g,a.id,d)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,d){this._checkLoaded();const p=a.source,g=this.sourceCaches[p];if(g===void 0)return void this.fire(new l.j(new Error(`The source '${p}' does not exist in the map's style.`)));const x=g.getSource().type,A=x==="vector"?a.sourceLayer:void 0;x!=="vector"||A?d&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(A,a.id,d):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();const d=a.source,p=a.sourceLayer,g=this.sourceCaches[d];if(g!==void 0)return g.getSource().type!=="vector"||p?(a.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(p,a.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const a=l.aH(this.sourceCaches,x=>x.serialize()),d=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,g=this.stylesheet;return l.aI({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:a,layers:d,terrain:p},x=>x!==void 0)}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){const d=A=>this._layers[A].type==="fill-extrusion",p={},g=[];for(let A=this._order.length-1;A>=0;A--){const I=this._order[A];if(d(I)){p[I]=A;for(const M of a){const z=M[I];if(z)for(const V of z)g.push(V)}}}g.sort((A,I)=>I.intersectionZ-A.intersectionZ);const x=[];for(let A=this._order.length-1;A>=0;A--){const I=this._order[A];if(d(I))for(let M=g.length-1;M>=0;M--){const z=g[M].feature;if(p[z.layer.id]<A)break;x.push(z),g.pop()}else for(const M of a){const z=M[I];if(z)for(const V of z)x.push(V.feature)}}return x}queryRenderedFeatures(a,d,p){d&&d.filter&&this._validate(l.y.filter,"queryRenderedFeatures.filter",d.filter,null,d);const g={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const I of d.layers){const M=this._layers[I];if(!M)return this.fire(new l.j(new Error(`The layer '${I}' does not exist in the map's style and cannot be queried for features.`))),[];g[M.source]=!0}}const x=[];d.availableImages=this._availableImages;const A=this._serializedAllLayers();for(const I in this.sourceCaches)d.layers&&!g[I]||x.push(He(this.sourceCaches[I],this._layers,A,a,d,p));return this.placement&&x.push(function(I,M,z,V,$,Y,de){const ue={},pe=Y.queryRenderedSymbols(V),oe=[];for(const Ee of Object.keys(pe).map(Number))oe.push(de[Ee]);oe.sort(Ke);for(const Ee of oe){const Ue=Ee.featureIndex.lookupSymbolFeatures(pe[Ee.bucketInstanceId],M,Ee.bucketIndex,Ee.sourceLayerIndex,$.filter,$.layers,$.availableImages,I);for(const be in Ue){const De=ue[be]=ue[be]||[],We=Ue[be];We.sort((Ye,rt)=>{const mt=Ee.featureSortOrder;if(mt){const ct=mt.indexOf(Ye.featureIndex);return mt.indexOf(rt.featureIndex)-ct}return rt.featureIndex-Ye.featureIndex});for(const Ye of We)De.push(Ye)}}for(const Ee in ue)ue[Ee].forEach(Ue=>{const be=Ue.feature,De=z[I[Ee].source].getFeatureState(be.layer["source-layer"],be.id);be.source=be.layer.source,be.layer["source-layer"]&&(be.sourceLayer=be.layer["source-layer"]),be.state=De});return ue}(this._layers,A,this.sourceCaches,a,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(a,d){d&&d.filter&&this._validate(l.y.filter,"querySourceFeatures.filter",d.filter,null,d);const p=this.sourceCaches[a];return p?function(g,x){const A=g.getRenderableIds().map(z=>g.getTileByID(z)),I=[],M={};for(let z=0;z<A.length;z++){const V=A[z],$=V.tileID.canonical.key;M[$]||(M[$]=!0,V.querySourceFeatures(I,x))}return I}(p,d):[]}addSourceType(a,d,p){return he(a)?p(new Error(`A source type called "${a}" already exists.`)):(((g,x)=>{re[g]=x})(a,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:d.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(a,d={}){this._checkLoaded();const p=this.light.getLight();let g=!1;for(const A in a)if(!l.aG(a[A],p[A])){g=!0;break}if(!g)return;const x={now:l.h.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,d),this.light.updateTransitions(x)}_validate(a,d,p,g,x={}){return(!x||x.validate!==!1)&&Ti(this,a.call(l.y,l.e({key:d,style:this.serialize(),value:p,styleSpec:l.v},g)))}_remove(a=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const p=this.sourceCaches[d];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(const d in this.sourceCaches)this.sourceCaches[d].update(a,this.map.terrain)}_generateCollisionBoxes(){for(const a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,d,p,g,x=!1){let A=!1,I=!1;const M={};for(const z of this._order){const V=this._layers[z];if(V.type!=="symbol")continue;if(!M[V.source]){const Y=this.sourceCaches[V.source];M[V.source]=Y.getRenderableIds(!0).map(de=>Y.getTileByID(de)).sort((de,ue)=>ue.tileID.overscaledZ-de.tileID.overscaledZ||(de.tileID.isLessThan(ue.tileID)?-1:1))}const $=this.crossTileSymbolIndex.addLayer(V,M[V.source],a.center.lng);A=A||$}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.h.now(),a.zoom))&&(this.pauseablePlacement=new xl(a,this.map.terrain,this._order,x,d,p,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.h.now()),I=!0),A&&this.pauseablePlacement.placement.setStale()),I||A)for(const z of this._order){const V=this._layers[z];V.type==="symbol"&&this.placement.updateLayerOpacities(V,M[V.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.h.now())}_releaseSymbolFadeTiles(){for(const a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,d,p){this.imageManager.getImages(d.icons,p),this._updateTilesForChangedImages();const g=this.sourceCaches[d.source];g&&g.setDependencies(d.tileID.key,d.type,d.icons)}getGlyphs(a,d,p){this.glyphManager.getGlyphs(d.stacks,p);const g=this.sourceCaches[d.source];g&&g.setDependencies(d.tileID.key,d.type,[""])}getResource(a,d,p){return l.m(d,p)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,d={}){this._checkLoaded(),a&&this._validate(l.y.glyphs,"glyphs",a,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,d,p={},g){this._checkLoaded();const x=[{id:a,url:d}],A=[...H(this.stylesheet.sprite),...x];this._validate(l.y.sprite,"sprite",A,null,p)||(this.stylesheet.sprite=A,this._loadSprite(x,!0,g))}removeSprite(a){this._checkLoaded();const d=H(this.stylesheet.sprite);if(d.find(p=>p.id===a)){if(this._spritesImagesIds[a])for(const p of this._spritesImagesIds[a])this.imageManager.removeImage(p),this._changedImages[p]=!0;d.splice(d.findIndex(p=>p.id===a),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return H(this.stylesheet.sprite)}setSprite(a,d={},p){this._checkLoaded(),a&&this._validate(l.y.sprite,"sprite",a,null,d)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,p):(this._unloadSprite(),p&&p(null)))}}yi.registerForPluginStateChange=l.aK;var fu=l.Q([{name:"a_pos",type:"Int16",components:2}]),Sl="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ar={prelude:qn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:qn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:qn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:qn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:qn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:qn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:qn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:qn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:qn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:qn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:qn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:qn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:qn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:qn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:qn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:qn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:qn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:qn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:qn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:qn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:qn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:qn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:qn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:qn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:qn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:qn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:qn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Sl),terrainDepth:qn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Sl),terrainCoords:qn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Sl)};function qn(y,a){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=a.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=x?x.concat(g):g,I={};return{fragmentSource:y=y.replace(d,(M,z,V,$,Y)=>(I[Y]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${Y}
varying ${V} ${$} ${Y};
#else
uniform ${V} ${$} u_${Y};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Y}
    ${V} ${$} ${Y} = u_${Y};
#endif
`)),vertexSource:a=a.replace(d,(M,z,V,$,Y)=>{const de=$==="float"?"vec2":"vec4",ue=Y.match(/color/)?"color":de;return I[Y]?z==="define"?`
#ifndef HAS_UNIFORM_u_${Y}
uniform lowp float u_${Y}_t;
attribute ${V} ${de} a_${Y};
varying ${V} ${$} ${Y};
#else
uniform ${V} ${$} u_${Y};
#endif
`:ue==="vec4"?`
#ifndef HAS_UNIFORM_u_${Y}
    ${Y} = a_${Y};
#else
    ${V} ${$} ${Y} = u_${Y};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Y}
    ${Y} = unpack_mix_${ue}(a_${Y}, u_${Y}_t);
#else
    ${V} ${$} ${Y} = u_${Y};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${Y}
uniform lowp float u_${Y}_t;
attribute ${V} ${de} a_${Y};
#else
uniform ${V} ${$} u_${Y};
#endif
`:ue==="vec4"?`
#ifndef HAS_UNIFORM_u_${Y}
    ${V} ${$} ${Y} = a_${Y};
#else
    ${V} ${$} ${Y} = u_${Y};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Y}
    ${V} ${$} ${Y} = unpack_mix_${ue}(a_${Y}, u_${Y}_t);
#else
    ${V} ${$} ${Y} = u_${Y};
#endif
`}),staticAttributes:p,staticUniforms:A}}class Ro{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,d,p,g,x,A,I,M,z){this.context=a;let V=this.boundPaintVertexBuffers.length!==g.length;for(let $=0;!V&&$<g.length;$++)this.boundPaintVertexBuffers[$]!==g[$]&&(V=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==p||V||this.boundIndexBuffer!==x||this.boundVertexOffset!==A||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==z?this.freshBind(d,p,g,x,A,I,M,z):(a.bindVertexArray.set(this.vao),I&&I.bind(),x&&x.dynamicDraw&&x.bind(),M&&M.bind(),z&&z.bind())}freshBind(a,d,p,g,x,A,I,M){const z=a.numAttributes,V=this.context,$=V.gl;this.vao&&this.destroy(),this.vao=V.createVertexArray(),V.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=g,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=A,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=M,d.enableAttributes($,a);for(const Y of p)Y.enableAttributes($,a);A&&A.enableAttributes($,a),I&&I.enableAttributes($,a),M&&M.enableAttributes($,a),d.bind(),d.setVertexAttribPointers($,a,x);for(const Y of p)Y.bind(),Y.setVertexAttribPointers($,a,x);A&&(A.bind(),A.setVertexAttribPointers($,a,x)),g&&g.bind(),I&&(I.bind(),I.setVertexAttribPointers($,a,x)),M&&(M.bind(),M.setVertexAttribPointers($,a,x)),V.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Lr(y){const a=[];for(let d=0;d<y.length;d++){if(y[d]===null)continue;const p=y[d].split(" ");a.push(p.pop())}return a}class pu{constructor(a,d,p,g,x,A){const I=a.gl;this.program=I.createProgram();const M=Lr(d.staticAttributes),z=p?p.getBinderAttributes():[],V=M.concat(z),$=Ar.prelude.staticUniforms?Lr(Ar.prelude.staticUniforms):[],Y=d.staticUniforms?Lr(d.staticUniforms):[],de=p?p.getBinderUniforms():[],ue=$.concat(Y).concat(de),pe=[];for(const Ye of ue)pe.indexOf(Ye)<0&&pe.push(Ye);const oe=p?p.defines():[];x&&oe.push("#define OVERDRAW_INSPECTOR;"),A&&oe.push("#define TERRAIN3D;");const Ee=oe.concat(Ar.prelude.fragmentSource,d.fragmentSource).join(`
`),Ue=oe.concat(Ar.prelude.vertexSource,d.vertexSource).join(`
`),be=I.createShader(I.FRAGMENT_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(be,Ee),I.compileShader(be),!I.getShaderParameter(be,I.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${I.getShaderInfoLog(be)}`);I.attachShader(this.program,be);const De=I.createShader(I.VERTEX_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(De,Ue),I.compileShader(De),!I.getShaderParameter(De,I.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${I.getShaderInfoLog(De)}`);I.attachShader(this.program,De),this.attributes={};const We={};this.numAttributes=V.length;for(let Ye=0;Ye<this.numAttributes;Ye++)V[Ye]&&(I.bindAttribLocation(this.program,Ye,V[Ye]),this.attributes[V[Ye]]=Ye);if(I.linkProgram(this.program),!I.getProgramParameter(this.program,I.LINK_STATUS))throw new Error(`Program failed to link: ${I.getProgramInfoLog(this.program)}`);I.deleteShader(De),I.deleteShader(be);for(let Ye=0;Ye<pe.length;Ye++){const rt=pe[Ye];if(rt&&!We[rt]){const mt=I.getUniformLocation(this.program,rt);mt&&(We[rt]=mt)}}this.fixedUniforms=g(a,We),this.terrainUniforms=((Ye,rt)=>({u_depth:new l.aL(Ye,rt.u_depth),u_terrain:new l.aL(Ye,rt.u_terrain),u_terrain_dim:new l.aM(Ye,rt.u_terrain_dim),u_terrain_matrix:new l.aN(Ye,rt.u_terrain_matrix),u_terrain_unpack:new l.aO(Ye,rt.u_terrain_unpack),u_terrain_exaggeration:new l.aM(Ye,rt.u_terrain_exaggeration)}))(a,We),this.binderUniforms=p?p.getUniforms(a,We):[]}draw(a,d,p,g,x,A,I,M,z,V,$,Y,de,ue,pe,oe,Ee,Ue){const be=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(p),a.setStencilMode(g),a.setColorMode(x),a.setCullFace(A),M){a.activeTexture.set(be.TEXTURE2),be.bindTexture(be.TEXTURE_2D,M.depthTexture),a.activeTexture.set(be.TEXTURE3),be.bindTexture(be.TEXTURE_2D,M.texture);for(const We in this.terrainUniforms)this.terrainUniforms[We].set(M[We])}for(const We in this.fixedUniforms)this.fixedUniforms[We].set(I[We]);pe&&pe.setUniforms(a,this.binderUniforms,de,{zoom:ue});let De=0;switch(d){case be.LINES:De=2;break;case be.TRIANGLES:De=3;break;case be.LINE_STRIP:De=1}for(const We of Y.get()){const Ye=We.vaos||(We.vaos={});(Ye[z]||(Ye[z]=new Ro)).bind(a,this,V,pe?pe.getPaintVertexBuffers():[],$,We.vertexOffset,oe,Ee,Ue),be.drawElements(d,We.primitiveLength*De,be.UNSIGNED_SHORT,We.primitiveOffset*De*2)}}}function ka(y,a,d){const p=1/Ae(d,1,a.transform.tileZoom),g=Math.pow(2,d.tileID.overscaledZ),x=d.tileSize*Math.pow(2,a.transform.tileZoom)/g,A=x*(d.tileID.canonical.x+d.tileID.wrap*g),I=x*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[p,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[A>>16,I>>16],u_pixel_coord_lower:[65535&A,65535&I]}}const qd=(y,a,d,p)=>{const g=a.style.light,x=g.properties.get("position"),A=[x.x,x.y,x.z],I=function(){var z=new l.A(9);return l.A!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[5]=0,z[6]=0,z[7]=0),z[0]=1,z[4]=1,z[8]=1,z}();g.properties.get("anchor")==="viewport"&&function(z,V){var $=Math.sin(V),Y=Math.cos(V);z[0]=Y,z[1]=$,z[2]=0,z[3]=-$,z[4]=Y,z[5]=0,z[6]=0,z[7]=0,z[8]=1}(I,-a.transform.angle),function(z,V,$){var Y=V[0],de=V[1],ue=V[2];z[0]=Y*$[0]+de*$[3]+ue*$[6],z[1]=Y*$[1]+de*$[4]+ue*$[7],z[2]=Y*$[2]+de*$[5]+ue*$[8]}(A,A,I);const M=g.properties.get("color");return{u_matrix:y,u_lightpos:A,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+d,u_opacity:p}},Js=(y,a,d,p,g,x,A)=>l.e(qd(y,a,d,p),ka(x,a,A),{u_height_factor:-Math.pow(2,g.overscaledZ)/A.tileSize/8}),op=y=>({u_matrix:y}),jd=(y,a,d,p)=>l.e(op(y),ka(d,a,p)),mu=(y,a)=>({u_matrix:y,u_world:a}),gu=(y,a,d,p,g)=>l.e(jd(y,a,d,p),{u_world:g}),Qs=(y,a,d,p)=>{const g=y.transform;let x,A;if(p.paint.get("circle-pitch-alignment")==="map"){const I=Ae(d,1,g.zoom);x=!0,A=[I,I]}else x=!1,A=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(a.posMatrix,d,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:A}},Hd=(y,a,d)=>{const p=Ae(d,1,a.zoom),g=Math.pow(2,a.zoom-d.tileID.overscaledZ),x=d.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:a.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[a.pixelsToGLUnits[0]/(p*g),a.pixelsToGLUnits[1]/(p*g)],u_overscale_factor:x}},fc=(y,a,d=1)=>({u_matrix:y,u_color:a,u_overlay:0,u_overlay_scale:d}),lp=y=>({u_matrix:y}),Bv=(y,a,d,p)=>({u_matrix:y,u_extrude_scale:Ae(a,1,d),u_intensity:p});function Gd(y,a){const d=Math.pow(2,a.canonical.z),p=a.canonical.y;return[new l.U(0,p/d).toLngLat().lat,new l.U(0,(p+1)/d).toLngLat().lat]}const Wd=(y,a,d,p)=>{const g=y.transform;return{u_matrix:vu(y,a,d,p),u_ratio:1/Ae(a,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},cp=(y,a,d,p,g)=>l.e(Wd(y,a,d,g),{u_image:0,u_image_height:p}),Vv=(y,a,d,p,g)=>{const x=y.transform,A=dp(a,x);return{u_matrix:vu(y,a,d,g),u_texsize:a.imageAtlasTexture.size,u_ratio:1/Ae(a,1,x.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[A,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},up=(y,a,d,p,g,x)=>{const A=y.lineAtlas,I=dp(a,y.transform),M=d.layout.get("line-cap")==="round",z=A.getDash(p.from,M),V=A.getDash(p.to,M),$=z.width*g.fromScale,Y=V.width*g.toScale;return l.e(Wd(y,a,d,x),{u_patternscale_a:[I/$,-z.height/2],u_patternscale_b:[I/Y,-V.height/2],u_sdfgamma:A.width/(256*Math.min($,Y)*y.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:V.y,u_mix:g.t})};function dp(y,a){return 1/Ae(y,1,a.tileZoom)}function vu(y,a,d,p){return y.translatePosMatrix(p?p.posMatrix:a.tileID.posMatrix,a,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const hp=(y,a,d,p,g)=>{return{u_matrix:y,u_tl_parent:a,u_scale_parent:d,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(A=g.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(x=g.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:fp(g.paint.get("raster-hue-rotate"))};var x,A};function fp(y){y*=Math.PI/180;const a=Math.sin(y),d=Math.cos(y);return[(2*d+1)/3,(-Math.sqrt(3)*a-d+1)/3,(Math.sqrt(3)*a-d+1)/3]}const Yd=(y,a,d,p,g,x,A,I,M,z)=>{const V=g.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:V.cameraToCenterDistance,u_pitch:V.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:V.width/V.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:A,u_coord_matrix:I,u_is_text:+M,u_pitch_with_map:+p,u_texsize:z,u_texture:0}},Zd=(y,a,d,p,g,x,A,I,M,z,V)=>{const $=g.transform;return l.e(Yd(y,a,d,p,g,x,A,I,M,z),{u_gamma_scale:p?Math.cos($._pitch)*$.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+V})},Oo=(y,a,d,p,g,x,A,I,M,z)=>l.e(Zd(y,a,d,p,g,x,A,I,!0,M,!0),{u_texsize_icon:z,u_texture_icon:1}),yu=(y,a,d)=>({u_matrix:y,u_opacity:a,u_color:d}),Ca=(y,a,d,p,g,x)=>l.e(function(A,I,M,z){const V=M.imageManager.getPattern(A.from.toString()),$=M.imageManager.getPattern(A.to.toString()),{width:Y,height:de}=M.imageManager.getPixelSize(),ue=Math.pow(2,z.tileID.overscaledZ),pe=z.tileSize*Math.pow(2,M.transform.tileZoom)/ue,oe=pe*(z.tileID.canonical.x+z.tileID.wrap*ue),Ee=pe*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:V.tl,u_pattern_br_a:V.br,u_pattern_tl_b:$.tl,u_pattern_br_b:$.br,u_texsize:[Y,de],u_mix:I.t,u_pattern_size_a:V.displaySize,u_pattern_size_b:$.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/Ae(z,1,M.transform.tileZoom),u_pixel_coord_upper:[oe>>16,Ee>>16],u_pixel_coord_lower:[65535&oe,65535&Ee]}}(p,x,d,g),{u_matrix:y,u_opacity:a}),_u={fillExtrusion:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_lightpos:new l.aP(y,a.u_lightpos),u_lightintensity:new l.aM(y,a.u_lightintensity),u_lightcolor:new l.aP(y,a.u_lightcolor),u_vertical_gradient:new l.aM(y,a.u_vertical_gradient),u_opacity:new l.aM(y,a.u_opacity)}),fillExtrusionPattern:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_lightpos:new l.aP(y,a.u_lightpos),u_lightintensity:new l.aM(y,a.u_lightintensity),u_lightcolor:new l.aP(y,a.u_lightcolor),u_vertical_gradient:new l.aM(y,a.u_vertical_gradient),u_height_factor:new l.aM(y,a.u_height_factor),u_image:new l.aL(y,a.u_image),u_texsize:new l.aQ(y,a.u_texsize),u_pixel_coord_upper:new l.aQ(y,a.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,a.u_pixel_coord_lower),u_scale:new l.aP(y,a.u_scale),u_fade:new l.aM(y,a.u_fade),u_opacity:new l.aM(y,a.u_opacity)}),fill:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix)}),fillPattern:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_image:new l.aL(y,a.u_image),u_texsize:new l.aQ(y,a.u_texsize),u_pixel_coord_upper:new l.aQ(y,a.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,a.u_pixel_coord_lower),u_scale:new l.aP(y,a.u_scale),u_fade:new l.aM(y,a.u_fade)}),fillOutline:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_world:new l.aQ(y,a.u_world)}),fillOutlinePattern:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_world:new l.aQ(y,a.u_world),u_image:new l.aL(y,a.u_image),u_texsize:new l.aQ(y,a.u_texsize),u_pixel_coord_upper:new l.aQ(y,a.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,a.u_pixel_coord_lower),u_scale:new l.aP(y,a.u_scale),u_fade:new l.aM(y,a.u_fade)}),circle:(y,a)=>({u_camera_to_center_distance:new l.aM(y,a.u_camera_to_center_distance),u_scale_with_map:new l.aL(y,a.u_scale_with_map),u_pitch_with_map:new l.aL(y,a.u_pitch_with_map),u_extrude_scale:new l.aQ(y,a.u_extrude_scale),u_device_pixel_ratio:new l.aM(y,a.u_device_pixel_ratio),u_matrix:new l.aN(y,a.u_matrix)}),collisionBox:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_camera_to_center_distance:new l.aM(y,a.u_camera_to_center_distance),u_pixels_to_tile_units:new l.aM(y,a.u_pixels_to_tile_units),u_extrude_scale:new l.aQ(y,a.u_extrude_scale),u_overscale_factor:new l.aM(y,a.u_overscale_factor)}),collisionCircle:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_inv_matrix:new l.aN(y,a.u_inv_matrix),u_camera_to_center_distance:new l.aM(y,a.u_camera_to_center_distance),u_viewport_size:new l.aQ(y,a.u_viewport_size)}),debug:(y,a)=>({u_color:new l.aR(y,a.u_color),u_matrix:new l.aN(y,a.u_matrix),u_overlay:new l.aL(y,a.u_overlay),u_overlay_scale:new l.aM(y,a.u_overlay_scale)}),clippingMask:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix)}),heatmap:(y,a)=>({u_extrude_scale:new l.aM(y,a.u_extrude_scale),u_intensity:new l.aM(y,a.u_intensity),u_matrix:new l.aN(y,a.u_matrix)}),heatmapTexture:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_world:new l.aQ(y,a.u_world),u_image:new l.aL(y,a.u_image),u_color_ramp:new l.aL(y,a.u_color_ramp),u_opacity:new l.aM(y,a.u_opacity)}),hillshade:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_image:new l.aL(y,a.u_image),u_latrange:new l.aQ(y,a.u_latrange),u_light:new l.aQ(y,a.u_light),u_shadow:new l.aR(y,a.u_shadow),u_highlight:new l.aR(y,a.u_highlight),u_accent:new l.aR(y,a.u_accent)}),hillshadePrepare:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_image:new l.aL(y,a.u_image),u_dimension:new l.aQ(y,a.u_dimension),u_zoom:new l.aM(y,a.u_zoom),u_unpack:new l.aO(y,a.u_unpack)}),line:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_ratio:new l.aM(y,a.u_ratio),u_device_pixel_ratio:new l.aM(y,a.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,a.u_units_to_pixels)}),lineGradient:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_ratio:new l.aM(y,a.u_ratio),u_device_pixel_ratio:new l.aM(y,a.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,a.u_units_to_pixels),u_image:new l.aL(y,a.u_image),u_image_height:new l.aM(y,a.u_image_height)}),linePattern:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_texsize:new l.aQ(y,a.u_texsize),u_ratio:new l.aM(y,a.u_ratio),u_device_pixel_ratio:new l.aM(y,a.u_device_pixel_ratio),u_image:new l.aL(y,a.u_image),u_units_to_pixels:new l.aQ(y,a.u_units_to_pixels),u_scale:new l.aP(y,a.u_scale),u_fade:new l.aM(y,a.u_fade)}),lineSDF:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_ratio:new l.aM(y,a.u_ratio),u_device_pixel_ratio:new l.aM(y,a.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,a.u_units_to_pixels),u_patternscale_a:new l.aQ(y,a.u_patternscale_a),u_patternscale_b:new l.aQ(y,a.u_patternscale_b),u_sdfgamma:new l.aM(y,a.u_sdfgamma),u_image:new l.aL(y,a.u_image),u_tex_y_a:new l.aM(y,a.u_tex_y_a),u_tex_y_b:new l.aM(y,a.u_tex_y_b),u_mix:new l.aM(y,a.u_mix)}),raster:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_tl_parent:new l.aQ(y,a.u_tl_parent),u_scale_parent:new l.aM(y,a.u_scale_parent),u_buffer_scale:new l.aM(y,a.u_buffer_scale),u_fade_t:new l.aM(y,a.u_fade_t),u_opacity:new l.aM(y,a.u_opacity),u_image0:new l.aL(y,a.u_image0),u_image1:new l.aL(y,a.u_image1),u_brightness_low:new l.aM(y,a.u_brightness_low),u_brightness_high:new l.aM(y,a.u_brightness_high),u_saturation_factor:new l.aM(y,a.u_saturation_factor),u_contrast_factor:new l.aM(y,a.u_contrast_factor),u_spin_weights:new l.aP(y,a.u_spin_weights)}),symbolIcon:(y,a)=>({u_is_size_zoom_constant:new l.aL(y,a.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,a.u_is_size_feature_constant),u_size_t:new l.aM(y,a.u_size_t),u_size:new l.aM(y,a.u_size),u_camera_to_center_distance:new l.aM(y,a.u_camera_to_center_distance),u_pitch:new l.aM(y,a.u_pitch),u_rotate_symbol:new l.aL(y,a.u_rotate_symbol),u_aspect_ratio:new l.aM(y,a.u_aspect_ratio),u_fade_change:new l.aM(y,a.u_fade_change),u_matrix:new l.aN(y,a.u_matrix),u_label_plane_matrix:new l.aN(y,a.u_label_plane_matrix),u_coord_matrix:new l.aN(y,a.u_coord_matrix),u_is_text:new l.aL(y,a.u_is_text),u_pitch_with_map:new l.aL(y,a.u_pitch_with_map),u_texsize:new l.aQ(y,a.u_texsize),u_texture:new l.aL(y,a.u_texture)}),symbolSDF:(y,a)=>({u_is_size_zoom_constant:new l.aL(y,a.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,a.u_is_size_feature_constant),u_size_t:new l.aM(y,a.u_size_t),u_size:new l.aM(y,a.u_size),u_camera_to_center_distance:new l.aM(y,a.u_camera_to_center_distance),u_pitch:new l.aM(y,a.u_pitch),u_rotate_symbol:new l.aL(y,a.u_rotate_symbol),u_aspect_ratio:new l.aM(y,a.u_aspect_ratio),u_fade_change:new l.aM(y,a.u_fade_change),u_matrix:new l.aN(y,a.u_matrix),u_label_plane_matrix:new l.aN(y,a.u_label_plane_matrix),u_coord_matrix:new l.aN(y,a.u_coord_matrix),u_is_text:new l.aL(y,a.u_is_text),u_pitch_with_map:new l.aL(y,a.u_pitch_with_map),u_texsize:new l.aQ(y,a.u_texsize),u_texture:new l.aL(y,a.u_texture),u_gamma_scale:new l.aM(y,a.u_gamma_scale),u_device_pixel_ratio:new l.aM(y,a.u_device_pixel_ratio),u_is_halo:new l.aL(y,a.u_is_halo)}),symbolTextAndIcon:(y,a)=>({u_is_size_zoom_constant:new l.aL(y,a.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,a.u_is_size_feature_constant),u_size_t:new l.aM(y,a.u_size_t),u_size:new l.aM(y,a.u_size),u_camera_to_center_distance:new l.aM(y,a.u_camera_to_center_distance),u_pitch:new l.aM(y,a.u_pitch),u_rotate_symbol:new l.aL(y,a.u_rotate_symbol),u_aspect_ratio:new l.aM(y,a.u_aspect_ratio),u_fade_change:new l.aM(y,a.u_fade_change),u_matrix:new l.aN(y,a.u_matrix),u_label_plane_matrix:new l.aN(y,a.u_label_plane_matrix),u_coord_matrix:new l.aN(y,a.u_coord_matrix),u_is_text:new l.aL(y,a.u_is_text),u_pitch_with_map:new l.aL(y,a.u_pitch_with_map),u_texsize:new l.aQ(y,a.u_texsize),u_texsize_icon:new l.aQ(y,a.u_texsize_icon),u_texture:new l.aL(y,a.u_texture),u_texture_icon:new l.aL(y,a.u_texture_icon),u_gamma_scale:new l.aM(y,a.u_gamma_scale),u_device_pixel_ratio:new l.aM(y,a.u_device_pixel_ratio),u_is_halo:new l.aL(y,a.u_is_halo)}),background:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_opacity:new l.aM(y,a.u_opacity),u_color:new l.aR(y,a.u_color)}),backgroundPattern:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_opacity:new l.aM(y,a.u_opacity),u_image:new l.aL(y,a.u_image),u_pattern_tl_a:new l.aQ(y,a.u_pattern_tl_a),u_pattern_br_a:new l.aQ(y,a.u_pattern_br_a),u_pattern_tl_b:new l.aQ(y,a.u_pattern_tl_b),u_pattern_br_b:new l.aQ(y,a.u_pattern_br_b),u_texsize:new l.aQ(y,a.u_texsize),u_mix:new l.aM(y,a.u_mix),u_pattern_size_a:new l.aQ(y,a.u_pattern_size_a),u_pattern_size_b:new l.aQ(y,a.u_pattern_size_b),u_scale_a:new l.aM(y,a.u_scale_a),u_scale_b:new l.aM(y,a.u_scale_b),u_pixel_coord_upper:new l.aQ(y,a.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,a.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aM(y,a.u_tile_units_to_pixels)}),terrain:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_texture:new l.aL(y,a.u_texture),u_ele_delta:new l.aM(y,a.u_ele_delta)}),terrainDepth:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_ele_delta:new l.aM(y,a.u_ele_delta)}),terrainCoords:(y,a)=>({u_matrix:new l.aN(y,a.u_matrix),u_texture:new l.aL(y,a.u_texture),u_terrain_coords_id:new l.aM(y,a.u_terrain_coords_id),u_ele_delta:new l.aM(y,a.u_ele_delta)})};class bu{constructor(a,d,p){this.context=a;const g=a.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const pc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class xu{constructor(a,d,p,g){this.length=d.length,this.attributes=p,this.itemSize=d.bytesPerElement,this.dynamicDraw=g,this.context=a;const x=a.gl;this.buffer=x.createBuffer(),a.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,d){for(let p=0;p<this.attributes.length;p++){const g=d.attributes[this.attributes[p].name];g!==void 0&&a.enableVertexAttribArray(g)}}setVertexAttribPointers(a,d,p){for(let g=0;g<this.attributes.length;g++){const x=this.attributes[g],A=d.attributes[x.name];A!==void 0&&a.vertexAttribPointer(A,x.components,a[pc[x.type]],!1,this.itemSize,x.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const kl=new WeakMap;function eo(y){var a;if(kl.has(y))return kl.get(y);{const d=(a=y.getParameter(y.VERSION))===null||a===void 0?void 0:a.startsWith("WebGL 2.0");return kl.set(y,d),d}}class On{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class wu extends On{getDefault(){return l.aT.transparent}set(a){const d=this.current;(a.r!==d.r||a.g!==d.g||a.b!==d.b||a.a!==d.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class ca extends On{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class ua extends On{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class Kd extends On{getDefault(){return[!0,!0,!0,!0]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Su extends On{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class ku extends On{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class Xd extends On{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const d=this.current;(a.func!==d.func||a.ref!==d.ref||a.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class Jd extends On{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class Cu extends On{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=a,this.dirty=!1}}class Qd extends On{getDefault(){return[0,1]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class eh extends On{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=a,this.dirty=!1}}class Tu extends On{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class pp extends On{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.BLEND):d.disable(d.BLEND),this.current=a,this.dirty=!1}}class mp extends On{getDefault(){const a=this.gl;return[a.ONE,a.ZERO]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class Cl extends On{getDefault(){return l.aT.transparent}set(a){const d=this.current;(a.r!==d.r||a.g!==d.g||a.b!==d.b||a.a!==d.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Nv extends On{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class $v extends On{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=a,this.dirty=!1}}class Uv extends On{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class qv extends On{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class jv extends On{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class Hv extends On{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class th extends On{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Au extends On{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class nh extends On{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class rh extends On{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class Tl extends On{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class gp extends On{getDefault(){return null}set(a){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class vp extends On{getDefault(){return null}set(a){var d;if(a===this.current&&!this.dirty)return;const p=this.gl;eo(p)?p.bindVertexArray(a):(d=p.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class ih extends On{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class zo extends On{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class yp extends On{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class to extends On{constructor(a,d){super(a),this.context=a,this.parent=d}getDefault(){return null}}class Al extends to{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class _p extends to{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class ah extends to{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class jn{constructor(a,d,p,g,x){this.context=a,this.width=d,this.height=p;const A=a.gl,I=this.framebuffer=A.createFramebuffer();if(this.colorAttachment=new Al(a,I),g)this.depthAttachment=x?new ah(a,I):new _p(a,I);else if(x)throw new Error("Stencil cannot be setted without depth");if(A.checkFramebufferStatus(A.FRAMEBUFFER)!==A.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const a=this.context.gl,d=this.colorAttachment.get();if(d&&a.deleteTexture(d),this.depthAttachment){const p=this.depthAttachment.get();p&&a.deleteRenderbuffer(p)}a.deleteFramebuffer(this.framebuffer)}}class Er{constructor(a,d,p){this.blendFunction=a,this.blendColor=d,this.mask=p}}Er.Replace=[1,0],Er.disabled=new Er(Er.Replace,l.aT.transparent,[!1,!1,!1,!1]),Er.unblended=new Er(Er.Replace,l.aT.transparent,[!0,!0,!0,!0]),Er.alphaBlended=new Er([1,771],l.aT.transparent,[!0,!0,!0,!0]);class Gv{constructor(a){var d,p;if(this.gl=a,this.clearColor=new wu(this),this.clearDepth=new ca(this),this.clearStencil=new ua(this),this.colorMask=new Kd(this),this.depthMask=new Su(this),this.stencilMask=new ku(this),this.stencilFunc=new Xd(this),this.stencilOp=new Jd(this),this.stencilTest=new Cu(this),this.depthRange=new Qd(this),this.depthTest=new eh(this),this.depthFunc=new Tu(this),this.blend=new pp(this),this.blendFunc=new mp(this),this.blendColor=new Cl(this),this.blendEquation=new Nv(this),this.cullFace=new $v(this),this.cullFaceSide=new Uv(this),this.frontFace=new qv(this),this.program=new jv(this),this.activeTexture=new Hv(this),this.viewport=new th(this),this.bindFramebuffer=new Au(this),this.bindRenderbuffer=new nh(this),this.bindTexture=new rh(this),this.bindVertexBuffer=new Tl(this),this.bindElementBuffer=new gp(this),this.bindVertexArray=new vp(this),this.pixelStoreUnpack=new ih(this),this.pixelStoreUnpackPremultiplyAlpha=new zo(this),this.pixelStoreUnpackFlipY=new yp(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),eo(a)){this.HALF_FLOAT=a.HALF_FLOAT;const g=a.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=a.RGBA16F)!==null&&d!==void 0?d:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(p=a.RGB16F)!==null&&p!==void 0?p:g==null?void 0:g.RGB16F_EXT,a.getExtension("EXT_color_buffer_float")}else{a.getExtension("EXT_color_buffer_half_float"),a.getExtension("OES_texture_half_float_linear");const g=a.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,d){return new bu(this,a,d)}createVertexBuffer(a,d,p){return new xu(this,a,d,p)}createRenderbuffer(a,d,p){const g=this.gl,x=g.createRenderbuffer();return this.bindRenderbuffer.set(x),g.renderbufferStorage(g.RENDERBUFFER,a,d,p),this.bindRenderbuffer.set(null),x}createFramebuffer(a,d,p,g){return new jn(this,a,d,p,g)}clear({color:a,depth:d,stencil:p}){const g=this.gl;let x=0;a&&(x|=g.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(x|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),p!==void 0&&(x|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),g.clear(x)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){l.aG(a.blendFunction,Er.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return eo(this.gl)?this.gl.createVertexArray():(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var d;return eo(this.gl)?this.gl.deleteVertexArray(a):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}class zn{constructor(a,d,p){this.func=a,this.mask=d,this.range=p}}zn.ReadOnly=!1,zn.ReadWrite=!0,zn.disabled=new zn(519,zn.ReadOnly,[0,1]);const Fo=7680;class Ir{constructor(a,d,p,g,x,A){this.test=a,this.ref=d,this.mask=p,this.fail=g,this.depthFail=x,this.pass=A}}Ir.disabled=new Ir({func:519,mask:0},0,0,Fo,Fo,Fo);class wr{constructor(a,d,p){this.enable=a,this.mode=d,this.frontFace=p}}let mc;function bp(y,a,d,p,g,x,A){const I=y.context,M=I.gl,z=y.useProgram("collisionBox"),V=[];let $=0,Y=0;for(let be=0;be<p.length;be++){const De=p[be],We=a.getTile(De),Ye=We.getBucket(d);if(!Ye)continue;let rt=De.posMatrix;g[0]===0&&g[1]===0||(rt=y.translatePosMatrix(De.posMatrix,We,g,x));const mt=A?Ye.textCollisionBox:Ye.iconCollisionBox,ct=Ye.collisionCircleArray;if(ct.length>0){const Tt=l.Z(),Gt=rt;l.aU(Tt,Ye.placementInvProjMatrix,y.transform.glCoordMatrix),l.aU(Tt,Tt,Ye.placementViewportMatrix),V.push({circleArray:ct,circleOffset:Y,transform:Gt,invTransform:Tt,coord:De}),$+=ct.length/4,Y=$}mt&&z.draw(I,M.LINES,zn.disabled,Ir.disabled,y.colorModeForRenderPass(),wr.disabled,Hd(rt,y.transform,We),y.style.map.terrain&&y.style.map.terrain.getTerrainData(De),d.id,mt.layoutVertexBuffer,mt.indexBuffer,mt.segments,null,y.transform.zoom,null,null,mt.collisionVertexBuffer)}if(!A||!V.length)return;const de=y.useProgram("collisionCircle"),ue=new l.aV;ue.resize(4*$),ue._trim();let pe=0;for(const be of V)for(let De=0;De<be.circleArray.length/4;De++){const We=4*De,Ye=be.circleArray[We+0],rt=be.circleArray[We+1],mt=be.circleArray[We+2],ct=be.circleArray[We+3];ue.emplace(pe++,Ye,rt,mt,ct,0),ue.emplace(pe++,Ye,rt,mt,ct,1),ue.emplace(pe++,Ye,rt,mt,ct,2),ue.emplace(pe++,Ye,rt,mt,ct,3)}(!mc||mc.length<2*$)&&(mc=function(be){const De=2*be,We=new l.aX;We.resize(De),We._trim();for(let Ye=0;Ye<De;Ye++){const rt=6*Ye;We.uint16[rt+0]=4*Ye+0,We.uint16[rt+1]=4*Ye+1,We.uint16[rt+2]=4*Ye+2,We.uint16[rt+3]=4*Ye+2,We.uint16[rt+4]=4*Ye+3,We.uint16[rt+5]=4*Ye+0}return We}($));const oe=I.createIndexBuffer(mc,!0),Ee=I.createVertexBuffer(ue,l.aW.members,!0);for(const be of V){const De={u_matrix:be.transform,u_inv_matrix:be.invTransform,u_camera_to_center_distance:(Ue=y.transform).cameraToCenterDistance,u_viewport_size:[Ue.width,Ue.height]};de.draw(I,M.TRIANGLES,zn.disabled,Ir.disabled,y.colorModeForRenderPass(),wr.disabled,De,y.style.map.terrain&&y.style.map.terrain.getTerrainData(be.coord),d.id,Ee,oe,l.S.simpleSegment(0,2*be.circleOffset,be.circleArray.length,be.circleArray.length/2),null,y.transform.zoom,null,null,null)}var Ue;Ee.destroy(),oe.destroy()}wr.disabled=new wr(!1,1029,2305),wr.backCCW=new wr(!0,1029,2305);const sh=l.ao(new Float32Array(16));function Eu(y,a,d,p,g,x){const{horizontalAlign:A,verticalAlign:I}=l.au(y);return new l.P((-(A-.5)*a/g+p[0])*x,(-(I-.5)*d/g+p[1])*x)}function Iu(y,a,d,p,g,x,A,I,M,z,V){const $=y.text.placedSymbolArray,Y=y.text.dynamicLayoutVertexArray,de=y.icon.dynamicLayoutVertexArray,ue={};Y.clear();for(let pe=0;pe<$.length;pe++){const oe=$.get(pe),Ee=oe.hidden||!oe.crossTileID||y.allowVerticalPlacement&&!oe.placedOrientation?null:p[oe.crossTileID];if(Ee){const Ue=new l.P(oe.anchorX,oe.anchorY),be=Sn(Ue,d?A:x,V),De=oa(g.cameraToCenterDistance,be.signedDistanceFromCamera);let We=l.aj(y.textSizeData,M,oe)*De/l.ap;d&&(We*=y.tilePixelRatio/I);const{width:Ye,height:rt,anchor:mt,textOffset:ct,textBoxScale:Tt}=Ee,Gt=Eu(mt,Ye,rt,ct,Tt,We),Pn=d?Sn(Ue.add(Gt),x,V).point:be.point.add(a?Gt.rotate(-g.angle):Gt),Lt=y.allowVerticalPlacement&&oe.placedOrientation===l.ai.vertical?Math.PI/2:0;for(let on=0;on<oe.numGlyphs;on++)l.ak(Y,Pn,Lt);z&&oe.associatedIconIndex>=0&&(ue[oe.associatedIconIndex]={shiftedAnchor:Pn,angle:Lt})}else ae(oe.numGlyphs,Y)}if(z){de.clear();const pe=y.icon.placedSymbolArray;for(let oe=0;oe<pe.length;oe++){const Ee=pe.get(oe);if(Ee.hidden)ae(Ee.numGlyphs,de);else{const Ue=ue[oe];if(Ue)for(let be=0;be<Ee.numGlyphs;be++)l.ak(de,Ue.shiftedAnchor,Ue.angle);else ae(Ee.numGlyphs,de)}}y.icon.dynamicLayoutVertexBuffer.updateData(de)}y.text.dynamicLayoutVertexBuffer.updateData(Y)}function oh(y,a,d){return d.iconsInText&&a?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Pu(y,a,d,p,g,x,A,I,M,z,V,$){const Y=y.context,de=Y.gl,ue=y.transform,pe=I==="map",oe=M==="map",Ee=I!=="viewport"&&d.layout.get("symbol-placement")!=="point",Ue=pe&&!oe&&!Ee,be=!d.layout.get("symbol-sort-key").isConstant();let De=!1;const We=y.depthModeForSublayer(0,zn.ReadOnly),Ye=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),rt=[];for(const mt of p){const ct=a.getTile(mt),Tt=ct.getBucket(d);if(!Tt)continue;const Gt=g?Tt.text:Tt.icon;if(!Gt||!Gt.segments.get().length||!Gt.hasVisibleVertices)continue;const Pn=Gt.programConfigurations.get(d.id),Lt=g||Tt.sdfIcons,on=g?Tt.textSizeData:Tt.iconSizeData,Yt=oe||ue.pitch!==0,Jn=y.useProgram(oh(Lt,g,Tt),Pn),An=l.ah(on,ue.zoom),_n=y.style.map.terrain&&y.style.map.terrain.getTerrainData(mt);let Dn,$r,hr,_i,ri=[0,0],Wr=null;if(g)$r=ct.glyphAtlasTexture,hr=de.LINEAR,Dn=ct.glyphAtlasTexture.size,Tt.iconsInText&&(ri=ct.imageAtlasTexture.size,Wr=ct.imageAtlasTexture,_i=Yt||y.options.rotating||y.options.zooming||on.kind==="composite"||on.kind==="camera"?de.LINEAR:de.NEAREST);else{const Ur=d.layout.get("icon-size").constantOr(0)!==1||Tt.iconsNeedLinear;$r=ct.imageAtlasTexture,hr=Lt||y.options.rotating||y.options.zooming||Ur||Yt?de.LINEAR:de.NEAREST,Dn=ct.imageAtlasTexture.size}const fa=Ae(ct,1,y.transform.zoom),gr=ft(mt.posMatrix,oe,pe,y.transform,fa),ns=fi(mt.posMatrix,oe,pe,y.transform,fa),rs=Ye&&Tt.hasTextData(),io=d.layout.get("icon-text-fit")!=="none"&&rs&&Tt.hasIconData();if(Ee){const Ur=y.style.map.terrain?(Ki,qr)=>y.style.map.terrain.getElevation(mt,Ki,qr):null,ii=d.layout.get("text-rotation-alignment")==="map";xt(Tt,mt.posMatrix,y,g,gr,ns,oe,z,ii,Ur)}const Uo=y.translatePosMatrix(mt.posMatrix,ct,x,A),Rl=Ee||g&&Ye||io?sh:gr,Ai=y.translatePosMatrix(ns,ct,x,A,!0),bi=Lt&&d.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let zi;zi=Lt?Tt.iconsInText?Oo(on.kind,An,Ue,oe,y,Uo,Rl,Ai,Dn,ri):Zd(on.kind,An,Ue,oe,y,Uo,Rl,Ai,g,Dn,!0):Yd(on.kind,An,Ue,oe,y,Uo,Rl,Ai,g,Dn);const qo={program:Jn,buffers:Gt,uniformValues:zi,atlasTexture:$r,atlasTextureIcon:Wr,atlasInterpolation:hr,atlasInterpolationIcon:_i,isSDF:Lt,hasHalo:bi};if(be&&Tt.canOverlap){De=!0;const Ur=Gt.segments.get();for(const ii of Ur)rt.push({segments:new l.S([ii]),sortKey:ii.sortKey,state:qo,terrainData:_n})}else rt.push({segments:Gt.segments,sortKey:0,state:qo,terrainData:_n})}De&&rt.sort((mt,ct)=>mt.sortKey-ct.sortKey);for(const mt of rt){const ct=mt.state;if(Y.activeTexture.set(de.TEXTURE0),ct.atlasTexture.bind(ct.atlasInterpolation,de.CLAMP_TO_EDGE),ct.atlasTextureIcon&&(Y.activeTexture.set(de.TEXTURE1),ct.atlasTextureIcon&&ct.atlasTextureIcon.bind(ct.atlasInterpolationIcon,de.CLAMP_TO_EDGE)),ct.isSDF){const Tt=ct.uniformValues;ct.hasHalo&&(Tt.u_is_halo=1,lh(ct.buffers,mt.segments,d,y,ct.program,We,V,$,Tt,mt.terrainData)),Tt.u_is_halo=0}lh(ct.buffers,mt.segments,d,y,ct.program,We,V,$,ct.uniformValues,mt.terrainData)}}function lh(y,a,d,p,g,x,A,I,M,z){const V=p.context;g.draw(V,V.gl.TRIANGLES,x,A,I,wr.disabled,M,z,d.id,y.layoutVertexBuffer,y.indexBuffer,a,d.paint,p.transform.zoom,y.programConfigurations.get(d.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function gc(y,a,d,p,g){if(!d||!p||!p.imageAtlas)return;const x=p.imageAtlas.patternPositions;let A=x[d.to.toString()],I=x[d.from.toString()];if(!A&&I&&(A=I),!I&&A&&(I=A),!A||!I){const M=g.getPaintProperty(a);A=x[M],I=x[M]}A&&I&&y.setConstantPatternPositions(A,I)}function vc(y,a,d,p,g,x,A){const I=y.context.gl,M="fill-pattern",z=d.paint.get(M),V=z&&z.constantOr(1),$=d.getCrossfadeParameters();let Y,de,ue,pe,oe;A?(de=V&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Y=I.LINES):(de=V?"fillPattern":"fill",Y=I.TRIANGLES);const Ee=z.constantOr(null);for(const Ue of p){const be=a.getTile(Ue);if(V&&!be.patternsLoaded())continue;const De=be.getBucket(d);if(!De)continue;const We=De.programConfigurations.get(d.id),Ye=y.useProgram(de,We),rt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ue);V&&(y.context.activeTexture.set(I.TEXTURE0),be.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),We.updatePaintBuffers($)),gc(We,M,Ee,be,d);const mt=rt?Ue:null,ct=y.translatePosMatrix(mt?mt.posMatrix:Ue.posMatrix,be,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(A){pe=De.indexBuffer2,oe=De.segments2;const Tt=[I.drawingBufferWidth,I.drawingBufferHeight];ue=de==="fillOutlinePattern"&&V?gu(ct,y,$,be,Tt):mu(ct,Tt)}else pe=De.indexBuffer,oe=De.segments,ue=V?jd(ct,y,$,be):op(ct);Ye.draw(y.context,Y,g,y.stencilModeForClipping(Ue),x,wr.disabled,ue,rt,d.id,De.layoutVertexBuffer,pe,oe,d.paint,y.transform.zoom,We)}}function yc(y,a,d,p,g,x,A){const I=y.context,M=I.gl,z="fill-extrusion-pattern",V=d.paint.get(z),$=V.constantOr(1),Y=d.getCrossfadeParameters(),de=d.paint.get("fill-extrusion-opacity"),ue=V.constantOr(null);for(const pe of p){const oe=a.getTile(pe),Ee=oe.getBucket(d);if(!Ee)continue;const Ue=y.style.map.terrain&&y.style.map.terrain.getTerrainData(pe),be=Ee.programConfigurations.get(d.id),De=y.useProgram($?"fillExtrusionPattern":"fillExtrusion",be);$&&(y.context.activeTexture.set(M.TEXTURE0),oe.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),be.updatePaintBuffers(Y)),gc(be,z,ue,oe,d);const We=y.translatePosMatrix(pe.posMatrix,oe,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),Ye=d.paint.get("fill-extrusion-vertical-gradient"),rt=$?Js(We,y,Ye,de,pe,Y,oe):qd(We,y,Ye,de);De.draw(I,I.gl.TRIANGLES,g,x,A,wr.backCCW,rt,Ue,d.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,d.paint,y.transform.zoom,be,y.style.map.terrain&&Ee.centroidVertexBuffer)}}function Wv(y,a,d,p,g,x,A){const I=y.context,M=I.gl,z=d.fbo;if(!z)return;const V=y.useProgram("hillshade"),$=y.style.map.terrain&&y.style.map.terrain.getTerrainData(a);I.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,z.colorAttachment.get()),V.draw(I,M.TRIANGLES,g,x,A,wr.disabled,((Y,de,ue,pe)=>{const oe=ue.paint.get("hillshade-shadow-color"),Ee=ue.paint.get("hillshade-highlight-color"),Ue=ue.paint.get("hillshade-accent-color");let be=ue.paint.get("hillshade-illumination-direction")*(Math.PI/180);ue.paint.get("hillshade-illumination-anchor")==="viewport"&&(be-=Y.transform.angle);const De=!Y.options.moving;return{u_matrix:pe?pe.posMatrix:Y.transform.calculatePosMatrix(de.tileID.toUnwrapped(),De),u_image:0,u_latrange:Gd(0,de.tileID),u_light:[ue.paint.get("hillshade-exaggeration"),be],u_shadow:oe,u_highlight:Ee,u_accent:Ue}})(y,d,p,$?a:null),$,p.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function ch(y,a,d,p,g,x){const A=y.context,I=A.gl,M=a.dem;if(M&&M.data){const z=M.dim,V=M.stride,$=M.getPixels();if(A.activeTexture.set(I.TEXTURE1),A.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||y.getTileTexture(V),a.demTexture){const de=a.demTexture;de.update($,{premultiply:!1}),de.bind(I.NEAREST,I.CLAMP_TO_EDGE)}else a.demTexture=new ne(A,$,I.RGBA,{premultiply:!1}),a.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);A.activeTexture.set(I.TEXTURE0);let Y=a.fbo;if(!Y){const de=new ne(A,{width:z,height:z,data:null},I.RGBA);de.bind(I.LINEAR,I.CLAMP_TO_EDGE),Y=a.fbo=A.createFramebuffer(z,z,!0,!1),Y.colorAttachment.set(de.texture)}A.bindFramebuffer.set(Y.framebuffer),A.viewport.set([0,0,z,z]),y.useProgram("hillshadePrepare").draw(A,I.TRIANGLES,p,g,x,wr.disabled,((de,ue)=>{const pe=ue.stride,oe=l.Z();return l.aS(oe,0,l.N,-l.N,0,0,1),l.$(oe,oe,[0,-l.N,0]),{u_matrix:oe,u_image:1,u_dimension:[pe,pe],u_zoom:de.overscaledZ,u_unpack:ue.getUnpackVector()}})(a.tileID,M),null,d.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),a.needsHillshadePrepare=!1}}function Yv(y,a,d,p,g,x){const A=p.paint.get("raster-fade-duration");if(!x&&A>0){const I=l.h.now(),M=(I-y.timeAdded)/A,z=a?(I-a.timeAdded)/A:-1,V=d.getSource(),$=g.coveringZoomLevel({tileSize:V.tileSize,roundZoom:V.roundZoom}),Y=!a||Math.abs(a.tileID.overscaledZ-$)>Math.abs(y.tileID.overscaledZ-$),de=Y&&y.refreshedUponExpiration?1:l.ad(Y?M:1-z,0,1);return y.refreshedUponExpiration&&M>=1&&(y.refreshedUponExpiration=!1),a?{opacity:1,mix:1-de}:{opacity:de,mix:0}}return{opacity:1,mix:0}}const xp=new l.aT(1,0,0,1),Du=new l.aT(0,1,0,1),uh=new l.aT(0,0,1,1),wp=new l.aT(1,0,1,1),Sp=new l.aT(0,1,1,1);function _c(y,a,d,p){Lu(y,0,a+d/2,y.transform.width,d,p)}function Mu(y,a,d,p){Lu(y,a-d/2,0,d,y.transform.height,p)}function Lu(y,a,d,p,g,x){const A=y.context,I=A.gl;I.enable(I.SCISSOR_TEST),I.scissor(a*y.pixelRatio,d*y.pixelRatio,p*y.pixelRatio,g*y.pixelRatio),A.clear({color:x}),I.disable(I.SCISSOR_TEST)}function kp(y,a,d){const p=y.context,g=p.gl,x=d.posMatrix,A=y.useProgram("debug"),I=zn.disabled,M=Ir.disabled,z=y.colorModeForRenderPass(),V="$debug",$=y.style.map.terrain&&y.style.map.terrain.getTerrainData(d);p.activeTexture.set(g.TEXTURE0);const Y=a.getTileByID(d.key).latestRawTileData,de=Math.floor((Y&&Y.byteLength||0)/1024),ue=a.getTile(d).tileSize,pe=512/Math.min(ue,512)*(d.overscaledZ/y.transform.zoom)*.5;let oe=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(oe+=` => ${d.overscaledZ}`),function(Ee,Ue){Ee.initDebugOverlayCanvas();const be=Ee.debugOverlayCanvas,De=Ee.context.gl,We=Ee.debugOverlayCanvas.getContext("2d");We.clearRect(0,0,be.width,be.height),We.shadowColor="white",We.shadowBlur=2,We.lineWidth=1.5,We.strokeStyle="white",We.textBaseline="top",We.font="bold 36px Open Sans, sans-serif",We.fillText(Ue,5,5),We.strokeText(Ue,5,5),Ee.debugOverlayTexture.update(be),Ee.debugOverlayTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE)}(y,`${oe} ${de}kB`),A.draw(p,g.TRIANGLES,I,M,Er.alphaBlended,wr.disabled,fc(x,l.aT.transparent,pe),null,V,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),A.draw(p,g.LINE_STRIP,I,M,z,wr.disabled,fc(x,l.aT.red),$,V,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Rr(y,a,d){const p=y.context,g=p.gl,x=y.colorModeForRenderPass(),A=new zn(g.LEQUAL,zn.ReadWrite,y.depthRangeFor3D),I=y.useProgram("terrain"),M=a.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,y.width,y.height]);for(const z of d){const V=y.renderToTexture.getTexture(z),$=a.getTerrainData(z.tileID);p.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,V.texture);const Y={u_matrix:y.transform.calculatePosMatrix(z.tileID.toUnwrapped()),u_texture:0,u_ele_delta:a.getMeshFrameDelta(y.transform.zoom)};I.draw(p,g.TRIANGLES,A,Ir.disabled,x,wr.backCCW,Y,$,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}}class Bo{constructor(a,d){this.context=new Gv(a),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.Z(),renderTime:0},this.setup(),this.numSublayers=pt.maxUnderzooming+pt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new hu}resize(a,d,p){if(this.width=Math.floor(a*p),this.height=Math.floor(d*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const a=this.context,d=new l.a_;d.emplaceBack(0,0),d.emplaceBack(l.N,0),d.emplaceBack(0,l.N),d.emplaceBack(l.N,l.N),this.tileExtentBuffer=a.createVertexBuffer(d,fu.members),this.tileExtentSegments=l.S.simpleSegment(0,0,4,2);const p=new l.a_;p.emplaceBack(0,0),p.emplaceBack(l.N,0),p.emplaceBack(0,l.N),p.emplaceBack(l.N,l.N),this.debugBuffer=a.createVertexBuffer(p,fu.members),this.debugSegments=l.S.simpleSegment(0,0,4,5);const g=new l.V;g.emplaceBack(0,0,0,0),g.emplaceBack(l.N,0,l.N,0),g.emplaceBack(0,l.N,0,l.N),g.emplaceBack(l.N,l.N,l.N,l.N),this.rasterBoundsBuffer=a.createVertexBuffer(g,qe.members),this.rasterBoundsSegments=l.S.simpleSegment(0,0,4,2);const x=new l.a_;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(x,fu.members),this.viewportSegments=l.S.simpleSegment(0,0,4,2);const A=new l.a$;A.emplaceBack(0),A.emplaceBack(1),A.emplaceBack(3),A.emplaceBack(2),A.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(A);const I=new l.b0;I.emplaceBack(0,1,2),I.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(I);const M=this.context.gl;this.stencilClearMode=new Ir({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO)}clearStencil(){const a=this.context,d=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=l.Z();l.aS(p,0,this.width,this.height,0,0,1),l.a0(p,p,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(a,d.TRIANGLES,zn.disabled,this.stencilClearMode,Er.disabled,wr.disabled,lp(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,d){if(this.currentStencilSource===a.source||!a.isTileClipped()||!d||!d.length)return;this.currentStencilSource=a.source;const p=this.context,g=p.gl;this.nextStencilID+d.length>256&&this.clearStencil(),p.setColorMode(Er.disabled),p.setDepthMode(zn.disabled);const x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const A of d){const I=this._tileClippingMaskIDs[A.key]=this.nextStencilID++,M=this.style.map.terrain&&this.style.map.terrain.getTerrainData(A);x.draw(p,g.TRIANGLES,zn.disabled,new Ir({func:g.ALWAYS,mask:0},I,255,g.KEEP,g.KEEP,g.REPLACE),Er.disabled,wr.disabled,lp(A.posMatrix),M,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,d=this.context.gl;return new Ir({func:d.NOTEQUAL,mask:255},a,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(a){const d=this.context.gl;return new Ir({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(a){const d=this.context.gl,p=a.sort((A,I)=>I.overscaledZ-A.overscaledZ),g=p[p.length-1].overscaledZ,x=p[0].overscaledZ-g+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const A={};for(let I=0;I<x;I++)A[I+g]=new Ir({func:d.GEQUAL,mask:255},I+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=x,[A,p]}return[{[g]:Ir.disabled},p]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new Er([a.CONSTANT_COLOR,a.ONE],new l.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Er.unblended:Er.alphaBlended}depthModeForSublayer(a,d,p){if(!this.opaquePassEnabledForLayer())return zn.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new zn(p||this.context.gl.LEQUAL,d,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,d){this.style=a,this.options=d,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(l.h.now()),this.imageManager.beginFrame();const p=this.style._order,g=this.style.sourceCaches,x={},A={},I={};for(const M in g){const z=g[M];z.used&&z.prepare(this.context),x[M]=z.getVisibleCoordinates(),A[M]=x[M].slice().reverse(),I[M]=z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<p.length;M++)if(this.style._layers[p[M]].is3D()){this.opaquePassCutoff=M;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const M=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||M.length)&&(l.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(z,V){const $=z.context,Y=$.gl,de=Er.unblended,ue=new zn(Y.LEQUAL,zn.ReadWrite,[0,1]),pe=V.getTerrainMesh(),oe=V.sourceCache.getRenderableTiles(),Ee=z.useProgram("terrainDepth");$.bindFramebuffer.set(V.getFramebuffer("depth").framebuffer),$.viewport.set([0,0,z.width/devicePixelRatio,z.height/devicePixelRatio]),$.clear({color:l.aT.transparent,depth:1});for(const Ue of oe){const be=V.getTerrainData(Ue.tileID),De={u_matrix:z.transform.calculatePosMatrix(Ue.tileID.toUnwrapped()),u_ele_delta:V.getMeshFrameDelta(z.transform.zoom)};Ee.draw($,Y.TRIANGLES,ue,Ir.disabled,de,wr.backCCW,De,be,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments)}$.bindFramebuffer.set(null),$.viewport.set([0,0,z.width,z.height])}(this,this.style.map.terrain),function(z,V){const $=z.context,Y=$.gl,de=Er.unblended,ue=new zn(Y.LEQUAL,zn.ReadWrite,[0,1]),pe=V.getTerrainMesh(),oe=V.getCoordsTexture(),Ee=V.sourceCache.getRenderableTiles(),Ue=z.useProgram("terrainCoords");$.bindFramebuffer.set(V.getFramebuffer("coords").framebuffer),$.viewport.set([0,0,z.width/devicePixelRatio,z.height/devicePixelRatio]),$.clear({color:l.aT.transparent,depth:1}),V.coordsIndex=[];for(const be of Ee){const De=V.getTerrainData(be.tileID);$.activeTexture.set(Y.TEXTURE0),Y.bindTexture(Y.TEXTURE_2D,oe.texture);const We={u_matrix:z.transform.calculatePosMatrix(be.tileID.toUnwrapped()),u_terrain_coords_id:(255-V.coordsIndex.length)/255,u_texture:0,u_ele_delta:V.getMeshFrameDelta(z.transform.zoom)};Ue.draw($,Y.TRIANGLES,ue,Ir.disabled,de,wr.backCCW,We,De,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments),V.coordsIndex.push(be.tileID.key)}$.bindFramebuffer.set(null),$.viewport.set([0,0,z.width,z.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const M of p){const z=this.style._layers[M];if(!z.hasOffscreenPass()||z.isHidden(this.transform.zoom))continue;const V=A[z.source];(z.type==="custom"||V.length)&&this.renderLayer(this,g[z.source],z,V)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?l.aT.black:l.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const M=this.style._layers[p[this.currentLayer]],z=g[M.source],V=x[M.source];this._renderTileClippingMasks(M,V),this.renderLayer(this,z,M,V)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const M=this.style._layers[p[this.currentLayer]],z=g[M.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(M))continue;const V=(M.type==="symbol"?I:A)[M.source];this._renderTileClippingMasks(M,x[M.source]),this.renderLayer(this,z,M,V)}if(this.options.showTileBoundaries){const M=function(z,V){let $=null;const Y=Object.values(z._layers).flatMap(oe=>oe.source&&!oe.isHidden(V)?[z.sourceCaches[oe.source]]:[]),de=Y.filter(oe=>oe.getSource().type==="vector"),ue=Y.filter(oe=>oe.getSource().type!=="vector"),pe=oe=>{(!$||$.getSource().maxzoom<oe.getSource().maxzoom)&&($=oe)};return de.forEach(oe=>pe(oe)),$||ue.forEach(oe=>pe(oe)),$}(this.style,this.transform.zoom);M&&function(z,V,$){for(let Y=0;Y<$.length;Y++)kp(z,V,$[Y])}(this,M,M.getVisibleCoordinates())}this.options.showPadding&&function(M){const z=M.transform.padding;_c(M,M.transform.height-(z.top||0),3,xp),_c(M,z.bottom||0,3,Du),Mu(M,z.left||0,3,uh),Mu(M,M.transform.width-(z.right||0),3,wp);const V=M.transform.centerPoint;(function($,Y,de,ue){Lu($,Y-1,de-10,2,20,ue),Lu($,Y-10,de-1,20,2,ue)})(M,V.x,M.transform.height-V.y,Sp)}(this),this.context.setDefault()}renderLayer(a,d,p,g){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(g||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(x,A,I,M,z){if(x.renderPass!=="translucent")return;const V=Ir.disabled,$=x.colorModeForRenderPass();(I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Y,de,ue,pe,oe,Ee,Ue){const be=de.transform,De=oe==="map",We=Ee==="map";for(const Ye of Y){const rt=pe.getTile(Ye),mt=rt.getBucket(ue);if(!mt||!mt.text||!mt.text.segments.get().length)continue;const ct=l.ah(mt.textSizeData,be.zoom),Tt=Ae(rt,1,de.transform.zoom),Gt=ft(Ye.posMatrix,We,De,de.transform,Tt),Pn=ue.layout.get("icon-text-fit")!=="none"&&mt.hasIconData();if(ct){const Lt=Math.pow(2,be.zoom-rt.tileID.overscaledZ);Iu(mt,De,We,Ue,be,Gt,Ye.posMatrix,Lt,ct,Pn,de.style.map.terrain?(on,Yt)=>de.style.map.terrain.getElevation(Ye,on,Yt):null)}}}(M,x,I,A,I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),z),I.paint.get("icon-opacity").constantOr(1)!==0&&Pu(x,A,I,M,!1,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),I.layout.get("icon-rotation-alignment"),I.layout.get("icon-pitch-alignment"),I.layout.get("icon-keep-upright"),V,$),I.paint.get("text-opacity").constantOr(1)!==0&&Pu(x,A,I,M,!0,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.layout.get("text-keep-upright"),V,$),A.map.showCollisionBoxes&&(bp(x,A,I,M,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),!0),bp(x,A,I,M,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),!1))})(a,d,p,g,this.style.placement.variableOffsets);break;case"circle":(function(x,A,I,M){if(x.renderPass!=="translucent")return;const z=I.paint.get("circle-opacity"),V=I.paint.get("circle-stroke-width"),$=I.paint.get("circle-stroke-opacity"),Y=!I.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(V.constantOr(1)===0||$.constantOr(1)===0))return;const de=x.context,ue=de.gl,pe=x.depthModeForSublayer(0,zn.ReadOnly),oe=Ir.disabled,Ee=x.colorModeForRenderPass(),Ue=[];for(let be=0;be<M.length;be++){const De=M[be],We=A.getTile(De),Ye=We.getBucket(I);if(!Ye)continue;const rt=Ye.programConfigurations.get(I.id),mt=x.useProgram("circle",rt),ct=Ye.layoutVertexBuffer,Tt=Ye.indexBuffer,Gt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(De),Pn={programConfiguration:rt,program:mt,layoutVertexBuffer:ct,indexBuffer:Tt,uniformValues:Qs(x,De,We,I),terrainData:Gt};if(Y){const Lt=Ye.segments.get();for(const on of Lt)Ue.push({segments:new l.S([on]),sortKey:on.sortKey,state:Pn})}else Ue.push({segments:Ye.segments,sortKey:0,state:Pn})}Y&&Ue.sort((be,De)=>be.sortKey-De.sortKey);for(const be of Ue){const{programConfiguration:De,program:We,layoutVertexBuffer:Ye,indexBuffer:rt,uniformValues:mt,terrainData:ct}=be.state;We.draw(de,ue.TRIANGLES,pe,oe,Ee,wr.disabled,mt,ct,I.id,Ye,rt,be.segments,I.paint,x.transform.zoom,De)}})(a,d,p,g);break;case"heatmap":(function(x,A,I,M){if(I.paint.get("heatmap-opacity")!==0)if(x.renderPass==="offscreen"){const z=x.context,V=z.gl,$=Ir.disabled,Y=new Er([V.ONE,V.ONE],l.aT.transparent,[!0,!0,!0,!0]);(function(de,ue,pe){const oe=de.gl;de.activeTexture.set(oe.TEXTURE1),de.viewport.set([0,0,ue.width/4,ue.height/4]);let Ee=pe.heatmapFbo;if(Ee)oe.bindTexture(oe.TEXTURE_2D,Ee.colorAttachment.get()),de.bindFramebuffer.set(Ee.framebuffer);else{const Ue=oe.createTexture();oe.bindTexture(oe.TEXTURE_2D,Ue),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_S,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_T,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MIN_FILTER,oe.LINEAR),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MAG_FILTER,oe.LINEAR),Ee=pe.heatmapFbo=de.createFramebuffer(ue.width/4,ue.height/4,!1,!1),function(be,De,We,Ye){var rt,mt;const ct=be.gl,Tt=(rt=be.HALF_FLOAT)!==null&&rt!==void 0?rt:ct.UNSIGNED_BYTE,Gt=(mt=be.RGBA16F)!==null&&mt!==void 0?mt:ct.RGBA;ct.texImage2D(ct.TEXTURE_2D,0,Gt,De.width/4,De.height/4,0,ct.RGBA,Tt,null),Ye.colorAttachment.set(We)}(de,ue,Ue,Ee)}})(z,x,I),z.clear({color:l.aT.transparent});for(let de=0;de<M.length;de++){const ue=M[de];if(A.hasRenderableParent(ue))continue;const pe=A.getTile(ue),oe=pe.getBucket(I);if(!oe)continue;const Ee=oe.programConfigurations.get(I.id),Ue=x.useProgram("heatmap",Ee),{zoom:be}=x.transform;Ue.draw(z,V.TRIANGLES,zn.disabled,$,Y,wr.disabled,Bv(ue.posMatrix,pe,be,I.paint.get("heatmap-intensity")),null,I.id,oe.layoutVertexBuffer,oe.indexBuffer,oe.segments,I.paint,x.transform.zoom,Ee)}z.viewport.set([0,0,x.width,x.height])}else x.renderPass==="translucent"&&(x.context.setColorMode(x.colorModeForRenderPass()),function(z,V){const $=z.context,Y=$.gl,de=V.heatmapFbo;if(!de)return;$.activeTexture.set(Y.TEXTURE0),Y.bindTexture(Y.TEXTURE_2D,de.colorAttachment.get()),$.activeTexture.set(Y.TEXTURE1);let ue=V.colorRampTexture;ue||(ue=V.colorRampTexture=new ne($,V.colorRamp,Y.RGBA)),ue.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),z.useProgram("heatmapTexture").draw($,Y.TRIANGLES,zn.disabled,Ir.disabled,z.colorModeForRenderPass(),wr.disabled,((pe,oe,Ee,Ue)=>{const be=l.Z();l.aS(be,0,pe.width,pe.height,0,0,1);const De=pe.context.gl;return{u_matrix:be,u_world:[De.drawingBufferWidth,De.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:oe.paint.get("heatmap-opacity")}})(z,V),null,V.id,z.viewportBuffer,z.quadTriangleIndexBuffer,z.viewportSegments,V.paint,z.transform.zoom)}(x,I))})(a,d,p,g);break;case"line":(function(x,A,I,M){if(x.renderPass!=="translucent")return;const z=I.paint.get("line-opacity"),V=I.paint.get("line-width");if(z.constantOr(1)===0||V.constantOr(1)===0)return;const $=x.depthModeForSublayer(0,zn.ReadOnly),Y=x.colorModeForRenderPass(),de=I.paint.get("line-dasharray"),ue=I.paint.get("line-pattern"),pe=ue.constantOr(1),oe=I.paint.get("line-gradient"),Ee=I.getCrossfadeParameters(),Ue=pe?"linePattern":de?"lineSDF":oe?"lineGradient":"line",be=x.context,De=be.gl;let We=!0;for(const Ye of M){const rt=A.getTile(Ye);if(pe&&!rt.patternsLoaded())continue;const mt=rt.getBucket(I);if(!mt)continue;const ct=mt.programConfigurations.get(I.id),Tt=x.context.program.get(),Gt=x.useProgram(Ue,ct),Pn=We||Gt.program!==Tt,Lt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Ye),on=ue.constantOr(null);if(on&&rt.imageAtlas){const An=rt.imageAtlas,_n=An.patternPositions[on.to.toString()],Dn=An.patternPositions[on.from.toString()];_n&&Dn&&ct.setConstantPatternPositions(_n,Dn)}const Yt=Lt?Ye:null,Jn=pe?Vv(x,rt,I,Ee,Yt):de?up(x,rt,I,de,Ee,Yt):oe?cp(x,rt,I,mt.lineClipsArray.length,Yt):Wd(x,rt,I,Yt);if(pe)be.activeTexture.set(De.TEXTURE0),rt.imageAtlasTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE),ct.updatePaintBuffers(Ee);else if(de&&(Pn||x.lineAtlas.dirty))be.activeTexture.set(De.TEXTURE0),x.lineAtlas.bind(be);else if(oe){const An=mt.gradients[I.id];let _n=An.texture;if(I.gradientVersion!==An.version){let Dn=256;if(I.stepInterpolant){const $r=A.getSource().maxzoom,hr=Ye.canonical.z===$r?Math.ceil(1<<x.transform.maxZoom-Ye.canonical.z):1;Dn=l.ad(l.aY(mt.maxLineLength/l.N*1024*hr),256,be.maxTextureSize)}An.gradient=l.aZ({expression:I.gradientExpression(),evaluationKey:"lineProgress",resolution:Dn,image:An.gradient||void 0,clips:mt.lineClipsArray}),An.texture?An.texture.update(An.gradient):An.texture=new ne(be,An.gradient,De.RGBA),An.version=I.gradientVersion,_n=An.texture}be.activeTexture.set(De.TEXTURE0),_n.bind(I.stepInterpolant?De.NEAREST:De.LINEAR,De.CLAMP_TO_EDGE)}Gt.draw(be,De.TRIANGLES,$,x.stencilModeForClipping(Ye),Y,wr.disabled,Jn,Lt,I.id,mt.layoutVertexBuffer,mt.indexBuffer,mt.segments,I.paint,x.transform.zoom,ct,mt.layoutVertexBuffer2),We=!1}})(a,d,p,g);break;case"fill":(function(x,A,I,M){const z=I.paint.get("fill-color"),V=I.paint.get("fill-opacity");if(V.constantOr(1)===0)return;const $=x.colorModeForRenderPass(),Y=I.paint.get("fill-pattern"),de=x.opaquePassEnabledForLayer()&&!Y.constantOr(1)&&z.constantOr(l.aT.transparent).a===1&&V.constantOr(0)===1?"opaque":"translucent";if(x.renderPass===de){const ue=x.depthModeForSublayer(1,x.renderPass==="opaque"?zn.ReadWrite:zn.ReadOnly);vc(x,A,I,M,ue,$,!1)}if(x.renderPass==="translucent"&&I.paint.get("fill-antialias")){const ue=x.depthModeForSublayer(I.getPaintProperty("fill-outline-color")?2:0,zn.ReadOnly);vc(x,A,I,M,ue,$,!0)}})(a,d,p,g);break;case"fill-extrusion":(function(x,A,I,M){const z=I.paint.get("fill-extrusion-opacity");if(z!==0&&x.renderPass==="translucent"){const V=new zn(x.context.gl.LEQUAL,zn.ReadWrite,x.depthRangeFor3D);if(z!==1||I.paint.get("fill-extrusion-pattern").constantOr(1))yc(x,A,I,M,V,Ir.disabled,Er.disabled),yc(x,A,I,M,V,x.stencilModeFor3D(),x.colorModeForRenderPass());else{const $=x.colorModeForRenderPass();yc(x,A,I,M,V,Ir.disabled,$)}}})(a,d,p,g);break;case"hillshade":(function(x,A,I,M){if(x.renderPass!=="offscreen"&&x.renderPass!=="translucent")return;const z=x.context,V=x.depthModeForSublayer(0,zn.ReadOnly),$=x.colorModeForRenderPass(),[Y,de]=x.renderPass==="translucent"?x.stencilConfigForOverlap(M):[{},M];for(const ue of de){const pe=A.getTile(ue);pe.needsHillshadePrepare!==void 0&&pe.needsHillshadePrepare&&x.renderPass==="offscreen"?ch(x,pe,I,V,Ir.disabled,$):x.renderPass==="translucent"&&Wv(x,ue,pe,I,V,Y[ue.overscaledZ],$)}z.viewport.set([0,0,x.width,x.height])})(a,d,p,g);break;case"raster":(function(x,A,I,M){if(x.renderPass!=="translucent"||I.paint.get("raster-opacity")===0||!M.length)return;const z=x.context,V=z.gl,$=A.getSource(),Y=x.useProgram("raster"),de=x.colorModeForRenderPass(),[ue,pe]=$ instanceof Be?[{},M]:x.stencilConfigForOverlap(M),oe=pe[pe.length-1].overscaledZ,Ee=!x.options.moving;for(const Ue of pe){const be=x.depthModeForSublayer(Ue.overscaledZ-oe,I.paint.get("raster-opacity")===1?zn.ReadWrite:zn.ReadOnly,V.LESS),De=A.getTile(Ue);De.registerFadeDuration(I.paint.get("raster-fade-duration"));const We=A.findLoadedParent(Ue,0),Ye=Yv(De,We,A,I,x.transform,x.style.map.terrain);let rt,mt;const ct=I.paint.get("raster-resampling")==="nearest"?V.NEAREST:V.LINEAR;z.activeTexture.set(V.TEXTURE0),De.texture.bind(ct,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(V.TEXTURE1),We?(We.texture.bind(ct,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),rt=Math.pow(2,We.tileID.overscaledZ-De.tileID.overscaledZ),mt=[De.tileID.canonical.x*rt%1,De.tileID.canonical.y*rt%1]):De.texture.bind(ct,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST);const Tt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Ue),Gt=Tt?Ue:null,Pn=Gt?Gt.posMatrix:x.transform.calculatePosMatrix(Ue.toUnwrapped(),Ee),Lt=hp(Pn,mt||[0,0],rt||1,Ye,I);$ instanceof Be?Y.draw(z,V.TRIANGLES,be,Ir.disabled,de,wr.disabled,Lt,Tt,I.id,$.boundsBuffer,x.quadTriangleIndexBuffer,$.boundsSegments):Y.draw(z,V.TRIANGLES,be,ue[Ue.overscaledZ],de,wr.disabled,Lt,Tt,I.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}})(a,d,p,g);break;case"background":(function(x,A,I,M){const z=I.paint.get("background-color"),V=I.paint.get("background-opacity");if(V===0)return;const $=x.context,Y=$.gl,de=x.transform,ue=de.tileSize,pe=I.paint.get("background-pattern");if(x.isPatternMissing(pe))return;const oe=!pe&&z.a===1&&V===1&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass!==oe)return;const Ee=Ir.disabled,Ue=x.depthModeForSublayer(0,oe==="opaque"?zn.ReadWrite:zn.ReadOnly),be=x.colorModeForRenderPass(),De=x.useProgram(pe?"backgroundPattern":"background"),We=M||de.coveringTiles({tileSize:ue,terrain:x.style.map.terrain});pe&&($.activeTexture.set(Y.TEXTURE0),x.imageManager.bind(x.context));const Ye=I.getCrossfadeParameters();for(const rt of We){const mt=M?rt.posMatrix:x.transform.calculatePosMatrix(rt.toUnwrapped()),ct=pe?Ca(mt,V,x,pe,{tileID:rt,tileSize:ue},Ye):yu(mt,V,z),Tt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(rt);De.draw($,Y.TRIANGLES,Ue,Ee,be,wr.disabled,ct,Tt,I.id,x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}})(a,0,p,g);break;case"custom":(function(x,A,I){const M=x.context,z=I.implementation;if(x.renderPass==="offscreen"){const V=z.prerender;V&&(x.setCustomLayerDefaults(),M.setColorMode(x.colorModeForRenderPass()),V.call(z,M.gl,x.transform.customLayerMatrix()),M.setDirty(),x.setBaseState())}else if(x.renderPass==="translucent"){x.setCustomLayerDefaults(),M.setColorMode(x.colorModeForRenderPass()),M.setStencilMode(Ir.disabled);const V=z.renderingMode==="3d"?new zn(x.context.gl.LEQUAL,zn.ReadWrite,x.depthRangeFor3D):x.depthModeForSublayer(0,zn.ReadOnly);M.setDepthMode(V),z.render(M.gl,x.transform.customLayerMatrix()),M.setDirty(),x.setBaseState(),M.bindFramebuffer.set(null)}})(a,0,p)}}translatePosMatrix(a,d,p,g,x){if(!p[0]&&!p[1])return a;const A=x?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(A){const z=Math.sin(A),V=Math.cos(A);p=[p[0]*V-p[1]*z,p[0]*z+p[1]*V]}const I=[x?p[0]:Ae(d,p[0],this.transform.zoom),x?p[1]:Ae(d,p[1],this.transform.zoom),0],M=new Float32Array(16);return l.$(M,a,I),M}saveTileTexture(a){const d=this._tileTextures[a.size[0]];d?d.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){const d=this._tileTextures[a];return d&&d.length>0?d.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;const d=this.imageManager.getPattern(a.from.toString()),p=this.imageManager.getPattern(a.to.toString());return!d||!p}useProgram(a,d){this.cache=this.cache||{};const p=a+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new pu(this.context,Ar[a],d,_u[a],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ne(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:a,drawingBufferHeight:d}=this.context.gl;return this.width!==a||this.height!==d}}class Yi{constructor(a,d){this.points=a,this.planes=d}static fromInvProjectionMatrix(a,d,p){const g=Math.pow(2,p),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{const M=1/(I=l.ag([],I,a))[3]/d*g;return l.b3(I,I,[M,M,1/I[3],M])}),A=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{const M=function(Y,de){var ue=de[0],pe=de[1],oe=de[2],Ee=ue*ue+pe*pe+oe*oe;return Ee>0&&(Ee=1/Math.sqrt(Ee)),Y[0]=de[0]*Ee,Y[1]=de[1]*Ee,Y[2]=de[2]*Ee,Y}([],function(Y,de,ue){var pe=de[0],oe=de[1],Ee=de[2],Ue=ue[0],be=ue[1],De=ue[2];return Y[0]=oe*De-Ee*be,Y[1]=Ee*Ue-pe*De,Y[2]=pe*be-oe*Ue,Y}([],ie([],x[I[0]],x[I[1]]),ie([],x[I[2]],x[I[1]]))),z=-((V=M)[0]*($=x[I[1]])[0]+V[1]*$[1]+V[2]*$[2]);var V,$;return M.concat(z)});return new Yi(x,A)}}class El{constructor(a,d){this.min=a,this.max=d,this.center=function(p,g,x){return p[0]=.5*g[0],p[1]=.5*g[1],p[2]=.5*g[2],p}([],function(p,g,x){return p[0]=g[0]+x[0],p[1]=g[1]+x[1],p[2]=g[2]+x[2],p}([],this.min,this.max))}quadrant(a){const d=[a%2==0,a<2],p=ee(this.min),g=ee(this.max);for(let x=0;x<d.length;x++)p[x]=d[x]?this.min[x]:this.center[x],g[x]=d[x]?this.center[x]:this.max[x];return g[2]=this.max[2],new El(p,g)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersects(a){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let g=0;g<a.planes.length;g++){const x=a.planes[g];let A=0;for(let I=0;I<d.length;I++)l.b4(x,d[I])>=0&&A++;if(A===0)return 0;A!==d.length&&(p=!1)}if(p)return 2;for(let g=0;g<3;g++){let x=Number.MAX_VALUE,A=-Number.MAX_VALUE;for(let I=0;I<a.points.length;I++){const M=a.points[I][g]-this.min[g];x=Math.min(x,M),A=Math.max(A,M)}if(A<0||x>this.max[g]-this.min[g])return 0}return 1}}class bc{constructor(a=0,d=0,p=0,g=0){if(isNaN(a)||a<0||isNaN(d)||d<0||isNaN(p)||p<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=d,this.left=p,this.right=g}interpolate(a,d,p){return d.top!=null&&a.top!=null&&(this.top=l.B.number(a.top,d.top,p)),d.bottom!=null&&a.bottom!=null&&(this.bottom=l.B.number(a.bottom,d.bottom,p)),d.left!=null&&a.left!=null&&(this.left=l.B.number(a.left,d.left,p)),d.right!=null&&a.right!=null&&(this.right=l.B.number(a.right,d.right,p)),this}getCenter(a,d){const p=l.ad((this.left+a-this.right)/2,0,a),g=l.ad((this.top+d-this.bottom)/2,0,d);return new l.P(p,g)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new bc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Ru{constructor(a,d,p,g,x){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=x===void 0||!!x,this._minZoom=a||0,this._maxZoom=d||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new bc,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const a=new Ru(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return a.apply(this),a}apply(a){this.tileSize=a.tileSize,this.latRange=a.latRange,this.width=a.width,this.height=a.height,this._center=a._center,this._elevation=a._elevation,this._minEleveationForCurrentTile=a._minEleveationForCurrentTile,this.zoom=a.zoom,this.angle=a.angle,this._fov=a._fov,this._pitch=a._pitch,this._unmodified=a._unmodified,this._edgeInsets=a._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(a){const d=-l.b5(a,-180,180)*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=function(){var p=new l.A(4);return l.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,g,x){var A=g[0],I=g[1],M=g[2],z=g[3],V=Math.sin(x),$=Math.cos(x);p[0]=A*$+M*V,p[1]=I*$+z*V,p[2]=A*-V+M*$,p[3]=I*-V+z*$}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(a){const d=l.ad(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=a/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(a){const d=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.tileZoom=Math.max(0,Math.floor(d)),this.scale=this.zoomScale(d),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,d,p){this._unmodified=!1,this._edgeInsets.interpolate(a,d,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){const d=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(a){const d=[new l.b6(0,a)];if(this._renderWorldCopies){const p=this.pointCoordinate(new l.P(0,0)),g=this.pointCoordinate(new l.P(this.width,0)),x=this.pointCoordinate(new l.P(this.width,this.height)),A=this.pointCoordinate(new l.P(0,this.height)),I=Math.floor(Math.min(p.x,g.x,x.x,A.x)),M=Math.floor(Math.max(p.x,g.x,x.x,A.x)),z=1;for(let V=I-z;V<=M+z;V++)V!==0&&d.push(new l.b6(V,a))}return d}coveringTiles(a){var d,p;let g=this.coveringZoomLevel(a);const x=g;if(a.minzoom!==void 0&&g<a.minzoom)return[];a.maxzoom!==void 0&&g>a.maxzoom&&(g=a.maxzoom);const A=this.pointCoordinate(this.getCameraPoint()),I=l.U.fromLngLat(this.center),M=Math.pow(2,g),z=[M*A.x,M*A.y,0],V=[M*I.x,M*I.y,0],$=Yi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let Y=a.minzoom||0;!a.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Y=g);const de=a.terrain?2/Math.min(this.tileSize,a.tileSize)*this.tileSize:3,ue=be=>({aabb:new El([be*M,0,0],[(be+1)*M,M,0]),zoom:0,x:0,y:0,wrap:be,fullyVisible:!1}),pe=[],oe=[],Ee=g,Ue=a.reparseOverscaled?x:g;if(this._renderWorldCopies)for(let be=1;be<=3;be++)pe.push(ue(-be)),pe.push(ue(be));for(pe.push(ue(0));pe.length>0;){const be=pe.pop(),De=be.x,We=be.y;let Ye=be.fullyVisible;if(!Ye){const Gt=be.aabb.intersects($);if(Gt===0)continue;Ye=Gt===2}const rt=a.terrain?z:V,mt=be.aabb.distanceX(rt),ct=be.aabb.distanceY(rt),Tt=Math.max(Math.abs(mt),Math.abs(ct));if(be.zoom===Ee||Tt>de+(1<<Ee-be.zoom)-2&&be.zoom>=Y){const Gt=Ee-be.zoom,Pn=z[0]-.5-(De<<Gt),Lt=z[1]-.5-(We<<Gt);oe.push({tileID:new l.O(be.zoom===Ee?Ue:be.zoom,be.wrap,be.zoom,De,We),distanceSq:se([V[0]-.5-De,V[1]-.5-We]),tileDistanceToCamera:Math.sqrt(Pn*Pn+Lt*Lt)})}else for(let Gt=0;Gt<4;Gt++){const Pn=(De<<1)+Gt%2,Lt=(We<<1)+(Gt>>1),on=be.zoom+1;let Yt=be.aabb.quadrant(Gt);if(a.terrain){const Jn=new l.O(on,be.wrap,on,Pn,Lt),An=a.terrain.getMinMaxElevation(Jn),_n=(d=An.minElevation)!==null&&d!==void 0?d:this.elevation,Dn=(p=An.maxElevation)!==null&&p!==void 0?p:this.elevation;Yt=new El([Yt.min[0],Yt.min[1],_n],[Yt.max[0],Yt.max[1],Dn])}pe.push({aabb:Yt,zoom:on,x:Pn,y:Lt,wrap:be.wrap,fullyVisible:Ye})}}return oe.sort((be,De)=>be.distanceSq-De.distanceSq).map(be=>be.tileID)}resize(a,d){this.width=a,this.height=d,this.pixelsToGLUnits=[2/a,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){const d=l.ad(a.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.P(l.G(a.lng)*this.worldSize,l.H(d)*this.worldSize)}unproject(a){return new l.U(a.x/this.worldSize,a.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(a){const d=this.pointLocation(this.centerPoint,a),p=a.getElevationForLngLatZoom(d,this.tileZoom);if(!(this.elevation-p))return;const g=this.getCameraPosition(),x=l.U.fromLngLat(g.lngLat,g.altitude),A=l.U.fromLngLat(d,p),I=x.x-A.x,M=x.y-A.y,z=x.z-A.z,V=Math.sqrt(I*I+M*M+z*z),$=this.scaleZoom(this.cameraToCenterDistance/V/this.tileSize);this._elevation=p,this._center=d,this.zoom=$}setLocationAtPoint(a,d){const p=this.pointCoordinate(d),g=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(a),A=new l.U(x.x-(p.x-g.x),x.y-(p.y-g.y));this.center=this.coordinateLocation(A),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(a,d){return d?this.coordinatePoint(this.locationCoordinate(a),d.getElevationForLngLatZoom(a,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(a))}pointLocation(a,d){return this.coordinateLocation(this.pointCoordinate(a,d))}locationCoordinate(a){return l.U.fromLngLat(a)}coordinateLocation(a){return a&&a.toLngLat()}pointCoordinate(a,d){if(d){const Y=d.pointCoordinate(a);if(Y!=null)return Y}const p=[a.x,a.y,0,1],g=[a.x,a.y,1,1];l.ag(p,p,this.pixelMatrixInverse),l.ag(g,g,this.pixelMatrixInverse);const x=p[3],A=g[3],I=p[1]/x,M=g[1]/A,z=p[2]/x,V=g[2]/A,$=z===V?0:(0-z)/(V-z);return new l.U(l.B.number(p[0]/x,g[0]/A,$)/this.worldSize,l.B.number(I,M,$)/this.worldSize)}coordinatePoint(a,d=0,p=this.pixelMatrix){const g=[a.x*this.worldSize,a.y*this.worldSize,d,1];return l.ag(g,g,p),new l.P(g[0]/g[3],g[1]/g[3])}getBounds(){const a=Math.max(0,this.height/2-this.getHorizon());return new tt().extend(this.pointLocation(new l.P(0,a))).extend(this.pointLocation(new l.P(this.width,a))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new tt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(a){a?(this.lngRange=[a.getWest(),a.getEast()],this.latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(a,d=!1){const p=a.key,g=d?this._alignedPosMatrixCache:this._posMatrixCache;if(g[p])return g[p];const x=a.canonical,A=this.worldSize/this.zoomScale(x.z),I=x.x+Math.pow(2,x.z)*a.wrap,M=l.ao(new Float64Array(16));return l.$(M,M,[I*A,x.y*A,0]),l.a0(M,M,[A/l.N,A/l.N,1]),l.a1(M,d?this.alignedProjMatrix:this.projMatrix,M),g[p]=new Float32Array(M),g[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let a,d,p,g,x=-90,A=90,I=-180,M=180;const z=this.size,V=this._unmodified;if(this.latRange){const de=this.latRange;x=l.H(de[1])*this.worldSize,A=l.H(de[0])*this.worldSize,a=A-x<z.y?z.y/(A-x):0}if(this.lngRange){const de=this.lngRange;I=l.b5(l.G(de[0])*this.worldSize,0,this.worldSize),M=l.b5(l.G(de[1])*this.worldSize,0,this.worldSize),M<I&&(M+=this.worldSize),d=M-I<z.x?z.x/(M-I):0}const $=this.point,Y=Math.max(d||0,a||0);if(Y)return this.center=this.unproject(new l.P(d?(M+I)/2:$.x,a?(A+x)/2:$.y)),this.zoom+=this.scaleZoom(Y),this._unmodified=V,void(this._constraining=!1);if(this.latRange){const de=$.y,ue=z.y/2;de-ue<x&&(g=x+ue),de+ue>A&&(g=A-ue)}if(this.lngRange){const de=(I+M)/2,ue=l.b5($.x,de-this.worldSize/2,de+this.worldSize/2),pe=z.x/2;ue-pe<I&&(p=I+pe),ue+pe>M&&(p=M-pe)}p===void 0&&g===void 0||(this.center=this.unproject(new l.P(p!==void 0?p:$.x,g!==void 0?g:$.y)).wrap()),this._unmodified=V,this._constraining=!1}_calcMatrices(){if(!this.height)return;const a=this.centerOffset,d=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b7(1,this.center.lat)*this.worldSize;let g=l.ao(new Float64Array(16));l.a0(g,g,[this.width/2,-this.height/2,1]),l.$(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=l.ao(new Float64Array(16)),l.a0(g,g,[1,-1,1]),l.$(g,g,[-1,-1,0]),l.a0(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const x=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),A=Math.min(this.elevation,this._minEleveationForCurrentTile),I=x-A*this._pixelPerMeter/Math.cos(this._pitch),M=A<0?I:x,z=Math.PI/2+this._pitch,V=this._fov*(.5+a.y/this.height),$=Math.sin(V)*M/Math.sin(l.ad(Math.PI-z-V,.01,Math.PI-.01)),Y=this.getHorizon(),de=2*Math.atan(Y/this.cameraToCenterDistance)*(.5+a.y/(2*Y)),ue=Math.sin(de)*M/Math.sin(l.ad(Math.PI-z-de,.01,Math.PI-.01)),pe=Math.min($,ue),oe=1.01*(Math.cos(Math.PI/2-this._pitch)*pe+M),Ee=this.height/50;g=new Float64Array(16),l.b8(g,this._fov,this.width/this.height,Ee,oe),g[8]=2*-a.x/this.width,g[9]=2*a.y/this.height,l.a0(g,g,[1,-1,1]),l.$(g,g,[0,0,-this.cameraToCenterDistance]),l.b9(g,g,this._pitch),l.ae(g,g,this.angle),l.$(g,g,[-d,-p,0]),this.mercatorMatrix=l.a0([],g,[this.worldSize,this.worldSize,this.worldSize]),l.a0(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.a1(new Float64Array(16),this.labelPlaneMatrix,g),l.$(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=l.as([],g),this.pixelMatrix3D=l.a1(new Float64Array(16),this.labelPlaneMatrix,g);const Ue=this.width%2/2,be=this.height%2/2,De=Math.cos(this.angle),We=Math.sin(this.angle),Ye=d-Math.round(d)+De*Ue+We*be,rt=p-Math.round(p)+De*be+We*Ue,mt=new Float64Array(g);if(l.$(mt,mt,[Ye>.5?Ye-1:Ye,rt>.5?rt-1:rt,0]),this.alignedProjMatrix=mt,g=l.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const a=this.pointCoordinate(new l.P(0,0)),d=[a.x*this.worldSize,a.y*this.worldSize,0,1];return l.ag(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,a))}getCameraQueryGeometry(a){const d=this.getCameraPoint();if(a.length===1)return[a[0],d];{let p=d.x,g=d.y,x=d.x,A=d.y;for(const I of a)p=Math.min(p,I.x),g=Math.min(g,I.y),x=Math.max(x,I.x),A=Math.max(A,I.y);return[new l.P(p,g),new l.P(x,g),new l.P(x,A),new l.P(p,A),new l.P(p,g)]}}}function Vo(y,a){let d,p=!1,g=null,x=null;const A=()=>{g=null,p&&(y.apply(x,d),g=setTimeout(A,a),p=!1)};return(...I)=>(p=!0,x=this,d=I,g||A(),g)}class xc{constructor(a){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let p;return d.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(p=g)}),(p&&p[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(d.length>=3&&!d.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:p,pitch:+(d[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,d)}catch{}},this._updateHash=Vo(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(a){const d=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,g=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,g),A=Math.round(d.lng*x)/x,I=Math.round(d.lat*x)/x,M=this._map.getBearing(),z=this._map.getPitch();let V="";if(V+=a?`/${A}/${I}/${p}`:`${p}/${I}/${A}`,(M||z)&&(V+="/"+Math.round(10*M)/10),z&&(V+=`/${Math.round(z)}`),this._hashName){const $=this._hashName;let Y=!1;const de=window.location.hash.slice(1).split("&").map(ue=>{const pe=ue.split("=")[0];return pe===$?(Y=!0,`${pe}=${V}`):ue}).filter(ue=>ue);return Y||de.push(`${$}=${V}`),`#${de.join("&")}`}return`#${V}`}}const Il={linearity:.3,easing:l.ba(0,0,.3,1)},Cp=l.e({deceleration:2500,maxSpeed:1400},Il),Tp=l.e({deceleration:20,maxSpeed:1400},Il),Ap=l.e({deceleration:1e3,maxSpeed:360},Il),Ep=l.e({deceleration:1e3,maxSpeed:90},Il);class Ip{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.h.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,d=l.h.now();for(;a.length>0&&d-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)d.zoom+=x.zoomDelta||0,d.bearing+=x.bearingDelta||0,d.pitch+=x.pitchDelta||0,x.panDelta&&d.pan._add(x.panDelta),x.around&&(d.around=x.around),x.pinchAround&&(d.pinchAround=x.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(d.pan.mag()){const x=wc(d.pan.mag(),p,l.e({},Cp,a||{}));g.offset=d.pan.mult(x.amount/d.pan.mag()),g.center=this._map.transform.center,ts(g,x)}if(d.zoom){const x=wc(d.zoom,p,Tp);g.zoom=this._map.transform.zoom+x.amount,ts(g,x)}if(d.bearing){const x=wc(d.bearing,p,Ap);g.bearing=this._map.transform.bearing+l.ad(x.amount,-179,179),ts(g,x)}if(d.pitch){const x=wc(d.pitch,p,Ep);g.pitch=this._map.transform.pitch+x.amount,ts(g,x)}if(g.zoom||g.bearing){const x=d.pinchAround===void 0?d.around:d.pinchAround;g.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),l.e(g,{noMoveStart:!0})}}function ts(y,a){(!y.duration||y.duration<a.duration)&&(y.duration=a.duration,y.easing=a.easing)}function wc(y,a,d){const{maxSpeed:p,linearity:g,deceleration:x}=d,A=l.ad(y*g/(a/1e3),-p,p),I=Math.abs(A)/(x*g);return{easing:d.easing,duration:1e3*I,amount:A*(I/2)}}class da extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,p,g={}){const x=_.mousePos(d.getCanvasContainer(),p),A=d.unproject(x);super(a,l.e({point:x,lngLat:A,originalEvent:p},g)),this._defaultPrevented=!1,this.target=d}}class Sc extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,p){const g=a==="touchend"?p.changedTouches:p.touches,x=_.touchPos(d.getCanvasContainer(),g),A=x.map(M=>d.unproject(M)),I=x.reduce((M,z,V,$)=>M.add(z.div($.length)),new l.P(0,0));super(a,{points:x,point:I,lngLats:A,lngLat:d.unproject(I),originalEvent:p}),this._defaultPrevented=!1}}class Pp extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,p){super(a,{originalEvent:p}),this._defaultPrevented=!1}}class Dp{constructor(a,d){this._map=a,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new Pp(a.type,this._map,a))}mousedown(a,d){return this._mousedownPos=d,this._firePreventable(new da(a.type,this._map,a))}mouseup(a){this._map.fire(new da(a.type,this._map,a))}click(a,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new da(a.type,this._map,a))}dblclick(a){return this._firePreventable(new da(a.type,this._map,a))}mouseover(a){this._map.fire(new da(a.type,this._map,a))}mouseout(a){this._map.fire(new da(a.type,this._map,a))}touchstart(a){return this._firePreventable(new Sc(a.type,this._map,a))}touchmove(a){this._map.fire(new Sc(a.type,this._map,a))}touchend(a){this._map.fire(new Sc(a.type,this._map,a))}touchcancel(a){this._map.fire(new Sc(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Mp{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new da(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new da("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new da(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Es{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.pointLocation(l.P.convert(a),this._map.terrain)}}class Lp{constructor(a,d){this._map=a,this._tr=new Es(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,d){this.isEnabled()&&a.shiftKey&&a.button===0&&(_.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(a,d){if(!this._active)return;const p=d;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=p,this._box||(this._box=_.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));const x=Math.min(g.x,p.x),A=Math.max(g.x,p.x),I=Math.min(g.y,p.y),M=Math.max(g.y,p.y);_.setTransform(this._box,`translate(${x}px,${I}px)`),this._box.style.width=A-x+"px",this._box.style.height=M-I+"px"}mouseupWindow(a,d){if(!this._active||a.button!==0)return;const p=this._startPos,g=d;if(this.reset(),_.suppressClick(),p.x!==g.x||p.y!==g.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:a})),{cameraAnimation:x=>x.fitScreenCoordinates(p,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(_.remove(this._box),this._box=null),_.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,d){return this._map.fire(new l.k(a,{originalEvent:d}))}}function Ta(y,a){if(y.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${a.length}`);const d={};for(let p=0;p<y.length;p++)d[y[p].identifier]=a[p];return d}class Is{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,d,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=a.timeStamp),p.length===this.numTouches&&(this.centroid=function(g){const x=new l.P(0,0);for(const A of g)x._add(A);return x.div(g.length)}(d),this.touches=Ta(p,d)))}touchmove(a,d,p){if(this.aborted||!this.centroid)return;const g=Ta(p,d);for(const x in this.touches){const A=g[x];(!A||A.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(a,d,p){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Ou{constructor(a){this.singleTap=new Is(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,d,p){this.singleTap.touchstart(a,d,p)}touchmove(a,d,p){this.singleTap.touchmove(a,d,p)}touchend(a,d,p){const g=this.singleTap.touchend(a,d,p);if(g){const x=a.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(g)<30;if(x&&A||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Ps{constructor(a){this._tr=new Es(a),this._zoomIn=new Ou({numTouches:1,numTaps:2}),this._zoomOut=new Ou({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,d,p){this._zoomIn.touchstart(a,d,p),this._zoomOut.touchstart(a,d,p)}touchmove(a,d,p){this._zoomIn.touchmove(a,d,p),this._zoomOut.touchmove(a,d,p)}touchend(a,d,p){const g=this._zoomIn.touchend(a,d,p),x=this._zoomOut.touchend(a,d,p),A=this._tr;return g?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:A.zoom+1,around:A.unproject(g)},{originalEvent:a})}):x?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:A.zoom-1,around:A.unproject(x)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ds{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){const d=this._moveFunction(...a);if(d.bearingDelta||d.pitchDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(a,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=d.length?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,d){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);const g=d.length?d[0]:d;return!this._moved&&g.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(p,g))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&_.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Zv={0:1,2:2};class dh{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){const d=_.mouseButton(a);this._eventButton=d}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!function(d,p){const g=Zv[p];return d.buttons===void 0||(d.buttons&g)!==g}(a,this._eventButton)}isValidEndEvent(a){return _.mouseButton(a)===this._eventButton}}class Rp{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return a.targetTouches.length===1}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}const zu=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(a){a.preventDefault()}},Pl=({enable:y,clickTolerance:a,bearingDegreesPerPixelMoved:d=.8})=>{const p=new dh({checkCorrectEvent:g=>_.mouseButton(g)===0&&g.ctrlKey||_.mouseButton(g)===2});return new Ds({clickTolerance:a,move:(g,x)=>({bearingDelta:(x.x-g.x)*d}),moveStateManager:p,enable:y,assignEvents:zu})},Ms=({enable:y,clickTolerance:a,pitchDegreesPerPixelMoved:d=-.5})=>{const p=new dh({checkCorrectEvent:g=>_.mouseButton(g)===0&&g.ctrlKey||_.mouseButton(g)===2});return new Ds({clickTolerance:a,move:(g,x)=>({pitchDelta:(x.y-g.y)*d}),moveStateManager:p,enable:y,assignEvents:zu})};class $t{constructor(a,d){this._minTouches=a.cooperativeGestures?2:1,this._clickTolerance=a.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(a,d,p){return this._calculateTransform(a,d,p)}touchmove(a,d,p){if(this._map._cooperativeGestures&&(this._minTouches===2&&p.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(a,!1,p.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(p.length<this._minTouches))return a.preventDefault(),this._calculateTransform(a,d,p)}touchend(a,d,p){this._calculateTransform(a,d,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,d,p){p.length>0&&(this._active=!0);const g=Ta(p,d),x=new l.P(0,0),A=new l.P(0,0);let I=0;for(const z in g){const V=g[z],$=this._touches[z];$&&(x._add(V),A._add(V.sub($)),I++,g[z]=V)}if(this._touches=g,I<this._minTouches||!A.mag())return;const M=A.div(I);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(I),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,d,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([d[0],d[1]]))}touchmove(a,d,p){if(!this._firstTwoTouches)return;a.preventDefault();const[g,x]=this._firstTwoTouches,A=no(p,d,g),I=no(p,d,x);if(!A||!I)return;const M=this._aroundCenter?null:A.add(I).div(2);return this._move([A,I],M,a)}touchend(a,d,p){if(!this._firstTwoTouches)return;const[g,x]=this._firstTwoTouches,A=no(p,d,g),I=no(p,d,x);A&&I||(this._active&&_.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function no(y,a,d){for(let p=0;p<y.length;p++)if(y[p].identifier===d)return a[p]}function Dl(y,a){return Math.log(y/a)/Math.LN2}class Op extends Fu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,d){const p=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Dl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Dl(this._distance,p),pinchAround:d}}}function Vt(y,a){return 180*y.angleWith(a)/Math.PI}class hh extends Fu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,d){const p=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Vt(this._vector,p),pinchAround:d}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const d=25/(Math.PI*this._minDiameter)*360,p=Vt(a,this._startVector);return Math.abs(p)<d}}function fh(y){return Math.abs(y.y)>Math.abs(y.x)}class Kv extends Fu{constructor(a){super(),this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,d,p){super.touchstart(a,d,p),this._currentTouchCount=p.length}_start(a){this._lastPoints=a,fh(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,d,p){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=a[0].sub(this._lastPoints[0]),x=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,x,p.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(g.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(a,d,p){if(this._valid!==void 0)return this._valid;const g=a.mag()>=2,x=d.mag()>=2;if(!g&&!x)return;if(!g||!x)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const A=a.y>0==d.y>0;return fh(a)&&fh(d)&&A}}const ph={panStep:100,bearingStep:15,pitchStep:10};class zp{constructor(a){this._tr=new Es(a);const d=ph;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let d=0,p=0,g=0,x=0,A=0;switch(a.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:a.shiftKey?p=-1:(a.preventDefault(),x=-1);break;case 39:a.shiftKey?p=1:(a.preventDefault(),x=1);break;case 38:a.shiftKey?g=1:(a.preventDefault(),A=-1);break;case 40:a.shiftKey?g=-1:(a.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(p=0,g=0),{cameraAnimation:I=>{const M=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:Fp,zoom:d?Math.round(M.zoom)+d*(a.shiftKey?2:1):M.zoom,bearing:M.bearing+p*this._bearingStep,pitch:M.pitch+g*this._pitchStep,offset:[-x*this._panStep,-A*this._panStep],center:M.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Fp(y){return y*(2-y)}const Bp=4.000244140625;class Xv{constructor(a,d){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=a,this._tr=new Es(a),this._el=a.getCanvasContainer(),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(a){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!a[this._map._metaKey])return;a.preventDefault()}let d=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const p=l.h.now(),g=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,d!==0&&d%Bp==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(g*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),a.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=a,this._delta-=d,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=_.mousePos(this._el,a),p=this._tr;this._around=l.L.convert(this._aroundCenter?p.center:p.unproject(d)),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._tr.transform;if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>Bp?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&M!==0&&(M=1/M);const z=typeof this._targetZoom=="number"?a.zoomScale(this._targetZoom):a.scale;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(z*M))),this._type==="wheel"&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom=="number"?this._targetZoom:a.zoom,p=this._startZoom,g=this._easing;let x,A=!1;if(this._type==="wheel"&&p&&g){const I=Math.min((l.h.now()-this._lastWheelEventTime)/200,1),M=g(I);x=l.B.number(p,d,M),I<1?this._frameId||(this._frameId=!0):A=!0}else x=d,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:x-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let d=l.bb;if(this._prevEase){const p=this._prevEase,g=(l.h.now()-p.start)/p.duration,x=p.easing(g+.01)-p.easing(g),A=.27/Math.sqrt(x*x+1e-4)*.01,I=Math.sqrt(.0729-A*A);d=l.ba(A,I,.25,1)}return this._prevEase={start:l.h.now(),duration:a,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class mh{constructor(a,d){this._clickZoom=a,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class gh{constructor(a){this._tr=new Es(a),this.reset()}reset(){this._active=!1}dblclick(a,d){return a.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(a.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vh{constructor(){this._tap=new Ou({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,d,p){if(!this._swipePoint)if(this._tapTime){const g=d[0],x=a.timeStamp-this._tapTime<500,A=this._tapPoint.dist(g)<30;x&&A?p.length>0&&(this._swipePoint=g,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(a,d,p)}touchmove(a,d,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const g=d[0],x=g.y-this._swipePoint.y;return this._swipePoint=g,a.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(a,d,p)}touchend(a,d,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const g=this._tap.touchend(a,d,p);g&&(this._tapTime=a.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yh{constructor(a,d,p){this._el=a,this._mousePan=d,this._touchPan=p}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Zi{constructor(a,d,p){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=d,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ro{constructor(a,d,p,g){this._el=a,this._touchZoom=d,this._touchRotate=p,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const kc=y=>y.zoom||y.drag||y.pitch||y.rotate;class _h extends l.k{}function Cc(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class bh{constructor(a,d){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,x)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const A=g.type==="renderFrame"?void 0:g,I={needsRenderFrame:!1},M={},z={},V=g.touches,$=V?this._getMapTouches(V):void 0,Y=$?_.touchPos(this._el,$):_.mousePos(this._el,g);for(const{handlerName:pe,handler:oe,allowed:Ee}of this._handlers){if(!oe.isEnabled())continue;let Ue;this._blockedByActive(z,Ee,pe)?oe.reset():oe[x||g.type]&&(Ue=oe[x||g.type](g,Y,$),this.mergeHandlerResult(I,M,Ue,pe,A),Ue&&Ue.needsRenderFrame&&this._triggerRenderFrame()),(Ue||oe.isActive())&&(z[pe]=oe)}const de={};for(const pe in this._previousActiveHandlers)z[pe]||(de[pe]=A);this._previousActiveHandlers=z,(Object.keys(de).length||Cc(I))&&(this._changes.push([I,M,de]),this._triggerRenderFrame()),(Object.keys(z).length||Cc(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ue}=I;ue&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ue(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ip(a),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,x,A]of this._listeners)_.addEventListener(g,x,g===document?this.handleWindowEvent:this.handleEvent,A)}destroy(){for(const[a,d,p]of this._listeners)_.removeEventListener(a,d,a===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(a){const d=this._map,p=d.getCanvasContainer();this._add("mapEvent",new Dp(d,a));const g=d.boxZoom=new Lp(d,a);this._add("boxZoom",g),a.interactive&&a.boxZoom&&g.enable();const x=new Ps(d),A=new gh(d);d.doubleClickZoom=new mh(A,x),this._add("tapZoom",x),this._add("clickZoom",A),a.interactive&&a.doubleClickZoom&&d.doubleClickZoom.enable();const I=new vh;this._add("tapDragZoom",I);const M=d.touchPitch=new Kv(d);this._add("touchPitch",M),a.interactive&&a.touchPitch&&d.touchPitch.enable(a.touchPitch);const z=Pl(a),V=Ms(a);d.dragRotate=new Zi(a,z,V),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",V,["mouseRotate"]),a.interactive&&a.dragRotate&&d.dragRotate.enable();const $=(({enable:Ee,clickTolerance:Ue})=>{const be=new dh({checkCorrectEvent:De=>_.mouseButton(De)===0&&!De.ctrlKey});return new Ds({clickTolerance:Ue,move:(De,We)=>({around:We,panDelta:We.sub(De)}),activateOnStart:!0,moveStateManager:be,enable:Ee,assignEvents:zu})})(a),Y=new $t(a,d);d.dragPan=new yh(p,$,Y),this._add("mousePan",$),this._add("touchPan",Y,["touchZoom","touchRotate"]),a.interactive&&a.dragPan&&d.dragPan.enable(a.dragPan);const de=new hh,ue=new Op;d.touchZoomRotate=new ro(p,ue,de,I),this._add("touchRotate",de,["touchPan","touchZoom"]),this._add("touchZoom",ue,["touchPan","touchRotate"]),a.interactive&&a.touchZoomRotate&&d.touchZoomRotate.enable(a.touchZoomRotate);const pe=d.scrollZoom=new Xv(d,()=>this._triggerRenderFrame());this._add("scrollZoom",pe,["mousePan"]),a.interactive&&a.scrollZoom&&d.scrollZoom.enable(a.scrollZoom);const oe=d.keyboard=new zp(d);this._add("keyboard",oe),a.interactive&&a.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new Mp(d))}_add(a,d,p){this._handlers.push({handlerName:a,handler:d,allowed:p}),this._handlersById[a]=d}stop(a){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!kc(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,d,p){for(const g in a)if(g!==p&&(!d||d.indexOf(g)<0))return!0;return!1}_getMapTouches(a){const d=[];for(const p of a)this._el.contains(p.target)&&d.push(p);return d}mergeHandlerResult(a,d,p,g,x){if(!p)return;l.e(a,p);const A={handlerName:g,originalEvent:p.originalEvent||x};p.zoomDelta!==void 0&&(d.zoom=A),p.panDelta!==void 0&&(d.drag=A),p.pitchDelta!==void 0&&(d.pitch=A),p.bearingDelta!==void 0&&(d.rotate=A)}_applyChanges(){const a={},d={},p={};for(const[g,x,A]of this._changes)g.panDelta&&(a.panDelta=(a.panDelta||new l.P(0,0))._add(g.panDelta)),g.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(a.around=g.around),g.pinchAround!==void 0&&(a.pinchAround=g.pinchAround),g.noInertia&&(a.noInertia=g.noInertia),l.e(d,x),l.e(p,A);this._updateMapTransform(a,d,p),this._changes=[]}_updateMapTransform(a,d,p){const g=this._map,x=g._getTransformForUpdate(),A=g.terrain;if(!(Cc(a)||A&&this._terrainMovement))return this._fireEvents(d,p,!0);let{panDelta:I,zoomDelta:M,bearingDelta:z,pitchDelta:V,around:$,pinchAround:Y}=a;Y!==void 0&&($=Y),g._stop(!0),$=$||g.transform.centerPoint;const de=x.pointLocation(I?$.sub(I):$);z&&(x.bearing+=z),V&&(x.pitch+=V),M&&(x.zoom+=M),A?this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?x.center=x.pointLocation(x.centerPoint.sub(I)):x.setLocationAtPoint(de,$):(this._terrainMovement=!0,this._map._elevationFreeze=!0,x.setLocationAtPoint(de,$),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,x.recalculateZoom(g.terrain)})):x.setLocationAtPoint(de,$),g._applyUpdatedTransform(x),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(d,p,!0)}_fireEvents(a,d,p){const g=kc(this._eventsInProgress),x=kc(a),A={};for(const V in a){const{originalEvent:$}=a[V];this._eventsInProgress[V]||(A[`${V}start`]=$),this._eventsInProgress[V]=a[V]}!g&&x&&this._fireEvent("movestart",x.originalEvent);for(const V in A)this._fireEvent(V,A[V]);x&&this._fireEvent("move",x.originalEvent);for(const V in a){const{originalEvent:$}=a[V];this._fireEvent(V,$)}const I={};let M;for(const V in this._eventsInProgress){const{handlerName:$,originalEvent:Y}=this._eventsInProgress[V];this._handlersById[$].isActive()||(delete this._eventsInProgress[V],M=d[$]||Y,I[`${V}end`]=M)}for(const V in I)this._fireEvent(V,I[V]);const z=kc(this._eventsInProgress);if(p&&(g||x)&&!z){this._updatingCamera=!0;const V=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),$=Y=>Y!==0&&-this._bearingSnap<Y&&Y<this._bearingSnap;!V||!V.essential&&l.h.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:M})),$(this._map.getBearing())&&this._map.resetNorth()):($(V.bearing||this._map.getBearing())&&(V.bearing=0),V.freezeElevation=!0,this._map.easeTo(V,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(a,d){this._map.fire(new l.k(a,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{delete this._frameId,this.handleEvent(new _h("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Vp extends l.E{constructor(a,d){super(),this._renderFrameCallback=()=>{const p=Math.min((l.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=d.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.L(this.transform.center.lng,this.transform.center.lat)}setCenter(a,d){return this.jumpTo({center:a},d)}panBy(a,d,p){return a=l.P.convert(a).mult(-1),this.panTo(this.transform.center,l.e({offset:a},d),p)}panTo(a,d,p){return this.easeTo(l.e({center:a},d),p)}getZoom(){return this.transform.zoom}setZoom(a,d){return this.jumpTo({zoom:a},d),this}zoomTo(a,d,p){return this.easeTo(l.e({zoom:a},d),p)}zoomIn(a,d){return this.zoomTo(this.getZoom()+1,a,d),this}zoomOut(a,d){return this.zoomTo(this.getZoom()-1,a,d),this}getBearing(){return this.transform.bearing}setBearing(a,d){return this.jumpTo({bearing:a},d),this}getPadding(){return this.transform.padding}setPadding(a,d){return this.jumpTo({padding:a},d),this}rotateTo(a,d,p){return this.easeTo(l.e({bearing:a},d),p)}resetNorth(a,d){return this.rotateTo(0,l.e({duration:1e3},a),d),this}resetNorthPitch(a,d){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},a),d),this}snapToNorth(a,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,d):this}getPitch(){return this.transform.pitch}setPitch(a,d){return this.jumpTo({pitch:a},d),this}cameraForBounds(a,d){a=tt.convert(a);const p=d&&d.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),p,d)}_cameraForBoxAndBearing(a,d,p,g){const x={top:0,bottom:0,right:0,left:0};if(typeof(g=l.e({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const We=g.padding;g.padding={top:We,bottom:We,right:We,left:We}}g.padding=l.e(x,g.padding);const A=this.transform,I=A.padding,M=A.project(l.L.convert(a)),z=A.project(l.L.convert(d)),V=M.rotate(-p*Math.PI/180),$=z.rotate(-p*Math.PI/180),Y=new l.P(Math.max(V.x,$.x),Math.max(V.y,$.y)),de=new l.P(Math.min(V.x,$.x),Math.min(V.y,$.y)),ue=Y.sub(de),pe=(A.width-(I.left+I.right+g.padding.left+g.padding.right))/ue.x,oe=(A.height-(I.top+I.bottom+g.padding.top+g.padding.bottom))/ue.y;if(oe<0||pe<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ee=Math.min(A.scaleZoom(A.scale*Math.min(pe,oe)),g.maxZoom),Ue=l.P.convert(g.offset),be=new l.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(p*Math.PI/180),De=Ue.add(be).mult(A.scale/A.zoomScale(Ee));return{center:A.unproject(M.add(z).div(2).sub(De)),zoom:Ee,bearing:p}}fitBounds(a,d,p){return this._fitInternal(this.cameraForBounds(a,d),d,p)}fitScreenCoordinates(a,d,p,g,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(a)),this.transform.pointLocation(l.P.convert(d)),p,g),g,x)}_fitInternal(a,d,p){return a?(delete(d=l.e(a,d)).padding,d.linear?this.easeTo(d,p):this.flyTo(d,p)):this}jumpTo(a,d){this.stop();const p=this._getTransformForUpdate();let g=!1,x=!1,A=!1;return"zoom"in a&&p.zoom!==+a.zoom&&(g=!0,p.zoom=+a.zoom),a.center!==void 0&&(p.center=l.L.convert(a.center)),"bearing"in a&&p.bearing!==+a.bearing&&(x=!0,p.bearing=+a.bearing),"pitch"in a&&p.pitch!==+a.pitch&&(A=!0,p.pitch=+a.pitch),a.padding==null||p.isPaddingEqual(a.padding)||(p.padding=a.padding),this._applyUpdatedTransform(p),this.fire(new l.k("movestart",d)).fire(new l.k("move",d)),g&&this.fire(new l.k("zoomstart",d)).fire(new l.k("zoom",d)).fire(new l.k("zoomend",d)),x&&this.fire(new l.k("rotatestart",d)).fire(new l.k("rotate",d)).fire(new l.k("rotateend",d)),A&&this.fire(new l.k("pitchstart",d)).fire(new l.k("pitch",d)).fire(new l.k("pitchend",d)),this.fire(new l.k("moveend",d))}calculateCameraOptionsFromTo(a,d,p,g=0){const x=l.U.fromLngLat(a,d),A=l.U.fromLngLat(p,g),I=A.x-x.x,M=A.y-x.y,z=A.z-x.z,V=Math.hypot(I,M,z);if(V===0)throw new Error("Can't calculate camera options with same From and To");const $=Math.hypot(I,M),Y=this.transform.scaleZoom(this.transform.cameraToCenterDistance/V/this.transform.tileSize),de=180*Math.atan2(I,-M)/Math.PI;let ue=180*Math.acos($/V)/Math.PI;return ue=z<0?90-ue:90+ue,{center:A.toLngLat(),zoom:Y,pitch:ue,bearing:de}}easeTo(a,d){this._stop(!1,a.easeId),((a=l.e({offset:[0,0],duration:500,easing:l.bb},a)).animate===!1||!a.essential&&l.h.prefersReducedMotion)&&(a.duration=0);const p=this._getTransformForUpdate(),g=this.getZoom(),x=this.getBearing(),A=this.getPitch(),I=this.getPadding(),M="zoom"in a?+a.zoom:g,z="bearing"in a?this._normalizeBearing(a.bearing,x):x,V="pitch"in a?+a.pitch:A,$="padding"in a?a.padding:p.padding,Y=l.P.convert(a.offset);let de=p.centerPoint.add(Y);const ue=p.pointLocation(de),pe=l.L.convert(a.center||ue);this._normalizeCenter(pe);const oe=p.project(ue),Ee=p.project(pe).sub(oe),Ue=p.zoomScale(M-g);let be,De;a.around&&(be=l.L.convert(a.around),De=p.locationPoint(be));const We={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||M!==g,this._rotating=this._rotating||x!==z,this._pitching=this._pitching||V!==A,this._padding=!p.isPaddingEqual($),this._easeId=a.easeId,this._prepareEase(d,a.noMoveStart,We),this.terrain&&this._prepareElevation(pe),this._ease(Ye=>{if(this._zooming&&(p.zoom=l.B.number(g,M,Ye)),this._rotating&&(p.bearing=l.B.number(x,z,Ye)),this._pitching&&(p.pitch=l.B.number(A,V,Ye)),this._padding&&(p.interpolatePadding(I,$,Ye),de=p.centerPoint.add(Y)),this.terrain&&!a.freezeElevation&&this._updateElevation(Ye),be)p.setLocationAtPoint(be,De);else{const rt=p.zoomScale(p.zoom-g),mt=M>g?Math.min(2,Ue):Math.max(.5,Ue),ct=Math.pow(mt,1-Ye),Tt=p.unproject(oe.add(Ee.mult(Ye*ct)).mult(rt));p.setLocationAtPoint(p.renderWorldCopies?Tt.wrap():Tt,de)}this._applyUpdatedTransform(p),this._fireMoveEvents(d)},Ye=>{this.terrain&&this._finalizeElevation(),this._afterEase(d,Ye)},a),this}_prepareEase(a,d,p={}){this._moving=!0,d||p.moving||this.fire(new l.k("movestart",a)),this._zooming&&!p.zooming&&this.fire(new l.k("zoomstart",a)),this._rotating&&!p.rotating&&this.fire(new l.k("rotatestart",a)),this._pitching&&!p.pitching&&this.fire(new l.k("pitchstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&d!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(p-(d-(p*a+this._elevationStart))/(1-a)),this._elevationTarget=d}this.transform.elevation=l.B.number(this._elevationStart,this._elevationTarget,a)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(a){if(!this.transformCameraUpdate)return;const d=a.clone(),{center:p,zoom:g,pitch:x,bearing:A,elevation:I}=this.transformCameraUpdate(d);p&&(d.center=p),g!==void 0&&(d.zoom=g),x!==void 0&&(d.pitch=x),A!==void 0&&(d.bearing=A),I!==void 0&&(d.elevation=I),this.transform.apply(d)}_fireMoveEvents(a){this.fire(new l.k("move",a)),this._zooming&&this.fire(new l.k("zoom",a)),this._rotating&&this.fire(new l.k("rotate",a)),this._pitching&&this.fire(new l.k("pitch",a))}_afterEase(a,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const p=this._zooming,g=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new l.k("zoomend",a)),g&&this.fire(new l.k("rotateend",a)),x&&this.fire(new l.k("pitchend",a)),this.fire(new l.k("moveend",a))}flyTo(a,d){if(!a.essential&&l.h.prefersReducedMotion){const Yt=l.F(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Yt,d)}this.stop(),a=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.bb},a);const p=this._getTransformForUpdate(),g=this.getZoom(),x=this.getBearing(),A=this.getPitch(),I=this.getPadding(),M="zoom"in a?l.ad(+a.zoom,p.minZoom,p.maxZoom):g,z="bearing"in a?this._normalizeBearing(a.bearing,x):x,V="pitch"in a?+a.pitch:A,$="padding"in a?a.padding:p.padding,Y=p.zoomScale(M-g),de=l.P.convert(a.offset);let ue=p.centerPoint.add(de);const pe=p.pointLocation(ue),oe=l.L.convert(a.center||pe);this._normalizeCenter(oe);const Ee=p.project(pe),Ue=p.project(oe).sub(Ee);let be=a.curve;const De=Math.max(p.width,p.height),We=De/Y,Ye=Ue.mag();if("minZoom"in a){const Yt=l.ad(Math.min(a.minZoom,g,M),p.minZoom,p.maxZoom),Jn=De/p.zoomScale(Yt-g);be=Math.sqrt(Jn/Ye*2)}const rt=be*be;function mt(Yt){const Jn=(We*We-De*De+(Yt?-1:1)*rt*rt*Ye*Ye)/(2*(Yt?We:De)*rt*Ye);return Math.log(Math.sqrt(Jn*Jn+1)-Jn)}function ct(Yt){return(Math.exp(Yt)-Math.exp(-Yt))/2}function Tt(Yt){return(Math.exp(Yt)+Math.exp(-Yt))/2}const Gt=mt(!1);let Pn=function(Yt){return Tt(Gt)/Tt(Gt+be*Yt)},Lt=function(Yt){return De*((Tt(Gt)*(ct(Jn=Gt+be*Yt)/Tt(Jn))-ct(Gt))/rt)/Ye;var Jn},on=(mt(!0)-Gt)/be;if(Math.abs(Ye)<1e-6||!isFinite(on)){if(Math.abs(De-We)<1e-6)return this.easeTo(a,d);const Yt=We<De?-1:1;on=Math.abs(Math.log(We/De))/be,Lt=function(){return 0},Pn=function(Jn){return Math.exp(Yt*be*Jn)}}return a.duration="duration"in a?+a.duration:1e3*on/("screenSpeed"in a?+a.screenSpeed/be:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=x!==z,this._pitching=V!==A,this._padding=!p.isPaddingEqual($),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(oe),this._ease(Yt=>{const Jn=Yt*on,An=1/Pn(Jn);p.zoom=Yt===1?M:g+p.scaleZoom(An),this._rotating&&(p.bearing=l.B.number(x,z,Yt)),this._pitching&&(p.pitch=l.B.number(A,V,Yt)),this._padding&&(p.interpolatePadding(I,$,Yt),ue=p.centerPoint.add(de)),this.terrain&&!a.freezeElevation&&this._updateElevation(Yt);const _n=Yt===1?oe:p.unproject(Ee.add(Ue.mult(Lt(Jn))).mult(An));p.setLocationAtPoint(p.renderWorldCopies?_n.wrap():_n,ue),this._applyUpdatedTransform(p),this._fireMoveEvents(d)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(d)},a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,d)}if(!a){const p=this.handlers;p&&p.stop(!1)}return this}_ease(a,d,p){p.animate===!1||p.duration===0?(a(1),d()):(this._easeStart=l.h.now(),this._easeOptions=p,this._onEaseFrame=a,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,d){a=l.b5(a,-180,180);const p=Math.abs(a-d);return Math.abs(a-360-d)<p&&(a-=360),Math.abs(a+360-d)<p&&(a+=360),a}_normalizeCenter(a){const d=this.transform;if(!d.renderWorldCopies||d.lngRange)return;const p=a.lng-d.center.lng;a.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLatZoom(l.L.convert(a),this.transform.tileZoom)-this.transform.elevation:null}}class ha{constructor(a={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=a}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options&&this.options.compact,this._container=_.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=_.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=_.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){_.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,d){const p=this._map._getUIString(`AttributionControl.${d}`);a.title=p,a.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&a.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const d=this._map.style.sourceCaches;for(const g in d){const x=d[g];if(x.used||x.usedForTerrain){const A=x.getSource();A.attribution&&a.indexOf(A.attribution)<0&&a.push(A.attribution)}}a=a.filter(g=>String(g).trim()),a.sort((g,x)=>g.length-x.length),a=a.filter((g,x)=>{for(let A=x+1;A<a.length;A++)if(a[A].indexOf(g)>=0)return!1;return!0});const p=a.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,a.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class mr{constructor(a={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const p=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=a}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=_.create("div","maplibregl-ctrl");const d=_.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){_.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Bu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const d=++this._id;return this._queue.push({callback:a,id:d,cancelled:!1}),d}remove(a){const d=this._currentlyRunning,p=d?this._queue.concat(d):this._queue;for(const g of p)if(g.id===a)return void(g.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const p of d)if(!p.cancelled&&(p.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const xh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Np=l.Q([{name:"a_pos3d",type:"Int16",components:3}]);class $p extends l.E{constructor(a){super(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,a.usedForTerrain=!0,a.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,d){this.sourceCache.update(a,d),this._renderableTilesKeys=[];const p={};for(const g of a.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))p[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),l.aS(g.posMatrix,0,l.N,0,l.N,0,1),this._tiles[g.key]=new dt(g,this.tileSize));for(const g in this._tiles)p[g]||delete this._tiles[g]}freeRtt(a){for(const d in this._tiles){const p=this._tiles[d];(!a||p.tileID.equals(a)||p.tileID.isChildOf(a)||a.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(a=>this.getTileByID(a))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a){const d={};for(const p of this._renderableTilesKeys){const g=this._tiles[p].tileID;if(g.canonical.equals(a.canonical)){const x=a.clone();x.posMatrix=new Float64Array(16),l.aS(x.posMatrix,0,l.N,0,l.N,0,1),d[p]=x}else if(g.canonical.isChildOf(a.canonical)){const x=a.clone();x.posMatrix=new Float64Array(16);const A=g.canonical.z-a.canonical.z,I=g.canonical.x-(g.canonical.x>>A<<A),M=g.canonical.y-(g.canonical.y>>A<<A),z=l.N>>A;l.aS(x.posMatrix,0,z,0,z,0,1),l.$(x.posMatrix,x.posMatrix,[-I*z,-M*z,0]),d[p]=x}else if(a.canonical.isChildOf(g.canonical)){const x=a.clone();x.posMatrix=new Float64Array(16);const A=a.canonical.z-g.canonical.z,I=a.canonical.x-(a.canonical.x>>A<<A),M=a.canonical.y-(a.canonical.y>>A<<A),z=l.N>>A;l.aS(x.posMatrix,0,l.N,0,l.N,0,1),l.$(x.posMatrix,x.posMatrix,[I*z,M*z,0]),l.a0(x.posMatrix,x.posMatrix,[1/2**A,1/2**A,0]),d[p]=x}}return d}getSourceTile(a,d){const p=this.sourceCache._source;let g=a.overscaledZ-this.deltaZoom;if(g>p.maxzoom&&(g=p.maxzoom),g<p.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(g).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!x||!x.dem)&&d)for(;g>=p.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(a.scaledTo(g--).key);return x}tilesAfterTime(a=Date.now()){return Object.values(this._tiles).filter(d=>d.timeAdded>=a)}}class Up{constructor(a,d,p){this.painter=a,this.sourceCache=new $p(d),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,d,p,g=l.N){var x;if(!(d>=0&&d<g&&p>=0&&p<g))return 0;const A=this.getTerrainData(a),I=(x=A.tile)===null||x===void 0?void 0:x.dem;if(!I)return 0;const M=function(ue,pe,oe){var Ee=pe[0],Ue=pe[1];return ue[0]=oe[0]*Ee+oe[4]*Ue+oe[12],ue[1]=oe[1]*Ee+oe[5]*Ue+oe[13],ue}([],[d/g*l.N,p/g*l.N],A.u_terrain_matrix),z=[M[0]*I.dim,M[1]*I.dim],V=Math.floor(z[0]),$=Math.floor(z[1]),Y=z[0]-V,de=z[1]-$;return I.get(V,$)*(1-Y)*(1-de)+I.get(V+1,$)*Y*(1-de)+I.get(V,$+1)*(1-Y)*de+I.get(V+1,$+1)*Y*de}getElevationForLngLatZoom(a,d){const{tileID:p,mercatorX:g,mercatorY:x}=this._getOverscaledTileIDFromLngLatZoom(a,d);return this.getElevation(p,g%l.N,x%l.N,l.N)}getElevation(a,d,p,g=l.N){return this.getDEMElevation(a,d,p,g)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){const g=this.painter.context,x=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ne(g,x,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ne(g,new l.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.ao([])}const d=this.sourceCache.getSourceTile(a,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const g=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new ne(g,d.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),d.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const p=d&&d+d.tileID.key+a.key;if(p&&!this._demMatrixCache[p]){const g=this.sourceCache.sourceCache._source.maxzoom;let x=a.canonical.z-d.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=g?x=a.canonical.z-g:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const A=a.canonical.x-(a.canonical.x>>x<<x),I=a.canonical.y-(a.canonical.y>>x<<x),M=l.bc(new Float64Array(16),[1/(l.N<<x),1/(l.N<<x),0]);l.$(M,M,[A*l.N,I*l.N,0]),this._demMatrixCache[a.key]={matrix:M,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(a){const d=this.painter,p=d.width/devicePixelRatio,g=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ne(d.context,{width:p,height:g,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ne(d.context,{width:p,height:g,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(p,g,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,p,g))),this._fbo.colorAttachment.set(a==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,A=0;x<this._coordsTextureSize;x++)for(let I=0;I<this._coordsTextureSize;I++,A+=4)d[A+0]=255&I,d[A+1]=255&x,d[A+2]=I>>8<<4|x>>8,d[A+3]=0;const p=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),g=new ne(a,p,a.gl.RGBA,{premultiply:!1});return g.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(a){const d=new Uint8Array(4),p=this.painter.context,g=p.gl;p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,d),p.bindFramebuffer.set(null);const x=d[0]+(d[2]>>4<<8),A=d[1]+((15&d[2])<<8),I=this.coordsIndex[255-d[3]],M=I&&this.sourceCache.getTileByID(I);if(!M)return null;const z=this._coordsTextureSize,V=(1<<M.tileID.canonical.z)*z;return new l.U(this._allowMercatorOverflow(a,(M.tileID.canonical.x*z+x)/V),(M.tileID.canonical.y*z+A)/V,this.getElevation(M.tileID,x,A,z))}getTerrainMesh(){if(this._mesh)return this._mesh;const a=this.painter.context,d=new l.bd,p=new l.b0,g=this.meshSize,x=l.N/g,A=g*g;for(let $=0;$<=g;$++)for(let Y=0;Y<=g;Y++)d.emplaceBack(Y*x,$*x,0);for(let $=0;$<A;$+=g+1)for(let Y=0;Y<g;Y++)p.emplaceBack(Y+$,g+Y+$+1,g+Y+$+2),p.emplaceBack(Y+$,g+Y+$+2,Y+$+1);const I=d.length,M=I+2*(g+1);for(const $ of[0,1])for(let Y=0;Y<=g;Y++)for(const de of[0,1])d.emplaceBack(Y*x,$*l.N,de);for(let $=0;$<2*g;$+=2)p.emplaceBack(M+$,M+$+1,M+$+3),p.emplaceBack(M+$,M+$+3,M+$+2),p.emplaceBack(I+$,I+$+3,I+$+1),p.emplaceBack(I+$,I+$+2,I+$+3);const z=d.length,V=z+2*(g+1);for(const $ of[0,1])for(let Y=0;Y<=g;Y++)for(const de of[0,1])d.emplaceBack($*l.N,Y*x,de);for(let $=0;$<2*g;$+=2)p.emplaceBack(z+$,z+$+1,z+$+3),p.emplaceBack(z+$,z+$+3,z+$+2),p.emplaceBack(V+$,V+$+3,V+$+1),p.emplaceBack(V+$,V+$+2,V+$+3);return this._mesh={indexBuffer:a.createIndexBuffer(p),vertexBuffer:a.createVertexBuffer(d,Np.members),segments:l.S.simpleSegment(0,0,d.length,p.length)},this._mesh}getMeshFrameDelta(a){return 2*Math.PI*l.be/Math.pow(2,a)/5}getMinTileElevationForLngLatZoom(a,d){var p;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(a,d);return(p=this.getMinMaxElevation(g).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(a){const d=this.getTerrainData(a).tile,p={minElevation:null,maxElevation:null};return d&&d.dem&&(p.minElevation=d.dem.min*this.exaggeration,p.maxElevation=d.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(a,d){const p=l.U.fromLngLat(a.wrap()),g=(1<<d)*l.N,x=p.x*g,A=p.y*g,I=Math.floor(x/l.N),M=Math.floor(A/l.N);return{tileID:new l.O(d,0,d,I,M),mercatorX:x,mercatorY:A}}_allowMercatorOverflow(a,d){const p=a.x<this.painter.width/2;let g=l.bf(d);const x=this.painter.transform.center.lng;return p&&Math.sign(g)>0&&Math.sign(x)<0||!p&&Math.sign(g)<0&&Math.sign(x)>0?(g=360*Math.sign(x)+g,l.G(g)):d}}class Jv{constructor(a,d,p){this._context=a,this._size=d,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new ne(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(p.texture),{id:a,fbo:d,texture:p,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>a.id!==d),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(const a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(a=>!a.inUse)===!1}}const Oi={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Vu{constructor(a,d){this.painter=a,this.terrain=d,this.pool=new Jv(a.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter(p=>!a._layers[p].isHidden(d)),this._coordsDescendingInv={};for(const p in a.sourceCaches){this._coordsDescendingInv[p]={};const g=a.sourceCaches[p].getVisibleCoordinates();for(const x of g){const A=this.terrain.sourceCache.getTerrainCoords(x);for(const I in A)this._coordsDescendingInv[p][I]||(this._coordsDescendingInv[p][I]=[]),this._coordsDescendingInv[p][I].push(A[I])}}this._coordsDescendingInvStr={};for(const p of a._order){const g=a._layers[p],x=g.source;if(Oi[g.type]&&!this._coordsDescendingInvStr[x]){this._coordsDescendingInvStr[x]={};for(const A in this._coordsDescendingInv[x])this._coordsDescendingInvStr[x][A]=this._coordsDescendingInv[x][A].map(I=>I.key).sort().join()}}for(const p of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const x=this._coordsDescendingInvStr[g][p.tileID.key];x&&x!==p.rttCoords[g]&&(p.rtt=[])}}renderLayer(a){if(a.isHidden(this.painter.transform.zoom))return!1;const d=a.type,p=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(Oi[d]&&(this._prevType&&Oi[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(a.id),!g))return!0;if(Oi[this._prevType]||Oi[d]&&g){this._prevType=d;const x=this._stacks.length-1,A=this._stacks[x]||[];for(const I of this._renderableTiles){if(this.pool.isFull()&&(Rr(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(I),I.rtt[x]){const z=this.pool.getObjectForId(I.rtt[x].id);if(z.stamp===I.rtt[x].stamp){this.pool.useObject(z);continue}}const M=this.pool.getOrCreateFreeObject();this.pool.useObject(M),this.pool.stampObject(M),I.rtt[x]={id:M.id,stamp:M.stamp},p.context.bindFramebuffer.set(M.fbo.framebuffer),p.context.clear({color:l.aT.transparent,stencil:0}),p.currentStencilSource=void 0;for(let z=0;z<A.length;z++){const V=p.style._layers[A[z]],$=V.source?this._coordsDescendingInv[V.source][I.tileID.key]:[I.tileID];p.context.viewport.set([0,0,M.fbo.width,M.fbo.height]),p._renderTileClippingMasks(V,$),p.renderLayer(p,p.style.sourceCaches[V.source],V,$),V.source&&(I.rttCoords[V.source]=this._coordsDescendingInvStr[V.source][I.tileID.key])}}return Rr(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Oi[d]}return!1}}const Kt=v,sn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Tc=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},wh={showCompass:!0,showZoom:!0,visualizePitch:!1};class Sh{constructor(a,d,p=!1){this.mousedown=A=>{this.startMouse(l.e({},A,{ctrlKey:!0,preventDefault:()=>A.preventDefault()}),_.mousePos(this.element,A)),_.addEventListener(window,"mousemove",this.mousemove),_.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=A=>{this.moveMouse(A,_.mousePos(this.element,A))},this.mouseup=A=>{this.mouseRotate.dragEnd(A),this.mousePitch&&this.mousePitch.dragEnd(A),this.offTemp()},this.touchstart=A=>{A.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=_.touchPos(this.element,A.targetTouches)[0],this.startTouch(A,this._startPos),_.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.addEventListener(window,"touchend",this.touchend))},this.touchmove=A=>{A.targetTouches.length!==1?this.reset():(this._lastPos=_.touchPos(this.element,A.targetTouches)[0],this.moveTouch(A,this._lastPos))},this.touchend=A=>{A.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=a.dragRotate._mouseRotate.getClickTolerance(),x=a.dragRotate._mousePitch.getClickTolerance();this.element=d,this.mouseRotate=Pl({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:A,clickTolerance:I,bearingDegreesPerPixelMoved:M=.8})=>{const z=new Rp;return new Ds({clickTolerance:I,move:(V,$)=>({bearingDelta:($.x-V.x)*M}),moveStateManager:z,enable:A,assignEvents:Tc})})({clickTolerance:g,enable:!0}),this.map=a,p&&(this.mousePitch=Ms({clickTolerance:x,enable:!0}),this.touchPitch=(({enable:A,clickTolerance:I,pitchDegreesPerPixelMoved:M=-.5})=>{const z=new Rp;return new Ds({clickTolerance:I,move:(V,$)=>({pitchDelta:($.y-V.y)*M}),moveStateManager:z,enable:A,assignEvents:Tc})})({clickTolerance:x,enable:!0})),_.addEventListener(d,"mousedown",this.mousedown),_.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),_.addEventListener(d,"touchcancel",this.reset)}startMouse(a,d){this.mouseRotate.dragStart(a,d),this.mousePitch&&this.mousePitch.dragStart(a,d),_.disableDrag()}startTouch(a,d){this.touchRotate.dragStart(a,d),this.touchPitch&&this.touchPitch.dragStart(a,d),_.disableDrag()}moveMouse(a,d){const p=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(a,d)||{};if(g&&p.setBearing(p.getBearing()+g),this.mousePitch){const{pitchDelta:x}=this.mousePitch.dragMove(a,d)||{};x&&p.setPitch(p.getPitch()+x)}}moveTouch(a,d){const p=this.map,{bearingDelta:g}=this.touchRotate.dragMove(a,d)||{};if(g&&p.setBearing(p.getBearing()+g),this.touchPitch){const{pitchDelta:x}=this.touchPitch.dragMove(a,d)||{};x&&p.setPitch(p.getPitch()+x)}}off(){const a=this.element;_.removeEventListener(a,"mousedown",this.mousedown),_.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),_.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.removeEventListener(window,"touchend",this.touchend),_.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){_.enableDrag(),_.removeEventListener(window,"mousemove",this.mousemove),_.removeEventListener(window,"mouseup",this.mouseup),_.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.removeEventListener(window,"touchend",this.touchend)}}let Gr;function kh(y,a,d){if(y=new l.L(y.lng,y.lat),a){const p=new l.L(y.lng-360,y.lat),g=new l.L(y.lng+360,y.lat),x=d.locationPoint(y).distSqr(a);d.locationPoint(p).distSqr(a)<x?y=p:d.locationPoint(g).distSqr(a)<x&&(y=g)}for(;Math.abs(y.lng-d.center.lng)>180;){const p=d.locationPoint(y);if(p.x>=0&&p.y>=0&&p.x<=d.width&&p.y<=d.height)break;y.lng>d.center.lng?y.lng-=360:y.lng+=360}return y}const Aa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function qp(y,a,d){const p=y.classList;for(const g in Aa)p.remove(`maplibregl-${d}-anchor-${g}`);p.add(`maplibregl-${d}-anchor-${a}`)}class No extends l.E{constructor(a){if(super(),this._onKeyPress=d=>{const p=d.code,g=d.charCode||d.keyCode;p!=="Space"&&p!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=d=>{const p=d.originalEvent.target,g=this._element;this._popup&&(p===g||g.contains(p))&&this.togglePopup()},this._update=d=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((d==null?void 0:d.type)==="terrain"||(d==null?void 0:d.type)==="render"&&!p)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=kh(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let x="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?x="rotateX(0deg)":this._pitchAlignment==="map"&&(x=`rotateX(${this._map.getPitch()}deg)`),d&&d.type!=="moveend"||(this._pos=this._pos.round()),_.setTransform(this._element,`${Aa[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${x} ${g}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const A=this._map.unproject(this._pos),I=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=A.distanceTo(this._lngLat)>20*I?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=d=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,a&&a.element)this._element=a.element,this._offset=l.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=_.create("div"),this._element.setAttribute("aria-label","Map marker");const d=_.createNS("http://www.w3.org/2000/svg","svg"),p=41,g=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${p}px`),d.setAttributeNS(null,"width",`${g}px`),d.setAttributeNS(null,"viewBox",`0 0 ${g} ${p}`);const x=_.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");const A=_.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill-rule","nonzero");const I=_.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ee of M){const Ue=_.createNS("http://www.w3.org/2000/svg","ellipse");Ue.setAttributeNS(null,"opacity","0.04"),Ue.setAttributeNS(null,"cx","10.5"),Ue.setAttributeNS(null,"cy","5.80029008"),Ue.setAttributeNS(null,"rx",Ee.rx),Ue.setAttributeNS(null,"ry",Ee.ry),I.appendChild(Ue)}const z=_.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const V=_.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(V);const $=_.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"opacity","0.25"),$.setAttributeNS(null,"fill","#000000");const Y=_.createNS("http://www.w3.org/2000/svg","path");Y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),$.appendChild(Y);const de=_.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"transform","translate(6.0, 7.0)"),de.setAttributeNS(null,"fill","#FFFFFF");const ue=_.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pe=_.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#000000"),pe.setAttributeNS(null,"opacity","0.25"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962");const oe=_.createNS("http://www.w3.org/2000/svg","circle");oe.setAttributeNS(null,"fill","#FFFFFF"),oe.setAttributeNS(null,"cx","5.5"),oe.setAttributeNS(null,"cy","5.5"),oe.setAttributeNS(null,"r","5.4999962"),ue.appendChild(pe),ue.appendChild(oe),A.appendChild(I),A.appendChild(z),A.appendChild($),A.appendChild(de),A.appendChild(ue),d.appendChild(A),d.setAttributeNS(null,"height",p*this._scale+"px"),d.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(d),this._offset=l.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),qp(this._element,this._anchor,"marker"),a&&a.className)for(const d of a.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),a.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),_.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=l.L.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const g=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const a=this._popup;return a?(a.isOpen()?a.remove():a.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(a){return this._offset=l.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Or={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Pr=0,Ml=!1;const Ac={maxWidth:100,unit:"metric"};function Ec(y,a,d){const p=d&&d.maxWidth||100,g=y._container.clientHeight/2,x=y.unproject([0,g]),A=y.unproject([p,g]),I=x.distanceTo(A);if(d&&d.unit==="imperial"){const M=3.2808*I;M>5280?$o(a,p,M/5280,y._getUIString("ScaleControl.Miles")):$o(a,p,M,y._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?$o(a,p,I/1852,y._getUIString("ScaleControl.NauticalMiles")):I>=1e3?$o(a,p,I/1e3,y._getUIString("ScaleControl.Kilometers")):$o(a,p,I,y._getUIString("ScaleControl.Meters"))}function $o(y,a,d,p){const g=function(x){const A=Math.pow(10,`${Math.floor(x)}`.length-1);let I=x/A;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(M){const z=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*z)/z}(I),A*I}(d);y.style.width=a*(g/d)+"px",y.innerHTML=`${g}&nbsp;${p}`}const Ch={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Th=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ll(y){if(y){if(typeof y=="number"){const a=Math.round(Math.abs(y)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,y),"top-left":new l.P(a,a),"top-right":new l.P(-a,a),bottom:new l.P(0,-y),"bottom-left":new l.P(a,-a),"bottom-right":new l.P(-a,-a),left:new l.P(y,0),right:new l.P(-y,0)}}if(y instanceof l.P||Array.isArray(y)){const a=l.P.convert(y);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:l.P.convert(y.center||[0,0]),top:l.P.convert(y.top||[0,0]),"top-left":l.P.convert(y["top-left"]||[0,0]),"top-right":l.P.convert(y["top-right"]||[0,0]),bottom:l.P.convert(y.bottom||[0,0]),"bottom-left":l.P.convert(y["bottom-left"]||[0,0]),"bottom-right":l.P.convert(y["bottom-right"]||[0,0]),left:l.P.convert(y.left||[0,0]),right:l.P.convert(y.right||[0,0])}}return Ll(new l.P(0,0))}const Ah={extend:(y,...a)=>l.e(y,...a),run(y){y()},logToElement(y,a=!1,d="log"){const p=window.document.getElementById(d);p&&(a&&(p.innerHTML=""),p.innerHTML+=`<br>${y}`)}},Eh=v;class Hn{static get version(){return Eh}static get workerCount(){return It.workerCount}static set workerCount(a){It.workerCount=a}static get maxParallelImageRequests(){return l.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(a){l.c.MAX_PARALLEL_IMAGE_REQUESTS=a}static get workerUrl(){return l.c.WORKER_URL}static set workerUrl(a){l.c.WORKER_URL=a}static addProtocol(a,d){l.c.REGISTERED_PROTOCOLS[a]=d}static removeProtocol(a){delete l.c.REGISTERED_PROTOCOLS[a]}}return Hn.Map=class extends Vp{constructor(y){if(l.bg.mark(l.bh.create),(y=l.e({},sn,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ru(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._cooperativeGesturesOnWheel=a=>{this._onCooperativeGesture(a,a[this._metaKey],1)},this._contextLost=a=>{a.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.k("webglcontextlost",{originalEvent:a}))},this._contextRestored=a=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:a}))},this._onMapScroll=a=>{if(a.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new Bu,this._controls=[],this._mapId=l.a2(),this._locale=l.e({},xh,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=F.addThrottleControl(()=>this.isMoving()),this._requestManager=new j(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let a=!1;const d=Vo(p=>{this._trackResize&&!this._removed&&this.resize(p)._update()},50);this._resizeObserver=new ResizeObserver(p=>{a?d(p):a=!0}),this._resizeObserver.observe(this._container)}this.handlers=new bh(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new xc(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,l.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new ha({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new mr,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update(a.dataType==="style"),this.fire(new l.k(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new l.k(`${a.dataType}dataloading`,a))}),this.on("dataabort",a=>{this.fire(new l.k("sourcedataabort",a))})}_getMapId(){return this._mapId}addControl(y,a){if(a===void 0&&(a=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=y.onAdd(this);this._controls.push(y);const p=this._controlPositions[a];return a.indexOf("bottom")!==-1?p.insertBefore(d,p.firstChild):p.appendChild(d),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(y);return a>-1&&this._controls.splice(a,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,a,d,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,a,d,p)}resize(y){var a;const d=this._containerDimensions(),p=d[0],g=d[1],x=this._getClampedPixelRatio(p,g);if(this._resizeCanvas(p,g,x),this.painter.resize(p,g,x),this.painter.overLimit()){const I=this.painter.context.gl;this._maxCanvasSize=[I.drawingBufferWidth,I.drawingBufferHeight];const M=this._getClampedPixelRatio(p,g);this._resizeCanvas(p,g,M),this.painter.resize(p,g,M)}this.transform.resize(p,g),(a=this._requestedCameraState)===null||a===void 0||a.resize(p,g);const A=!this._moving;return A&&(this.stop(),this.fire(new l.k("movestart",y)).fire(new l.k("move",y))),this.fire(new l.k("resize",y)),A&&this.fire(new l.k("moveend",y)),this}_getClampedPixelRatio(y,a){const{0:d,1:p}=this._maxCanvasSize,g=this.getPixelRatio(),x=y*g,A=a*g;return Math.min(x>d?d/x:1,A>p?p/A:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(tt.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(y){return this.transform.locationPoint(l.L.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(l.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,a,d){if(y==="mouseenter"||y==="mouseover"){let p=!1;return{layer:a,listener:d,delegates:{mousemove:x=>{const A=this.getLayer(a)?this.queryRenderedFeatures(x.point,{layers:[a]}):[];A.length?p||(p=!0,d.call(this,new da(y,this,x.originalEvent,{features:A}))):p=!1},mouseout:()=>{p=!1}}}}if(y==="mouseleave"||y==="mouseout"){let p=!1;return{layer:a,listener:d,delegates:{mousemove:A=>{(this.getLayer(a)?this.queryRenderedFeatures(A.point,{layers:[a]}):[]).length?p=!0:p&&(p=!1,d.call(this,new da(y,this,A.originalEvent)))},mouseout:A=>{p&&(p=!1,d.call(this,new da(y,this,A.originalEvent)))}}}}{const p=g=>{const x=this.getLayer(a)?this.queryRenderedFeatures(g.point,{layers:[a]}):[];x.length&&(g.features=x,d.call(this,g),delete g.features)};return{layer:a,listener:d,delegates:{[y]:p}}}}on(y,a,d){if(d===void 0)return super.on(y,a);const p=this._createDelegatedListener(y,a,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(p);for(const g in p.delegates)this.on(g,p.delegates[g]);return this}once(y,a,d){if(d===void 0)return super.once(y,a);const p=this._createDelegatedListener(y,a,d);for(const g in p.delegates)this.once(g,p.delegates[g]);return this}off(y,a,d){return d===void 0?super.off(y,a):(this._delegatedListeners&&this._delegatedListeners[y]&&(p=>{const g=this._delegatedListeners[y];for(let x=0;x<g.length;x++){const A=g[x];if(A.layer===a&&A.listener===d){for(const I in A.delegates)this.off(I,A.delegates[I]);return g.splice(x,1),this}}})(),this)}queryRenderedFeatures(y,a){if(!this.style)return[];let d;const p=y instanceof l.P||Array.isArray(y),g=p?y:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(p?{}:y)||{},g instanceof l.P||typeof g[0]=="number")d=[l.P.convert(g)];else{const x=l.P.convert(g[0]),A=l.P.convert(g[1]);d=[x,new l.P(A.x,x.y),A,new l.P(x.x,A.y),x]}return this.style.queryRenderedFeatures(d,a,this.transform)}querySourceFeatures(y,a){return this.style.querySourceFeatures(y,a)}setStyle(y,a){return(a=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(y,a))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const a=this._locale[y];if(a==null)throw new Error(`Missing UI string '${y}'`);return a}_updateStyle(y,a){if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,a));const d=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new yi(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,a,d):this.style.loadJSON(y,a,d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new yi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,a){if(typeof y=="string"){const d=this._requestManager.transformRequest(y,N.Style);l.f(d,(p,g)=>{p?this.fire(new l.j(p)):g&&this._updateDiff(g,a)})}else typeof y=="object"&&this._updateDiff(y,a)}_updateDiff(y,a){try{this.style.setState(y,a)&&this._update(!0)}catch(d){l.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(y,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(y,a){return this._lazyInitEmptyStyle(),this.style.addSource(y,a),this._update(!0)}isSourceLoaded(y){const a=this.style&&this.style.sourceCaches[y];if(a!==void 0)return a.loaded();this.fire(new l.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const a=this.style.sourceCaches[y.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);for(const d in this.style._layers){const p=this.style._layers[d];p.type==="hillshade"&&p.source===y.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Up(this.painter,a,y),this.painter.renderToTexture=new Vu(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=d=>{d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==y.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:y})),this}getTerrain(){var y,a;return(a=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&a!==void 0?a:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const a in y){const d=y[a]._tiles;for(const p in d){const g=d[p];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(y,a,d){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,a,d)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,a,d={}){const{pixelRatio:p=1,sdf:g=!1,stretchX:x,stretchY:A,content:I}=d;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||l.a(a))){if(a.width===void 0||a.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:M,height:z,data:V}=a,$=a;return this.style.addImage(y,{data:new l.R({width:M,height:z},new Uint8Array(V)),pixelRatio:p,stretchX:x,stretchY:A,content:I,sdf:g,version:0,userImage:$}),$.onAdd&&$.onAdd(this,y),this}}{const{width:M,height:z,data:V}=l.h.getImageData(a);this.style.addImage(y,{data:new l.R({width:M,height:z},V),pixelRatio:p,stretchX:x,stretchY:A,content:I,sdf:g,version:0})}}updateImage(y,a){const d=this.style.getImage(y);if(!d)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=a instanceof HTMLImageElement||l.a(a)?l.h.getImageData(a):a,{width:g,height:x,data:A}=p;if(g===void 0||x===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==d.data.width||x!==d.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(a instanceof HTMLImageElement||l.a(a));return d.data.replace(A,I),this.style.updateImage(y,d),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,a){F.getImage(this._requestManager.transformRequest(y,N.Image),a)}listImages(){return this.style.listImages()}addLayer(y,a){return this._lazyInitEmptyStyle(),this.style.addLayer(y,a),this._update(!0)}moveLayer(y,a){return this.style.moveLayer(y,a),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,a,d){return this.style.setLayerZoomRange(y,a,d),this._update(!0)}setFilter(y,a,d={}){return this.style.setFilter(y,a,d),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,a,d,p={}){return this.style.setPaintProperty(y,a,d,p),this._update(!0)}getPaintProperty(y,a){return this.style.getPaintProperty(y,a)}setLayoutProperty(y,a,d,p={}){return this.style.setLayoutProperty(y,a,d,p),this._update(!0)}getLayoutProperty(y,a){return this.style.getLayoutProperty(y,a)}setGlyphs(y,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,a,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,a,d,p=>{p||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,a,d=>{d||this._update(!0)}),this}setLight(y,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,a),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,a){return this.style.setFeatureState(y,a),this._update()}removeFeatureState(y,a){return this.style.removeFeatureState(y,a),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,a=0;return this._container&&(y=this._container.clientWidth||400,a=this._container.clientHeight||300),[y,a]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const a=this._canvasContainer=_.create("div","maplibregl-canvas-container",y);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=_.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),p=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],p);const g=this._controlContainer=_.create("div","maplibregl-control-container",y),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(A=>{x[A]=_.create("div",`maplibregl-ctrl-${A} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=_.create("div","maplibregl-cooperative-gesture-screen",this._container);let y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${y}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){_.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(y,a,d){this._canvas.width=Math.floor(d*y),this._canvas.height=Math.floor(d*a),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${a}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let a=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{a={requestedAttributes:y},p&&(a.statusMessage=p.statusMessage,a.type=p.type)},{once:!0});const d=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!d){const p="Failed to initialize WebGL";throw a?(a.message=p,new Error(JSON.stringify(a))):new Error(p)}this.painter=new Bo(d,this.transform),S.testSupport(d)}_onCooperativeGesture(y,a,d){return!a&&d<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const a=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,x=l.h.now();this.style.zoomHistory.update(g,x);const A=new l.a8(g,{now:x,fadeDuration:a,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),I=A.crossFadingFactor();I===1&&I===this._crossFadingFactor||(d=!0,this._crossFadingFactor=I),this.style.update(A)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,a,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:a,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bg.mark(l.bh.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,l.bg.mark(l.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),F.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const a=this.painter.context.gl.getExtension("WEBGL_lose_context");a&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),_.remove(this._canvasContainer),_.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),l.bg.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.h.frame(y=>{l.bg.frame(y),this._frame=null,this._render(y)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return Kt}getCameraTargetElevation(){return this.transform.elevation}},Hn.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const a=this._map.getZoom(),d=a===this._map.getMaxZoom(),p=a===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const a=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=a},this._setButtonTitle=(a,d)=>{const p=this._map._getUIString(`NavigationControl.${d}`);a.title=p,a.setAttribute("aria-label",p)},this.options=l.e({},wh,y),this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",a=>this._map.zoomIn({},{originalEvent:a})),_.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",a=>this._map.zoomOut({},{originalEvent:a})),_.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})}),this._compassIcon=_.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Sh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){_.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,a){const d=_.create("button",y,this._container);return d.type="button",d.addEventListener("click",a),d}},Hn.GeolocateControl=class extends l.E{constructor(y){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",a)),this._finish()}},this._updateCamera=a=>{const d=new l.L(a.coords.longitude,a.coords.latitude),p=a.coords.accuracy,g=this._map.getBearing(),x=l.e({bearing:g},this.options.fitBoundsOptions),A=tt.fromLngLat(d,p);this._map.fitBounds(A,x,{geolocateSource:!0})},this._updateMarker=a=>{if(a){const d=new l.L(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=a=>{if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&Ml)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=a=>{if(this._map){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=_.create("button","maplibregl-ctrl-geolocate",this._container),_.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",a===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=_.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new No({element:this._dotElement}),this._circleElement=_.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new No({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")))})}},this.options=l.e({},Or,y)}onAdd(y){return this._map=y,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(a,d=!1){Gr===void 0||d?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(p=>{Gr=p.state!=="denied",a(Gr)}).catch(()=>{Gr=!!window.navigator.geolocation,a(Gr)}):(Gr=!!window.navigator.geolocation,a(Gr)):a(Gr)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),_.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Pr=0,Ml=!1}_isOutOfMapMaxBounds(y){const a=this._map.getMaxBounds(),d=y.coords;return a&&(d.longitude<a.getWest()||d.longitude>a.getEast()||d.latitude<a.getSouth()||d.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),a=y.getSouthEast(),d=y.getNorthEast(),p=a.distanceTo(d),g=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Pr--,Ml=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Pr++,Pr>1?(y={maximumAge:6e5,timeout:0},Ml=!0):(y=this.options.positionOptions,Ml=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Hn.AttributionControl=ha,Hn.LogoControl=mr,Hn.ScaleControl=class{constructor(y){this._onMove=()=>{Ec(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,Ec(this._map,this._container,this.options)},this.options=l.e({},Ac,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){_.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Hn.FullscreenControl=class extends l.E{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){_.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=_.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);_.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Hn.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=y}onAdd(y){return this._map=y,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=_.create("button","maplibregl-ctrl-terrain",this._container),_.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){_.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Hn.Popup=class extends l.E{constructor(y){super(),this.remove=()=>(this._content&&_.remove(this._content),this._container&&(_.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.k("close")),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=_.create("div","maplibregl-popup",this._map.getContainer()),this._tip=_.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const A of this.options.className.split(" "))this._container.classList.add(A);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=kh(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!a)return;const d=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);let p=this.options.anchor;const g=Ll(this.options.offset);if(!p){const A=this._container.offsetWidth,I=this._container.offsetHeight;let M;M=d.y+g.bottom.y<I?["top"]:d.y>this._map.transform.height-I?["bottom"]:[],d.x<A/2?M.push("left"):d.x>this._map.transform.width-A/2&&M.push("right"),p=M.length===0?"bottom":M.join("-")}const x=d.add(g[p]).round();_.setTransform(this._container,`${Aa[p]} translate(${x.x}px,${x.y}px)`),qp(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(Ch),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=l.L.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const a=document.createDocumentFragment(),d=document.createElement("body");let p;for(d.innerHTML=y;p=d.firstChild,p;)a.appendChild(p);return this.setDOMContent(a)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=_.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=_.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Th);y&&y.focus()}},Hn.Marker=No,Hn.Style=yi,Hn.LngLat=l.L,Hn.LngLatBounds=tt,Hn.Point=l.P,Hn.MercatorCoordinate=l.U,Hn.Evented=l.E,Hn.AJAXError=l.bi,Hn.config=l.c,Hn.CanvasSource=Bt,Hn.GeoJSONSource=at,Hn.ImageSource=Be,Hn.RasterDEMTileSource=Fe,Hn.RasterTileSource=St,Hn.VectorTileSource=kt,Hn.VideoSource=bt,Hn.setRTLTextPlugin=l.bj,Hn.getRTLTextPluginStatus=l.bk,Hn.prewarm=function(){Tn().acquire(Et)},Hn.clearPrewarmedResources=function(){const y=ln;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Et),ln=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Ah.extend(Hn,{isSafari:l.ac,getPerformanceMetrics:l.bg.getPerformanceMetrics}),Hn});var h=s;return h})})(OT);var au=OT.exports;function sF(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(s){s(n)}),(r=e.get("*"))&&r.slice().map(function(s){s(t,n)})}}}/*!
* vue-maplibre-gl v3.1.3
* (c) 2024 Volker Nauruhn
* @license MIT
*/var oF=Object.defineProperty,lF=(e,t,n)=>t in e?oF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pi=(e,t,n)=>(lF(e,typeof t!="symbol"?t+"":t,n),n);const hi=Symbol("map"),Xa=Symbol("isLoaded"),pl=Symbol("isInitialized"),ji=Symbol("componentId"),Hi=Symbol("sourceId"),uc=Symbol("sourceLayerRegistry"),w0=Symbol("emitter");function su(e){return Object.keys(e)}const Cn=Si({style:"https://demotiles.maplibre.org/style.json",center:Object.freeze([0,0]),zoom:1,trackResize:!1});class Vs{static createEventHandler(t,n,r,s){return(u={})=>r.emit(s,{type:u.type,map:n,component:t,event:u})}}pi(Vs,"MAP_OPTION_KEYS",["antialias","attributionControl","bearing","bearingSnap","bounds","boxZoom","center","clickTolerance","collectResourceTiming","crossSourceCollisions","container","customAttribution","dragPan","dragRotate","doubleClickZoom","hash","fadeDuration","failIfMajorPerformanceCaveat","fitBoundsOptions","interactive","keyboard","locale","localIdeographFontFamily","logoPosition","maxBounds","maxPitch","maxZoom","minPitch","minZoom","preserveDrawingBuffer","pitch","pitchWithRotate","refreshExpiredTiles","renderWorldCopies","scrollZoom","mapStyle","trackResize","transformRequest","touchZoomRotate","touchPitch","zoom","maxTileCacheSize","pixelRatio","cooperativeGestures"]),pi(Vs,"MARKER_OPTION_KEYS",["element","offset","anchor","color","draggable","clickTolerance","rotation","rotationAlignment","pitchAlignment","scale"]),pi(Vs,"MAP_EVENT_TYPES",["error","load","idle","remove","render","resize","webglcontextlost","webglcontextrestored","dataloading","data","tiledataloading","sourcedataloading","styledataloading","sourcedata","styledata","boxzoomcancel","boxzoomstart","boxzoomend","touchcancel","touchmove","touchend","touchstart","click","contextmenu","dblclick","mousemove","mouseup","mousedown","mouseout","mouseover","movestart","move","moveend","zoomstart","zoom","zoomend","rotatestart","rotate","rotateend","dragstart","drag","dragend","pitchstart","pitch","pitchend","wheel"]);var dc=(e=>(e.TOP_LEFT="top-left",e.TOP_RIGHT="top-right",e.BOTTOM_LEFT="bottom-left",e.BOTTOM_RIGHT="bottom-right",e))(dc||{});const ml=Object.values(dc),qS=new Map,cF=Symbol("default");function uF(e,t,n=cF){var r;let s=qS.get(n);return s||(s=Si({isLoaded:!1,isMounted:!1,language:null}),qS.set(n,s)),s.isLoaded=!1,s.isMounted=!1,s.component=e,s.map=t.value,s.isLoaded=((r=t.value)==null?void 0:r.loaded())||!1,s}function dF(e,t=250,n=!1){let r;function s(){const u=arguments,h=()=>{r=void 0,n!==!0&&e.apply(this,u)};clearTimeout(r),n===!0&&r===void 0&&e.apply(this,u),r=window.setTimeout(h,t)}return s.cancel=()=>{clearTimeout(r)},s}const FT={AUTO:"auto",STYLE_LOCK:"style_lock",LATIN:"latin",NON_LATIN:"nonlatin",LOCAL:"",ALBANIAN:"sq",AMHARIC:"am",ARABIC:"ar",ARMENIAN:"hy",AZERBAIJANI:"az",BASQUE:"eu",BELORUSSIAN:"be",BOSNIAN:"bs",BRETON:"br",BULGARIAN:"bg",CATALAN:"ca",CHINESE:"zh",CORSICAN:"co",CROATIAN:"hr",CZECH:"cs",DANISH:"da",DUTCH:"nl",ENGLISH:"en",ESPERANTO:"eo",ESTONIAN:"et",FINNISH:"fi",FRENCH:"fr",FRISIAN:"fy",GEORGIAN:"ka",GERMAN:"de",GREEK:"el",HEBREW:"he",HINDI:"hi",HUNGARIAN:"hu",ICELANDIC:"is",INDONESIAN:"id",IRISH:"ga",ITALIAN:"it",JAPANESE:"ja",JAPANESE_HIRAGANA:"ja-Hira",JAPANESE_KANA:"ja_kana",JAPANESE_LATIN:"ja_rm",JAPANESE_2018:"ja-Latn",KANNADA:"kn",KAZAKH:"kk",KOREAN:"ko",KOREAN_LATIN:"ko-Latn",KURDISH:"ku",ROMAN_LATIN:"la",LATVIAN:"lv",LITHUANIAN:"lt",LUXEMBOURGISH:"lb",MACEDONIAN:"mk",MALAYALAM:"ml",MALTESE:"mt",NORWEGIAN:"no",OCCITAN:"oc",POLISH:"pl",PORTUGUESE:"pt",ROMANIAN:"ro",ROMANSH:"rm",RUSSIAN:"ru",SCOTTISH_GAELIC:"gd",SERBIAN_CYRILLIC:"sr",SERBIAN_LATIN:"sr-Latn",SLOVAK:"sk",SLOVENE:"sl",SPANISH:"es",SWEDISH:"sv",TAMIL:"ta",TELUGU:"te",THAI:"th",TURKISH:"tr",UKRAINIAN:"uk",WELSH:"cy"};new Set(Object.values(FT));new Set(Object.values(FT));function i_(e,t){const n=e.getStyle().layers,r=/^\s*{\s*name\s*(:\s*(\S*))?\s*}$/,s=/^\s*name\s*(:\s*(\S*))?\s*$/,u=/^\s*{\s*name\s*(:\s*(\S*))?\s*}(\s*){\s*name\s*(:\s*(\S*))?\s*}$/,h=/^(.*)({\s*name\s*(:\s*(\S*))?\s*})(.*)$/,l=t?`name:${t}`:"name",v=["case",["has",l],["get",l],["get","name"]];for(let _=0;_<n.length;_+=1){const S=n[_],C=S.layout;if(!C||!C["text-field"])continue;const k=e.getLayoutProperty(S.id,"text-field");let D;if(Array.isArray(k)&&k.length>=2&&k[0].trim().toLowerCase()==="concat"){const O=k.slice();for(let R=0;R<k.length;R+=1){const F=k[R];if((typeof F=="string"||F instanceof String)&&r.exec(F.toString())){O[R]=v;break}else if(Array.isArray(F)&&F.length>=2&&F[0].trim().toLowerCase()==="get"&&s.exec(F[1].toString())){O[R]=v;break}else if(Array.isArray(F)&&F.length===4&&F[0].trim().toLowerCase()==="case"){O[R]=v;break}}e.setLayoutProperty(S.id,"text-field",O)}else if(Array.isArray(k)&&k.length>=2&&k[0].trim().toLowerCase()==="get"&&s.exec(k[1].toString())){const O=v;e.setLayoutProperty(S.id,"text-field",O)}else if((typeof k=="string"||k instanceof String)&&r.exec(k.toString())){const O=v;e.setLayoutProperty(S.id,"text-field",O)}else if(Array.isArray(k)&&k.length===4&&k[0].trim().toLowerCase()==="case"){const O=v;e.setLayoutProperty(S.id,"text-field",O)}else if((typeof k=="string"||k instanceof String)&&(D=u.exec(k.toString()))!==null){const O=`{${l}}${D[3]}{name${D[4]||""}}`;e.setLayoutProperty(S.id,"text-field",O)}else if((typeof k=="string"||k instanceof String)&&(D=h.exec(k.toString()))!==null){const O=`${D[1]}{${l}}${D[5]}`;e.setLayoutProperty(S.id,"text-field",O)}}}const hF=sr({name:"MglMap",props:{width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},antialias:{type:Boolean,default:()=>Cn.antialias},attributionControl:{type:Boolean,default:()=>Cn.attributionControl},bearing:{type:Number,default:()=>Cn.bearing},bearingSnap:{type:Number,default:()=>Cn.bearingSnap},bounds:{type:[Array,Object],default:()=>Cn.bounds},boxZoom:{type:Boolean,default:()=>Cn.boxZoom},center:{type:[Array,Object],default:()=>Cn.center},clickTolerance:{type:Number,default:()=>Cn.clickTolerance},collectResourceTiming:{type:Boolean,default:()=>Cn.collectResourceTiming},crossSourceCollisions:{type:Boolean,default:()=>Cn.crossSourceCollisions},customAttribution:{type:[String,Array],default:()=>Cn.customAttribution},dragPan:{type:Boolean,default:()=>Cn.dragPan},dragRotate:{type:Boolean,default:()=>Cn.dragRotate},doubleClickZoom:{type:Boolean,default:()=>Cn.doubleClickZoom},hash:{type:[Boolean,String],default:()=>Cn.hash},fadeDuration:{type:Number,default:()=>Cn.fadeDuration},failIfMajorPerformanceCaveat:{type:Boolean,default:()=>Cn.failIfMajorPerformanceCaveat},fitBoundsOptions:{type:Object,default:()=>Cn.fitBoundsOptions},interactive:{type:Boolean,default:()=>Cn.interactive},keyboard:{type:Boolean,default:()=>Cn.keyboard},locale:{type:Object,default:()=>Cn.locale},language:{type:String,default:()=>Cn.language||null},localIdeographFontFamily:{type:String,default:()=>Cn.localIdeographFontFamily},logoPosition:{type:[String],validator:e=>e in dc,default:()=>Cn.logoPosition},maxBounds:{type:[Array,Object],default:()=>Cn.maxBounds},maxPitch:{type:Number,default:()=>Cn.maxPitch},maxZoom:{type:Number,default:()=>Cn.maxZoom},minPitch:{type:Number,default:()=>Cn.minPitch},minZoom:{type:Number,default:()=>Cn.minZoom},preserveDrawingBuffer:{type:Boolean,default:()=>Cn.preserveDrawingBuffer},pitch:{type:Number,default:()=>Cn.pitch},pitchWithRotate:{type:Boolean,default:()=>Cn.pitchWithRotate},refreshExpiredTiles:{type:Boolean,default:()=>Cn.refreshExpiredTiles},renderWorldCopies:{type:Boolean,default:()=>Cn.renderWorldCopies},scrollZoom:{type:Boolean,default:()=>Cn.scrollZoom},mapStyle:{type:[String,Object],default:()=>Cn.style},trackResize:{type:Boolean,default:()=>Cn.trackResize},transformRequest:{type:Function,default:Cn.transformRequest},touchZoomRotate:{type:Boolean,default:()=>Cn.touchZoomRotate},touchPitch:{type:Boolean,default:()=>Cn.touchPitch},zoom:{type:Number,default:()=>Cn.zoom},maxTileCacheSize:{type:Number,default:()=>Cn.maxTileCacheSize},mapKey:{type:[String,Symbol]},pixelRatio:{type:Number,default:()=>Cn.pixelRatio},cooperativeGestures:{type:[Boolean,Object],default:()=>Cn.cooperativeGestures}},emits:["map:error","map:load","map:idle","map:remove","map:render","map:resize","map:webglcontextlost","map:webglcontextrestored","map:dataloading","map:data","map:tiledataloading","map:sourcedataloading","map:styledataloading","map:sourcedata","map:styledata","map:boxzoomcancel","map:boxzoomstart","map:boxzoomend","map:touchcancel","map:touchmove","map:touchend","map:touchstart","map:click","map:contextmenu","map:dblclick","map:mousemove","map:mouseup","map:mousedown","map:mouseout","map:mouseover","map:movestart","map:move","map:moveend","map:zoomstart","map:zoom","map:zoomend","map:rotatestart","map:rotate","map:rotateend","map:dragstart","map:drag","map:dragend","map:pitchstart","map:pitch","map:pitchend","map:wheel"],slots:Object,setup(e,t){const n=U_(xs()),r=Ut(),s=Ut(),u=lt(!1),h=lt(!1),l=lt(!1),v=new Map,_=sF(),S=uF(n,s,e.mapKey);let C;bn(hi,s),bn(Xa,h),bn(pl,u),bn(ji,n.uid),bn(Hi,""),bn(w0,_),ut(()=>e.bearing,F=>{var N;F&&((N=s.value)==null||N.setBearing(F))}),ut(()=>e.bounds,F=>{var N;F&&((N=s.value)==null||N.fitBounds(F,e.fitBoundsOptions))}),ut(()=>e.center,F=>{var N;F&&((N=s.value)==null||N.setCenter(F))}),ut(()=>e.maxBounds,F=>{var N;F&&((N=s.value)==null||N.setMaxBounds(F))}),ut(()=>e.maxPitch,F=>{var N;F&&((N=s.value)==null||N.setMaxPitch(F))}),ut(()=>e.maxZoom,F=>{var N;F&&((N=s.value)==null||N.setMaxZoom(F))}),ut(()=>e.minPitch,F=>{var N;F&&((N=s.value)==null||N.setMinPitch(F))}),ut(()=>e.minZoom,F=>{var N;F&&((N=s.value)==null||N.setMinZoom(F))}),ut(()=>e.pitch,F=>{var N;F&&((N=s.value)==null||N.setPitch(F))}),ut(()=>e.renderWorldCopies,F=>{var N;F&&((N=s.value)==null||N.setRenderWorldCopies(F))}),ut(()=>e.mapStyle,F=>{var N;F&&((N=s.value)==null||N.setStyle(F))}),ut(()=>e.transformRequest,F=>{var N;F&&((N=s.value)==null||N.setTransformRequest(F))}),ut(()=>e.zoom,F=>{var N;F&&((N=s.value)==null||N.setZoom(F))}),ut(()=>e.zoom,F=>{var N;F&&((N=s.value)==null||N.setZoom(F))}),ut(()=>e.language,F=>{l.value&&s.value&&S.language!==(F||null)&&(i_(s.value,F||""),S.language=F||null)}),ut(()=>S.language,F=>{l.value&&s.value&&i_(s.value,F||"")});function k(){l.value=!0,e.language?S.language=e.language:S.language&&i_(s.value,e.language||"")}function D(){S.isMounted=!0;const F=Object.keys(e).filter(N=>e[N]!==void 0&&Vs.MAP_OPTION_KEYS.indexOf(N)!==-1).reduce((N,j)=>(N[j==="mapStyle"?"style":j]=Fr(e[j]),N),{container:r.value});if(s.value=U_(new au.Map(F)),S.map=s.value,u.value=!0,v.set("__load",()=>(h.value=!0,S.isLoaded=!0)),s.value.once("styledata",k),s.value.on("load",v.get("__load")),n.vnode.props){for(let N=0,j=Vs.MAP_EVENT_TYPES.length;N<j;N++)if(n.vnode.props["onMap:"+Vs.MAP_EVENT_TYPES[N]]){const X=Vs.createEventHandler(n,s.value,t,"map:"+Vs.MAP_EVENT_TYPES[N]);v.set(Vs.MAP_EVENT_TYPES[N],X),s.value.on(Vs.MAP_EVENT_TYPES[N],X)}}s.value.getCanvas().addEventListener("webglcontextlost",R)}async function O(){S.isMounted=!1,S.isLoaded=!1,h.value=!1,s.value&&(s.value.getCanvas().removeEventListener("webglcontextlost",R),s.value._controls.forEach(F=>{s.value.removeControl(F)}),u.value=!1,v.forEach((F,N)=>{s.value.off(N.startsWith("__")?N.substring(2):N,F)}),s.value.remove())}function R(){O(),ar(D)}return Oa(()=>{D(),s.value&&(C=new ResizeObserver(dF(s.value.resize.bind(s.value),100)),C.observe(r.value))}),br(()=>{C!==void 0&&(C.disconnect(),C=void 0),O()}),t.expose({map:s}),()=>Zr("div",{class:"mgl-container",style:{height:e.height,width:e.width}},[Zr("div",{ref:r,class:"mgl-wrapper"}),u.value&&t.slots.default?t.slots.default({}):void 0])}});function hc(e,t,n){ut(e,r=>{var s,u;r&&ml.indexOf(r)===-1||((s=t.value)!=null&&s.hasControl(n)&&t.value.removeControl(n),(u=t.value)==null||u.addControl(n,r))},{immediate:!0})}const fF=sr({name:"MglAttributionControl",props:{position:{type:String,validator:e=>ml.indexOf(e)!==-1},compact:Boolean,customAttribution:[String,Array]},setup(e){const t=yt(hi),n=yt(pl),r=new au.AttributionControl({compact:e.compact,customAttribution:e.customAttribution});hc(()=>e.position,t,r),br(()=>n.value&&t.value.removeControl(r))},render(){}}),ab=class nf{constructor(t,n){pi(this,"container"),this.isAdded=t,this.container=document.createElement("div"),this.setClasses(n)}getDefaultPosition(){return dc.TOP_LEFT}onAdd(){return ar(()=>this.isAdded.value=!0),this.container}onRemove(){this.isAdded.value=!1,this.container.remove()}setClasses(t){t?(this.container.classList.remove(nf.CONTROL_CLASS),this.container.classList.remove(nf.CONTROL_GROUP_CLASS)):(this.container.classList.add(nf.CONTROL_CLASS),this.container.classList.add(nf.CONTROL_GROUP_CLASS))}};pi(ab,"CONTROL_CLASS","maplibregl-ctrl"),pi(ab,"CONTROL_GROUP_CLASS","maplibregl-ctrl-group");let BT=ab;const pF=sr({name:"MglCustomControl",props:{position:{type:String,validator:e=>ml.indexOf(e)!==-1},noClasses:{type:Boolean,default:!1}},slots:Object,setup(e,{slots:t}){const n=yt(hi),r=yt(pl),s=lt(!1),u=new BT(s,e.noClasses);return hc(()=>e.position,n,u),ut(()=>e.noClasses,h=>u.setClasses(h)),br(()=>{var h;return r.value&&((h=n.value)==null?void 0:h.removeControl(u))}),()=>{var h;return s.value?Zr(h0,{to:u.container},(h=t.default)==null?void 0:h.call(t,{})):Yn("custom-component")}}}),mF=sr({name:"MglFullscreenControl",props:{position:{type:String,default:dc.TOP_RIGHT,validator:e=>ml.indexOf(e)!==-1},container:{type:Object,default:null}},setup(e){const t=yt(hi),n=yt(pl),r=new au.FullscreenControl({container:e.container||void 0});function s(){ar(()=>{var u;return(u=t.value)==null?void 0:u.resize()})}r.on("fullscreenstart",s),r.on("fullscreenend",s),hc(()=>e.position,t,r),br(()=>{var u;r.off("fullscreenstart",s),r.off("fullscreenend",s),n.value&&((u=t.value)==null||u.removeControl(r))})},render(){}});class gF{constructor(t="rgba(0,0,0,0.9)",n=4*window.devicePixelRatio,r="#7cf859",s="Monaco, Consolas, Courier, monospace",u=60*window.devicePixelRatio,h=90*window.devicePixelRatio,l=0,v=5*window.devicePixelRatio,_=100*window.devicePixelRatio){pi(this,"frames",0),pi(this,"totalTime",0),pi(this,"totalFrames",0),pi(this,"time",null),pi(this,"map"),pi(this,"container"),pi(this,"readOutput"),pi(this,"canvas"),pi(this,"eventHandlers",new Map),this.background=t,this.barWidth=n,this.color=r,this.font=s,this.graphHeight=u,this.graphWidth=h,this.graphTop=l,this.graphRight=v,this.width=_}getDefaultPosition(){return dc.TOP_RIGHT}onAdd(t){this.map=t;const n=this.container=document.createElement("div");return n.className="maplibregl-ctrl maplibregl-ctrl-fps",n.style.backgroundColor=this.background,n.style.borderRadius="6px",this.readOutput=document.createElement("div"),this.readOutput.style.color=this.color,this.readOutput.style.fontFamily=this.font,this.readOutput.style.padding="0 5px 5px",this.readOutput.style.fontSize="9px",this.readOutput.style.fontWeight="bold",this.readOutput.textContent="Waiting",this.canvas=document.createElement("canvas"),this.canvas.className="maplibregl-ctrl-canvas",this.canvas.width=this.width,this.canvas.height=this.graphHeight,this.canvas.style.cssText=`width: ${this.width/window.devicePixelRatio}px; height: ${this.graphHeight/window.devicePixelRatio}px;`,n.appendChild(this.readOutput),n.appendChild(this.canvas),this.eventHandlers.set("movestart",this.onMoveStart.bind(this)),this.eventHandlers.set("moveend",this.onMoveEnd.bind(this)),this.map.on("movestart",this.eventHandlers.get("movestart")),this.map.on("moveend",this.eventHandlers.get("moveend")),this.container}onRemove(){this.map.off("movestart",this.eventHandlers.get("movestart")),this.map.off("moveend",this.eventHandlers.get("moveend")),this.eventHandlers.clear(),this.container.parentNode.removeChild(this.container),this.map=void 0}onMoveStart(){this.frames=0,this.time=performance.now(),this.eventHandlers.set("render",this.onRender.bind(this)),this.map.on("render",this.eventHandlers.get("render"))}onMoveEnd(){const t=performance.now();this.updateGraph(this.getFPS(t)),this.frames=0,this.time=null,this.map.off("render",this.eventHandlers.get("render"))}onRender(){if(this.time){this.frames++;const t=performance.now();t>=this.time+1e3&&(this.updateGraph(this.getFPS(t)),this.frames=0,this.time=performance.now())}}getFPS(t){return this.totalTime+=t-this.time,this.totalFrames+=this.frames,Math.round(1e3*this.frames/(t-this.time))||0}updateGraph(t){const n=this.canvas.getContext("2d"),r=Math.round(1e3*this.totalFrames/this.totalTime)||0,s=(this.graphHeight,this.barWidth);n.fillStyle=this.background,n.globalAlpha=1,n.fillRect(0,0,this.graphWidth,this.graphTop),n.fillStyle=this.color,this.readOutput.textContent=`${t} FPS (${r} Avg)`,n.drawImage(this.canvas,this.graphRight+s,this.graphTop,this.graphWidth-s,this.graphHeight,this.graphRight,this.graphTop,this.graphWidth-s,this.graphHeight),n.fillRect(this.graphRight+this.graphWidth-s,this.graphTop,s,this.graphHeight),n.fillStyle=this.background,n.globalAlpha=.75,n.fillRect(this.graphRight+this.graphWidth-s,this.graphTop,s,(1-t/100)*this.graphHeight)}}const vF=sr({name:"MglFrameRateControl",props:{position:{type:String,validator:e=>ml.indexOf(e)!==-1},background:{type:String,default:"rgba(0,0,0,0.9)"},barWidth:{type:Number,default:4*window.devicePixelRatio},color:{type:String,default:"#7cf859"},font:{type:String,default:"Monaco, Consolas, Courier, monospace"},graphHeight:{type:Number,default:60*window.devicePixelRatio},graphWidth:{type:Number,default:90*window.devicePixelRatio},graphTop:{type:Number,default:0},graphRight:{type:Number,default:5*window.devicePixelRatio},width:{type:Number,default:100*window.devicePixelRatio}},setup(e){const t=yt(hi),n=yt(pl),r=new gF(e.background,e.barWidth,e.color,e.font,e.graphHeight,e.graphWidth,e.graphTop,e.graphRight,e.width);hc(()=>e.position,t,r),br(()=>{var s;return n.value&&((s=t.value)==null?void 0:s.removeControl(r))})},render(){}}),yF=sr({name:"MglGeolocationControl",props:{position:{type:String,default:dc.TOP_RIGHT,validator:e=>ml.indexOf(e)!==-1},positionOptions:{type:Object,default:{enableHighAccuracy:!1,timeout:6e3}},fitBoundsOptions:{type:Object,default:{maxZoom:15}},trackUserLocation:{type:Boolean,default:!1},showAccuracyCircle:{type:Boolean,default:!0},showUserLocation:{type:Boolean,default:!0}},setup(e){const t=yt(hi),n=yt(pl),r=new au.GeolocateControl({positionOptions:e.positionOptions,fitBoundsOptions:e.fitBoundsOptions,trackUserLocation:e.trackUserLocation,showAccuracyCircle:e.showAccuracyCircle,showUserLocation:e.showUserLocation});hc(()=>e.position,t,r),br(()=>{var s;return n.value&&((s=t.value)==null?void 0:s.removeControl(r))})},render(){}}),_F=sr({name:"MglNavigationControl",props:{position:{type:String,default:dc.TOP_RIGHT,validator:e=>ml.indexOf(e)!==-1},showCompass:{type:Boolean,default:!0},showZoom:{type:Boolean,default:!0},visualizePitch:Boolean},setup(e){const t=yt(hi),n=yt(pl),r=new au.NavigationControl({showCompass:e.showCompass,showZoom:e.showZoom,visualizePitch:e.visualizePitch});hc(()=>e.position,t,r),br(()=>{var s;return n.value&&((s=t.value)==null?void 0:s.removeControl(r))})},render(){}});var VT=(e=>(e.IMPERIAL="imperial",e.METRIC="metric",e.NAUTICAL="nautical",e))(VT||{});const bF=Object.values(VT),xF=sr({name:"MglScaleControl",props:{position:{type:String,validator:e=>ml.indexOf(e)!==-1},maxWidth:{type:Number,default:100},unit:{type:String,default:"metric",validator:e=>bF.indexOf(e)!==-1}},setup(e){const t=yt(hi),n=yt(pl),r=new au.ScaleControl({maxWidth:e.maxWidth,unit:e.unit});hc(()=>e.position,t,r),br(()=>{var s;return n.value&&((s=t.value)==null?void 0:s.removeControl(r))})},render(){}});var mg=(e=>(e.DEFAULT="default",e.TEXT="text",e.MDI="mdi",e.SIMPLE_ICON="simple-icons",e))(mg||{});const wF=Object.values(mg),Tm={text:void 0,mdi:{size:21,viewbox:"0 0 24 24"},"simple-icons":{size:21,viewbox:"0 0 24 24"},default:{size:0,viewbox:"0 0 0 0"}},sb=sr({name:"MglButton",props:{type:{type:String,default:"default",validator:e=>wF.indexOf(e)!==-1},path:{type:String},size:Number,viewbox:String},slots:Object,setup(e,{slots:t}){!e.path&&e.type!=="text"&&SR();const n=lt(Tm[e.type]||Tm.default);return ut(()=>e.type,r=>n.value=Tm[r]||Tm.default),()=>{var r,s;return e.type==="text"?Zr("button",{type:"button"},(r=t.default)==null?void 0:r.call(t,{})):Zr("button",{type:"button",class:"maplibregl-ctrl-icon"},[Zr("svg",{width:e.size||n.value.size,height:e.size||n.value.size,viewBox:e.viewbox||n.value.viewbox},Zr("path",{fill:"currentColor",d:e.path})),(s=t.default)==null?void 0:s.call(t,{})])}}});function jS(e){return e&&!!e.stopPropagation}const SF=sr({name:"MglStyleSwitchControl",props:{position:{type:String,validator:e=>ml.indexOf(e)!==-1},mapStyles:{type:Array,required:!0,default:[]},modelValue:{type:Object},isOpen:{type:Boolean,default:void 0}},slots:Object,emits:["update:modelValue","update:isOpen"],setup(e,{emit:t,slots:n}){const r=yt(hi),s=yt(pl),u=yt(Xa),h=yt(w0),l=lt(!1),v=lt(e.isOpen===void 0?!1:e.isOpen),_=Ut(e.modelValue===void 0?e.mapStyles.length?e.mapStyles[0]:null:e.modelValue),S=new BT(l,!1),C=O.bind(null,!1);function k(){const R=r.value.getStyle().name;for(let F=0,N=e.mapStyles.length;F<N;F++)if(e.mapStyles[F].name===R){D(e.mapStyles[F]);break}}ut(u,R=>{R&&k()},{immediate:!0}),r.value.on("style.load",k),document.addEventListener("click",C),hc(()=>e.position,r,S),e.modelValue!==void 0&&ut(()=>e.modelValue,R=>{R!==void 0&&(_.value=R)}),e.isOpen!==void 0&&ut(()=>e.isOpen,R=>{R!==void 0&&(v.value=R)}),br(()=>{s.value&&(r.value.removeControl(S),r.value.off("style.load",k)),document.removeEventListener("click",C)});function D(R){var F;((F=_.value)==null?void 0:F.name)!==R.name&&(h.emit("styleSwitched",R),r.value.setStyle(R.style,{diff:!1}),e.modelValue===void 0&&(_.value=R),t("update:modelValue",R),O(!1))}function O(R,F){jS(F)?F.stopPropagation():jS(R)&&R.stopPropagation(),!(e.isOpen!==void 0&&e.isOpen===R||v.value===R)&&(e.isOpen===void 0?(v.value=typeof R=="boolean"?R:!v.value,t("update:isOpen",v.value)):t("update:isOpen",typeof R=="boolean"?R:!e.isOpen))}return()=>{if(!l.value)return Yn("style-switch-control");const R={isOpen:v,toggleOpen:O,setStyle:D,mapStyles:e.mapStyles,currentStyle:_};return Zr(h0,{to:S.container},n.default?n.default(R):[n.button?n.button(R):Zr(sb,{type:mg.MDI,path:"M12,18.54L19.37,12.8L21,14.07L12,21.07L3,14.07L4.62,12.81L12,18.54M12,16L3,9L12,2L21,9L12,16M12,4.53L6.26,9L12,13.47L17.74,9L12,4.53Z",class:["maplibregl-ctrl-icon maplibregl-style-switch",v.value?"is-open":""],onClick:O.bind(null,!0)}),n.styleList?n.styleList(R):Zr("div",{class:["maplibregl-style-list",v.value?"is-open":""]},e.mapStyles.map(F=>{var N,j;return F.icon?Zr(sb,{type:mg.MDI,path:F.icon.path,class:((N=_.value)==null?void 0:N.name)===F.name?"is-active":"",onClick:()=>D(F)},Ot(F.label)):Zr("button",{type:"button",class:((j=_.value)==null?void 0:j.name)===F.name?"is-active":"",onClick:()=>D(F)},Ot(F.label))}))])}},template:`
		<slot>
		<slot name="button"></slot>
		<slot name="styleList"></slot>
		</slot>
	`}),kF=sr({name:"MglMarker",props:{coordinates:{type:[Object,Array],required:!0},offset:[Object,Array],anchor:String,color:String,clickTolerance:Number,rotation:Number,rotationAlignment:String,pitchAlignment:String,scale:Number},setup(e){const t=yt(hi),n=Object.keys(e).filter(s=>e[s]!==void 0&&Vs.MARKER_OPTION_KEYS.indexOf(s)!==-1).reduce((s,u)=>(s[u]=Fr(e[u]),s),{}),r=new au.Marker(n);return r.setLngLat(e.coordinates).addTo(t.value),ut(()=>e.coordinates,s=>r.setLngLat(s)),ut(()=>e.offset,s=>r.setOffset(s||[0,0])),ut(()=>e.pitchAlignment,s=>r.setPitchAlignment(s||"auto")),ut(()=>e.rotationAlignment,s=>r.setRotationAlignment(s||"auto")),br(r.remove.bind(r)),{marker:r}},render(){}});class ou{constructor(){pi(this,"unmountHandlers",new Map)}registerUnmountHandler(t,n){this.unmountHandlers.set(t,n)}unregisterUnmountHandler(t){this.unmountHandlers.delete(t)}unmount(){this.unmountHandlers.forEach(t=>t())}}const NT=class ob{static genSourceOpts(t,n,r){return Object.keys(n).filter(s=>n[s]!==void 0&&r.indexOf(s)!==-1).reduce((s,u)=>(s[u]=Fr(n[u]),s),{type:t})}static getSourceRef(t,n){const r=typeof n=="string",s=String(t)+(r?n:"");let u=ob.REFS.get(s);return u||(u=lt(r?null:void 0),ob.REFS.set(s,u)),u}};pi(NT,"REFS",new Map);let Gi=NT;function lu(e,t,n,r,s){const u=yt(hi),h=yt(Xa),l=yt(w0);function v(){h.value&&(u.value.addSource(t.sourceId,Gi.genSourceOpts(n,t,r)),e.value=u.value.getSource(t.sourceId))}function _(){e.value=null}return ut(h,v,{immediate:!0}),u.value.on("style.load",v),l.on("styleSwitched",_),br(()=>{h.value&&(s.unmount(),u.value.removeSource(t.sourceId)),u.value.off("style.load",v),l.off("styleSwitched",_)})}const CF=su({animate:void 0,canvas:void 0,coordinates:void 0}),TF=sr({name:"MglCanvasSource",props:{sourceId:{type:String,required:!0},coordinates:Array,animate:Boolean,canvas:[Object,String]},slots:Object,setup(e,{slots:t}){const n=yt(ji),r=Gi.getSourceRef(n,e.sourceId),s=new ou;return bn(Hi,e.sourceId),bn(uc,s),lu(r,e,"canvas",CF,s),ut(_r(e.coordinates)?e.coordinates:()=>e.coordinates,u=>{var h;(h=r.value)==null||h.setCoordinates(u)},{immediate:!0}),()=>[Yn("Canvas Source"),r.value&&t.default?t.default({}):void 0]}}),AF=su({data:void 0,maxzoom:void 0,attribution:void 0,buffer:void 0,tolerance:void 0,cluster:void 0,clusterRadius:void 0,clusterMaxZoom:void 0,clusterMinPoints:void 0,clusterProperties:void 0,lineMetrics:void 0,generateId:void 0,promoteId:void 0,filter:void 0}),EF=sr({name:"MglGeoJsonSource",props:{sourceId:{type:String,required:!0},data:[Object,String],maxzoom:Number,attribution:String,buffer:Number,tolerance:Number,cluster:[Number,Boolean],clusterRadius:Number,clusterMaxZoom:Number,clusterMinPoints:Number,clusterProperties:Object,lineMetrics:Boolean,generateId:Boolean,promoteId:[Object,String],filter:[Array,String,Object]},slots:Object,setup(e,{slots:t}){const n=yt(ji),r=Gi.getSourceRef(n,e.sourceId),s=new ou;return bn(Hi,e.sourceId),bn(uc,s),lu(r,e,"geojson",AF,s),ut(_r(e.data)?e.data:()=>e.data,u=>{var h;(h=r.value)==null||h.setData(u||{type:"FeatureCollection",features:[]})},{immediate:!0}),()=>[Yn("GeoJSON Source"),r.value&&t.default?t.default({}):void 0]}}),IF=su({url:void 0,coordinates:void 0}),PF=sr({name:"MglImageSource",props:{sourceId:{type:String,required:!0},url:String,coordinates:Array},slots:Object,setup(e,{slots:t}){const n=yt(ji),r=Gi.getSourceRef(n,e.sourceId),s=new ou;return bn(Hi,e.sourceId),bn(uc,s),lu(r,e,"image",IF,s),ut(_r(e.coordinates)?e.coordinates:()=>e.coordinates,u=>{var h;(h=r.value)==null||h.setCoordinates(u)},{immediate:!0}),()=>[Yn("Image Source"),r.value&&t.default?t.default({}):void 0]}}),DF=su({url:void 0,tiles:void 0,bounds:void 0,minzoom:void 0,maxzoom:void 0,tileSize:void 0,scheme:void 0,attribution:void 0,volatile:void 0}),MF=sr({name:"MglRasterSource",props:{sourceId:{type:String,required:!0},url:String,tiles:Array,bounds:Array,minzoom:Number,maxzoom:Number,tileSize:Number,scheme:String,attribution:String,volatile:Boolean},slots:Object,setup(e,{slots:t}){const n=yt(ji),r=Gi.getSourceRef(n,e.sourceId),s=new ou;return bn(Hi,e.sourceId),bn(uc,s),lu(r,e,"raster",DF,s),()=>[Yn("Raster Source"),r.value&&t.default?t.default({}):void 0]}}),LF=su({url:void 0,tiles:void 0,bounds:void 0,minzoom:void 0,maxzoom:void 0,tileSize:void 0,attribution:void 0,encoding:void 0,volatile:void 0,redFactor:void 0,blueFactor:void 0,greenFactor:void 0,baseShift:void 0}),RF=sr({name:"MglRasterDemSource",props:{sourceId:{type:String,required:!0},url:String,tiles:Array,bounds:Array,minzoom:Number,maxzoom:Number,tileSize:Number,attribution:String,encoding:String,volatile:Boolean,redFactor:Number,blueFactor:Number,greenFactor:Number,baseShift:Number},slots:Object,setup(e,{slots:t}){const n=yt(ji),r=Gi.getSourceRef(n,e.sourceId),s=new ou;return bn(Hi,e.sourceId),bn(uc,s),lu(r,e,"raster-dem",LF,s),()=>[Yn("RasterDem Source"),r.value&&t.default?t.default({}):void 0]}}),OF=su({url:void 0,tiles:void 0,bounds:void 0,scheme:void 0,minzoom:void 0,maxzoom:void 0,attribution:void 0,promoteId:void 0,volatile:void 0}),zF=sr({name:"MglVectorSource",props:{sourceId:{type:String,required:!0},url:String,tiles:Array,bounds:Array,scheme:String,minzoom:Number,maxzoom:Number,attribution:String,promoteId:[Object,String],volatile:Boolean},slots:Object,setup(e,{slots:t}){const n=yt(ji),r=Gi.getSourceRef(n,e.sourceId),s=new ou;return bn(Hi,e.sourceId),bn(uc,s),lu(r,e,"vector",OF,s),ut(_r(e.tiles)?e.tiles:()=>e.tiles,u=>{var h;(h=r.value)==null||h.setTiles(u||[])},{immediate:!0}),ut(_r(e.url)?e.url:()=>e.url,u=>{var h;(h=r.value)==null||h.setUrl(u||"")},{immediate:!0}),()=>[Yn("Vector Source"),r.value&&t.default?t.default({}):void 0]}}),FF=su({urls:void 0,coordinates:void 0}),BF=sr({name:"MglVideoSource",props:{sourceId:{type:String,required:!0},urls:Array,coordinates:Array},slots:Object,setup(e,{slots:t}){const n=yt(ji),r=Gi.getSourceRef(n,e.sourceId),s=new ou;return bn(Hi,e.sourceId),bn(uc,s),lu(r,e,"video",FF,s),ut(_r(e.coordinates)?e.coordinates:()=>e.coordinates,u=>{var h;(h=r.value)==null||h.setCoordinates(u)},{immediate:!0}),()=>[Yn("Video Source"),r.value&&t.default?t.default({}):void 0]}}),Um=class lo{static genLayerOpts(t,n,r,s){return Object.keys(r).filter(u=>r[u]!==void 0&&lo.SOURCE_OPTS.indexOf(u)!==-1).reduce((u,h)=>(u[h==="sourceLayer"?"source-layer":h]=Fr(r[h]),u),{type:n,source:r.source||s,id:t})}static registerLayerEvents(t,n,r){if(r.props)for(let s=0,u=lo.LAYER_EVENTS.length;s<u;s++){const h="on"+lo.LAYER_EVENTS[s].charAt(0).toUpperCase()+lo.LAYER_EVENTS[s].substr(1);r.props[h]&&t.on(lo.LAYER_EVENTS[s],n,r.props[h])}}static unregisterLayerEvents(t,n,r){if(r.props)for(let s=0,u=lo.LAYER_EVENTS.length;s<u;s++){const h="on"+lo.LAYER_EVENTS[s].charAt(0).toUpperCase()+lo.LAYER_EVENTS[s].substr(1);r.props[h]&&t.off(lo.LAYER_EVENTS[s],n,r.props[h])}}};pi(Um,"SOURCE_OPTS",["metadata","ref","source","sourceLayer","minzoom","maxzoom","interactive","filter","layout","paint"]),pi(Um,"LAYER_EVENTS",["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","mouseover","mouseout","contextmenu","touchstart","touchend","touchcancel"]),pi(Um,"SHARED",{props:{layerId:{type:String,required:!0},source:[String,Object],metadata:[Object,Array,String,Number],sourceLayer:String,minzoom:Number,maxzoom:Number,interactive:Boolean,filter:Array,before:String},emits:["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","mouseover","mouseout","contextmenu","touchstart","touchend","touchcancel"]});let Un=Um;function gl(e,t){const n=yt(hi),r=yt(Xa),s=yt(uc);function u(){r.value&&(t&&Un.unregisterLayerEvents(n.value,e,t.vnode),n.value.getLayer(e)&&n.value.removeLayer(e))}s.registerUnmountHandler(e,u),br(()=>{s.unregisterUnmountHandler(e),u()})}const VF=sr({name:"MglBackgroundLayer",props:{...Un.SHARED.props,layout:Object,paint:Object},emits:[...Un.SHARED.emits],setup(e){const t=yt(Hi);if(!t&&!e.source)return;const n=yt(hi),r=yt(Xa),s=yt(ji),u=Gi.getSourceRef(s,e.source||t);return gl(e.layerId),ut([r,u],([h,l])=>{h&&(l||l===void 0)&&n.value.addLayer(Un.genLayerOpts(e.layerId,"background",e,t),e.before||void 0)},{immediate:!0}),()=>Yn("Background Layer")}}),NF=sr({name:"MglCircleLayer",props:{...Un.SHARED.props,layout:Object,paint:Object},emits:[...Un.SHARED.emits],setup(e){const t=yt(Hi);if(!t&&!e.source)return;const n=xs(),r=yt(hi),s=yt(Xa),u=yt(ji),h=Gi.getSourceRef(u,e.source||t);return gl(e.layerId,n),ut([s,h],([l,v])=>{l&&(v||v===void 0)&&(r.value.addLayer(Un.genLayerOpts(e.layerId,"circle",e,t),e.before||void 0),Un.registerLayerEvents(r.value,e.layerId,n.vnode))},{immediate:!0}),()=>Yn("Circle Layer")}}),$F=sr({name:"MglFillLayer",props:{...Un.SHARED.props,layout:Object,paint:Object},emits:[...Un.SHARED.emits],setup(e){const t=yt(Hi);if(!t&&!e.source)return;const n=xs(),r=yt(hi),s=yt(Xa),u=yt(ji),h=Gi.getSourceRef(u,e.source||t);return gl(e.layerId,n),ut([s,h],([l,v])=>{l&&(v||v===void 0)&&(r.value.addLayer(Un.genLayerOpts(e.layerId,"fill",e,t),e.before||void 0),Un.registerLayerEvents(r.value,e.layerId,n.vnode))},{immediate:!0}),()=>Yn("Fill Layer")}}),UF=sr({name:"MglFillExtrusionLayer",props:{...Un.SHARED.props,layout:Object,paint:Object},emits:[...Un.SHARED.emits],setup(e){const t=yt(Hi);if(!t&&!e.source)return;const n=xs(),r=yt(hi),s=yt(Xa),u=yt(ji),h=Gi.getSourceRef(u,e.source||t);return gl(e.layerId,n),ut([s,h],([l,v])=>{l&&(v||v===void 0)&&(r.value.addLayer(Un.genLayerOpts(e.layerId,"fill-extrusion",e,t),e.before||void 0),Un.registerLayerEvents(r.value,e.layerId,n.vnode))},{immediate:!0}),()=>Yn("Fill Extrusion Layer")}}),qF=sr({name:"MglHeatmapLayer",props:{...Un.SHARED.props,layout:Object,paint:Object},emits:[...Un.SHARED.emits],setup(e){const t=yt(Hi);if(!t&&!e.source)return;const n=xs(),r=yt(hi),s=yt(Xa),u=yt(ji),h=Gi.getSourceRef(u,e.source||t);return gl(e.layerId,n),ut([s,h],([l,v])=>{l&&(v||v===void 0)&&(r.value.addLayer(Un.genLayerOpts(e.layerId,"heatmap",e,t),e.before||void 0),Un.registerLayerEvents(r.value,e.layerId,n.vnode))},{immediate:!0}),()=>Yn("Heatmap Layer")}}),jF=sr({name:"MglHillshadeLayer",props:{...Un.SHARED.props,layout:Object,paint:Object},emits:[...Un.SHARED.emits],setup(e){const t=yt(Hi);if(!t&&!e.source)return;const n=xs(),r=yt(hi),s=yt(Xa),u=yt(ji),h=Gi.getSourceRef(u,e.source||t);return gl(e.layerId,n),ut([s,h],([l,v])=>{l&&(v||v===void 0)&&(r.value.addLayer(Un.genLayerOpts(e.layerId,"hillshade",e,t),e.before||void 0),Un.registerLayerEvents(r.value,e.layerId,n.vnode))},{immediate:!0}),()=>Yn("Hillshade Layer")}}),HF=sr({name:"MglLineLayer",props:{...Un.SHARED.props,layout:Object,paint:Object},emits:[...Un.SHARED.emits],setup(e){const t=yt(Hi);if(!t&&!e.source)return;const n=xs(),r=yt(hi),s=yt(Xa),u=yt(ji),h=Gi.getSourceRef(u,e.source||t);return gl(e.layerId,n),ut([s,h],([l,v])=>{l&&(v||v===void 0)&&(r.value.addLayer(Un.genLayerOpts(e.layerId,"line",e,t),e.before||void 0),Un.registerLayerEvents(r.value,e.layerId,n.vnode))},{immediate:!0}),()=>Yn("Line Layer")}}),GF=sr({name:"MglRasterLayer",props:{...Un.SHARED.props,layout:Object,paint:Object},emits:[...Un.SHARED.emits],setup(e){const t=yt(Hi);if(!t&&!e.source)return;const n=xs(),r=yt(hi),s=yt(Xa),u=yt(ji),h=Gi.getSourceRef(u,e.source||t);return gl(e.layerId,n),ut([s,h],([l,v])=>{l&&(v||v===void 0)&&(r.value.addLayer(Un.genLayerOpts(e.layerId,"raster",e,t),e.before||void 0),Un.registerLayerEvents(r.value,e.layerId,n.vnode))},{immediate:!0}),()=>Yn("Raster Layer")}}),WF=sr({name:"MglSymbolLayer",props:{...Un.SHARED.props,layout:Object,paint:Object},emits:[...Un.SHARED.emits],setup(e){const t=yt(Hi);if(!t&&!e.source)return;const n=xs(),r=yt(hi),s=yt(Xa),u=yt(ji),h=Gi.getSourceRef(u,e.source||t);return gl(e.layerId,n),ut([s,h],([l,v])=>{l&&(v||v===void 0)&&(r.value.addLayer(Un.genLayerOpts(e.layerId,"symbol",e,t),e.before||void 0),Un.registerLayerEvents(r.value,e.layerId,n.vnode))},{immediate:!0}),()=>Yn("Symbol Layer")}}),YF=Object.freeze(Object.defineProperty({__proto__:null,MglAttributionControl:fF,MglBackgroundLayer:VF,MglButton:sb,MglCanvasSource:TF,MglCircleLayer:NF,MglCustomControl:pF,MglFillExtrusionLayer:UF,MglFillLayer:$F,MglFrameRateControl:vF,MglFullscreenControl:mF,MglGeoJsonSource:EF,MglGeolocationControl:yF,MglHeatmapLayer:qF,MglHillshadeLayer:jF,MglImageSource:PF,MglLineLayer:HF,MglMap:hF,MglMarker:kF,MglNavigationControl:_F,MglRasterDemSource:RF,MglRasterLayer:GF,MglRasterSource:MF,MglScaleControl:xF,MglStyleSwitchControl:SF,MglSymbolLayer:WF,MglVectorSource:zF,MglVideoSource:BF},Symbol.toStringTag,{value:"Module"})),ZF=function(e){Object.entries(YF).forEach(([t,n])=>{e.component(t,n)})},Ws=Xe({border:[Boolean,Number,String]},"border");function Co(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ko();return{borderClasses:Q(()=>{const r=_r(e)?e.value:e.border,s=[];if(r===!0||r==="")s.push(`${t}--border`);else if(typeof r=="string"||r===0)for(const u of String(r).split(" "))s.push(`border-${u}`);return s})}}function S0(e){return m0(()=>{const t=[],n={};if(e.value.background)if(eb(e.value.background)){if(n.backgroundColor=e.value.background,!e.value.text&&OO(e.value.background)){const r=po(e.value.background);if(r.a==null||r.a===1){const s=gT(r);n.color=s,n.caretColor=s}}}else t.push(`bg-${e.value.background}`);return e.value.text&&(eb(e.value.text)?(n.color=e.value.text,n.caretColor=e.value.text):t.push(`text-${e.value.text}`)),{colorClasses:t,colorStyles:n}})}function xa(e,t){const n=Q(()=>({text:_r(e)?e.value:t?e[t]:null})),{colorClasses:r,colorStyles:s}=S0(n);return{textColorClasses:r,textColorStyles:s}}function Li(e,t){const n=Q(()=>({background:_r(e)?e.value:t?e[t]:null})),{colorClasses:r,colorStyles:s}=S0(n);return{backgroundColorClasses:r,backgroundColorStyles:s}}const To=Xe({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Ao(e){return{dimensionStyles:Q(()=>({height:Jt(e.height),maxHeight:Jt(e.maxHeight),maxWidth:Jt(e.maxWidth),minHeight:Jt(e.minHeight),minWidth:Jt(e.minWidth),width:Jt(e.width)}))}}const Ss=Xe({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function Ys(e){return{elevationClasses:Q(()=>{const n=_r(e)?e.value:e.elevation,r=[];return n==null||r.push(`elevation-${n}`),r})}}const HS={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Ed=Xe({location:String},"location");function Id(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:r}=ws();return{locationStyles:Q(()=>{if(!e.location)return{};const{side:u,align:h}=J_(e.location.split(" ").length>1?e.location:`${e.location} center`,r.value);function l(_){return n?n(_):0}const v={};return u!=="center"&&(t?v[HS[u]]=`calc(100% - ${l(u)}px)`:v[u]=0),h!=="center"?t?v[HS[h]]=`calc(100% - ${l(h)}px)`:v[h]=0:(u==="center"?v.top=v.left="50%":v[{top:"left",bottom:"left",left:"top",right:"top"}[u]]="50%",v.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[u]),v})}}const KF=["static","relative","fixed","absolute","sticky"],Kg=Xe({position:{type:String,validator:e=>KF.includes(e)}},"position");function Xg(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ko();return{positionClasses:Q(()=>e.position?`${t}--${e.position}`:void 0)}}const Wi=Xe({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function sa(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ko();return{roundedClasses:Q(()=>{const r=_r(e)?e.value:e.rounded,s=_r(e)?e.value:e.tile,u=[];if(r===!0||r==="")u.push(`${t}--rounded`);else if(typeof r=="string"||r===0)for(const h of String(r).split(" "))u.push(`rounded-${h}`);else s&&u.push("rounded-0");return u})}}const cr=Xe({tag:{type:String,default:"div"}},"tag"),$T=Xe({color:String,...Ws(),...pn(),...To(),...Ss(),...Ed(),...Kg(),...Wi(),...cr(),...Tr()},"VSheet"),bd=At()({name:"VSheet",props:$T(),setup(e,t){let{slots:n}=t;const{themeClasses:r}=Hr(e),{backgroundColorClasses:s,backgroundColorStyles:u}=Li(Ct(e,"color")),{borderClasses:h}=Co(e),{dimensionStyles:l}=Ao(e),{elevationClasses:v}=Ys(e),{locationStyles:_}=Id(e),{positionClasses:S}=Xg(e),{roundedClasses:C}=sa(e);return zt(()=>E(e.tag,{class:["v-sheet",r.value,s.value,h.value,v.value,S.value,C.value,e.class],style:[u.value,l.value,_.value,e.style]},n)),{}}}),XF=Xe({allDay:Boolean,interval:Object,intervalDivisions:{type:Number,required:!0},intervalDuration:{type:Number,required:!0},intervalHeight:{type:Number,required:!0},event:Object},"VCalendarIntervalEvent"),lb=At()({name:"VCalendarIntervalEvent",props:XF(),setup(e){const t=Uf(),n=()=>{var r,s,u,h;if(!((r=e.event)!=null&&r.first)&&!((s=e.event)!=null&&s.last)||t.isEqual((u=e.event)==null?void 0:u.start,(h=e.interval)==null?void 0:h.start))return{height:"100%",margin:Jt(0)};{const{height:l,margin:v}=Array.from({length:e.intervalDivisions},_=>_*(e.intervalDuration/e.intervalDivisions)).reduce((_,S,C)=>{var k,D;return t.isBefore(t.addMinutes((k=e.interval)==null?void 0:k.start,S),(D=e.event)==null?void 0:D.start)?{height:Jt(e.intervalHeight/e.intervalDivisions*C),margin:Jt(e.intervalHeight/e.intervalDivisions*C)}:{height:_.height,margin:_.margin}},{height:"",margin:""});return{height:l,margin:v}}};return zt(()=>{var r,s,u,h,l;return E(bd,{height:n().height,density:"comfortable",style:`margin-top: ${n().margin}`,class:"v-calendar-internal-event",color:((r=e.event)==null?void 0:r.color)??void 0,rounded:(s=e.event)!=null&&s.first&&((u=e.event)!=null&&u.last)?!0:(h=e.event)!=null&&h.first?"t":(l=e.event)!=null&&l.last?"b":!1},{default:()=>{var v,_;return[(v=e.event)!=null&&v.first?(_=e.event)==null?void 0:_.title:""]}})}),{}}}),UT=Xe({day:{type:Object,default:()=>({})},dayIndex:Number,events:Array,intervalDivisions:{type:Number,default:2},intervalDuration:{type:Number,default:60},intervalHeight:{type:Number,default:48},intervalFormat:{type:[String,Function],default:"fullTime12h"},intervalStart:{type:Number,default:0}},"VCalendarInterval"),cb=At()({name:"VCalendarInterval",props:{index:{type:Number,required:!0},...UT()},setup(e,t){const n=Uf(),r=Q(()=>{const s=n.addMinutes(n.startOfDay(e.day.date),e.intervalDuration*(e.index+e.intervalStart)),u=n.addMinutes(n.startOfDay(e.day.date),e.intervalDuration*(e.index+e.intervalStart+1)-1);return{...e.day,label:n.format(s,"fullTime24h"),start:s,end:u,events:e.events?e.events.filter(h=>!h.allDay&&(n.isEqual(s,h.start)||n.isWithinRange(h.start,[s,u])||n.isWithinRange(s,[h.start,h.end])||n.isEqual(u,h.end))).map(h=>({...h,first:n.isEqual(s,h.start)||n.isWithinRange(h.start,[s,u]),last:n.isEqual(u,h.end)||n.isWithinRange(h.end,[s,u])})):[]}});return zt(()=>{var s,u;return e.dayIndex===0?E("div",{class:"v-calendar-day__row-with-label",style:`height: ${Jt(e.intervalHeight)}`},[E("div",{class:"v-calendar-day__row-label"},[E("slot",{name:"intervalFormat",interval:r.value},[e.index?e.intervalFormat?typeof e.intervalFormat=="string"?n.format(r.value.start,"hours12h"):e.intervalFormat(r.value):r.value.label:""])]),E("div",{class:"v-calendar-day__row-hairline"},null),E("div",{class:["v-calendar-day__row-content",r.value.events.some(h=>!h.last)?"v-calendar-day__row-content-through":""]},[E("slot",{name:"intervalBody",interval:r.value},[(s=r.value.events)==null?void 0:s.map(h=>E(lb,{event:h,interval:r.value,intervalDivisions:e.intervalDivisions,intervalDuration:e.intervalDuration,intervalHeight:e.intervalHeight},null))])])]):E("div",{class:"v-calendar-day__row-without-label",style:`height: ${Jt(e.intervalHeight)}`},[E("div",{class:["v-calendar-day__row-content",r.value.events.some(h=>!h.last)?"v-calendar-day__row-content-through":""]},[E("slot",{name:"intervalBody",interval:r.value},[(u=r.value.events)==null?void 0:u.filter(h=>!h.allDay).map(h=>E(lb,{event:h,interval:r.value,intervalDivisions:e.intervalDivisions,intervalDuration:e.intervalDuration,intervalHeight:e.intervalHeight},null))])])])}),{interval:r}}}),JF=[null,"default","comfortable","compact"],Ba=Xe({density:{type:String,default:"default",validator:e=>JF.includes(e)}},"density");function ks(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ko();return{densityClasses:Q(()=>`${t}--density-${e.density}`)}}const QF=["elevated","flat","tonal","outlined","text","plain"];function Pd(e,t){return E(rn,null,[e&&E("span",{key:"overlay",class:`${t}__overlay`},null),E("span",{key:"underlay",class:`${t}__underlay`},null)])}const Eo=Xe({color:String,variant:{type:String,default:"elevated",validator:e=>QF.includes(e)}},"variant");function Dd(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ko();const n=Q(()=>{const{variant:u}=Fr(e);return`${t}--variant-${u}`}),{colorClasses:r,colorStyles:s}=S0(Q(()=>{const{variant:u,color:h}=Fr(e);return{[["elevated","flat"].includes(u)?"background":"text"]:h}}));return{colorClasses:r,colorStyles:s,variantClasses:n}}const qT=Xe({divided:Boolean,...Ws(),...pn(),...Ba(),...Ss(),...Wi(),...cr(),...Tr(),...Eo()},"VBtnGroup"),GS=At()({name:"VBtnGroup",props:qT(),setup(e,t){let{slots:n}=t;const{themeClasses:r}=Hr(e),{densityClasses:s}=ks(e),{borderClasses:u}=Co(e),{elevationClasses:h}=Ys(e),{roundedClasses:l}=sa(e);Ka({VBtn:{height:"auto",color:Ct(e,"color"),density:Ct(e,"density"),flat:!0,variant:Ct(e,"variant")}}),zt(()=>E(e.tag,{class:["v-btn-group",{"v-btn-group--divided":e.divided},r.value,u.value,s.value,h.value,l.value,e.class],style:e.style},n))}}),k0=Xe({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),C0=Xe({value:null,disabled:Boolean,selectedClass:String},"group-item");function T0(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=ni("useGroupItem");if(!r)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const s=Fa();bn(Symbol.for(`${t.description}:id`),s);const u=yt(t,null);if(!u){if(!n)return u;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const h=Ct(e,"value"),l=Q(()=>!!(u.disabled.value||e.disabled));u.register({id:s,value:h,disabled:l},r),br(()=>{u.unregister(s)});const v=Q(()=>u.isSelected(s)),_=Q(()=>v.value&&[u.selectedClass.value,e.selectedClass]);return ut(v,S=>{r.emit("group:selected",{value:S})},{flush:"sync"}),{id:s,isSelected:v,toggle:()=>u.select(s,!v.value),select:S=>u.select(s,S),selectedClass:_,value:h,disabled:l,group:u}}function Jg(e,t){let n=!1;const r=Si([]),s=xn(e,"modelValue",[],k=>k==null?[]:jT(r,Mi(k)),k=>{const D=tB(r,k);return e.multiple?D:D[0]}),u=ni("useGroup");function h(k,D){const O=k,R=Symbol.for(`${t.description}:id`),N=uf(R,u==null?void 0:u.vnode).indexOf(D);Fr(O.value)==null&&(O.value=N),N>-1?r.splice(N,0,O):r.push(O)}function l(k){if(n)return;v();const D=r.findIndex(O=>O.id===k);r.splice(D,1)}function v(){const k=r.find(D=>!D.disabled);k&&e.mandatory==="force"&&!s.value.length&&(s.value=[k.id])}Oa(()=>{v()}),br(()=>{n=!0});function _(k,D){const O=r.find(R=>R.id===k);if(!(D&&(O!=null&&O.disabled)))if(e.multiple){const R=s.value.slice(),F=R.findIndex(j=>j===k),N=~F;if(D=D??!N,N&&e.mandatory&&R.length<=1||!N&&e.max!=null&&R.length+1>e.max)return;F<0&&D?R.push(k):F>=0&&!D&&R.splice(F,1),s.value=R}else{const R=s.value.includes(k);if(e.mandatory&&R)return;s.value=D??!R?[k]:[]}}function S(k){if(e.multiple,s.value.length){const D=s.value[0],O=r.findIndex(N=>N.id===D);let R=(O+k)%r.length,F=r[R];for(;F.disabled&&R!==O;)R=(R+k)%r.length,F=r[R];if(F.disabled)return;s.value=[r[R].id]}else{const D=r.find(O=>!O.disabled);D&&(s.value=[D.id])}}const C={register:h,unregister:l,selected:s,select:_,disabled:Ct(e,"disabled"),prev:()=>S(r.length-1),next:()=>S(1),isSelected:k=>s.value.includes(k),selectedClass:Q(()=>e.selectedClass),items:Q(()=>r),getItemIndex:k=>eB(r,k)};return bn(t,C),C}function eB(e,t){const n=jT(e,[t]);return n.length?e.findIndex(r=>r.id===n[0]):-1}function jT(e,t){const n=[];return t.forEach(r=>{const s=e.find(h=>fl(r,h.value)),u=e[r];(s==null?void 0:s.value)!=null?n.push(s.id):u!=null&&n.push(u.id)}),n}function tB(e,t){const n=[];return t.forEach(r=>{const s=e.findIndex(u=>u.id===r);if(~s){const u=e[s];n.push(u.value!=null?u.value:s)}}),n}const HT=Symbol.for("vuetify:v-btn-toggle"),nB=Xe({...qT(),...k0()},"VBtnToggle");At()({name:"VBtnToggle",props:nB(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:r,next:s,prev:u,select:h,selected:l}=Jg(e,HT);return zt(()=>{const v=GS.filterProps(e);return E(GS,wt({class:["v-btn-toggle",e.class]},v,{style:e.style}),{default:()=>{var _;return[(_=n.default)==null?void 0:_.call(n,{isSelected:r,next:s,prev:u,select:h,selected:l})]}})}),{next:s,prev:u,select:h}}});const rB=Xe({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),Qn=At(!1)({name:"VDefaultsProvider",props:rB(),setup(e,t){let{slots:n}=t;const{defaults:r,disabled:s,reset:u,root:h,scoped:l}=n0(e);return Ka(r,{reset:u,root:h,scoped:l,disabled:s}),()=>{var v;return(v=n.default)==null?void 0:v.call(n)}}}),iB=["x-small","small","default","large","x-large"],cu=Xe({size:{type:[String,Number],default:"default"}},"size");function qf(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ko();return m0(()=>{let n,r;return cg(iB,e.size)?n=`${t}--size-${e.size}`:e.size&&(r={width:Jt(e.size),height:Jt(e.size)}),{sizeClasses:n,sizeStyles:r}})}const aB=Xe({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:Rn,...pn(),...cu(),...cr({tag:"i"}),...Tr()},"VIcon"),pr=At()({name:"VIcon",props:aB(),setup(e,t){let{attrs:n,slots:r}=t;const s=lt(),{themeClasses:u}=Hr(e),{iconData:h}=Zz(Q(()=>s.value||e.icon)),{sizeClasses:l}=qf(e),{textColorClasses:v,textColorStyles:_}=xa(Ct(e,"color"));return zt(()=>{var k,D;const S=(k=r.default)==null?void 0:k.call(r);S&&(s.value=(D=oT(S).filter(O=>O.type===Nf&&O.children&&typeof O.children=="string")[0])==null?void 0:D.children);const C=!!(n.onClick||n.onClickOnce);return E(h.value.component,{tag:e.tag,icon:h.value.icon,class:["v-icon","notranslate",u.value,l.value,v.value,{"v-icon--clickable":C,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class],style:[l.value?void 0:{fontSize:Jt(e.size),height:Jt(e.size),width:Jt(e.size)},_.value,e.style],role:C?"button":void 0,"aria-hidden":!C,tabindex:C?e.disabled?-1:0:void 0},{default:()=>[S]})}),{}}});function GT(e,t){const n=lt(),r=Ut(!1);if(p0){const s=new IntersectionObserver(u=>{e==null||e(u,s),r.value=!!u.find(h=>h.isIntersecting)},t);br(()=>{s.disconnect()}),ut(n,(u,h)=>{h&&(s.unobserve(h),r.value=!1),u&&s.observe(u)},{flush:"post"})}return{intersectionRef:n,isIntersecting:r}}const sB=Xe({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...pn(),...cu(),...cr({tag:"div"}),...Tr()},"VProgressCircular"),WT=At()({name:"VProgressCircular",props:sB(),setup(e,t){let{slots:n}=t;const r=20,s=2*Math.PI*r,u=lt(),{themeClasses:h}=Hr(e),{sizeClasses:l,sizeStyles:v}=qf(e),{textColorClasses:_,textColorStyles:S}=xa(Ct(e,"color")),{textColorClasses:C,textColorStyles:k}=xa(Ct(e,"bgColor")),{intersectionRef:D,isIntersecting:O}=GT(),{resizeRef:R,contentRect:F}=cl(),N=Q(()=>Math.max(0,Math.min(100,parseFloat(e.modelValue)))),j=Q(()=>Number(e.width)),X=Q(()=>v.value?Number(e.size):F.value?F.value.width:Math.max(j.value,32)),ee=Q(()=>r/(1-j.value/X.value)*2),le=Q(()=>j.value/X.value*ee.value),ie=Q(()=>Jt((100-N.value)/100*s));return Ui(()=>{D.value=u.value,R.value=u.value}),zt(()=>E(e.tag,{ref:u,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":O.value,"v-progress-circular--disable-shrink":e.indeterminate==="disable-shrink"},h.value,l.value,_.value,e.class],style:[v.value,S.value,e.style],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:N.value},{default:()=>[E("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${ee.value} ${ee.value}`},[E("circle",{class:["v-progress-circular__underlay",C.value],style:k.value,fill:"transparent",cx:"50%",cy:"50%",r,"stroke-width":le.value,"stroke-dasharray":s,"stroke-dashoffset":0},null),E("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r,"stroke-width":le.value,"stroke-dasharray":s,"stroke-dashoffset":ie.value},null)]),n.default&&E("div",{class:"v-progress-circular__content"},[n.default({value:N.value})])]})),{}}}),oB=Xe({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...pn(),...Ed({location:"top"}),...Wi(),...cr(),...Tr()},"VProgressLinear"),A0=At()({name:"VProgressLinear",props:oB(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=xn(e,"modelValue"),{isRtl:s,rtlClasses:u}=ws(),{themeClasses:h}=Hr(e),{locationStyles:l}=Id(e),{textColorClasses:v,textColorStyles:_}=xa(e,"color"),{backgroundColorClasses:S,backgroundColorStyles:C}=Li(Q(()=>e.bgColor||e.color)),{backgroundColorClasses:k,backgroundColorStyles:D}=Li(e,"color"),{roundedClasses:O}=sa(e),{intersectionRef:R,isIntersecting:F}=GT(),N=Q(()=>parseInt(e.max,10)),j=Q(()=>parseInt(e.height,10)),X=Q(()=>parseFloat(e.bufferValue)/N.value*100),ee=Q(()=>parseFloat(r.value)/N.value*100),le=Q(()=>s.value!==e.reverse),ie=Q(()=>e.indeterminate?"fade-transition":"slide-x-transition"),se=Q(()=>e.bgOpacity==null?e.bgOpacity:parseFloat(e.bgOpacity));function H(Z){if(!R.value)return;const{left:ne,right:_e,width:te}=R.value.getBoundingClientRect(),Se=le.value?te-Z.clientX+(_e-te):Z.clientX-ne;r.value=Math.round(Se/te*N.value)}return zt(()=>E(e.tag,{ref:R,class:["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&F.value,"v-progress-linear--reverse":le.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped},O.value,h.value,u.value,e.class],style:[{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?Jt(j.value):0,"--v-progress-linear-height":Jt(j.value),...l.value},e.style],role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:ee.value,onClick:e.clickable&&H},{default:()=>[e.stream&&E("div",{key:"stream",class:["v-progress-linear__stream",v.value],style:{..._.value,[le.value?"left":"right"]:Jt(-j.value),borderTop:`${Jt(j.value/2)} dotted`,opacity:se.value,top:`calc(50% - ${Jt(j.value/4)})`,width:Jt(100-X.value,"%"),"--v-progress-linear-stream-to":Jt(j.value*(le.value?1:-1))}},null),E("div",{class:["v-progress-linear__background",S.value],style:[C.value,{opacity:se.value,width:Jt(e.stream?X.value:100,"%")}]},null),E(_o,{name:ie.value},{default:()=>[e.indeterminate?E("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(Z=>E("div",{key:Z,class:["v-progress-linear__indeterminate",Z,k.value],style:D.value},null))]):E("div",{class:["v-progress-linear__determinate",k.value],style:[D.value,{width:Jt(ee.value,"%")}]},null)]}),n.default&&E("div",{class:"v-progress-linear__content"},[n.default({value:ee.value,buffer:X.value})])]})),{}}}),Qg=Xe({loading:[Boolean,String]},"loader");function ev(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ko();return{loaderClasses:Q(()=>({[`${t}--loading`]:e.loading}))}}function E0(e,t){var r;let{slots:n}=t;return E("div",{class:`${e.name}__loader`},[((r=n.default)==null?void 0:r.call(n,{color:e.color,isActive:e.active}))||E(A0,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}function lB(){const e=ni("useRoute");return Q(()=>{var t;return(t=e==null?void 0:e.proxy)==null?void 0:t.$route})}function YT(){var e,t;return(t=(e=ni("useRouter"))==null?void 0:e.proxy)==null?void 0:t.$router}function jf(e,t){var _,S;const n=DL("RouterLink"),r=Q(()=>!!(e.href||e.to)),s=Q(()=>(r==null?void 0:r.value)||mS(t,"click")||mS(e,"click"));if(typeof n=="string"||!("useLink"in n))return{isLink:r,isClickable:s,href:Ct(e,"href")};const u=Q(()=>({...e,to:Ct(()=>e.to||{})})),h=n.useLink(u.value),l=Q(()=>e.to?h:void 0),v=lB();return{isLink:r,isClickable:s,route:(_=l.value)==null?void 0:_.route,navigate:(S=l.value)==null?void 0:S.navigate,isActive:Q(()=>{var C,k,D;return l.value?e.exact?v.value?((D=l.value.isExactActive)==null?void 0:D.value)&&fl(l.value.route.value.query,v.value.query):((k=l.value.isExactActive)==null?void 0:k.value)??!1:((C=l.value.isActive)==null?void 0:C.value)??!1:!1}),href:Q(()=>{var C;return e.to?(C=l.value)==null?void 0:C.route.value.href:e.href})}}const tv=Xe({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let a_=!1;function cB(e,t){let n=!1,r,s;Cr&&(ar(()=>{window.addEventListener("popstate",u),r=e==null?void 0:e.beforeEach((h,l,v)=>{a_?n?t(v):v():setTimeout(()=>n?t(v):v()),a_=!0}),s=e==null?void 0:e.afterEach(()=>{a_=!1})}),Ra(()=>{window.removeEventListener("popstate",u),r==null||r(),s==null||s()}));function u(h){var l;(l=h.state)!=null&&l.replaced||(n=!0,setTimeout(()=>n=!1))}}function uB(e,t){ut(()=>{var n;return(n=e.isActive)==null?void 0:n.value},n=>{e.isLink.value&&n&&t&&ar(()=>{t(!0)})},{immediate:!0})}const ub=Symbol("rippleStop"),dB=80;function WS(e,t){e.style.transform=t,e.style.webkitTransform=t}function db(e){return e.constructor.name==="TouchEvent"}function ZT(e){return e.constructor.name==="KeyboardEvent"}const hB=function(e,t){var C;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=0,s=0;if(!ZT(e)){const k=t.getBoundingClientRect(),D=db(e)?e.touches[e.touches.length-1]:e;r=D.clientX-k.left,s=D.clientY-k.top}let u=0,h=.3;(C=t._ripple)!=null&&C.circle?(h=.15,u=t.clientWidth/2,u=n.center?u:u+Math.sqrt((r-u)**2+(s-u)**2)/4):u=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const l=`${(t.clientWidth-u*2)/2}px`,v=`${(t.clientHeight-u*2)/2}px`,_=n.center?l:`${r-u}px`,S=n.center?v:`${s-u}px`;return{radius:u,scale:h,x:_,y:S,centerX:l,centerY:v}},gg={show(e,t){var D;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((D=t==null?void 0:t._ripple)!=null&&D.enabled))return;const r=document.createElement("span"),s=document.createElement("span");r.appendChild(s),r.className="v-ripple__container",n.class&&(r.className+=` ${n.class}`);const{radius:u,scale:h,x:l,y:v,centerX:_,centerY:S}=hB(e,t,n),C=`${u*2}px`;s.className="v-ripple__animation",s.style.width=C,s.style.height=C,t.appendChild(r);const k=window.getComputedStyle(t);k&&k.position==="static"&&(t.style.position="relative",t.dataset.previousPosition="static"),s.classList.add("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--visible"),WS(s,`translate(${l}, ${v}) scale3d(${h},${h},${h})`),s.dataset.activated=String(performance.now()),setTimeout(()=>{s.classList.remove("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--in"),WS(s,`translate(${_}, ${S}) scale3d(1,1,1)`)},0)},hide(e){var u;if(!((u=e==null?void 0:e._ripple)!=null&&u.enabled))return;const t=e.getElementsByClassName("v-ripple__animation");if(t.length===0)return;const n=t[t.length-1];if(n.dataset.isHiding)return;n.dataset.isHiding="true";const r=performance.now()-Number(n.dataset.activated),s=Math.max(250-r,0);setTimeout(()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout(()=>{var l;e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),((l=n.parentNode)==null?void 0:l.parentNode)===e&&e.removeChild(n.parentNode)},300)},s)}};function KT(e){return typeof e>"u"||!!e}function Tf(e){const t={},n=e.currentTarget;if(!(!(n!=null&&n._ripple)||n._ripple.touched||e[ub])){if(e[ub]=!0,db(e))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(t.center=n._ripple.centered||ZT(e),n._ripple.class&&(t.class=n._ripple.class),db(e)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{gg.show(e,n,t)},n._ripple.showTimer=window.setTimeout(()=>{var r;(r=n==null?void 0:n._ripple)!=null&&r.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},dB)}else gg.show(e,n,t)}}function YS(e){e[ub]=!0}function Wa(e){const t=e.currentTarget;if(t!=null&&t._ripple){if(window.clearTimeout(t._ripple.showTimer),e.type==="touchend"&&t._ripple.showTimerCommit){t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,t._ripple.showTimer=window.setTimeout(()=>{Wa(e)});return}window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),gg.hide(t)}}function XT(e){const t=e.currentTarget;t!=null&&t._ripple&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let Af=!1;function JT(e){!Af&&(e.keyCode===cS.enter||e.keyCode===cS.space)&&(Af=!0,Tf(e))}function QT(e){Af=!1,Wa(e)}function eA(e){Af&&(Af=!1,Wa(e))}function tA(e,t,n){const{value:r,modifiers:s}=t,u=KT(r);if(u||gg.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=u,e._ripple.centered=s.center,e._ripple.circle=s.circle,og(r)&&r.class&&(e._ripple.class=r.class),u&&!n){if(s.stop){e.addEventListener("touchstart",YS,{passive:!0}),e.addEventListener("mousedown",YS);return}e.addEventListener("touchstart",Tf,{passive:!0}),e.addEventListener("touchend",Wa,{passive:!0}),e.addEventListener("touchmove",XT,{passive:!0}),e.addEventListener("touchcancel",Wa),e.addEventListener("mousedown",Tf),e.addEventListener("mouseup",Wa),e.addEventListener("mouseleave",Wa),e.addEventListener("keydown",JT),e.addEventListener("keyup",QT),e.addEventListener("blur",eA),e.addEventListener("dragstart",Wa,{passive:!0})}else!u&&n&&nA(e)}function nA(e){e.removeEventListener("mousedown",Tf),e.removeEventListener("touchstart",Tf),e.removeEventListener("touchend",Wa),e.removeEventListener("touchmove",XT),e.removeEventListener("touchcancel",Wa),e.removeEventListener("mouseup",Wa),e.removeEventListener("mouseleave",Wa),e.removeEventListener("keydown",JT),e.removeEventListener("keyup",QT),e.removeEventListener("dragstart",Wa),e.removeEventListener("blur",eA)}function fB(e,t){tA(e,t,!1)}function pB(e){delete e._ripple,nA(e)}function mB(e,t){if(t.value===t.oldValue)return;const n=KT(t.oldValue);tA(e,t,n)}const Hf={mounted:fB,unmounted:pB,updated:mB},nv=Xe({active:{type:Boolean,default:void 0},symbol:{type:null,default:HT},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:Rn,appendIcon:Rn,block:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:String,...Ws(),...pn(),...Ba(),...To(),...Ss(),...C0(),...Qg(),...Ed(),...Kg(),...Wi(),...tv(),...cu(),...cr({tag:"button"}),...Tr(),...Eo({variant:"elevated"})},"VBtn"),nn=At()({name:"VBtn",directives:{Ripple:Hf},props:nv(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const{themeClasses:s}=Hr(e),{borderClasses:u}=Co(e),{colorClasses:h,colorStyles:l,variantClasses:v}=Dd(e),{densityClasses:_}=ks(e),{dimensionStyles:S}=Ao(e),{elevationClasses:C}=Ys(e),{loaderClasses:k}=ev(e),{locationStyles:D}=Id(e),{positionClasses:O}=Xg(e),{roundedClasses:R}=sa(e),{sizeClasses:F,sizeStyles:N}=qf(e),j=T0(e,e.symbol,!1),X=jf(e,n),ee=Q(()=>{var Z;return e.active!==void 0?e.active:X.isLink.value?(Z=X.isActive)==null?void 0:Z.value:j==null?void 0:j.isSelected.value}),le=Q(()=>(j==null?void 0:j.disabled.value)||e.disabled),ie=Q(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),se=Q(()=>{if(!(e.value===void 0||typeof e.value=="symbol"))return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function H(Z){var ne;le.value||X.isLink.value&&(Z.metaKey||Z.ctrlKey||Z.shiftKey||Z.button!==0||n.target==="_blank")||((ne=X.navigate)==null||ne.call(X,Z),j==null||j.toggle())}return uB(X,j==null?void 0:j.select),zt(()=>{var me,Ve;const Z=X.isLink.value?"a":e.tag,ne=!!(e.prependIcon||r.prepend),_e=!!(e.appendIcon||r.append),te=!!(e.icon&&e.icon!==!0),Se=(j==null?void 0:j.isSelected.value)&&(!X.isLink.value||((me=X.isActive)==null?void 0:me.value))||!j||((Ve=X.isActive)==null?void 0:Ve.value);return gi(E(Z,{type:Z==="a"?void 0:"button",class:["v-btn",j==null?void 0:j.selectedClass.value,{"v-btn--active":ee.value,"v-btn--block":e.block,"v-btn--disabled":le.value,"v-btn--elevated":ie.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},s.value,u.value,Se?h.value:void 0,_.value,C.value,k.value,O.value,R.value,F.value,v.value,e.class],style:[Se?l.value:void 0,S.value,D.value,N.value,e.style],"aria-busy":e.loading?!0:void 0,disabled:le.value||void 0,href:X.href.value,tabindex:e.loading?-1:void 0,onClick:H,value:se.value},{default:()=>{var Ge;return[Pd(!0,"v-btn"),!e.icon&&ne&&E("span",{key:"prepend",class:"v-btn__prepend"},[r.prepend?E(Qn,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},r.prepend):E(pr,{key:"prepend-icon",icon:e.prependIcon},null)]),E("span",{class:"v-btn__content","data-no-activator":""},[!r.default&&te?E(pr,{key:"content-icon",icon:e.icon},null):E(Qn,{key:"content-defaults",disabled:!te,defaults:{VIcon:{icon:e.icon}}},{default:()=>{var $e;return[(($e=r.default)==null?void 0:$e.call(r))??e.text]}})]),!e.icon&&_e&&E("span",{key:"append",class:"v-btn__append"},[r.append?E(Qn,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},r.append):E(pr,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&E("span",{key:"loader",class:"v-btn__loader"},[((Ge=r.loader)==null?void 0:Ge.call(r))??E(WT,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}}),[[So("ripple"),!le.value&&e.ripple,null]])}),{group:j}}}),rA=Xe({hideDayHeader:Boolean,intervals:{type:Number,default:24},...UT()},"VCalendarDay"),qm=At()({name:"VCalendarDay",props:rA(),setup(e){const t=Uf(),n=Q(()=>[...Array.from({length:e.intervals},(r,s)=>s).filter((r,s)=>e.intervalDuration*(s+e.intervalStart)<1440)]);return zt(()=>{const r=cb.filterProps(e);return E("div",{class:"v-calendar-day__container"},[!e.hideDayHeader&&E("div",{key:"calender-week-name",class:"v-calendar-weekly__head-weekday"},[t.format(e.day.date,"weekdayShort"),E("div",null,[E(nn,{icon:!0,text:t.format(e.day.date,"dayOfMonth"),variant:"text"},null)])]),n.value.map((s,u)=>E(cb,wt({index:u},r),null))])}),{intervals:n}}}),iA=Xe({nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},title:String,text:{type:String,default:"$vuetify.calendar.today"},viewMode:{type:String,default:"month"}},"VCalendarHeader"),hb=At()({name:"VCalendarHeader",props:iA(),emits:{"click:next":()=>!0,"click:prev":()=>!0,"click:toToday":()=>!0},setup(e,t){let{emit:n}=t;const{t:r}=qi();function s(){n("click:prev")}function u(){n("click:next")}function h(){n("click:toToday")}return zt(()=>E("div",{class:"v-calendar-header"},[e.text&&E(nn,{key:"today",class:"v-calendar-header__today",text:r(e.text),variant:"outlined",onClick:h},null),E(nn,{density:"comfortable",icon:e.prevIcon,variant:"text",onClick:s},null),E(nn,{density:"comfortable",icon:e.nextIcon,variant:"text",onClick:u},null),E("div",{class:"v-calendar-header__title"},[e.title])])),{}}}),vl=Xe({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:e=>e!==!0}},"transition"),hs=(e,t)=>{let{slots:n}=t;const{transition:r,disabled:s,group:u,...h}=e,{component:l=u?eT:_o,...v}=typeof r=="object"?r:{};return Zr(l,wt(typeof r=="string"?{name:s?"":r}:v,typeof r=="string"?{}:Object.fromEntries(Object.entries({disabled:s,group:u}).filter(_=>{let[S,C]=_;return C!==void 0})),h),n)},gB=Xe({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Rn,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...pn(),...Ed({location:"top end"}),...Wi(),...cr(),...Tr(),...vl({transition:"scale-rotate-transition"})},"VBadge"),vB=At()({name:"VBadge",inheritAttrs:!1,props:gB(),setup(e,t){const{backgroundColorClasses:n,backgroundColorStyles:r}=Li(Ct(e,"color")),{roundedClasses:s}=sa(e),{t:u}=qi(),{textColorClasses:h,textColorStyles:l}=xa(Ct(e,"textColor")),{themeClasses:v}=Jz(),{locationStyles:_}=Id(e,!0,S=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(S)?+(e.offsetY??0):["left","right"].includes(S)?+(e.offsetX??0):0));return zt(()=>{const S=Number(e.content),C=!e.max||isNaN(S)?e.content:S<=+e.max?S:`${e.max}+`,[k,D]=X_(t.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return E(e.tag,wt({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},D,{style:e.style}),{default:()=>{var O,R;return[E("div",{class:"v-badge__wrapper"},[(R=(O=t.slots).default)==null?void 0:R.call(O),E(hs,{transition:e.transition},{default:()=>{var F,N;return[gi(E("span",wt({class:["v-badge__badge",v.value,n.value,s.value,h.value],style:[r.value,l.value,e.inline?{}:_.value],"aria-atomic":"true","aria-label":u(e.label,S),"aria-live":"polite",role:"status"},k),[e.dot?void 0:t.slots.badge?(N=(F=t.slots).badge)==null?void 0:N.call(F):e.icon?E(pr,{icon:e.icon},null):C]),[[hl,e.modelValue]])]}})])]}})}),{}}}),yB=Xe({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function Ja(e,t,n){return At()({name:e,props:yB({mode:n,origin:t}),setup(r,s){let{slots:u}=s;const h={onBeforeEnter(l){r.origin&&(l.style.transformOrigin=r.origin)},onLeave(l){if(r.leaveAbsolute){const{offsetTop:v,offsetLeft:_,offsetWidth:S,offsetHeight:C}=l;l._transitionInitialStyles={position:l.style.position,top:l.style.top,left:l.style.left,width:l.style.width,height:l.style.height},l.style.position="absolute",l.style.top=`${v}px`,l.style.left=`${_}px`,l.style.width=`${S}px`,l.style.height=`${C}px`}r.hideOnLeave&&l.style.setProperty("display","none","important")},onAfterLeave(l){if(r.leaveAbsolute&&(l!=null&&l._transitionInitialStyles)){const{position:v,top:_,left:S,width:C,height:k}=l._transitionInitialStyles;delete l._transitionInitialStyles,l.style.position=v||"",l.style.top=_||"",l.style.left=S||"",l.style.width=C||"",l.style.height=k||""}}};return()=>{const l=r.group?eT:_o;return Zr(l,{name:r.disabled?"":e,css:!r.disabled,...r.group?void 0:{mode:r.mode},...r.disabled?{}:h},u.default)}}})}function aA(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return At()({name:e,props:{mode:{type:String,default:n},disabled:Boolean},setup(r,s){let{slots:u}=s;return()=>Zr(_o,{name:r.disabled?"":e,css:!r.disabled,...r.disabled?{}:t},u.default)}})}function sA(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",r=ys(`offset-${n}`);return{onBeforeEnter(h){h._parent=h.parentNode,h._initialStyle={transition:h.style.transition,overflow:h.style.overflow,[n]:h.style[n]}},onEnter(h){const l=h._initialStyle;h.style.setProperty("transition","none","important"),h.style.overflow="hidden";const v=`${h[r]}px`;h.style[n]="0",h.offsetHeight,h.style.transition=l.transition,e&&h._parent&&h._parent.classList.add(e),requestAnimationFrame(()=>{h.style[n]=v})},onAfterEnter:u,onEnterCancelled:u,onLeave(h){h._initialStyle={transition:"",overflow:h.style.overflow,[n]:h.style[n]},h.style.overflow="hidden",h.style[n]=`${h[r]}px`,h.offsetHeight,requestAnimationFrame(()=>h.style[n]="0")},onAfterLeave:s,onLeaveCancelled:s};function s(h){e&&h._parent&&h._parent.classList.remove(e),u(h)}function u(h){const l=h._initialStyle[n];h.style.overflow=h._initialStyle.overflow,l!=null&&(h.style[n]=l),delete h._initialStyle}}const _B=Xe({target:[Object,Array]},"v-dialog-transition"),I0=At()({name:"VDialogTransition",props:_B(),setup(e,t){let{slots:n}=t;const r={onBeforeEnter(s){s.style.pointerEvents="none",s.style.visibility="hidden"},async onEnter(s,u){var k;await new Promise(D=>requestAnimationFrame(D)),await new Promise(D=>requestAnimationFrame(D)),s.style.visibility="";const{x:h,y:l,sx:v,sy:_,speed:S}=KS(e.target,s),C=Gc(s,[{transform:`translate(${h}px, ${l}px) scale(${v}, ${_})`,opacity:0},{}],{duration:225*S,easing:WO});(k=ZS(s))==null||k.forEach(D=>{Gc(D,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*S,easing:kf})}),C.finished.then(()=>u())},onAfterEnter(s){s.style.removeProperty("pointer-events")},onBeforeLeave(s){s.style.pointerEvents="none"},async onLeave(s,u){var k;await new Promise(D=>requestAnimationFrame(D));const{x:h,y:l,sx:v,sy:_,speed:S}=KS(e.target,s);Gc(s,[{},{transform:`translate(${h}px, ${l}px) scale(${v}, ${_})`,opacity:0}],{duration:125*S,easing:YO}).finished.then(()=>u()),(k=ZS(s))==null||k.forEach(D=>{Gc(D,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*S,easing:kf})})},onAfterLeave(s){s.style.removeProperty("pointer-events")}};return()=>e.target?E(_o,wt({name:"dialog-transition"},r,{css:!1}),n):E(_o,{name:"dialog-transition"},n)}});function ZS(e){var n;const t=(n=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:n.children;return t&&[...t]}function KS(e,t){const n=dT(e),r=y0(t),[s,u]=getComputedStyle(t).transformOrigin.split(" ").map(N=>parseFloat(N)),[h,l]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let v=n.left+n.width/2;h==="left"||l==="left"?v-=n.width/2:(h==="right"||l==="right")&&(v+=n.width/2);let _=n.top+n.height/2;h==="top"||l==="top"?_-=n.height/2:(h==="bottom"||l==="bottom")&&(_+=n.height/2);const S=n.width/r.width,C=n.height/r.height,k=Math.max(1,S,C),D=S/k||0,O=C/k||0,R=r.width*r.height/(window.innerWidth*window.innerHeight),F=R>.12?Math.min(1.5,(R-.12)*10+1):1;return{x:v-(s+r.left),y:_-(u+r.top),sx:D,sy:O,speed:F}}Ja("fab-transition","center center","out-in");Ja("dialog-bottom-transition");Ja("dialog-top-transition");const XS=Ja("fade-transition");Ja("scale-transition");Ja("scroll-x-transition");Ja("scroll-x-reverse-transition");Ja("scroll-y-transition");Ja("scroll-y-reverse-transition");Ja("slide-x-transition");Ja("slide-x-reverse-transition");const oA=Ja("slide-y-transition");Ja("slide-y-reverse-transition");const lA=aA("expand-transition",sA()),cA=aA("expand-x-transition",sA("",!0));function bB(e){return{aspectStyles:Q(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}const uA=Xe({aspectRatio:[String,Number],contentClass:String,inline:Boolean,...pn(),...To()},"VResponsive"),JS=At()({name:"VResponsive",props:uA(),setup(e,t){let{slots:n}=t;const{aspectStyles:r}=bB(e),{dimensionStyles:s}=Ao(e);return zt(()=>{var u;return E("div",{class:["v-responsive",{"v-responsive--inline":e.inline},e.class],style:[s.value,e.style]},[E("div",{class:"v-responsive__sizer",style:r.value},null),(u=n.additional)==null?void 0:u.call(n),n.default&&E("div",{class:["v-responsive__content",e.contentClass]},[n.default()])])}),{}}});function xB(e,t){if(!p0)return;const n=t.modifiers||{},r=t.value,{handler:s,options:u}=typeof r=="object"?r:{handler:r,options:{}},h=new IntersectionObserver(function(){var C;let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],v=arguments.length>1?arguments[1]:void 0;const _=(C=e._observe)==null?void 0:C[t.instance.$.uid];if(!_)return;const S=l.some(k=>k.isIntersecting);s&&(!n.quiet||_.init)&&(!n.once||S||_.init)&&s(S,l,v),S&&n.once?dA(e,t):_.init=!0},u);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:h},h.observe(e)}function dA(e,t){var r;const n=(r=e._observe)==null?void 0:r[t.instance.$.uid];n&&(n.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const wB={mounted:xB,unmounted:dA},P0=wB,SB=Xe({alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...uA(),...pn(),...Wi(),...vl()},"VImg"),Gf=At()({name:"VImg",directives:{intersect:P0},props:SB(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:n,slots:r}=t;const{backgroundColorClasses:s,backgroundColorStyles:u}=Li(Ct(e,"color")),{roundedClasses:h}=sa(e),l=ni("VImg"),v=Ut(""),_=lt(),S=Ut(e.eager?"loading":"idle"),C=Ut(),k=Ut(),D=Q(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),O=Q(()=>D.value.aspect||C.value/k.value||0);ut(()=>e.src,()=>{R(S.value!=="idle")}),ut(O,(te,Se)=>{!te&&Se&&_.value&&ee(_.value)}),Ug(()=>R());function R(te){if(!(e.eager&&te)&&!(p0&&!te&&!e.eager)){if(S.value="loading",D.value.lazySrc){const Se=new Image;Se.src=D.value.lazySrc,ee(Se,null)}D.value.src&&ar(()=>{var Se;n("loadstart",((Se=_.value)==null?void 0:Se.currentSrc)||D.value.src),setTimeout(()=>{var me;if(!l.isUnmounted)if((me=_.value)!=null&&me.complete){if(_.value.naturalWidth||N(),S.value==="error")return;O.value||ee(_.value,null),S.value==="loading"&&F()}else O.value||ee(_.value),j()})})}}function F(){var te;l.isUnmounted||(j(),ee(_.value),S.value="loaded",n("load",((te=_.value)==null?void 0:te.currentSrc)||D.value.src))}function N(){var te;l.isUnmounted||(S.value="error",n("error",((te=_.value)==null?void 0:te.currentSrc)||D.value.src))}function j(){const te=_.value;te&&(v.value=te.currentSrc||te.src)}let X=-1;br(()=>{clearTimeout(X)});function ee(te){let Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const me=()=>{if(clearTimeout(X),l.isUnmounted)return;const{naturalHeight:Ve,naturalWidth:Ge}=te;Ve||Ge?(C.value=Ge,k.value=Ve):!te.complete&&S.value==="loading"&&Se!=null?X=window.setTimeout(me,Se):(te.currentSrc.endsWith(".svg")||te.currentSrc.startsWith("data:image/svg+xml"))&&(C.value=1,k.value=1)};me()}const le=Q(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),ie=()=>{var me;if(!D.value.src||S.value==="idle")return null;const te=E("img",{class:["v-img__img",le.value],style:{objectPosition:e.position},src:D.value.src,srcset:D.value.srcset,alt:e.alt,crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:_,onLoad:F,onError:N},null),Se=(me=r.sources)==null?void 0:me.call(r);return E(hs,{transition:e.transition,appear:!0},{default:()=>[gi(Se?E("picture",{class:"v-img__picture"},[Se,te]):te,[[hl,S.value==="loaded"]])]})},se=()=>E(hs,{transition:e.transition},{default:()=>[D.value.lazySrc&&S.value!=="loaded"&&E("img",{class:["v-img__img","v-img__img--preload",le.value],style:{objectPosition:e.position},src:D.value.lazySrc,alt:e.alt,crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),H=()=>r.placeholder?E(hs,{transition:e.transition,appear:!0},{default:()=>[(S.value==="loading"||S.value==="error"&&!r.error)&&E("div",{class:"v-img__placeholder"},[r.placeholder()])]}):null,Z=()=>r.error?E(hs,{transition:e.transition,appear:!0},{default:()=>[S.value==="error"&&E("div",{class:"v-img__error"},[r.error()])]}):null,ne=()=>e.gradient?E("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,_e=Ut(!1);{const te=ut(O,Se=>{Se&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{_e.value=!0})}),te())})}return zt(()=>{const te=JS.filterProps(e);return gi(E(JS,wt({class:["v-img",{"v-img--booting":!_e.value},s.value,h.value,e.class],style:[{width:Jt(e.width==="auto"?C.value:e.width)},u.value,e.style]},te,{aspectRatio:O.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>E(rn,null,[E(ie,null,null),E(se,null,null),E(ne,null,null),E(H,null,null),E(Z,null,null)]),default:r.default}),[[So("intersect"),{handler:R,options:e.options},null,{once:!0}]])}),{currentSrc:v,image:_,state:S,naturalWidth:C,naturalHeight:k}}}),kB=Xe({start:Boolean,end:Boolean,icon:Rn,image:String,text:String,...pn(),...Ba(),...Wi(),...cu(),...cr(),...Tr(),...Eo({variant:"flat"})},"VAvatar"),ac=At()({name:"VAvatar",props:kB(),setup(e,t){let{slots:n}=t;const{themeClasses:r}=Hr(e),{colorClasses:s,colorStyles:u,variantClasses:h}=Dd(e),{densityClasses:l}=ks(e),{roundedClasses:v}=sa(e),{sizeClasses:_,sizeStyles:S}=qf(e);return zt(()=>E(e.tag,{class:["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},r.value,s.value,l.value,v.value,_.value,h.value,e.class],style:[u.value,S.value,e.style]},{default:()=>[n.default?E(Qn,{key:"content-defaults",defaults:{VImg:{cover:!0,image:e.image},VIcon:{icon:e.icon}}},{default:()=>[n.default()]}):e.image?E(Gf,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?E(pr,{key:"icon",icon:e.icon},null):e.text,Pd(!1,"v-avatar")]})),{}}});function QS(e){const n=Math.abs(e);return Math.sign(e)*(n/((1/.501-2)*(1-n)+1))}function ek(e){let{selectedElement:t,containerSize:n,contentSize:r,isRtl:s,currentScrollOffset:u,isHorizontal:h}=e;const l=h?t.clientWidth:t.clientHeight,v=h?t.offsetLeft:t.offsetTop,_=s&&h?r-v-l:v,S=n+u,C=l+_,k=l*.4;return _<=u?u=Math.max(_-k,0):S<=C&&(u=Math.min(u-(S-C-k),r-n)),u}function CB(e){let{selectedElement:t,containerSize:n,contentSize:r,isRtl:s,isHorizontal:u}=e;const h=u?t.clientWidth:t.clientHeight,l=u?t.offsetLeft:t.offsetTop,v=s&&u?r-l-h/2-n/2:l+h/2-n/2;return Math.min(r-n,Math.max(0,v))}const TB=Symbol.for("vuetify:v-slide-group"),D0=Xe({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:TB},nextIcon:{type:Rn,default:"$next"},prevIcon:{type:Rn,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...pn(),...ET(),...cr(),...k0({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),vg=At()({name:"VSlideGroup",props:D0(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isRtl:r}=ws(),{displayClasses:s,mobile:u}=Ad(e),h=Jg(e,e.symbol),l=Ut(!1),v=Ut(0),_=Ut(0),S=Ut(0),C=Q(()=>e.direction==="horizontal"),{resizeRef:k,contentRect:D}=cl(),{resizeRef:O,contentRect:R}=cl(),F=Q(()=>h.selected.value.length?h.items.value.findIndex(Je=>Je.id===h.selected.value[0]):-1),N=Q(()=>h.selected.value.length?h.items.value.findIndex(Je=>Je.id===h.selected.value[h.selected.value.length-1]):-1);if(Cr){let Je=-1;ut(()=>[h.selected.value,D.value,R.value,C.value],()=>{cancelAnimationFrame(Je),Je=requestAnimationFrame(()=>{if(D.value&&R.value){const Ne=C.value?"width":"height";_.value=D.value[Ne],S.value=R.value[Ne],l.value=_.value+1<S.value}if(F.value>=0&&O.value){const Ne=O.value.children[N.value];F.value===0||!l.value?v.value=0:e.centerActive?v.value=CB({selectedElement:Ne,containerSize:_.value,contentSize:S.value,isRtl:r.value,isHorizontal:C.value}):l.value&&(v.value=ek({selectedElement:Ne,containerSize:_.value,contentSize:S.value,isRtl:r.value,currentScrollOffset:v.value,isHorizontal:C.value}))}})})}const j=Ut(!1);let X=0,ee=0;function le(Je){const Ne=C.value?"clientX":"clientY";ee=(r.value&&C.value?-1:1)*v.value,X=Je.touches[0][Ne],j.value=!0}function ie(Je){if(!l.value)return;const Ne=C.value?"clientX":"clientY",tt=r.value&&C.value?-1:1;v.value=tt*(ee+X-Je.touches[0][Ne])}function se(Je){const Ne=S.value-_.value;v.value<0||!l.value?v.value=0:v.value>=Ne&&(v.value=Ne),j.value=!1}function H(){k.value&&(k.value[C.value?"scrollLeft":"scrollTop"]=0)}const Z=Ut(!1);function ne(Je){if(Z.value=!0,!(!l.value||!O.value)){for(const Ne of Je.composedPath())for(const tt of O.value.children)if(tt===Ne){v.value=ek({selectedElement:tt,containerSize:_.value,contentSize:S.value,isRtl:r.value,currentScrollOffset:v.value,isHorizontal:C.value});return}}}function _e(Je){Z.value=!1}function te(Je){var Ne;!Z.value&&!(Je.relatedTarget&&((Ne=O.value)!=null&&Ne.contains(Je.relatedTarget)))&&me()}function Se(Je){O.value&&(C.value?Je.key==="ArrowRight"?me(r.value?"prev":"next"):Je.key==="ArrowLeft"&&me(r.value?"next":"prev"):Je.key==="ArrowDown"?me("next"):Je.key==="ArrowUp"&&me("prev"),Je.key==="Home"?me("first"):Je.key==="End"&&me("last"))}function me(Je){var Ne,tt,_t,kt,St;if(O.value)if(!Je)(Ne=wf(O.value)[0])==null||Ne.focus();else if(Je==="next"){const Fe=(tt=O.value.querySelector(":focus"))==null?void 0:tt.nextElementSibling;Fe?Fe.focus():me("first")}else if(Je==="prev"){const Fe=(_t=O.value.querySelector(":focus"))==null?void 0:_t.previousElementSibling;Fe?Fe.focus():me("last")}else Je==="first"?(kt=O.value.firstElementChild)==null||kt.focus():Je==="last"&&((St=O.value.lastElementChild)==null||St.focus())}function Ve(Je){const Ne=v.value+(Je==="prev"?-1:1)*_.value;v.value=gs(Ne,0,S.value-_.value)}const Ge=Q(()=>{let Je=v.value>S.value-_.value?-(S.value-_.value)+QS(S.value-_.value-v.value):-v.value;v.value<=0&&(Je=QS(-v.value));const Ne=r.value&&C.value?-1:1;return{transform:`translate${C.value?"X":"Y"}(${Ne*Je}px)`,transition:j.value?"none":"",willChange:j.value?"transform":""}}),$e=Q(()=>({next:h.next,prev:h.prev,select:h.select,isSelected:h.isSelected})),ke=Q(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!u.value;case!0:return l.value||Math.abs(v.value)>0;case"mobile":return u.value||l.value||Math.abs(v.value)>0;default:return!u.value&&(l.value||Math.abs(v.value)>0)}}),Pe=Q(()=>Math.abs(v.value)>0),Ze=Q(()=>S.value>Math.abs(v.value)+_.value);return zt(()=>E(e.tag,{class:["v-slide-group",{"v-slide-group--vertical":!C.value,"v-slide-group--has-affixes":ke.value,"v-slide-group--is-overflowing":l.value},s.value,e.class],style:e.style,tabindex:Z.value||h.selected.value.length?-1:0,onFocus:te},{default:()=>{var Je,Ne,tt;return[ke.value&&E("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!Pe.value}],onClick:()=>Pe.value&&Ve("prev")},[((Je=n.prev)==null?void 0:Je.call(n,$e.value))??E(XS,null,{default:()=>[E(pr,{icon:r.value?e.nextIcon:e.prevIcon},null)]})]),E("div",{key:"container",ref:k,class:"v-slide-group__container",onScroll:H},[E("div",{ref:O,class:"v-slide-group__content",style:Ge.value,onTouchstartPassive:le,onTouchmovePassive:ie,onTouchendPassive:se,onFocusin:ne,onFocusout:_e,onKeydown:Se},[(Ne=n.default)==null?void 0:Ne.call(n,$e.value)])]),ke.value&&E("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!Ze.value}],onClick:()=>Ze.value&&Ve("next")},[((tt=n.next)==null?void 0:tt.call(n,$e.value))??E(XS,null,{default:()=>[E(pr,{icon:r.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:h.selected,scrollTo:Ve,scrollOffset:v,focus:me}}}),hA=Symbol.for("vuetify:v-chip-group"),AB=Xe({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:fl},...D0(),...pn(),...k0({selectedClass:"v-chip--selected"}),...cr(),...Tr(),...Eo({variant:"tonal"})},"VChipGroup");At()({name:"VChipGroup",props:AB(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:r}=Hr(e),{isSelected:s,select:u,next:h,prev:l,selected:v}=Jg(e,hA);return Ka({VChip:{color:Ct(e,"color"),disabled:Ct(e,"disabled"),filter:Ct(e,"filter"),variant:Ct(e,"variant")}}),zt(()=>{const _=vg.filterProps(e);return E(vg,wt(_,{class:["v-chip-group",{"v-chip-group--column":e.column},r.value,e.class],style:e.style}),{default:()=>{var S;return[(S=n.default)==null?void 0:S.call(n,{isSelected:s,select:u,next:h,prev:l,selected:v.value})]}})}),{}}});const EB=Xe({activeClass:String,appendAvatar:String,appendIcon:Rn,closable:Boolean,closeIcon:{type:Rn,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:Rn,ripple:{type:[Boolean,Object],default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:Ma(),onClickOnce:Ma(),...Ws(),...pn(),...Ba(),...Ss(),...C0(),...Wi(),...tv(),...cu(),...cr({tag:"span"}),...Tr(),...Eo({variant:"tonal"})},"VChip"),sc=At()({name:"VChip",directives:{Ripple:Hf},props:EB(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:r,slots:s}=t;const{t:u}=qi(),{borderClasses:h}=Co(e),{colorClasses:l,colorStyles:v,variantClasses:_}=Dd(e),{densityClasses:S}=ks(e),{elevationClasses:C}=Ys(e),{roundedClasses:k}=sa(e),{sizeClasses:D}=qf(e),{themeClasses:O}=Hr(e),R=xn(e,"modelValue"),F=T0(e,hA,!1),N=jf(e,n),j=Q(()=>e.link!==!1&&N.isLink.value),X=Q(()=>!e.disabled&&e.link!==!1&&(!!F||e.link||N.isClickable.value)),ee=Q(()=>({"aria-label":u(e.closeLabel),onClick(se){se.preventDefault(),se.stopPropagation(),R.value=!1,r("click:close",se)}}));function le(se){var H;r("click",se),X.value&&((H=N.navigate)==null||H.call(N,se),F==null||F.toggle())}function ie(se){(se.key==="Enter"||se.key===" ")&&(se.preventDefault(),le(se))}return()=>{const se=N.isLink.value?"a":e.tag,H=!!(e.appendIcon||e.appendAvatar),Z=!!(H||s.append),ne=!!(s.close||e.closable),_e=!!(s.filter||e.filter)&&F,te=!!(e.prependIcon||e.prependAvatar),Se=!!(te||s.prepend),me=!F||F.isSelected.value;return R.value&&gi(E(se,{class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":X.value,"v-chip--filter":_e,"v-chip--pill":e.pill},O.value,h.value,me?l.value:void 0,S.value,C.value,k.value,D.value,_.value,F==null?void 0:F.selectedClass.value,e.class],style:[me?v.value:void 0,e.style],disabled:e.disabled||void 0,draggable:e.draggable,href:N.href.value,tabindex:X.value?0:void 0,onClick:le,onKeydown:X.value&&!j.value&&ie},{default:()=>{var Ve;return[Pd(X.value,"v-chip"),_e&&E(cA,{key:"filter"},{default:()=>[gi(E("div",{class:"v-chip__filter"},[s.filter?E(Qn,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},s.filter):E(pr,{key:"filter-icon",icon:e.filterIcon},null)]),[[hl,F.isSelected.value]])]}),Se&&E("div",{key:"prepend",class:"v-chip__prepend"},[s.prepend?E(Qn,{key:"prepend-defaults",disabled:!te,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},s.prepend):E(rn,null,[e.prependIcon&&E(pr,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&E(ac,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),E("div",{class:"v-chip__content","data-no-activator":""},[((Ve=s.default)==null?void 0:Ve.call(s,{isSelected:F==null?void 0:F.isSelected.value,selectedClass:F==null?void 0:F.selectedClass.value,select:F==null?void 0:F.select,toggle:F==null?void 0:F.toggle,value:F==null?void 0:F.value.value,disabled:e.disabled}))??e.text]),Z&&E("div",{key:"append",class:"v-chip__append"},[s.append?E(Qn,{key:"append-defaults",disabled:!H,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},s.append):E(rn,null,[e.appendIcon&&E(pr,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&E(ac,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),ne&&E("button",wt({key:"close",class:"v-chip__close",type:"button"},ee.value),[s.close?E(Qn,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},s.close):E(pr,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[So("ripple"),X.value&&e.ripple,null]])}}}),IB=Xe({allDay:Boolean,day:Object,event:Object},"VCalendarEvent"),tk=At()({name:"VCalendarEvent",props:IB(),setup(e){return zt(()=>E(sc,{color:e.allDay?"primary":void 0,density:"comfortable",label:e.allDay,width:"100%"},{default:()=>{var t,n;return[E(vB,{inline:!0,dot:!0,color:(t=e.event)==null?void 0:t.color},null),(n=e.event)==null?void 0:n.title]}})),{}}}),PB=Xe({active:Boolean,color:String,day:Object,disabled:Boolean,events:Array,title:[Number,String]},"VCalendarMonthDay"),fA=At()({name:"VCalendarMonthDay",props:PB(),setup(e,t){let{emit:n,slots:r}=t;return zt(()=>{var u,h,l,v,_,S,C,k,D;const s=!!(e.title||(u=r.title)!=null&&u.call(r,{title:e.title}));return E("div",{class:["v-calendar-month__day"]},[!((h=e.day)!=null&&h.isHidden)&&s&&E("div",{key:"title",class:"v-calendar-weekly__day-label"},[((l=r.title)==null?void 0:l.call(r,{title:e.title}))??E(nn,{class:(v=e.day)!=null&&v.isToday?"v-calendar-weekly__day-label__today":void 0,color:e.color,disabled:e.disabled,icon:!0,size:"x-small",variant:(_=e.day)!=null&&_.isToday?void 0:"flat"},{default:()=>[e.title]})]),E("div",{key:"content",class:"v-calendar-weekly__day-content"},[((S=r.content)==null?void 0:S.call(r))??E("div",null,[E("div",{class:"v-calendar-weekly__day-alldayevents-container"},[(C=e.events)==null?void 0:C.filter(O=>O.allDay).map(O=>E(tk,{day:e.day,event:O,allDay:!0},null))]),E("div",{class:"v-calendar-weekly__day-events-container"},[(k=e.events)==null?void 0:k.filter(O=>!O.allDay).map(O=>E(tk,{day:e.day,event:O},null))])])]),(D=r.default)==null?void 0:D.call(r)])}),{}}}),DB=Xe({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]}},"calendar");function MB(e){const t=Uf(),n=xn(e,"modelValue",[],k=>Mi(k)),r=Q(()=>e.displayValue?t.date(e.displayValue):n.value.length>0?t.date(n.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),s=xn(e,"year",void 0,k=>{const D=k!=null?Number(k):t.getYear(r.value);return t.startOfYear(t.setYear(t.date(),D))},k=>t.getYear(k)),u=xn(e,"month",void 0,k=>{const D=k!=null?Number(k):t.getMonth(r.value),O=t.setYear(t.startOfMonth(t.date()),t.getYear(s.value));return t.setMonth(O,D)},k=>t.getMonth(k)),h=Q(()=>{const k=t.getWeekArray(u.value),D=k.flat(),O=6*7;if(D.length<O){const R=D[D.length-1];let F=[];for(let N=1;N<=O-D.length;N++)F.push(t.addDays(R,N)),N%7===0&&(k.push(F),F=[])}return k});function l(k,D){return k.filter(O=>e.weekdays.includes(t.toJsDate(O).getDay())).map((O,R)=>{const F=t.toISO(O),N=!t.isSameMonth(O,u.value),j=t.isSameDay(O,t.startOfMonth(u.value)),X=t.isSameDay(O,t.endOfMonth(u.value)),ee=t.isSameDay(O,u.value);return{date:O,isoDate:F,formatted:t.format(O,"keyboardDate"),year:t.getYear(O),month:t.getMonth(O),isDisabled:C(O),isWeekStart:R%7===0,isWeekEnd:R%7===6,isToday:t.isSameDay(O,D),isAdjacent:N,isHidden:N&&!e.showAdjacentMonths,isStart:j,isSelected:n.value.some(le=>t.isSameDay(O,le)),isEnd:X,isSame:ee,localized:t.format(O,"dayOfMonth")}})}const v=Q(()=>{const k=t.startOfWeek(n.value),D=[];for(let F=0;F<=6;F++)D.push(t.addDays(k,F));const O=D,R=t.date();return l(O,R)}),_=Q(()=>{const k=h.value.flat(),D=t.date();return l(k,D)}),S=Q(()=>h.value.map(k=>k.length?$z(t,k[0]):null));function C(k){if(e.disabled)return!0;const D=t.date(k);return e.min&&t.isAfter(t.date(e.min),D)||e.max&&t.isAfter(D,t.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(O=>t.isSameDay(t.date(O),D)):typeof e.allowedDates=="function"?!e.allowedDates(D):!1}return{displayValue:r,daysInMonth:_,daysInWeek:v,genDays:l,model:n,weeksInMonth:h,weekNumbers:S}}const LB=Xe({hideHeader:Boolean,hideWeekNumber:Boolean,...DB(),...rA(),...iA()},"VCalender"),RB=At()({name:"VCalendar",props:LB(),emits:{next:null,prev:null,"update:modelValue":null},setup(e,t){let{emit:n,slots:r}=t;const s=Uf(),{daysInMonth:u,daysInWeek:h,genDays:l,model:v,weekNumbers:_}=MB(e),S=s.getWeekdays();function C(){e.viewMode==="month"&&(v.value=[s.addMonths(v.value[0],1)]),e.viewMode==="week"&&(v.value=[s.addDays(v.value[0],7)]),e.viewMode==="day"&&(v.value=[s.addDays(v.value[0],1)])}function k(){e.viewMode==="month"&&(v.value=[s.addMonths(v.value[0],-1)]),e.viewMode==="week"&&(v.value=[s.addDays(v.value[0],-7)]),e.viewMode==="day"&&(v.value=[s.addDays(v.value[0],-1)])}function D(){v.value=[new Date]}const O=Q(()=>s.format(v.value[0],"monthAndYear"));return zt(()=>{var N;const R=qm.filterProps(e),F=hb.filterProps(e);return E("div",{class:["v-calendar",{"v-calendar-monthly":e.viewMode==="month","v-calendar-weekly":e.viewMode==="week","v-calendar-day":e.viewMode==="day"}]},[E("div",null,[!e.hideHeader&&(r.header?r.header({title:O.value}):E(hb,wt({key:"calendar-header"},F,{title:O.value,"onClick:next":C,"onClick:prev":k,"onClick:toToday":D}),null))]),E("div",{class:["v-calendar__container",`days__${e.weekdays.length}`]},[e.viewMode==="month"&&!e.hideDayHeader&&E("div",{class:["v-calendar-weekly__head",`days__${e.weekdays.length}`,...e.hideWeekNumber?[]:["v-calendar-weekly__head-weeknumbers"]],key:"calenderWeeklyHead"},[e.hideWeekNumber?"":E("div",{key:"weekNumber0",class:"v-calendar-weekly__head-weeknumber"},null),e.weekdays.map(j=>E("div",{class:`v-calendar-weekly__head-weekday${e.hideWeekNumber?"":"-with-weeknumber"}`},[S[j]]))]),e.viewMode==="month"&&E("div",{key:"VCalendarMonth",class:["v-calendar-month__days",`days${e.hideWeekNumber?"":"-with-weeknumbers"}__${e.weekdays.length}`,...e.hideWeekNumber?[]:["v-calendar-month__weeknumbers"]]},[fO(u.value,e.weekdays.length).map((j,X)=>[e.hideWeekNumber?"":E("div",{class:"v-calendar-month__weeknumber"},[_.value[X]]),j.map(ee=>{var le;return E(fA,{color:s.isSameDay(new Date,ee.date)?"primary":void 0,day:ee,title:ee?s.format(ee.date,"dayOfMonth"):"NaN",events:(le=e.events)==null?void 0:le.filter(ie=>s.isSameDay(ee.date,ie.start)||s.isSameDay(ee.date,ie.end))},null)})])]),e.viewMode==="week"&&h.value.map((j,X)=>{var ee;return E(qm,wt(R,{day:j,dayIndex:X,events:(ee=e.events)==null?void 0:ee.filter(le=>s.isSameDay(le.start,j.date)||s.isSameDay(le.end,j.date))}),null)}),e.viewMode==="day"&&E(qm,wt(R,{day:l([v.value[0]],s.date())[0],events:(N=e.events)==null?void 0:N.filter(j=>s.isSameDay(j.start,l([v.value[0]],s.date())[0].date)||s.isSameDay(j.end,l([v.value[0]],s.date())[0].date))}),null)])])}),{daysInMonth:u,daysInWeek:h,genDays:l}}}),OB=Xe({modelValue:null,color:String,cancelText:{type:String,default:"$vuetify.confirmEdit.cancel"},okText:{type:String,default:"$vuetify.confirmEdit.ok"}},"VConfirmEdit"),zB=At()({name:"VConfirmEdit",props:OB(),emits:{cancel:()=>!0,save:e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:r}=t;const s=xn(e,"modelValue"),u=lt();Ui(()=>{u.value=structuredClone(vn(s.value))});const{t:h}=qi(),l=Q(()=>fl(s.value,u.value));function v(){s.value=u.value,n("save",u.value)}function _(){u.value=structuredClone(vn(s.value)),n("cancel")}let S=!1;zt(()=>{var k;const C=E(rn,null,[E(nn,{disabled:l.value,variant:"text",color:e.color,onClick:_,text:h(e.cancelText)},null),E(nn,{disabled:l.value,variant:"text",color:e.color,onClick:v,text:h(e.okText)},null)]);return E(rn,null,[(k=r.default)==null?void 0:k.call(r,{model:u,get actions(){return S=!0,C}}),!S&&C])})}}),FB=Xe({actionText:String,bgColor:String,color:String,icon:Rn,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...pn(),...To(),...cu({size:void 0}),...Tr()},"VEmptyState"),BB=At()({name:"VEmptyState",props:FB(),emits:{"click:action":e=>!0},setup(e,t){let{emit:n,slots:r}=t;const{themeClasses:s}=Hr(e),{backgroundColorClasses:u,backgroundColorStyles:h}=Li(Ct(e,"bgColor")),{dimensionStyles:l}=Ao(e),{displayClasses:v}=Ad();function _(S){n("click:action",S)}return zt(()=>{var F,N,j;const S=!!(r.actions||e.actionText),C=!!(r.headline||e.headline),k=!!(r.title||e.title),D=!!(r.text||e.text),O=!!(r.media||e.image||e.icon),R=e.size||(e.image?200:96);return E("div",{class:["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},s.value,u.value,v.value,e.class],style:[h.value,l.value,e.style]},[O&&E("div",{key:"media",class:"v-empty-state__media"},[r.media?E(Qn,{key:"media-defaults",defaults:{VImg:{src:e.image,height:R},VIcon:{size:R,icon:e.icon}}},{default:()=>[r.media()]}):E(rn,null,[e.image?E(Gf,{key:"image",src:e.image,height:R},null):e.icon?E(pr,{key:"icon",color:e.color,size:R,icon:e.icon},null):void 0])]),C&&E("div",{key:"headline",class:"v-empty-state__headline"},[((F=r.headline)==null?void 0:F.call(r))??e.headline]),k&&E("div",{key:"title",class:"v-empty-state__title"},[((N=r.title)==null?void 0:N.call(r))??e.title]),D&&E("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:Jt(e.textWidth)}},[((j=r.text)==null?void 0:j.call(r))??e.text]),r.default&&E("div",{key:"content",class:"v-empty-state__content"},[r.default()]),S&&E("div",{key:"actions",class:"v-empty-state__actions"},[E(Qn,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color,text:e.actionText}}},{default:()=>{var X;return[((X=r.actions)==null?void 0:X.call(r,{props:{onClick:_}}))??E(nn,{onClick:_},null)]}})])])}),{}}}),VB=Xe({app:Boolean,appear:Boolean,extended:Boolean,location:{type:String,default:"bottom end"},offset:Boolean,modelValue:{type:Boolean,default:!0},...za(nv({active:!0}),["location"]),...Yg(),...vl({transition:"fab-transition"})},"VFab"),NB=At()({name:"VFab",props:VB(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=xn(e,"modelValue"),s=Ut(56),u=lt(),{resizeRef:h}=cl(C=>{C.length&&(s.value=C[0].target.clientHeight)}),l=Q(()=>e.app||e.absolute),v=Q(()=>l.value?e.location.split(" ").shift():!1),_=Q(()=>l.value?e.location.split(" ")[1]??"end":!1);ms(()=>e.app,()=>{const C=Zg({id:e.name,order:Q(()=>parseInt(e.order,10)),position:v,layoutSize:s,elementSize:Q(()=>s.value+32),active:Q(()=>e.app&&r.value),absolute:Ct(e,"absolute")});Ui(()=>{u.value=C.layoutItemStyles.value})});const S=lt();return zt(()=>{const C=nn.filterProps(e);return E("div",{ref:S,class:["v-fab",{"v-fab--absolute":e.absolute,"v-fab--app":!!e.app,"v-fab--extended":e.extended,"v-fab--offset":e.offset,[`v-fab--${v.value}`]:l.value,[`v-fab--${_.value}`]:l.value},e.class],style:[e.app?{...u.value}:{height:"inherit",width:void 0},e.style]},[E("div",{class:"v-fab__container"},[E(hs,{appear:e.appear,transition:e.transition},{default:()=>[gi(E(nn,wt({ref:h},C,{active:void 0,location:void 0}),n),[[hl,e.active]])]})])])}),{}}}),$B=Xe({color:String,inset:Boolean,length:[Number,String],thickness:[Number,String],vertical:Boolean,...pn(),...Tr()},"VDivider"),yr=At()({name:"VDivider",props:$B(),setup(e,t){let{attrs:n}=t;const{themeClasses:r}=Hr(e),{textColorClasses:s,textColorStyles:u}=xa(Ct(e,"color")),h=Q(()=>{const l={};return e.length&&(l[e.vertical?"maxHeight":"maxWidth"]=Jt(e.length)),e.thickness&&(l[e.vertical?"borderRightWidth":"borderTopWidth"]=Jt(e.thickness)),l});return zt(()=>E("hr",{class:[{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},r.value,s.value,e.class],style:[h.value,u.value,e.style],"aria-orientation":!n.role||n.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null)),{}}}),UB=Xe({text:String,onClick:Ma(),...pn(),...Tr()},"VLabel"),M0=At()({name:"VLabel",props:UB(),setup(e,t){let{slots:n}=t;return zt(()=>{var r;return E("label",{class:["v-label",{"v-label--clickable":!!e.onClick},e.class],style:e.style,onClick:e.onClick},[e.text,(r=n.default)==null?void 0:r.call(n)])}),{}}}),qB=Xe({floating:Boolean,...pn()},"VFieldLabel"),Am=At()({name:"VFieldLabel",props:qB(),setup(e,t){let{slots:n}=t;return zt(()=>E(M0,{class:["v-field-label",{"v-field-label--floating":e.floating},e.class],style:e.style,"aria-hidden":e.floating||void 0},n)),{}}});function pA(e){const{t}=qi();function n(r){let{name:s}=r;const u={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[s],h=e[`onClick:${s}`],l=h&&u?t(`$vuetify.input.${u}`,e.label??""):void 0;return E(pr,{icon:e[`${s}Icon`],"aria-label":l,onClick:h},null)}return{InputIcon:n}}const L0=Xe({focused:Boolean,"onUpdate:focused":Ma()},"focus");function Wf(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ko();const n=xn(e,"focused"),r=Q(()=>({[`${t}--focused`]:n.value}));function s(){n.value=!0}function u(){n.value=!1}return{focusClasses:r,isFocused:n,focus:s,blur:u}}const jB=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],Yf=Xe({appendInnerIcon:Rn,bgColor:String,clearable:Boolean,clearIcon:{type:Rn,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:Rn,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>jB.includes(e)},"onClick:clear":Ma(),"onClick:appendInner":Ma(),"onClick:prependInner":Ma(),...pn(),...Qg(),...Wi(),...Tr()},"VField"),Zf=At()({name:"VField",inheritAttrs:!1,props:{id:String,...L0(),...Yf()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:s}=t;const{themeClasses:u}=Hr(e),{loaderClasses:h}=ev(e),{focusClasses:l,isFocused:v,focus:_,blur:S}=Wf(e),{InputIcon:C}=pA(e),{roundedClasses:k}=sa(e),{rtlClasses:D}=ws(),O=Q(()=>e.dirty||e.active),R=Q(()=>!e.singleLine&&!!(e.label||s.label)),F=Fa(),N=Q(()=>e.id||`input-${F}`),j=Q(()=>`${N.value}-messages`),X=lt(),ee=lt(),le=lt(),ie=Q(()=>["plain","underlined"].includes(e.variant)),{backgroundColorClasses:se,backgroundColorStyles:H}=Li(Ct(e,"bgColor")),{textColorClasses:Z,textColorStyles:ne}=xa(Q(()=>e.error||e.disabled?void 0:O.value&&v.value?e.color:e.baseColor));ut(O,me=>{if(R.value){const Ve=X.value.$el,Ge=ee.value.$el;requestAnimationFrame(()=>{const $e=y0(Ve),ke=Ge.getBoundingClientRect(),Pe=ke.x-$e.x,Ze=ke.y-$e.y-($e.height/2-ke.height/2),Je=ke.width/.75,Ne=Math.abs(Je-$e.width)>1?{maxWidth:Jt(Je)}:void 0,tt=getComputedStyle(Ve),_t=getComputedStyle(Ge),kt=parseFloat(tt.transitionDuration)*1e3||150,St=parseFloat(_t.getPropertyValue("--v-field-label-scale")),Fe=_t.getPropertyValue("color");Ve.style.visibility="visible",Ge.style.visibility="hidden",Gc(Ve,{transform:`translate(${Pe}px, ${Ze}px) scale(${St})`,color:Fe,...Ne},{duration:kt,easing:kf,direction:me?"normal":"reverse"}).finished.then(()=>{Ve.style.removeProperty("visibility"),Ge.style.removeProperty("visibility")})})}},{flush:"post"});const _e=Q(()=>({isActive:O,isFocused:v,controlRef:le,blur:S,focus:_}));function te(me){me.target!==document.activeElement&&me.preventDefault()}function Se(me){var Ve;me.key!=="Enter"&&me.key!==" "||(me.preventDefault(),me.stopPropagation(),(Ve=e["onClick:clear"])==null||Ve.call(e,new MouseEvent("click")))}return zt(()=>{var Pe,Ze,Je;const me=e.variant==="outlined",Ve=!!(s["prepend-inner"]||e.prependInnerIcon),Ge=!!(e.clearable||s.clear),$e=!!(s["append-inner"]||e.appendInnerIcon||Ge),ke=()=>s.label?s.label({..._e.value,label:e.label,props:{for:N.value}}):e.label;return E("div",wt({class:["v-field",{"v-field--active":O.value,"v-field--appended":$e,"v-field--center-affix":e.centerAffix??!ie.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":Ve,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!ke(),[`v-field--variant-${e.variant}`]:!0},u.value,se.value,l.value,h.value,k.value,D.value,e.class],style:[H.value,e.style],onClick:te},n),[E("div",{class:"v-field__overlay"},null),E(E0,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:s.loader}),Ve&&E("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&E(C,{key:"prepend-icon",name:"prependInner"},null),(Pe=s["prepend-inner"])==null?void 0:Pe.call(s,_e.value)]),E("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&R.value&&E(Am,{key:"floating-label",ref:ee,class:[Z.value],floating:!0,for:N.value,style:ne.value},{default:()=>[ke()]}),E(Am,{ref:X,for:N.value},{default:()=>[ke()]}),(Ze=s.default)==null?void 0:Ze.call(s,{..._e.value,props:{id:N.value,class:"v-field__input","aria-describedby":j.value},focus:_,blur:S})]),Ge&&E(cA,{key:"clear"},{default:()=>[gi(E("div",{class:"v-field__clearable",onMousedown:Ne=>{Ne.preventDefault(),Ne.stopPropagation()}},[E(Qn,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[s.clear?s.clear({..._e.value,props:{onKeydown:Se,onFocus:_,onBlur:S,onClick:e["onClick:clear"]}}):E(C,{name:"clear",onKeydown:Se,onFocus:_,onBlur:S},null)]})]),[[hl,e.dirty]])]}),$e&&E("div",{key:"append",class:"v-field__append-inner"},[(Je=s["append-inner"])==null?void 0:Je.call(s,_e.value),e.appendInnerIcon&&E(C,{key:"append-icon",name:"appendInner"},null)]),E("div",{class:["v-field__outline",Z.value],style:ne.value},[me&&E(rn,null,[E("div",{class:"v-field__outline__start"},null),R.value&&E("div",{class:"v-field__outline__notch"},[E(Am,{ref:ee,floating:!0,for:N.value},{default:()=>[ke()]})]),E("div",{class:"v-field__outline__end"},null)]),ie.value&&R.value&&E(Am,{ref:ee,floating:!0,for:N.value},{default:()=>[ke()]})])])}),{controlRef:le}}});function rv(e){const t=Object.keys(Zf.props).filter(n=>!Hg(n)&&n!=="class"&&n!=="style");return aT(e,t)}const HB=Xe({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...pn(),...vl({transition:{component:oA,leaveAbsolute:!0,group:!0}})},"VMessages"),GB=At()({name:"VMessages",props:HB(),setup(e,t){let{slots:n}=t;const r=Q(()=>Mi(e.messages)),{textColorClasses:s,textColorStyles:u}=xa(Q(()=>e.color));return zt(()=>E(hs,{transition:e.transition,tag:"div",class:["v-messages",s.value,e.class],style:[u.value,e.style],role:"alert","aria-live":"polite"},{default:()=>[e.active&&r.value.map((h,l)=>E("div",{class:"v-messages__message",key:`${l}-${r.value}`},[n.message?n.message({message:h}):h]))]})),{}}}),mA=Symbol.for("vuetify:form"),WB=Xe({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function YB(e){const t=xn(e,"modelValue"),n=Q(()=>e.disabled),r=Q(()=>e.readonly),s=Ut(!1),u=lt([]),h=lt([]);async function l(){const S=[];let C=!0;h.value=[],s.value=!0;for(const k of u.value){const D=await k.validate();if(D.length>0&&(C=!1,S.push({id:k.id,errorMessages:D})),!C&&e.fastFail)break}return h.value=S,s.value=!1,{valid:C,errors:h.value}}function v(){u.value.forEach(S=>S.reset())}function _(){u.value.forEach(S=>S.resetValidation())}return ut(u,()=>{let S=0,C=0;const k=[];for(const D of u.value)D.isValid===!1?(C++,k.push({id:D.id,errorMessages:D.errorMessages})):D.isValid===!0&&S++;h.value=k,t.value=C>0?!1:S===u.value.length?!0:null},{deep:!0,flush:"post"}),bn(mA,{register:S=>{let{id:C,validate:k,reset:D,resetValidation:O}=S;u.value.some(R=>R.id===C),u.value.push({id:C,validate:k,reset:D,resetValidation:O,isValid:null,errorMessages:[]})},unregister:S=>{u.value=u.value.filter(C=>C.id!==S)},update:(S,C,k)=>{const D=u.value.find(O=>O.id===S);D&&(D.isValid=C,D.errorMessages=k)},isDisabled:n,isReadonly:r,isValidating:s,isValid:t,items:u,validateOn:Ct(e,"validateOn")}),{errors:h,isDisabled:n,isReadonly:r,isValidating:s,isValid:t,items:u,validate:l,reset:v,resetValidation:_}}function R0(){return yt(mA,null)}const ZB=Xe({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...L0()},"validation");function KB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ko(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Fa();const r=xn(e,"modelValue"),s=Q(()=>e.validationValue===void 0?r.value:e.validationValue),u=R0(),h=lt([]),l=Ut(!0),v=Q(()=>!!(Mi(r.value===""?null:r.value).length||Mi(s.value===""?null:s.value).length)),_=Q(()=>!!(e.disabled??(u==null?void 0:u.isDisabled.value))),S=Q(()=>!!(e.readonly??(u==null?void 0:u.isReadonly.value))),C=Q(()=>{var ee;return(ee=e.errorMessages)!=null&&ee.length?Mi(e.errorMessages).concat(h.value).slice(0,Math.max(0,+e.maxErrors)):h.value}),k=Q(()=>{let ee=(e.validateOn??(u==null?void 0:u.validateOn.value))||"input";ee==="lazy"&&(ee="input lazy");const le=new Set((ee==null?void 0:ee.split(" "))??[]);return{blur:le.has("blur")||le.has("input"),input:le.has("input"),submit:le.has("submit"),lazy:le.has("lazy")}}),D=Q(()=>{var ee;return e.error||(ee=e.errorMessages)!=null&&ee.length?!1:e.rules.length?l.value?h.value.length||k.value.lazy?null:!0:!h.value.length:!0}),O=Ut(!1),R=Q(()=>({[`${t}--error`]:D.value===!1,[`${t}--dirty`]:v.value,[`${t}--disabled`]:_.value,[`${t}--readonly`]:S.value})),F=Q(()=>e.name??Fr(n));Ug(()=>{u==null||u.register({id:F.value,validate:X,reset:N,resetValidation:j})}),br(()=>{u==null||u.unregister(F.value)}),Oa(async()=>{k.value.lazy||await X(!0),u==null||u.update(F.value,D.value,C.value)}),ms(()=>k.value.input,()=>{ut(s,()=>{if(s.value!=null)X();else if(e.focused){const ee=ut(()=>e.focused,le=>{le||X(),ee()})}})}),ms(()=>k.value.blur,()=>{ut(()=>e.focused,ee=>{ee||X()})}),ut([D,C],()=>{u==null||u.update(F.value,D.value,C.value)});async function N(){r.value=null,await ar(),await j()}async function j(){l.value=!0,k.value.lazy?h.value=[]:await X(!0)}async function X(){let ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const le=[];O.value=!0;for(const ie of e.rules){if(le.length>=+(e.maxErrors??1))break;const H=await(typeof ie=="function"?ie:()=>ie)(s.value);if(H!==!0){if(H!==!1&&typeof H!="string"){console.warn(`${H} is not a valid value. Rule functions must return boolean true or a string.`);continue}le.push(H||"")}}return h.value=le,O.value=!1,l.value=ee,h.value}return{errorMessages:C,isDirty:v,isDisabled:_,isReadonly:S,isPristine:l,isValid:D,isValidating:O,reset:N,resetValidation:j,validate:X,validationClasses:R}}const Md=Xe({id:String,appendIcon:Rn,centerAffix:{type:Boolean,default:!0},prependIcon:Rn,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":Ma(),"onClick:append":Ma(),...pn(),...Ba(),...ZB()},"VInput"),bo=At()({name:"VInput",props:{...Md()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:r,emit:s}=t;const{densityClasses:u}=ks(e),{rtlClasses:h}=ws(),{InputIcon:l}=pA(e),v=Fa(),_=Q(()=>e.id||`input-${v}`),S=Q(()=>`${_.value}-messages`),{errorMessages:C,isDirty:k,isDisabled:D,isReadonly:O,isPristine:R,isValid:F,isValidating:N,reset:j,resetValidation:X,validate:ee,validationClasses:le}=KB(e,"v-input",_),ie=Q(()=>({id:_,messagesId:S,isDirty:k,isDisabled:D,isReadonly:O,isPristine:R,isValid:F,isValidating:N,reset:j,resetValidation:X,validate:ee})),se=Q(()=>{var H;return(H=e.errorMessages)!=null&&H.length||!R.value&&C.value.length?C.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages});return zt(()=>{var te,Se,me,Ve;const H=!!(r.prepend||e.prependIcon),Z=!!(r.append||e.appendIcon),ne=se.value.length>0,_e=!e.hideDetails||e.hideDetails==="auto"&&(ne||!!r.details);return E("div",{class:["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--hide-spin-buttons":e.hideSpinButtons},u.value,h.value,le.value,e.class],style:e.style},[H&&E("div",{key:"prepend",class:"v-input__prepend"},[(te=r.prepend)==null?void 0:te.call(r,ie.value),e.prependIcon&&E(l,{key:"prepend-icon",name:"prepend"},null)]),r.default&&E("div",{class:"v-input__control"},[(Se=r.default)==null?void 0:Se.call(r,ie.value)]),Z&&E("div",{key:"append",class:"v-input__append"},[e.appendIcon&&E(l,{key:"append-icon",name:"append"},null),(me=r.append)==null?void 0:me.call(r,ie.value)]),_e&&E("div",{class:"v-input__details"},[E(GB,{id:S.value,active:ne,messages:se.value},{message:r.message}),(Ve=r.details)==null?void 0:Ve.call(r,ie.value)])])}),{reset:j,resetValidation:X,validate:ee,isValid:F,errorMessages:C}}}),XB=Xe({controlVariant:{type:String,default:"default"},inset:Boolean,hideInput:Boolean,min:Number,max:Number,step:Number,...dS(Md(),["density","disabled","focused","hideDetails","hint","label","persistentHint","readonly"]),...dS(Yf(),["baseColor","bgColor","class","color","disabled","error","loading","reverse","rounded","style","theme","variant"]),...L0()},"VNumberInput"),JB=At()({name:"VNumberInput",inheritAttrs:!1,props:{...XB(),modelValue:{type:[Number,String],default:0}},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:s}=t;const u=xn(e,"modelValue"),{isFocused:h,focus:l,blur:v}=Wf(e),_=lt();function S(){h.value||l()}const C=Q(()=>e.hideInput?"stacked":e.controlVariant);function k(){var j,X;(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)?(j=_.value)==null||j.stepUp():(X=_.value)==null||X.stepDown(),_.value&&(u.value=parseInt(_.value.value,10))}function D(){k()}function O(){k(!1)}const R=Q(()=>({click:D})),F=Q(()=>({click:O}));zt(()=>{const N=rv(e),[j,X]=Cd(n),{modelValue:ee,...le}=bo.filterProps(e);function ie(){const H=C.value==="stacked"?"auto":"100%";return E("div",{class:"v-number-input__control"},[s.decrement?E(Qn,{key:"decrement-defaults",defaults:{VBtn:{flat:!0,height:H,size:"small",icon:"$expand"}}},{default:()=>[s.decrement(F.value)]}):E(nn,{flat:!0,key:"decrement-btn",height:H,icon:"$expand",size:"small",onClick:O},null),E(yr,{vertical:C.value!=="stacked"},null),s.increment?E(Qn,{key:"increment-defaults",defaults:{VBtn:{flat:!0,height:H,size:"small",icon:"$collapse"}}},{default:()=>[s.increment(R.value)]}):E(nn,{flat:!0,key:"increment-btn",height:H,icon:"$collapse",onClick:D,size:"small"},null)])}function se(){return!e.hideInput&&!e.inset?E(yr,{vertical:!0},null):void 0}return E(bo,wt({class:["v-number-input",{"v-number-input--default":C.value==="default","v-number-input--hide-input":e.hideInput,"v-number-input--inset":e.inset,"v-number-input--reverse":e.reverse,"v-number-input--split":C.value==="split","v-number-input--stacked":C.value==="stacked"},e.class]},j,le,{focused:h.value,style:e.style}),{...s,default:()=>E(Zf,wt(N,{active:!0,focused:h.value}),{...s,default:H=>{let{props:{class:Z,...ne}}=H;return gi(E("input",wt({ref:_,type:"number","onUpdate:modelValue":_e=>u.value=_e,class:Z,max:e.max,min:e.min,step:e.step,onFocus:S,onBlur:v},X),null),[[tT,u.value]])},"append-inner":C.value==="split"?()=>E("div",{class:"v-number-input__control"},[E(yr,{vertical:!0},null),E(nn,{flat:!0,height:"100%",icon:"$plus",tile:!0,onClick:D},null)]):e.reverse?void 0:()=>E(rn,null,[se(),ie()]),"prepend-inner":C.value==="split"?()=>E("div",{class:"v-number-input__control"},[E(nn,{flat:!0,height:"100%",icon:"$minus",tile:!0,onClick:O},null),E(yr,{vertical:!0},null)]):e.reverse?()=>E(rn,null,[ie(),se()]):void 0})})})}}),gA=cc("v-picker-title"),vA=Xe({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...$T()},"VPicker"),fb=At()({name:"VPicker",props:vA(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:r,backgroundColorStyles:s}=Li(Ct(e,"color"));return zt(()=>{const u=bd.filterProps(e),h=!!(e.title||n.title);return E(bd,wt(u,{color:e.bgColor,class:["v-picker",{"v-picker--landscape":e.landscape,"v-picker--with-actions":!!n.actions},e.class],style:e.style}),{default:()=>{var l;return[!e.hideHeader&&E("div",{key:"header",class:[r.value],style:[s.value]},[h&&E(gA,{key:"picker-title"},{default:()=>{var v;return[((v=n.title)==null?void 0:v.call(n))??e.title]}}),n.header&&E("div",{class:"v-picker__header"},[n.header()])]),E("div",{class:"v-picker__body"},[(l=n.default)==null?void 0:l.call(n)]),n.actions&&E(Qn,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[E("div",{class:"v-picker__actions"},[n.actions()])]})]}})}),{}}}),yA=Xe({autoDraw:Boolean,autoDrawDuration:[Number,String],autoDrawEasing:{type:String,default:"ease"},color:String,gradient:{type:Array,default:()=>[]},gradientDirection:{type:String,validator:e=>["top","bottom","left","right"].includes(e),default:"top"},height:{type:[String,Number],default:75},labels:{type:Array,default:()=>[]},labelSize:{type:[Number,String],default:7},lineWidth:{type:[String,Number],default:4},id:String,itemValue:{type:String,default:"value"},modelValue:{type:Array,default:()=>[]},min:[String,Number],max:[String,Number],padding:{type:[String,Number],default:8},showLabels:Boolean,smooth:Boolean,width:{type:[Number,String],default:300}},"Line"),_A=Xe({autoLineWidth:Boolean,...yA()},"VBarline"),nk=At()({name:"VBarline",props:_A(),setup(e,t){let{slots:n}=t;const r=Fa(),s=Q(()=>e.id||`barline-${r}`),u=Q(()=>Number(e.autoDrawDuration)||500),h=Q(()=>!!(e.showLabels||e.labels.length>0||n!=null&&n.label)),l=Q(()=>parseFloat(e.lineWidth)||4),v=Q(()=>Math.max(e.modelValue.length*l.value,Number(e.width))),_=Q(()=>({minX:0,maxX:v.value,minY:0,maxY:parseInt(e.height,10)})),S=Q(()=>e.modelValue.map(R=>ia(R,e.itemValue,R)));function C(R,F){const{minX:N,maxX:j,minY:X,maxY:ee}=F,le=R.length;let ie=e.max!=null?Number(e.max):Math.max(...R),se=e.min!=null?Number(e.min):Math.min(...R);se>0&&e.min==null&&(se=0),ie<0&&e.max==null&&(ie=0);const H=j/le,Z=(ee-X)/(ie-se||1),ne=ee-Math.abs(se*Z);return R.map((_e,te)=>{const Se=Math.abs(Z*_e);return{x:N+te*H,y:ne-Se+ +(_e<0)*Se,height:Se,value:_e}})}const k=Q(()=>{const R=[],F=C(S.value,_.value),N=F.length;for(let j=0;R.length<N;j++){const X=F[j];let ee=e.labels[j];ee||(ee=typeof X=="object"?X.value:X),R.push({x:X.x,value:String(ee)})}return R}),D=Q(()=>C(S.value,_.value)),O=Q(()=>(Math.abs(D.value[0].x-D.value[1].x)-l.value)/2);zt(()=>{const R=e.gradient.slice().length?e.gradient.slice().reverse():[""];return E("svg",{display:"block"},[E("defs",null,[E("linearGradient",{id:s.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[R.map((F,N)=>E("stop",{offset:N/Math.max(R.length-1,1),"stop-color":F||"currentColor"},null))])]),E("clipPath",{id:`${s.value}-clip`},[D.value.map(F=>E("rect",{x:F.x+O.value,y:F.y,width:l.value,height:F.height,rx:typeof e.smooth=="number"?e.smooth:e.smooth?2:0,ry:typeof e.smooth=="number"?e.smooth:e.smooth?2:0},[e.autoDraw&&E(rn,null,[E("animate",{attributeName:"y",from:F.y+F.height,to:F.y,dur:`${u.value}ms`,fill:"freeze"},null),E("animate",{attributeName:"height",from:"0",to:F.height,dur:`${u.value}ms`,fill:"freeze"},null)])]))]),h.value&&E("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[k.value.map((F,N)=>{var j;return E("text",{x:F.x+O.value+l.value/2,y:parseInt(e.height,10)-2+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[((j=n.label)==null?void 0:j.call(n,{index:N,value:F.value}))??F.value])})]),E("g",{"clip-path":`url(#${s.value}-clip)`,fill:`url(#${s.value})`},[E("rect",{x:0,y:0,width:Math.max(e.modelValue.length*l.value,Number(e.width)),height:e.height},null)])])})}});function QB(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:75;if(e.length===0)return"";const s=e.shift(),u=e[e.length-1];return(n?`M${s.x} ${r-s.x+2} L${s.x} ${s.y}`:`M${s.x} ${s.y}`)+e.map((h,l)=>{const v=e[l+1],_=e[l-1]||s,S=v&&e3(v,h,_);if(!v||S)return`L${h.x} ${h.y}`;const C=Math.min(rk(_,h),rk(v,h)),D=C/2<t?C/2:t,O=ik(_,h,D),R=ik(v,h,D);return`L${O.x} ${O.y}S${h.x} ${h.y} ${R.x} ${R.y}`}).join("")+(n?`L${u.x} ${r-s.x+2} Z`:"")}function Em(e){return parseInt(e,10)}function e3(e,t,n){return Em(e.x+n.x)===Em(2*t.x)&&Em(e.y+n.y)===Em(2*t.y)}function rk(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ik(e,t,n){const r={x:e.x-t.x,y:e.y-t.y},s=Math.sqrt(r.x*r.x+r.y*r.y),u={x:r.x/s,y:r.y/s};return{x:t.x+u.x*n,y:t.y+u.y*n}}const bA=Xe({fill:Boolean,...yA()},"VTrendline"),ak=At()({name:"VTrendline",props:bA(),setup(e,t){let{slots:n}=t;const r=Fa(),s=Q(()=>e.id||`trendline-${r}`),u=Q(()=>Number(e.autoDrawDuration)||(e.fill?500:2e3)),h=lt(0),l=lt(null);function v(F,N){const{minX:j,maxX:X,minY:ee,maxY:le}=N,ie=F.length,se=e.max!=null?Number(e.max):Math.max(...F),H=e.min!=null?Number(e.min):Math.min(...F),Z=(X-j)/(ie-1),ne=(le-ee)/(se-H||1);return F.map((_e,te)=>({x:j+te*Z,y:le-(_e-H)*ne,value:_e}))}const _=Q(()=>!!(e.showLabels||e.labels.length>0||n!=null&&n.label)),S=Q(()=>parseFloat(e.lineWidth)||4),C=Q(()=>Number(e.width)),k=Q(()=>{const F=Number(e.padding);return{minX:F,maxX:C.value-F,minY:F,maxY:parseInt(e.height,10)-F}}),D=Q(()=>e.modelValue.map(F=>ia(F,e.itemValue,F))),O=Q(()=>{const F=[],N=v(D.value,k.value),j=N.length;for(let X=0;F.length<j;X++){const ee=N[X];let le=e.labels[X];le||(le=typeof ee=="object"?ee.value:ee),F.push({x:ee.x,value:String(le)})}return F});ut(()=>e.modelValue,async()=>{if(await ar(),!e.autoDraw||!l.value)return;const F=l.value,N=F.getTotalLength();e.fill?(F.style.transformOrigin="bottom center",F.style.transition="none",F.style.transform="scaleY(0)",F.getBoundingClientRect(),F.style.transition=`transform ${u.value}ms ${e.autoDrawEasing}`,F.style.transform="scaleY(1)"):(F.style.strokeDasharray=`${N}`,F.style.strokeDashoffset=`${N}`,F.getBoundingClientRect(),F.style.transition=`stroke-dashoffset ${u.value}ms ${e.autoDrawEasing}`,F.style.strokeDashoffset="0"),h.value=N},{immediate:!0});function R(F){return QB(v(D.value,k.value),e.smooth?8:Number(e.smooth),F,parseInt(e.height,10))}zt(()=>{var N;const F=e.gradient.slice().length?e.gradient.slice().reverse():[""];return E("svg",{display:"block","stroke-width":parseFloat(e.lineWidth)??4},[E("defs",null,[E("linearGradient",{id:s.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[F.map((j,X)=>E("stop",{offset:X/Math.max(F.length-1,1),"stop-color":j||"currentColor"},null))])]),_.value&&E("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[O.value.map((j,X)=>{var ee;return E("text",{x:j.x+S.value/2+S.value/2,y:parseInt(e.height,10)-4+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[((ee=n.label)==null?void 0:ee.call(n,{index:X,value:j.value}))??j.value])})]),E("path",{ref:l,d:R(e.fill),fill:e.fill?`url(#${s.value})`:"none",stroke:e.fill?"none":`url(#${s.value})`},null),e.fill&&E("path",{d:R(!1),fill:"none",stroke:e.color??((N=e.gradient)==null?void 0:N[0])},null)])})}}),t3=Xe({type:{type:String,default:"trend"},..._A(),...bA()},"VSparkline"),n3=At()({name:"VSparkline",props:t3(),setup(e,t){let{slots:n}=t;const{textColorClasses:r,textColorStyles:s}=xa(Ct(e,"color")),u=Q(()=>!!(e.showLabels||e.labels.length>0||n!=null&&n.label)),h=Q(()=>{let l=parseInt(e.height,10);return u.value&&(l+=parseInt(e.labelSize,10)*1.5),l});zt(()=>{const l=e.type==="trend"?ak:nk,v=e.type==="trend"?ak.filterProps(e):nk.filterProps(e);return E(l,wt({key:e.type,class:r.value,style:s.value,viewBox:`0 0 ${e.width} ${parseInt(h.value,10)}`},v),n)})}});function s_(e,t){return{x:e.x+t.x,y:e.y+t.y}}function r3(e,t){return{x:e.x-t.x,y:e.y-t.y}}function sk(e,t){if(e.side==="top"||e.side==="bottom"){const{side:n,align:r}=e,s=r==="left"?0:r==="center"?t.width/2:r==="right"?t.width:r,u=n==="top"?0:n==="bottom"?t.height:n;return s_({x:s,y:u},t)}else if(e.side==="left"||e.side==="right"){const{side:n,align:r}=e,s=n==="left"?0:n==="right"?t.width:n,u=r==="top"?0:r==="center"?t.height/2:r==="bottom"?t.height:r;return s_({x:s,y:u},t)}return s_({x:t.width/2,y:t.height/2},t)}const xA={static:s3,connected:l3},i3=Xe({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in xA},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function a3(e,t){const n=lt({}),r=lt();Cr&&ms(()=>!!(t.isActive.value&&e.locationStrategy),u=>{var h,l;ut(()=>e.locationStrategy,u),Ra(()=>{window.removeEventListener("resize",s),r.value=void 0}),window.addEventListener("resize",s,{passive:!0}),typeof e.locationStrategy=="function"?r.value=(h=e.locationStrategy(t,e,n))==null?void 0:h.updateLocation:r.value=(l=xA[e.locationStrategy](t,e,n))==null?void 0:l.updateLocation});function s(u){var h;(h=r.value)==null||h.call(r,u)}return{contentStyles:n,updateLocation:r}}function s3(){}function o3(e,t){t?e.style.removeProperty("left"):e.style.removeProperty("right");const n=y0(e);return t?n.x+=parseFloat(e.style.right||0):n.x-=parseFloat(e.style.left||0),n.y-=parseFloat(e.style.top||0),n}function l3(e,t,n){(Array.isArray(e.target.value)||XO(e.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:s,preferredOrigin:u}=m0(()=>{const O=J_(t.location,e.isRtl.value),R=t.origin==="overlap"?O:t.origin==="auto"?t_(O):J_(t.origin,e.isRtl.value);return O.side===R.side&&O.align===n_(R).align?{preferredAnchor:gS(O),preferredOrigin:gS(R)}:{preferredAnchor:O,preferredOrigin:R}}),[h,l,v,_]=["minWidth","minHeight","maxWidth","maxHeight"].map(O=>Q(()=>{const R=parseFloat(t[O]);return isNaN(R)?1/0:R})),S=Q(()=>{if(Array.isArray(t.offset))return t.offset;if(typeof t.offset=="string"){const O=t.offset.split(" ").map(parseFloat);return O.length<2&&O.push(0),O}return typeof t.offset=="number"?[t.offset,0]:[0,0]});let C=!1;const k=new ResizeObserver(()=>{C&&D()});ut([e.target,e.contentEl],(O,R)=>{let[F,N]=O,[j,X]=R;j&&!Array.isArray(j)&&k.unobserve(j),F&&!Array.isArray(F)&&k.observe(F),X&&k.unobserve(X),N&&k.observe(N)},{immediate:!0}),Ra(()=>{k.disconnect()});function D(){if(C=!1,requestAnimationFrame(()=>C=!0),!e.target.value||!e.contentEl.value)return;const O=dT(e.target.value),R=o3(e.contentEl.value,e.isRtl.value),F=hg(e.contentEl.value),N=12;F.length||(F.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(R.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),R.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const j=F.reduce((_e,te)=>{const Se=te.getBoundingClientRect(),me=new eu({x:te===document.documentElement?0:Se.x,y:te===document.documentElement?0:Se.y,width:te.clientWidth,height:te.clientHeight});return _e?new eu({x:Math.max(_e.left,me.left),y:Math.max(_e.top,me.top),width:Math.min(_e.right,me.right)-Math.max(_e.left,me.left),height:Math.min(_e.bottom,me.bottom)-Math.max(_e.top,me.top)}):me},void 0);j.x+=N,j.y+=N,j.width-=N*2,j.height-=N*2;let X={anchor:s.value,origin:u.value};function ee(_e){const te=new eu(R),Se=sk(_e.anchor,O),me=sk(_e.origin,te);let{x:Ve,y:Ge}=r3(Se,me);switch(_e.anchor.side){case"top":Ge-=S.value[0];break;case"bottom":Ge+=S.value[0];break;case"left":Ve-=S.value[0];break;case"right":Ve+=S.value[0];break}switch(_e.anchor.align){case"top":Ge-=S.value[1];break;case"bottom":Ge+=S.value[1];break;case"left":Ve-=S.value[1];break;case"right":Ve+=S.value[1];break}return te.x+=Ve,te.y+=Ge,te.width=Math.min(te.width,v.value),te.height=Math.min(te.height,_.value),{overflows:yS(te,j),x:Ve,y:Ge}}let le=0,ie=0;const se={x:0,y:0},H={x:!1,y:!1};let Z=-1;for(;!(Z++>10);){const{x:_e,y:te,overflows:Se}=ee(X);le+=_e,ie+=te,R.x+=_e,R.y+=te;{const me=vS(X.anchor),Ve=Se.x.before||Se.x.after,Ge=Se.y.before||Se.y.after;let $e=!1;if(["x","y"].forEach(ke=>{if(ke==="x"&&Ve&&!H.x||ke==="y"&&Ge&&!H.y){const Pe={anchor:{...X.anchor},origin:{...X.origin}},Ze=ke==="x"?me==="y"?n_:t_:me==="y"?t_:n_;Pe.anchor=Ze(Pe.anchor),Pe.origin=Ze(Pe.origin);const{overflows:Je}=ee(Pe);(Je[ke].before<=Se[ke].before&&Je[ke].after<=Se[ke].after||Je[ke].before+Je[ke].after<(Se[ke].before+Se[ke].after)/2)&&(X=Pe,$e=H[ke]=!0)}}),$e)continue}Se.x.before&&(le+=Se.x.before,R.x+=Se.x.before),Se.x.after&&(le-=Se.x.after,R.x-=Se.x.after),Se.y.before&&(ie+=Se.y.before,R.y+=Se.y.before),Se.y.after&&(ie-=Se.y.after,R.y-=Se.y.after);{const me=yS(R,j);se.x=j.width-me.x.before-me.x.after,se.y=j.height-me.y.before-me.y.after,le+=me.x.before,R.x+=me.x.before,ie+=me.y.before,R.y+=me.y.before}break}const ne=vS(X.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${X.anchor.side} ${X.anchor.align}`,transformOrigin:`${X.origin.side} ${X.origin.align}`,top:Jt(o_(ie)),left:e.isRtl.value?void 0:Jt(o_(le)),right:e.isRtl.value?Jt(o_(-le)):void 0,minWidth:Jt(ne==="y"?Math.min(h.value,O.width):h.value),maxWidth:Jt(ok(gs(se.x,h.value===1/0?0:h.value,v.value))),maxHeight:Jt(ok(gs(se.y,l.value===1/0?0:l.value,_.value)))}),{available:se,contentBox:R}}return ut(()=>[s.value,u.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>D()),ar(()=>{const O=D();if(!O)return;const{available:R,contentBox:F}=O;F.height>R.y&&requestAnimationFrame(()=>{D(),requestAnimationFrame(()=>{D()})})}),{updateLocation:D}}function o_(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function ok(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let pb=!0;const yg=[];function c3(e){!pb||yg.length?(yg.push(e),mb()):(pb=!1,e(),mb())}let lk=-1;function mb(){cancelAnimationFrame(lk),lk=requestAnimationFrame(()=>{const e=yg.shift();e&&e(),yg.length?mb():pb=!0})}const jm={none:null,close:h3,block:f3,reposition:p3},u3=Xe({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in jm}},"VOverlay-scroll-strategies");function d3(e,t){if(!Cr)return;let n;Ui(async()=>{n==null||n.stop(),t.isActive.value&&e.scrollStrategy&&(n=zg(),await new Promise(r=>setTimeout(r)),n.active&&n.run(()=>{var r;typeof e.scrollStrategy=="function"?e.scrollStrategy(t,e,n):(r=jm[e.scrollStrategy])==null||r.call(jm,t,e,n)}))}),Ra(()=>{n==null||n.stop()})}function h3(e){function t(n){e.isActive.value=!1}wA(e.targetEl.value??e.contentEl.value,t)}function f3(e,t){var h;const n=(h=e.root.value)==null?void 0:h.offsetParent,r=[...new Set([...hg(e.targetEl.value,t.contained?n:void 0),...hg(e.contentEl.value,t.contained?n:void 0)])].filter(l=>!l.classList.contains("v-overlay-scroll-blocked")),s=window.innerWidth-document.documentElement.offsetWidth,u=(l=>x0(l)&&l)(n||document.documentElement);u&&e.root.value.classList.add("v-overlay--scroll-blocked"),r.forEach((l,v)=>{l.style.setProperty("--v-body-scroll-x",Jt(-l.scrollLeft)),l.style.setProperty("--v-body-scroll-y",Jt(-l.scrollTop)),l!==document.documentElement&&l.style.setProperty("--v-scrollbar-offset",Jt(s)),l.classList.add("v-overlay-scroll-blocked")}),Ra(()=>{r.forEach((l,v)=>{const _=parseFloat(l.style.getPropertyValue("--v-body-scroll-x")),S=parseFloat(l.style.getPropertyValue("--v-body-scroll-y")),C=l.style.scrollBehavior;l.style.scrollBehavior="auto",l.style.removeProperty("--v-body-scroll-x"),l.style.removeProperty("--v-body-scroll-y"),l.style.removeProperty("--v-scrollbar-offset"),l.classList.remove("v-overlay-scroll-blocked"),l.scrollLeft=-_,l.scrollTop=-S,l.style.scrollBehavior=C}),u&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function p3(e,t,n){let r=!1,s=-1,u=-1;function h(l){c3(()=>{var S,C;const v=performance.now();(C=(S=e.updateLocation).value)==null||C.call(S,l),r=(performance.now()-v)/(1e3/60)>2})}u=(typeof requestIdleCallback>"u"?l=>l():requestIdleCallback)(()=>{n.run(()=>{wA(e.targetEl.value??e.contentEl.value,l=>{r?(cancelAnimationFrame(s),s=requestAnimationFrame(()=>{s=requestAnimationFrame(()=>{h(l)})})):h(l)})})}),Ra(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(u),cancelAnimationFrame(s)})}function wA(e,t){const n=[document,...hg(e)];n.forEach(r=>{r.addEventListener("scroll",t,{passive:!0})}),Ra(()=>{n.forEach(r=>{r.removeEventListener("scroll",t)})})}const gb=Symbol.for("vuetify:v-menu"),m3=Xe({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function g3(e,t){let n=()=>{};function r(h){n==null||n();const l=Number(h?e.openDelay:e.closeDelay);return new Promise(v=>{n=gO(l,()=>{t==null||t(h),v(h)})})}function s(){return r(!0)}function u(){return r(!1)}return{clearDelay:n,runOpenDelay:s,runCloseDelay:u}}const v3=Xe({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...m3()},"VOverlay-activator");function y3(e,t){let{isActive:n,isTop:r}=t;const s=ni("useActivator"),u=lt();let h=!1,l=!1,v=!0;const _=Q(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),S=Q(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!_.value),{runOpenDelay:C,runCloseDelay:k}=g3(e,se=>{se===(e.openOnHover&&h||_.value&&l)&&!(e.openOnHover&&n.value&&!r.value)&&(n.value!==se&&(v=!0),n.value=se)}),D=lt(),O={onClick:se=>{se.stopPropagation(),u.value=se.currentTarget||se.target,n.value||(D.value=[se.clientX,se.clientY]),n.value=!n.value},onMouseenter:se=>{var H;(H=se.sourceCapabilities)!=null&&H.firesTouchEvents||(h=!0,u.value=se.currentTarget||se.target,C())},onMouseleave:se=>{h=!1,k()},onFocus:se=>{yd(se.target,":focus-visible")!==!1&&(l=!0,se.stopPropagation(),u.value=se.currentTarget||se.target,C())},onBlur:se=>{l=!1,se.stopPropagation(),k()}},R=Q(()=>{const se={};return S.value&&(se.onClick=O.onClick),e.openOnHover&&(se.onMouseenter=O.onMouseenter,se.onMouseleave=O.onMouseleave),_.value&&(se.onFocus=O.onFocus,se.onBlur=O.onBlur),se}),F=Q(()=>{const se={};if(e.openOnHover&&(se.onMouseenter=()=>{h=!0,C()},se.onMouseleave=()=>{h=!1,k()}),_.value&&(se.onFocusin=()=>{l=!0,C()},se.onFocusout=()=>{l=!1,k()}),e.closeOnContentClick){const H=yt(gb,null);se.onClick=()=>{n.value=!1,H==null||H.closeParents()}}return se}),N=Q(()=>{const se={};return e.openOnHover&&(se.onMouseenter=()=>{v&&(h=!0,v=!1,C())},se.onMouseleave=()=>{h=!1,k()}),se});ut(r,se=>{se&&(e.openOnHover&&!h&&(!_.value||!l)||_.value&&!l&&(!e.openOnHover||!h))&&(n.value=!1)}),ut(n,se=>{se||setTimeout(()=>{D.value=void 0})},{flush:"post"});const j=lt();Ui(()=>{j.value&&ar(()=>{u.value=lg(j.value)})});const X=lt(),ee=Q(()=>e.target==="cursor"&&D.value?D.value:X.value?lg(X.value):SA(e.target,s)||u.value),le=Q(()=>Array.isArray(ee.value)?void 0:ee.value);let ie;return ut(()=>!!e.activator,se=>{se&&Cr?(ie=zg(),ie.run(()=>{_3(e,s,{activatorEl:u,activatorEvents:R})})):ie&&ie.stop()},{flush:"post",immediate:!0}),Ra(()=>{ie==null||ie.stop()}),{activatorEl:u,activatorRef:j,target:ee,targetEl:le,targetRef:X,activatorEvents:R,contentEvents:F,scrimEvents:N}}function _3(e,t,n){let{activatorEl:r,activatorEvents:s}=n;ut(()=>e.activator,(v,_)=>{if(_&&v!==_){const S=l(_);S&&h(S)}v&&ar(()=>u())},{immediate:!0}),ut(()=>e.activatorProps,()=>{u()}),Ra(()=>{h()});function u(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l(),_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;v&&_O(v,wt(s.value,_))}function h(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l(),_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;v&&bO(v,wt(s.value,_))}function l(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator;const _=SA(v,t);return r.value=(_==null?void 0:_.nodeType)===Node.ELEMENT_NODE?_:void 0,r.value}}function SA(e,t){var r,s;if(!e)return;let n;if(e==="parent"){let u=(s=(r=t==null?void 0:t.proxy)==null?void 0:r.$el)==null?void 0:s.parentNode;for(;u!=null&&u.hasAttribute("data-no-activator");)u=u.parentNode;n=u}else typeof e=="string"?n=document.querySelector(e):"$el"in e?n=e.$el:n=e;return n}function b3(){if(!Cr)return Ut(!1);const{ssr:e}=Ad();if(e){const t=Ut(!1);return Oa(()=>{t.value=!0}),t}else return Ut(!0)}const kA=Xe({eager:Boolean},"lazy");function CA(e,t){const n=Ut(!1),r=Q(()=>n.value||e.eager||t.value);ut(t,()=>n.value=!0);function s(){e.eager||(n.value=!1)}return{isBooted:n,hasContent:r,onAfterLeave:s}}function iv(){const t=ni("useScopeId").vnode.scopeId;return{scopeId:t?{[t]:""}:void 0}}const ck=Symbol.for("vuetify:stack"),Kh=Si([]);function x3(e,t,n){const r=ni("useStack"),s=!n,u=yt(ck,void 0),h=Si({activeChildren:new Set});bn(ck,h);const l=Ut(+t.value);ms(e,()=>{var C;const S=(C=Kh.at(-1))==null?void 0:C[1];l.value=S?S+10:+t.value,s&&Kh.push([r.uid,l.value]),u==null||u.activeChildren.add(r.uid),Ra(()=>{if(s){const k=vn(Kh).findIndex(D=>D[0]===r.uid);Kh.splice(k,1)}u==null||u.activeChildren.delete(r.uid)})});const v=Ut(!0);s&&Ui(()=>{var C;const S=((C=Kh.at(-1))==null?void 0:C[0])===r.uid;setTimeout(()=>v.value=S)});const _=Q(()=>!h.activeChildren.size);return{globalTop:Vf(v),localTop:_,stackStyles:Q(()=>({zIndex:l.value}))}}function w3(e){return{teleportTarget:Q(()=>{const n=e.value;if(n===!0||!Cr)return;const r=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(r==null)return;let s=r.querySelector(":scope > .v-overlay-container");return s||(s=document.createElement("div"),s.className="v-overlay-container",r.appendChild(s)),s})}}function S3(){return!0}function TA(e,t,n){if(!e||AA(e,n)===!1)return!1;const r=vT(t);if(typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&r.host===e.target)return!1;const s=(typeof n.value=="object"&&n.value.include||(()=>[]))();return s.push(t),!s.some(u=>u==null?void 0:u.contains(e.target))}function AA(e,t){return(typeof t.value=="object"&&t.value.closeConditional||S3)(e)}function k3(e,t,n){const r=typeof n.value=="function"?n.value:n.value.handler;t._clickOutside.lastMousedownWasOutside&&TA(e,t,n)&&setTimeout(()=>{AA(e,n)&&r&&r(e)},0)}function uk(e,t){const n=vT(e);t(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&t(n)}const C3={mounted(e,t){const n=s=>k3(s,e,t),r=s=>{e._clickOutside.lastMousedownWasOutside=TA(s,e,t)};uk(e,s=>{s.addEventListener("click",n,!0),s.addEventListener("mousedown",r,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:n,onMousedown:r}},unmounted(e,t){e._clickOutside&&(uk(e,n=>{var u;if(!n||!((u=e._clickOutside)!=null&&u[t.instance.$.uid]))return;const{onClick:r,onMousedown:s}=e._clickOutside[t.instance.$.uid];n.removeEventListener("click",r,!0),n.removeEventListener("mousedown",s,!0)}),delete e._clickOutside[t.instance.$.uid])}};function T3(e){const{modelValue:t,color:n,...r}=e;return E(_o,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&E("div",wt({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},r),null)]})}const O0=Xe({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...v3(),...pn(),...To(),...kA(),...i3(),...u3(),...Tr(),...vl()},"VOverlay"),_g=At()({name:"VOverlay",directives:{ClickOutside:C3},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...O0()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,afterLeave:()=>!0},setup(e,t){let{slots:n,attrs:r,emit:s}=t;const u=xn(e,"modelValue"),h=Q({get:()=>u.value,set:_t=>{_t&&e.disabled||(u.value=_t)}}),{teleportTarget:l}=w3(Q(()=>e.attach||e.contained)),{themeClasses:v}=Hr(e),{rtlClasses:_,isRtl:S}=ws(),{hasContent:C,onAfterLeave:k}=CA(e,h),D=Li(Q(()=>typeof e.scrim=="string"?e.scrim:null)),{globalTop:O,localTop:R,stackStyles:F}=x3(h,Ct(e,"zIndex"),e._disableGlobalStack),{activatorEl:N,activatorRef:j,target:X,targetEl:ee,targetRef:le,activatorEvents:ie,contentEvents:se,scrimEvents:H}=y3(e,{isActive:h,isTop:R}),{dimensionStyles:Z}=Ao(e),ne=b3(),{scopeId:_e}=iv();ut(()=>e.disabled,_t=>{_t&&(h.value=!1)});const te=lt(),Se=lt(),me=lt(),{contentStyles:Ve,updateLocation:Ge}=a3(e,{isRtl:S,contentEl:me,target:X,isActive:h});d3(e,{root:te,contentEl:me,targetEl:ee,isActive:h,updateLocation:Ge});function $e(_t){s("click:outside",_t),e.persistent?Ne():h.value=!1}function ke(_t){return h.value&&O.value&&(!e.scrim||_t.target===Se.value)}Cr&&ut(h,_t=>{_t?window.addEventListener("keydown",Pe):window.removeEventListener("keydown",Pe)},{immediate:!0}),br(()=>{Cr&&window.removeEventListener("keydown",Pe)});function Pe(_t){var kt,St;_t.key==="Escape"&&O.value&&(e.persistent?Ne():(h.value=!1,(kt=me.value)!=null&&kt.contains(document.activeElement)&&((St=N.value)==null||St.focus())))}const Ze=YT();ms(()=>e.closeOnBack,()=>{cB(Ze,_t=>{O.value&&h.value?(_t(!1),e.persistent?Ne():h.value=!1):_t()})});const Je=lt();ut(()=>h.value&&(e.absolute||e.contained)&&l.value==null,_t=>{if(_t){const kt=_T(te.value);kt&&kt!==document.scrollingElement&&(Je.value=kt.scrollTop)}});function Ne(){e.noClickAnimation||me.value&&Gc(me.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:kf})}function tt(){k(),s("afterLeave")}return zt(()=>{var _t;return E(rn,null,[(_t=n.activator)==null?void 0:_t.call(n,{isActive:h.value,props:wt({ref:j,targetRef:le},ie.value,e.activatorProps)}),ne.value&&C.value&&E(h0,{disabled:!l.value,to:l.value},{default:()=>[E("div",wt({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":h.value,"v-overlay--contained":e.contained},v.value,_.value,e.class],style:[F.value,{"--v-overlay-opacity":e.opacity,top:Jt(Je.value)},e.style],ref:te},_e,r),[E(T3,wt({color:D,modelValue:h.value&&!!e.scrim,ref:Se},H.value),null),E(hs,{appear:!0,persisted:!0,transition:e.transition,target:X.value,onAfterLeave:tt},{default:()=>{var kt;return[gi(E("div",wt({ref:me,class:["v-overlay__content",e.contentClass],style:[Z.value,Ve.value]},se.value,e.contentProps),[(kt=n.default)==null?void 0:kt.call(n,{isActive:h})]),[[hl,h.value],[So("click-outside"),{handler:$e,closeConditional:ke,include:()=>[N.value]}]])]}})])]})])}),{activatorEl:N,scrimEl:Se,target:X,animateClick:Ne,contentEl:me,globalTop:O,localTop:R,updateLocation:Ge}}}),l_=Symbol("Forwarded refs");function c_(e,t){let n=e;for(;n;){const r=Reflect.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function yl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e[l_]=n,new Proxy(e,{get(s,u){if(Reflect.has(s,u))return Reflect.get(s,u);if(!(typeof u=="symbol"||u.startsWith("$")||u.startsWith("__"))){for(const h of n)if(h.value&&Reflect.has(h.value,u)){const l=Reflect.get(h.value,u);return typeof l=="function"?l.bind(h.value):l}}},has(s,u){if(Reflect.has(s,u))return!0;if(typeof u=="symbol"||u.startsWith("$")||u.startsWith("__"))return!1;for(const h of n)if(h.value&&Reflect.has(h.value,u))return!0;return!1},set(s,u,h){if(Reflect.has(s,u))return Reflect.set(s,u,h);if(typeof u=="symbol"||u.startsWith("$")||u.startsWith("__"))return!1;for(const l of n)if(l.value&&Reflect.has(l.value,u))return Reflect.set(l.value,u,h);return!1},getOwnPropertyDescriptor(s,u){var l;const h=Reflect.getOwnPropertyDescriptor(s,u);if(h)return h;if(!(typeof u=="symbol"||u.startsWith("$")||u.startsWith("__"))){for(const v of n){if(!v.value)continue;const _=c_(v.value,u)??("_"in v.value?c_((l=v.value._)==null?void 0:l.setupState,u):void 0);if(_)return _}for(const v of n){const _=v.value&&v.value[l_];if(!_)continue;const S=_.slice();for(;S.length;){const C=S.shift(),k=c_(C.value,u);if(k)return k;const D=C.value&&C.value[l_];D&&S.push(...D)}}}}})}const EA=Xe({id:String,...za(O0({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:I0}}),["absolute"])},"VMenu"),bg=At()({name:"VMenu",props:EA(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=xn(e,"modelValue"),{scopeId:s}=iv(),u=Fa(),h=Q(()=>e.id||`v-menu-${u}`),l=lt(),v=yt(gb,null),_=Ut(0);bn(gb,{register(){++_.value},unregister(){--_.value},closeParents(R){setTimeout(()=>{!_.value&&(R==null||R&&!vO(R,l.value.contentEl))&&(r.value=!1,v==null||v.closeParents())},40)}});async function S(R){var j,X,ee;const F=R.relatedTarget,N=R.target;await ar(),r.value&&F!==N&&((j=l.value)!=null&&j.contentEl)&&((X=l.value)!=null&&X.globalTop)&&![document,l.value.contentEl].includes(N)&&!l.value.contentEl.contains(N)&&((ee=wf(l.value.contentEl)[0])==null||ee.focus())}ut(r,R=>{R?(v==null||v.register(),document.addEventListener("focusin",S,{once:!0})):(v==null||v.unregister(),document.removeEventListener("focusin",S))});function C(R){v==null||v.closeParents(R)}function k(R){var F,N,j;e.disabled||(R.key==="Tab"||R.key==="Enter"&&!e.closeOnContentClick?(R.key==="Enter"&&R.preventDefault(),cT(wf((F=l.value)==null?void 0:F.contentEl,!1),R.shiftKey?"prev":"next",ee=>ee.tabIndex>=0)||(r.value=!1,(j=(N=l.value)==null?void 0:N.activatorEl)==null||j.focus())):["Enter"," "].includes(R.key)&&e.closeOnContentClick&&(r.value=!1,v==null||v.closeParents()))}function D(R){var N;if(e.disabled)return;const F=(N=l.value)==null?void 0:N.contentEl;F&&r.value?R.key==="ArrowDown"?(R.preventDefault(),ug(F,"next")):R.key==="ArrowUp"&&(R.preventDefault(),ug(F,"prev")):["ArrowDown","ArrowUp"].includes(R.key)&&(r.value=!0,R.preventDefault(),setTimeout(()=>setTimeout(()=>D(R))))}const O=Q(()=>wt({"aria-haspopup":"menu","aria-expanded":String(r.value),"aria-owns":h.value,onKeydown:D},e.activatorProps));return zt(()=>{const R=_g.filterProps(e);return E(_g,wt({ref:l,id:h.value,class:["v-menu",e.class],style:e.style},R,{modelValue:r.value,"onUpdate:modelValue":F=>r.value=F,absolute:!0,activatorProps:O.value,"onClick:outside":C,onKeydown:k},s),{activator:n.activator,default:function(){for(var F=arguments.length,N=new Array(F),j=0;j<F;j++)N[j]=arguments[j];return E(Qn,{root:"VMenu"},{default:()=>{var X;return[(X=n.default)==null?void 0:X.call(n,...N)]}})}})}),yl({id:h,openChildren:_},l)}}),A3=Xe({...pn(),...EA({offset:8,minWidth:0,location:"top center"}),...vl({transition:"fade-transition"})},"VSpeedDial"),E3=At()({name:"VSpeedDial",props:A3(),setup(e,t){let{slots:n}=t;const r=lt();return zt(()=>{const s=bg.filterProps(e);return E(bg,wt(s,{class:e.class,style:e.style,contentClass:"v-speed-dial__content",ref:r}),{...n,default:u=>E(Qn,{defaults:{VBtn:{size:"small"}}},{default:()=>[E(hs,{appear:!0,group:!0,transition:e.transition},{default:()=>{var h;return[(h=n.default)==null?void 0:h.call(n,u)]}})]})})}),{}}}),I3=Xe({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:{default:null},double:Boolean,format:{type:Function,default:e=>e},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),vb=At()({name:"VTimePickerClock",props:I3(),emits:{change:e=>e,input:e=>e},setup(e,t){let{emit:n}=t;const r=lt(null),s=lt(null),u=lt(void 0),h=lt(!1),l=lt(null),v=lt(null),{textColorClasses:_,textColorStyles:S}=xa(Ct(e,"color")),{backgroundColorClasses:C,backgroundColorStyles:k}=Li(Ct(e,"color")),D=Q(()=>e.max-e.min+1),O=Q(()=>e.double?D.value/2:D.value),R=Q(()=>360/O.value),F=Q(()=>R.value*Math.PI/180),N=Q(()=>e.modelValue==null?e.min:e.modelValue),j=Q(()=>.62),X=Q(()=>{const ke=[];for(let Pe=e.min;Pe<=e.max;Pe=Pe+e.step)ke.push(Pe);return ke});ut(()=>e.modelValue,ke=>{u.value=ke});function ee(ke){u.value!==ke&&(u.value=ke),n("input",ke)}function le(ke){return!e.allowedValues||e.allowedValues(ke)}function ie(ke){ke.preventDefault();const Pe=Math.sign(-ke.deltaY||1);let Ze=N.value;do Ze=Ze+Pe,Ze=(Ze-e.min+D.value)%D.value+e.min;while(!le(Ze)&&Ze!==N.value);Ze!==e.displayedValue&&ee(Ze)}function se(ke){return e.double&&ke-e.min>=O.value}function H(ke){return se(ke)?j.value:1}function Z(ke){const Pe=e.rotate*Math.PI/180;return{x:Math.sin((ke-e.min)*F.value+Pe)*H(ke),y:-Math.cos((ke-e.min)*F.value+Pe)*H(ke)}}function ne(ke,Pe){const Ze=(Math.round(ke/R.value)+(Pe?O.value:0))%D.value+e.min;return ke<360-R.value/2?Ze:Pe?e.max-O.value+1:e.min}function _e(ke){const{x:Pe,y:Ze}=Z(ke);return{left:`${50+Pe*50}%`,top:`${50+Ze*50}%`}}function te(ke,Pe){const Ze=Pe.x-ke.x,Je=Pe.y-ke.y;return Math.sqrt(Ze*Ze+Je*Je)}function Se(ke,Pe){const Ze=2*Math.atan2(Pe.y-ke.y-te(ke,Pe),Pe.x-ke.x);return Math.abs(Ze*180/Math.PI)}function me(ke){l.value===null&&(l.value=ke),v.value=ke,ee(ke)}function Ve(ke){var bt,Bt;if(ke.preventDefault(),!h.value&&ke.type!=="click"||!r.value)return;const{width:Pe,top:Ze,left:Je}=(bt=r.value)==null?void 0:bt.getBoundingClientRect(),{width:Ne}=((Bt=s.value)==null?void 0:Bt.getBoundingClientRect())??{width:0},{clientX:tt,clientY:_t}="touches"in ke?ke.touches[0]:ke,kt={x:Pe/2,y:-Pe/2},St={x:tt-Je,y:Ze-_t},Fe=Math.round(Se(kt,St)-e.rotate+360)%360,at=e.double&&te(kt,St)<(Ne+Ne*j.value)/4,qe=Math.ceil(15/R.value);let Be;for(let re=0;re<qe;re++)if(Be=ne(Fe+re*R.value,at),le(Be)||(Be=ne(Fe-re*R.value,at),le(Be)))return me(Be)}function Ge(ke){ke.preventDefault(),window.addEventListener("mousemove",Ve),window.addEventListener("touchmove",Ve),window.addEventListener("mouseup",$e),window.addEventListener("touchend",$e),l.value=null,v.value=null,h.value=!0,Ve(ke)}function $e(ke){ke.stopPropagation(),window.removeEventListener("mousemove",Ve),window.removeEventListener("touchmove",Ve),window.removeEventListener("mouseup",$e),window.removeEventListener("touchend",$e),h.value=!1,v.value!==null&&le(v.value)&&n("change",v.value)}zt(()=>E("div",{class:[{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":e.modelValue==null,"v-time-picker-clock--readonly":e.readonly}],onMousedown:Ge,onTouchstart:Ge,onWheel:ke=>e.scrollable&&ie(ke),ref:r},[E("div",{class:"v-time-picker-clock__inner",ref:s},[E("div",{class:[{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":se(e.modelValue)},_.value],style:[{transform:`rotate(${e.rotate+R.value*(N.value-e.min)}deg) scaleY(${H(N.value)})`},S.value]},null),X.value.map(ke=>{const Pe=ke===N.value;return E("div",{class:[{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":Pe,"v-time-picker-clock__item--disabled":e.disabled||!le(ke)},Pe&&C.value],style:[_e(ke),Pe&&k.value]},[E("span",null,[e.format(ke)])])})])]))}}),P3=(e,t,n)=>(t=t>>0,e=String(e),n=String(n),e.length>t?String(e):(t=t-e.length,t>n.length&&(n+=n.repeat(t/n.length)),n.slice(0,t)+String(e))),Wc=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return P3(e,t,"0")};var ei=function(e){return e[e.Hour=1]="Hour",e[e.Minute=2]="Minute",e[e.Second=3]="Second",e}(ei||{});const D3=Xe({ampm:Boolean,ampmReadonly:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,selecting:Number,value:Number},"VTimePickerControls"),yb=At()({name:"VTimePickerControls",props:D3(),emits:{"update:period":e=>e,"update:selecting":e=>e},setup(e,t){let{emit:n,slots:r}=t;const{t:s}=qi();return zt(()=>{let u=e.hour;return e.ampm&&(u=u?(u-1)%12+1:12),E("div",{class:"v-time-picker-controls"},[E("div",{class:{"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":e.useSeconds}},[E(nn,{active:e.selecting===1,color:e.selecting===1?e.color:void 0,variant:"tonal",class:{"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds},text:e.hour==null?"--":Wc(`${u}`),onClick:()=>n("update:selecting",ei.Hour)},null),E("span",{class:["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}]},[Ot(":")]),E(nn,{active:e.selecting===2,color:e.selecting===2?e.color:void 0,class:{"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.selecting===2,"v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds},variant:"tonal",text:e.minute==null?"--":Wc(e.minute),onClick:()=>n("update:selecting",ei.Minute)},null),e.useSeconds&&E("span",{class:["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}],key:"secondsDivider"},[Ot(":")]),e.useSeconds&&E(nn,{key:"secondsVal",variant:"tonal",onClick:()=>n("update:selecting",ei.Second),class:{"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.selecting===3,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds},text:e.second==null?"--":Wc(e.second)},null),e.ampm&&E("div",{class:["v-time-picker-controls__ampm",{"v-time-picker-controls__ampm--readonly":e.ampmReadonly}]},[E(nn,{active:e.period==="am",color:e.period==="am"?e.color:void 0,class:{"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="am"},text:s("$vuetify.timePicker.am"),variant:"tonal",onClick:()=>e.period!=="am"?n("update:period","am"):null},null),E(nn,{active:e.period==="pm",color:e.period==="pm"?e.color:void 0,class:{"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="pm"},text:s("$vuetify.timePicker.pm"),variant:"tonal",onClick:()=>e.period!=="pm"?n("update:period","pm"):null},null)])])])}),{}}}),M3=el(24),IA=el(12),L3=IA.map(e=>e+12),dk=el(60),R3={1:"hour",2:"minute",3:"second"},O3=Xe({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],ampmInTitle:Boolean,disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...za(vA({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),z3=At()({name:"VTimePicker",props:O3(),emits:{"update:hour":e=>e,"update:minute":e=>e,"update:period":e=>e,"update:second":e=>e,"update:modelValue":e=>e},setup(e,t){let{emit:n,slots:r}=t;const{t:s}=qi(),u=lt(null),h=lt(null),l=lt(null),v=lt(null),_=lt(null),S=lt(null),C=lt("am"),k=lt(ei.Hour),D=lt(null),O=lt(null),R=Q(()=>{let te;if(e.allowedHours instanceof Array?te=Ve=>e.allowedHours.includes(Ve):te=e.allowedHours,!e.min&&!e.max)return te;const Se=e.min?Number(e.min.split(":")[0]):0,me=e.max?Number(e.max.split(":")[0]):23;return Ve=>Ve>=Se*1&&Ve<=me*1&&(!te||te(Ve))}),F=Q(()=>{let te;const Se=!R.value||u.value===null||R.value(u.value);if(e.allowedMinutes instanceof Array?te=Ze=>e.allowedMinutes.includes(Ze):te=e.allowedMinutes,!e.min&&!e.max)return Se?te:()=>!1;const[me,Ve]=e.min?e.min.split(":").map(Number):[0,0],[Ge,$e]=e.max?e.max.split(":").map(Number):[23,59],ke=me*60+Ve*1,Pe=Ge*60+$e*1;return Ze=>{const Je=60*u.value+Ze;return Je>=ke&&Je<=Pe&&Se&&(!te||te(Ze))}}),N=Q(()=>{let te;const me=(!R.value||u.value===null||R.value(u.value))&&(!F.value||h.value===null||F.value(h.value));if(e.allowedSeconds instanceof Array?te=tt=>e.allowedSeconds.includes(tt):te=e.allowedSeconds,!e.min&&!e.max)return me?te:()=>!1;const[Ve,Ge,$e]=e.min?e.min.split(":").map(Number):[0,0,0],[ke,Pe,Ze]=e.max?e.max.split(":").map(Number):[23,59,59],Je=Ve*3600+Ge*60+($e||0)*1,Ne=ke*3600+Pe*60+(Ze||0)*1;return tt=>{const _t=3600*u.value+60*h.value+tt;return _t>=Je&&_t<=Ne&&me&&(!te||te(tt))}}),j=Q(()=>e.format==="ampm");ut(()=>e.modelValue,te=>se(te)),Oa(()=>{se(e.modelValue)});function X(){return u.value!=null&&h.value!=null&&(!e.useSeconds||l.value!=null)?`${Wc(u.value)}:${Wc(h.value)}`+(e.useSeconds?`:${Wc(l.value)}`:""):null}function ee(){const te=X();te!==null&&n("update:modelValue",te)}function le(te){return te?(te-1)%12+1:12}function ie(te,Se){return te%12+(Se==="pm"?12:0)}function se(te){if(te==null||te==="")u.value=null,h.value=null,l.value=null;else if(te instanceof Date)u.value=te.getHours(),h.value=te.getMinutes(),l.value=te.getSeconds();else{const[Se,,me,,Ve,Ge]=te.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);u.value=Ge?ie(parseInt(Se,10),Ge):parseInt(Se,10),h.value=parseInt(me,10),l.value=parseInt(Ve||0,10)}C.value=u.value==null||u.value<12?"am":"pm"}function H(te,Se){const me=te==="hour"?R.value:te==="minute"?F.value:N.value;if(!me)return Se;const Ve=te==="minute"||te==="second"?dk:j.value?Se<12?IA:L3:M3;return((Ve.find($e=>me(($e+Se)%Ve.length+Ve[0]))||0)+Se)%Ve.length+Ve[0]}function Z(te){if(C.value=te,u.value!=null){const Se=u.value+(C.value==="am"?-12:12);u.value=H("hour",Se)}return n("update:period",te),ee(),!0}function ne(te){k.value===ei.Hour?u.value=j.value?ie(te,C.value):te:k.value===ei.Minute?h.value=te:l.value=te}function _e(te){switch(R3[k.value]){case"hour":n("update:hour",te);break;case"minute":n("update:minute",te);break;case"second":n("update:second",te);break}const Se=k.value===(e.useSeconds?ei.Second:ei.Minute);k.value===ei.Hour?k.value=ei.Minute:e.useSeconds&&k.value===ei.Minute&&(k.value=ei.Second),!(u.value===v.value&&h.value===_.value&&(!e.useSeconds||l.value===S.value)||X()===null)&&(v.value=u.value,_.value=h.value,e.useSeconds&&(S.value=l.value),Se&&ee())}zt(()=>{const te=fb.filterProps(e),Se=yb.filterProps(e),me=vb.filterProps(za(e,["format","modelValue","min","max"]));return E(fb,wt(te,{color:void 0,class:["v-time-picker",e.class],style:e.style}),{title:()=>{var Ve;return((Ve=r.title)==null?void 0:Ve.call(r))??E("div",{class:"v-time-picker__title"},[s(e.title)])},header:()=>E(yb,wt(Se,{ampm:j.value||e.ampmInTitle,ampmReadonly:j.value&&!e.ampmInTitle,hour:u.value,minute:h.value,period:C.value,second:l.value,selecting:k.value,"onUpdate:period":Ve=>Z(Ve),"onUpdate:selecting":Ve=>k.value=Ve,ref:D}),null),default:()=>E(vb,wt(me,{allowedValues:k.value===ei.Hour?R.value:k.value===ei.Minute?F.value:N.value,double:k.value===ei.Hour&&!j.value,format:k.value===ei.Hour?j.value?le:Ve=>Ve:Ve=>Wc(Ve,2),max:k.value===ei.Hour?j.value&&C.value==="am"?11:23:59,min:k.value===ei.Hour&&j.value&&C.value==="pm"?12:0,size:20,step:k.value===ei.Hour?1:5,modelValue:k.value===ei.Hour?u.value:k.value===ei.Minute?h.value:l.value,onChange:_e,onInput:ne,ref:O}),null),actions:r.actions})})}}),_b=Symbol.for("vuetify:list");function PA(){const e=yt(_b,{hasPrepend:Ut(!1),updateHasPrepend:()=>null}),t={hasPrepend:Ut(!1),updateHasPrepend:n=>{n&&(t.hasPrepend.value=n)}};return bn(_b,t),e}function DA(){return yt(_b,null)}const z0=e=>{const t={activate:n=>{let{id:r,value:s,activated:u}=n;return r=vn(r),e&&!s&&u.size===1&&u.has(r)||(s?u.add(r):u.delete(r)),u},in:(n,r,s)=>{let u=new Set;for(const h of n||[])u=t.activate({id:h,value:!0,activated:new Set(u),children:r,parents:s});return u},out:n=>Array.from(n)};return t},MA=e=>{const t=z0(e);return{activate:r=>{let{activated:s,id:u,...h}=r;u=vn(u);const l=s.has(u)?new Set([u]):new Set;return t.activate({...h,id:u,activated:l})},in:(r,s,u)=>{let h=new Set;return r!=null&&r.length&&(h=t.in(r.slice(0,1),s,u)),h},out:(r,s,u)=>t.out(r,s,u)}},F3=e=>{const t=z0(e);return{activate:r=>{let{id:s,activated:u,children:h,...l}=r;return s=vn(s),h.has(s)?u:t.activate({id:s,activated:u,children:h,...l})},in:t.in,out:t.out}},B3=e=>{const t=MA(e);return{activate:r=>{let{id:s,activated:u,children:h,...l}=r;return s=vn(s),h.has(s)?u:t.activate({id:s,activated:u,children:h,...l})},in:t.in,out:t.out}},V3={open:e=>{let{id:t,value:n,opened:r,parents:s}=e;if(n){const u=new Set;u.add(t);let h=s.get(t);for(;h!=null;)u.add(h),h=s.get(h);return u}else return r.delete(t),r},select:()=>null},LA={open:e=>{let{id:t,value:n,opened:r,parents:s}=e;if(n){let u=s.get(t);for(r.add(t);u!=null&&u!==t;)r.add(u),u=s.get(u);return r}else r.delete(t);return r},select:()=>null},N3={open:LA.open,select:e=>{let{id:t,value:n,opened:r,parents:s}=e;if(!n)return r;const u=[];let h=s.get(t);for(;h!=null;)u.push(h),h=s.get(h);return new Set(u)}},F0=e=>{const t={select:n=>{let{id:r,value:s,selected:u}=n;if(r=vn(r),e&&!s){const h=Array.from(u.entries()).reduce((l,v)=>{let[_,S]=v;return S==="on"&&l.push(_),l},[]);if(h.length===1&&h[0]===r)return u}return u.set(r,s?"on":"off"),u},in:(n,r,s)=>{let u=new Map;for(const h of n||[])u=t.select({id:h,value:!0,selected:new Map(u),children:r,parents:s});return u},out:n=>{const r=[];for(const[s,u]of n.entries())u==="on"&&r.push(s);return r}};return t},RA=e=>{const t=F0(e);return{select:r=>{let{selected:s,id:u,...h}=r;u=vn(u);const l=s.has(u)?new Map([[u,s.get(u)]]):new Map;return t.select({...h,id:u,selected:l})},in:(r,s,u)=>{let h=new Map;return r!=null&&r.length&&(h=t.in(r.slice(0,1),s,u)),h},out:(r,s,u)=>t.out(r,s,u)}},$3=e=>{const t=F0(e);return{select:r=>{let{id:s,selected:u,children:h,...l}=r;return s=vn(s),h.has(s)?u:t.select({id:s,selected:u,children:h,...l})},in:t.in,out:t.out}},U3=e=>{const t=RA(e);return{select:r=>{let{id:s,selected:u,children:h,...l}=r;return s=vn(s),h.has(s)?u:t.select({id:s,selected:u,children:h,...l})},in:t.in,out:t.out}},q3=e=>{const t={select:n=>{let{id:r,value:s,selected:u,children:h,parents:l}=n;r=vn(r);const v=new Map(u),_=[r];for(;_.length;){const C=_.shift();u.set(C,s?"on":"off"),h.has(C)&&_.push(...h.get(C))}let S=l.get(r);for(;S;){const C=h.get(S),k=C.every(O=>u.get(O)==="on"),D=C.every(O=>!u.has(O)||u.get(O)==="off");u.set(S,k?"on":D?"off":"indeterminate"),S=l.get(S)}return e&&!s&&Array.from(u.entries()).reduce((k,D)=>{let[O,R]=D;return R==="on"&&k.push(O),k},[]).length===0?v:u},in:(n,r,s)=>{let u=new Map;for(const h of n||[])u=t.select({id:h,value:!0,selected:new Map(u),children:r,parents:s});return u},out:(n,r)=>{const s=[];for(const[u,h]of n.entries())h==="on"&&!r.has(u)&&s.push(u);return s}};return t},Ef=Symbol.for("vuetify:nested"),OA={id:Ut(),root:{register:()=>null,unregister:()=>null,parents:lt(new Map),children:lt(new Map),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:lt(!1),selectable:lt(!1),opened:lt(new Set),activated:lt(new Set),selected:lt(new Map),selectedValues:lt([])}},j3=Xe({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function],selectStrategy:[String,Function],openStrategy:[String,Object],opened:Array,activated:Array,selected:Array,mandatory:Boolean},"nested"),H3=e=>{let t=!1;const n=lt(new Map),r=lt(new Map),s=xn(e,"opened",e.opened,D=>new Set(D),D=>[...D.values()]),u=Q(()=>{if(typeof e.activeStrategy=="object")return e.activeStrategy;switch(e.activeStrategy){case"leaf":return F3(e.mandatory);case"single-leaf":return B3(e.mandatory);case"independent":return z0(e.mandatory);case"single-independent":default:return MA(e.mandatory)}}),h=Q(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single-leaf":return U3(e.mandatory);case"leaf":return $3(e.mandatory);case"independent":return F0(e.mandatory);case"single-independent":return RA(e.mandatory);case"classic":default:return q3(e.mandatory)}}),l=Q(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return N3;case"single":return V3;case"multiple":default:return LA}}),v=xn(e,"activated",e.activated,D=>u.value.in(D,n.value,r.value),D=>u.value.out(D,n.value,r.value)),_=xn(e,"selected",e.selected,D=>h.value.in(D,n.value,r.value),D=>h.value.out(D,n.value,r.value));br(()=>{t=!0});function S(D){const O=[];let R=D;for(;R!=null;)O.unshift(R),R=r.value.get(R);return O}const C=ni("nested"),k={id:Ut(),root:{opened:s,activatable:Ct(e,"activatable"),selectable:Ct(e,"selectable"),activated:v,selected:_,selectedValues:Q(()=>{const D=[];for(const[O,R]of _.value.entries())R==="on"&&D.push(O);return D}),register:(D,O,R)=>{O&&D!==O&&r.value.set(D,O),R&&n.value.set(D,[]),O!=null&&n.value.set(O,[...n.value.get(O)||[],D])},unregister:D=>{if(t)return;n.value.delete(D);const O=r.value.get(D);if(O){const R=n.value.get(O)??[];n.value.set(O,R.filter(F=>F!==D))}r.value.delete(D),s.value.delete(D)},open:(D,O,R)=>{C.emit("click:open",{id:D,value:O,path:S(D),event:R});const F=l.value.open({id:D,value:O,opened:new Set(s.value),children:n.value,parents:r.value,event:R});F&&(s.value=F)},openOnSelect:(D,O,R)=>{const F=l.value.select({id:D,value:O,selected:new Map(_.value),opened:new Set(s.value),children:n.value,parents:r.value,event:R});F&&(s.value=F)},select:(D,O,R)=>{C.emit("click:select",{id:D,value:O,path:S(D),event:R});const F=h.value.select({id:D,value:O,selected:new Map(_.value),children:n.value,parents:r.value,event:R});F&&(_.value=F),k.root.openOnSelect(D,O,R)},activate:(D,O,R)=>{if(!e.activatable)return k.root.select(D,!0,R);C.emit("click:activate",{id:D,value:O,path:S(D),event:R});const F=u.value.activate({id:D,value:O,activated:new Set(v.value),children:n.value,parents:r.value,event:R});F&&(v.value=F)},children:n,parents:r}};return bn(Ef,k),k.root},zA=(e,t)=>{const n=yt(Ef,OA),r=Symbol(Fa()),s=Q(()=>e.value!==void 0?e.value:r),u={...n,id:s,open:(h,l)=>n.root.open(s.value,h,l),openOnSelect:(h,l)=>n.root.openOnSelect(s.value,h,l),isOpen:Q(()=>n.root.opened.value.has(s.value)),parent:Q(()=>n.root.parents.value.get(s.value)),activate:(h,l)=>n.root.activate(s.value,h,l),isActivated:Q(()=>n.root.activated.value.has(vn(s.value))),select:(h,l)=>n.root.select(s.value,h,l),isSelected:Q(()=>n.root.selected.value.get(vn(s.value))==="on"),isIndeterminate:Q(()=>n.root.selected.value.get(s.value)==="indeterminate"),isLeaf:Q(()=>!n.root.children.value.get(s.value)),isGroupActivator:n.isGroupActivator};return!n.isGroupActivator&&n.root.register(s.value,n.id.value,t),br(()=>{!n.isGroupActivator&&n.root.unregister(s.value)}),t&&bn(Ef,u),u},G3=()=>{const e=yt(Ef,OA);bn(Ef,{...e,isGroupActivator:!0})};function Kf(){const e=Ut(!1);return Oa(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:Q(()=>e.value?void 0:{transition:"none !important"}),isBooted:Vf(e)}}const W3=Td({name:"VListGroupActivator",setup(e,t){let{slots:n}=t;return G3(),()=>{var r;return(r=n.default)==null?void 0:r.call(n)}}}),FA=Xe({activeColor:String,baseColor:String,color:String,collapseIcon:{type:Rn,default:"$collapse"},expandIcon:{type:Rn,default:"$expand"},prependIcon:Rn,appendIcon:Rn,fluid:Boolean,subgroup:Boolean,title:String,value:null,...pn(),...cr()},"VListGroup"),Ns=At()({name:"VListGroup",props:FA(),setup(e,t){let{slots:n}=t;const{isOpen:r,open:s,id:u}=zA(Ct(e,"value"),!0),h=Q(()=>`v-list-group--id-${String(u.value)}`),l=DA(),{isBooted:v}=Kf();function _(D){s(!r.value,D)}const S=Q(()=>({onClick:_,class:"v-list-group__header",id:h.value})),C=Q(()=>r.value?e.collapseIcon:e.expandIcon),k=Q(()=>({VListItem:{active:r.value,activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&C.value,appendIcon:e.appendIcon||!e.subgroup&&C.value,title:e.title,value:e.value}}));return zt(()=>E(e.tag,{class:["v-list-group",{"v-list-group--prepend":l==null?void 0:l.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":r.value},e.class],style:e.style},{default:()=>[n.activator&&E(Qn,{defaults:k.value},{default:()=>[E(W3,null,{default:()=>[n.activator({props:S.value,isOpen:r.value})]})]}),E(hs,{transition:{component:lA},disabled:!v.value},{default:()=>{var D;return[gi(E("div",{class:"v-list-group__items",role:"group","aria-labelledby":h.value},[(D=n.default)==null?void 0:D.call(n)]),[[hl,r.value]])]}})]})),{isOpen:r}}}),Y3=Xe({...za(FA({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),bb=At()({name:"VTreeviewGroup",props:Y3(),setup(e,t){let{slots:n}=t;const r=lt(),s=Q(()=>{var h;return(h=r.value)!=null&&h.isOpen?e.collapseIcon:e.expandIcon}),u=Q(()=>{var h;return{VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,active:(h=r.value)==null?void 0:h.isOpen,toggleIcon:s.value}}});return zt(()=>{const h=Ns.filterProps(e);return E(Ns,wt(h,{ref:r,class:["v-treeview-group",e.class],subgroup:!0}),{...n,activator:n.activator?l=>E(rn,null,[E(Qn,{defaults:u.value},{default:()=>{var v;return[(v=n.activator)==null?void 0:v.call(n,l)]}})]):void 0})}),{}}}),Z3=cc("v-list-item-subtitle"),ja=cc("v-list-item-title"),BA=Xe({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:Rn,baseColor:String,disabled:Boolean,lines:String,link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:Rn,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:[String,Number],title:[String,Number],value:null,onClick:Ma(),onClickOnce:Ma(),...Ws(),...pn(),...Ba(),...To(),...Ss(),...Wi(),...tv(),...cr(),...Tr(),...Eo({variant:"text"})},"VListItem"),kr=At()({name:"VListItem",directives:{Ripple:Hf},props:BA(),emits:{click:e=>!0},setup(e,t){let{attrs:n,slots:r,emit:s}=t;const u=jf(e,n),h=Q(()=>e.value===void 0?u.href.value:e.value),{activate:l,isActivated:v,select:_,isSelected:S,isIndeterminate:C,isGroupActivator:k,root:D,parent:O,openOnSelect:R}=zA(h,!1),F=DA(),N=Q(()=>{var Ze;return e.active!==!1&&(e.active||((Ze=u.isActive)==null?void 0:Ze.value)||(D.activatable.value?v.value:S.value))}),j=Q(()=>e.link!==!1&&u.isLink.value),X=Q(()=>!e.disabled&&e.link!==!1&&(e.link||u.isClickable.value||!!F&&(D.selectable.value||D.activatable.value||e.value!=null))),ee=Q(()=>e.rounded||e.nav),le=Q(()=>e.color??e.activeColor),ie=Q(()=>({color:N.value?le.value??e.baseColor:e.baseColor,variant:e.variant}));ut(()=>{var Ze;return(Ze=u.isActive)==null?void 0:Ze.value},Ze=>{Ze&&O.value!=null&&D.open(O.value,!0),Ze&&R(Ze)},{immediate:!0});const{themeClasses:se}=Hr(e),{borderClasses:H}=Co(e),{colorClasses:Z,colorStyles:ne,variantClasses:_e}=Dd(ie),{densityClasses:te}=ks(e),{dimensionStyles:Se}=Ao(e),{elevationClasses:me}=Ys(e),{roundedClasses:Ve}=sa(ee),Ge=Q(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),$e=Q(()=>({isActive:N.value,select:_,isSelected:S.value,isIndeterminate:C.value}));function ke(Ze){var Je;s("click",Ze),!(k||!X.value)&&((Je=u.navigate)==null||Je.call(u,Ze),D.activatable.value?l(!v.value,Ze):(D.selectable.value||e.value!=null)&&_(!S.value,Ze))}function Pe(Ze){(Ze.key==="Enter"||Ze.key===" ")&&(Ze.preventDefault(),ke(Ze))}return zt(()=>{const Ze=j.value?"a":e.tag,Je=r.title||e.title!=null,Ne=r.subtitle||e.subtitle!=null,tt=!!(e.appendAvatar||e.appendIcon),_t=!!(tt||r.append),kt=!!(e.prependAvatar||e.prependIcon),St=!!(kt||r.prepend);return F==null||F.updateHasPrepend(St),e.activeColor&&EO("active-color",["color","base-color"]),gi(E(Ze,{class:["v-list-item",{"v-list-item--active":N.value,"v-list-item--disabled":e.disabled,"v-list-item--link":X.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!St&&(F==null?void 0:F.hasPrepend.value),"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&N.value},se.value,H.value,Z.value,te.value,me.value,Ge.value,Ve.value,_e.value,e.class],style:[ne.value,Se.value,e.style],href:u.href.value,tabindex:X.value?F?-2:0:void 0,onClick:ke,onKeydown:X.value&&!j.value&&Pe},{default:()=>{var Fe;return[Pd(X.value||N.value,"v-list-item"),St&&E("div",{key:"prepend",class:"v-list-item__prepend"},[r.prepend?E(Qn,{key:"prepend-defaults",disabled:!kt,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var at;return[(at=r.prepend)==null?void 0:at.call(r,$e.value)]}}):E(rn,null,[e.prependAvatar&&E(ac,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&E(pr,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),E("div",{class:"v-list-item__spacer"},null)]),E("div",{class:"v-list-item__content","data-no-activator":""},[Je&&E(ja,{key:"title"},{default:()=>{var at;return[((at=r.title)==null?void 0:at.call(r,{title:e.title}))??e.title]}}),Ne&&E(Z3,{key:"subtitle"},{default:()=>{var at;return[((at=r.subtitle)==null?void 0:at.call(r,{subtitle:e.subtitle}))??e.subtitle]}}),(Fe=r.default)==null?void 0:Fe.call(r,$e.value)]),_t&&E("div",{key:"append",class:"v-list-item__append"},[r.append?E(Qn,{key:"append-defaults",disabled:!tt,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var at;return[(at=r.append)==null?void 0:at.call(r,$e.value)]}}):E(rn,null,[e.appendIcon&&E(pr,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&E(ac,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),E("div",{class:"v-list-item__spacer"},null)])]}}),[[So("ripple"),X.value&&e.ripple]])}),{isGroupActivator:k,isSelected:S,list:F,select:_}}}),K3=Xe({color:String,inset:Boolean,sticky:Boolean,title:String,...pn(),...cr()},"VListSubheader"),X3=At()({name:"VListSubheader",props:K3(),setup(e,t){let{slots:n}=t;const{textColorClasses:r,textColorStyles:s}=xa(Ct(e,"color"));return zt(()=>{const u=!!(n.default||e.title);return E(e.tag,{class:["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},r.value,e.class],style:[{textColorStyles:s},e.style]},{default:()=>{var h;return[u&&E("div",{class:"v-list-subheader__text"},[((h=n.default)==null?void 0:h.call(n))??e.title])]}})}),{}}}),J3=Xe({items:Array,returnObject:Boolean},"VListChildren"),VA=At()({name:"VListChildren",props:J3(),setup(e,t){let{slots:n}=t;return PA(),()=>{var r,s;return((r=n.default)==null?void 0:r.call(n))??((s=e.items)==null?void 0:s.map(u=>{var k,D;let{children:h,props:l,type:v,raw:_}=u;if(v==="divider")return((k=n.divider)==null?void 0:k.call(n,{props:l}))??E(yr,l,null);if(v==="subheader")return((D=n.subheader)==null?void 0:D.call(n,{props:l}))??E(X3,l,null);const S={subtitle:n.subtitle?O=>{var R;return(R=n.subtitle)==null?void 0:R.call(n,{...O,item:_})}:void 0,prepend:n.prepend?O=>{var R;return(R=n.prepend)==null?void 0:R.call(n,{...O,item:_})}:void 0,append:n.append?O=>{var R;return(R=n.append)==null?void 0:R.call(n,{...O,item:_})}:void 0,title:n.title?O=>{var R;return(R=n.title)==null?void 0:R.call(n,{...O,item:_})}:void 0},C=Ns.filterProps(l);return h?E(Ns,wt({value:l==null?void 0:l.value},C),{activator:O=>{let{props:R}=O;const F={...l,...R,value:e.returnObject?_:l.value};return n.header?n.header({props:F}):E(kr,F,S)},default:()=>E(VA,{items:h},n)}):n.item?n.item({props:l}):E(kr,wt(l,{value:e.returnObject?_:l.value}),S)}))}}}),NA=Xe({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean,valueComparator:{type:Function,default:fl}},"list-items");function xb(e,t){const n=ia(t,e.itemTitle,t),r=ia(t,e.itemValue,n),s=ia(t,e.itemChildren),u=e.itemProps===!0?typeof t=="object"&&t!=null&&!Array.isArray(t)?"children"in t?za(t,["children"]):t:void 0:ia(t,e.itemProps),h={title:n,value:r,...u};return{title:String(h.title??""),value:h.value,props:h,children:Array.isArray(s)?$A(e,s):void 0,raw:t}}function $A(e,t){const n=[];for(const r of t)n.push(xb(e,r));return n}function UA(e){const t=Q(()=>$A(e,e.items)),n=Q(()=>t.value.some(u=>u.value===null));function r(u){return n.value||(u=u.filter(h=>h!==null)),u.map(h=>e.returnObject&&typeof h=="string"?xb(e,h):t.value.find(l=>e.valueComparator(h,l.value))||xb(e,h))}function s(u){return e.returnObject?u.map(h=>{let{raw:l}=h;return l}):u.map(h=>{let{value:l}=h;return l})}return{items:t,transformIn:r,transformOut:s}}function Q3(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function e5(e,t){const n=ia(t,e.itemType,"item"),r=Q3(t)?t:ia(t,e.itemTitle),s=ia(t,e.itemValue,void 0),u=ia(t,e.itemChildren),h=e.itemProps===!0?za(t,["children"]):ia(t,e.itemProps),l={title:r,value:s,...h};return{type:n,title:l.title,value:l.value,props:l,children:n==="item"&&u?qA(e,u):void 0,raw:t}}function qA(e,t){const n=[];for(const r of t)n.push(e5(e,r));return n}function jA(e){return{items:Q(()=>qA(e,e.items))}}const HA=Xe({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,expandIcon:String,collapseIcon:String,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,...j3({selectStrategy:"single-leaf",openStrategy:"list"}),...Ws(),...pn(),...Ba(),...To(),...Ss(),itemType:{type:String,default:"type"},...NA(),...Wi(),...cr(),...Tr(),...Eo({variant:"text"})},"VList"),If=At()({name:"VList",props:HA(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n}=t;const{items:r}=jA(e),{themeClasses:s}=Hr(e),{backgroundColorClasses:u,backgroundColorStyles:h}=Li(Ct(e,"bgColor")),{borderClasses:l}=Co(e),{densityClasses:v}=ks(e),{dimensionStyles:_}=Ao(e),{elevationClasses:S}=Ys(e),{roundedClasses:C}=sa(e),{children:k,open:D,parents:O,select:R}=H3(e),F=Q(()=>e.lines?`v-list--${e.lines}-line`:void 0),N=Ct(e,"activeColor"),j=Ct(e,"baseColor"),X=Ct(e,"color");PA(),Ka({VListGroup:{activeColor:N,baseColor:j,color:X,expandIcon:Ct(e,"expandIcon"),collapseIcon:Ct(e,"collapseIcon")},VListItem:{activeClass:Ct(e,"activeClass"),activeColor:N,baseColor:j,color:X,density:Ct(e,"density"),disabled:Ct(e,"disabled"),lines:Ct(e,"lines"),nav:Ct(e,"nav"),slim:Ct(e,"slim"),variant:Ct(e,"variant")}});const ee=Ut(!1),le=lt();function ie(te){ee.value=!0}function se(te){ee.value=!1}function H(te){var Se;!ee.value&&!(te.relatedTarget&&((Se=le.value)!=null&&Se.contains(te.relatedTarget)))&&_e()}function Z(te){if(le.value){if(te.key==="ArrowDown")_e("next");else if(te.key==="ArrowUp")_e("prev");else if(te.key==="Home")_e("first");else if(te.key==="End")_e("last");else return;te.preventDefault()}}function ne(te){ee.value=!0}function _e(te){if(le.value)return ug(le.value,te)}return zt(()=>E(e.tag,{ref:le,class:["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},s.value,u.value,l.value,v.value,S.value,F.value,C.value,e.class],style:[h.value,_.value,e.style],tabindex:e.disabled||ee.value?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:ie,onFocusout:se,onFocus:H,onKeydown:Z,onMousedown:ne},{default:()=>[E(VA,{items:r.value,returnObject:e.returnObject},n)]})),{open:D,select:R,focus:_e,children:k,parents:O}}}),t5=Xe({start:Boolean,end:Boolean,...pn(),...cr()},"VListItemAction"),n5=At()({name:"VListItemAction",props:t5(),setup(e,t){let{slots:n}=t;return zt(()=>E(e.tag,{class:["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class],style:e.style},n)),{}}}),GA=Symbol.for("vuetify:v-treeview"),r5=Xe({...pn(),...Qz({fullHeight:!0}),...Tr()},"VApp"),i5=At()({name:"VApp",props:r5(),setup(e,t){let{slots:n}=t;const r=Hr(e),{layoutClasses:s,getLayoutItem:u,items:h,layoutRef:l}=nF(e),{rtlClasses:v}=ws();return zt(()=>{var _;return E("div",{ref:l,class:["v-application",r.themeClasses.value,s.value,v.value,e.class],style:[e.style]},[E("div",{class:"v-application__wrap"},[(_=n.default)==null?void 0:_.call(n)])])}),{getLayoutItem:u,items:h,theme:r}}}),a5=Xe({text:String,...pn(),...cr()},"VToolbarTitle"),s5=At()({name:"VToolbarTitle",props:a5(),setup(e,t){let{slots:n}=t;return zt(()=>{const r=!!(n.default||n.text||e.text);return E(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var s;return[r&&E("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():e.text,(s=n.default)==null?void 0:s.call(n)])]}})}),{}}}),o5=[null,"prominent","default","comfortable","compact"],WA=Xe({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>o5.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Ws(),...pn(),...Ss(),...Wi(),...cr({tag:"header"}),...Tr()},"VToolbar"),wb=At()({name:"VToolbar",props:WA(),setup(e,t){var D;let{slots:n}=t;const{backgroundColorClasses:r,backgroundColorStyles:s}=Li(Ct(e,"color")),{borderClasses:u}=Co(e),{elevationClasses:h}=Ys(e),{roundedClasses:l}=sa(e),{themeClasses:v}=Hr(e),{rtlClasses:_}=ws(),S=Ut(!!(e.extended||(D=n.extension)!=null&&D.call(n))),C=Q(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),k=Q(()=>S.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return Ka({VBtn:{variant:"text"}}),zt(()=>{var N;const O=!!(e.title||n.title),R=!!(n.image||e.image),F=(N=n.extension)==null?void 0:N.call(n);return S.value=!!(e.extended||F),E(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},r.value,u.value,h.value,l.value,v.value,_.value,e.class],style:[s.value,e.style]},{default:()=>[R&&E("div",{key:"image",class:"v-toolbar__image"},[n.image?E(Qn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},n.image):E(Gf,{key:"image-img",cover:!0,src:e.image},null)]),E(Qn,{defaults:{VTabs:{height:Jt(C.value)}}},{default:()=>{var j,X,ee;return[E("div",{class:"v-toolbar__content",style:{height:Jt(C.value)}},[n.prepend&&E("div",{class:"v-toolbar__prepend"},[(j=n.prepend)==null?void 0:j.call(n)]),O&&E(s5,{key:"title",text:e.title},{text:n.title}),(X=n.default)==null?void 0:X.call(n),n.append&&E("div",{class:"v-toolbar__append"},[(ee=n.append)==null?void 0:ee.call(n)])])]}}),E(Qn,{defaults:{VTabs:{height:Jt(k.value)}}},{default:()=>[E(lA,null,{default:()=>[S.value&&E("div",{class:"v-toolbar__extension",style:{height:Jt(k.value)}},[F])]})]})]})}),{contentHeight:C,extensionHeight:k}}}),l5=Xe({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function c5(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:n}=t;let r=0;const s=lt(null),u=Ut(0),h=Ut(0),l=Ut(0),v=Ut(!1),_=Ut(!1),S=Q(()=>Number(e.scrollThreshold)),C=Q(()=>gs((S.value-u.value)/S.value||0)),k=()=>{const D=s.value;!D||n&&!n.value||(r=u.value,u.value="window"in D?D.pageYOffset:D.scrollTop,_.value=u.value<r,l.value=Math.abs(u.value-S.value))};return ut(_,()=>{h.value=h.value||u.value}),ut(v,()=>{h.value=0}),Oa(()=>{ut(()=>e.scrollTarget,D=>{var R;const O=D?document.querySelector(D):window;O&&O!==s.value&&((R=s.value)==null||R.removeEventListener("scroll",k),s.value=O,s.value.addEventListener("scroll",k,{passive:!0}))},{immediate:!0})}),br(()=>{var D;(D=s.value)==null||D.removeEventListener("scroll",k)}),n&&ut(n,k,{immediate:!0}),{scrollThreshold:S,currentScroll:u,currentThreshold:l,isScrollActive:v,scrollRatio:C,isScrollingUp:_,savedScroll:h}}const u5=Xe({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...WA(),...Yg(),...l5(),height:{type:[Number,String],default:64}},"VAppBar"),d5=At()({name:"VAppBar",props:u5(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=lt(),s=xn(e,"modelValue"),u=Q(()=>{var j;const N=new Set(((j=e.scrollBehavior)==null?void 0:j.split(" "))??[]);return{hide:N.has("hide"),inverted:N.has("inverted"),collapse:N.has("collapse"),elevate:N.has("elevate"),fadeImage:N.has("fade-image")}}),h=Q(()=>{const N=u.value;return N.hide||N.inverted||N.collapse||N.elevate||N.fadeImage||!s.value}),{currentScroll:l,scrollThreshold:v,isScrollingUp:_,scrollRatio:S}=c5(e,{canScroll:h}),C=Q(()=>e.collapse||u.value.collapse&&(u.value.inverted?S.value>0:S.value===0)),k=Q(()=>e.flat||u.value.elevate&&(u.value.inverted?l.value>0:l.value===0)),D=Q(()=>u.value.fadeImage?u.value.inverted?1-S.value:S.value:void 0),O=Q(()=>{var X,ee;if(u.value.hide&&u.value.inverted)return 0;const N=((X=r.value)==null?void 0:X.contentHeight)??0,j=((ee=r.value)==null?void 0:ee.extensionHeight)??0;return N+j});ms(Q(()=>!!e.scrollBehavior),()=>{Ui(()=>{u.value.hide?u.value.inverted?s.value=l.value>v.value:s.value=_.value||l.value<v.value:s.value=!0})});const{ssrBootStyles:R}=Kf(),{layoutItemStyles:F}=Zg({id:e.name,order:Q(()=>parseInt(e.order,10)),position:Ct(e,"location"),layoutSize:O,elementSize:Ut(void 0),active:s,absolute:Ct(e,"absolute")});return zt(()=>{const N=wb.filterProps(e);return E(wb,wt({ref:r,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...F.value,"--v-toolbar-image-opacity":D.value,height:void 0,...R.value},e.style]},N,{collapse:C.value,flat:k.value}),n)}),{}}}),h5=Xe({...nv({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),f5=At()({name:"VAppBarNavIcon",props:h5(),setup(e,t){let{slots:n}=t;return zt(()=>E(nn,wt(e,{class:["v-app-bar-nav-icon"]}),n)),{}}}),p5=cc("v-alert-title"),m5=["success","info","warning","error"],g5=Xe({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:Rn,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>m5.includes(e)},...pn(),...Ba(),...To(),...Ss(),...Ed(),...Kg(),...Wi(),...cr(),...Tr(),...Eo({variant:"flat"})},"VAlert"),tl=At()({name:"VAlert",props:g5(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:r}=t;const s=xn(e,"modelValue"),u=Q(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),h=Q(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:l}=Hr(e),{colorClasses:v,colorStyles:_,variantClasses:S}=Dd(h),{densityClasses:C}=ks(e),{dimensionStyles:k}=Ao(e),{elevationClasses:D}=Ys(e),{locationStyles:O}=Id(e),{positionClasses:R}=Xg(e),{roundedClasses:F}=sa(e),{textColorClasses:N,textColorStyles:j}=xa(Ct(e,"borderColor")),{t:X}=qi(),ee=Q(()=>({"aria-label":X(e.closeLabel),onClick(le){s.value=!1,n("click:close",le)}}));return()=>{const le=!!(r.prepend||u.value),ie=!!(r.title||e.title),se=!!(r.close||e.closable);return s.value&&E(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},l.value,v.value,C.value,D.value,R.value,F.value,S.value,e.class],style:[_.value,k.value,O.value,e.style],role:"alert"},{default:()=>{var H,Z;return[Pd(!1,"v-alert"),e.border&&E("div",{key:"border",class:["v-alert__border",N.value],style:j.value},null),le&&E("div",{key:"prepend",class:"v-alert__prepend"},[r.prepend?E(Qn,{key:"prepend-defaults",disabled:!u.value,defaults:{VIcon:{density:e.density,icon:u.value,size:e.prominent?44:28}}},r.prepend):E(pr,{key:"prepend-icon",density:e.density,icon:u.value,size:e.prominent?44:28},null)]),E("div",{class:"v-alert__content"},[ie&&E(p5,{key:"title"},{default:()=>{var ne;return[((ne=r.title)==null?void 0:ne.call(r))??e.title]}}),((H=r.text)==null?void 0:H.call(r))??e.text,(Z=r.default)==null?void 0:Z.call(r)]),r.append&&E("div",{key:"append",class:"v-alert__append"},[r.append()]),se&&E("div",{key:"close",class:"v-alert__close"},[r.close?E(Qn,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var ne;return[(ne=r.close)==null?void 0:ne.call(r,{props:ee.value})]}}):E(nn,wt({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},ee.value),null)])]}})}}}),YA=Symbol.for("vuetify:selection-control-group"),B0=Xe({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:Rn,trueIcon:Rn,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:fl},...pn(),...Ba(),...Tr()},"SelectionControlGroup"),v5=Xe({...B0({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),y5=At()({name:"VSelectionControlGroup",props:v5(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=xn(e,"modelValue"),s=Fa(),u=Q(()=>e.id||`v-selection-control-group-${s}`),h=Q(()=>e.name||u.value),l=new Set;return bn(YA,{modelValue:r,forceUpdate:()=>{l.forEach(v=>v())},onForceUpdate:v=>{l.add(v),Ra(()=>{l.delete(v)})}}),Ka({[e.defaultsTarget]:{color:Ct(e,"color"),disabled:Ct(e,"disabled"),density:Ct(e,"density"),error:Ct(e,"error"),inline:Ct(e,"inline"),modelValue:r,multiple:Q(()=>!!e.multiple||e.multiple==null&&Array.isArray(r.value)),name:h,falseIcon:Ct(e,"falseIcon"),trueIcon:Ct(e,"trueIcon"),readonly:Ct(e,"readonly"),ripple:Ct(e,"ripple"),type:Ct(e,"type"),valueComparator:Ct(e,"valueComparator")}}),zt(()=>{var v;return E("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class],style:e.style,role:e.type==="radio"?"radiogroup":void 0},[(v=n.default)==null?void 0:v.call(n)])}),{}}}),V0=Xe({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...pn(),...B0()},"VSelectionControl");function _5(e){const t=yt(YA,void 0),{densityClasses:n}=ks(e),r=xn(e,"modelValue"),s=Q(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),u=Q(()=>e.falseValue!==void 0?e.falseValue:!1),h=Q(()=>!!e.multiple||e.multiple==null&&Array.isArray(r.value)),l=Q({get(){const D=t?t.modelValue.value:r.value;return h.value?Mi(D).some(O=>e.valueComparator(O,s.value)):e.valueComparator(D,s.value)},set(D){if(e.readonly)return;const O=D?s.value:u.value;let R=O;h.value&&(R=D?[...Mi(r.value),O]:Mi(r.value).filter(F=>!e.valueComparator(F,s.value))),t?t.modelValue.value=R:r.value=R}}),{textColorClasses:v,textColorStyles:_}=xa(Q(()=>{if(!(e.error||e.disabled))return l.value?e.color:e.baseColor})),{backgroundColorClasses:S,backgroundColorStyles:C}=Li(Q(()=>l.value&&!e.error&&!e.disabled?e.color:e.baseColor)),k=Q(()=>l.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:s,falseValue:u,model:l,textColorClasses:v,textColorStyles:_,backgroundColorClasses:S,backgroundColorStyles:C,icon:k}}const xg=At()({name:"VSelectionControl",directives:{Ripple:Hf},inheritAttrs:!1,props:V0(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const{group:s,densityClasses:u,icon:h,model:l,textColorClasses:v,textColorStyles:_,backgroundColorClasses:S,backgroundColorStyles:C,trueValue:k}=_5(e),D=Fa(),O=Ut(!1),R=Ut(!1),F=lt(),N=Q(()=>e.id||`input-${D}`),j=Q(()=>!e.disabled&&!e.readonly);s==null||s.onForceUpdate(()=>{F.value&&(F.value.checked=l.value)});function X(se){j.value&&(O.value=!0,yd(se.target,":focus-visible")!==!1&&(R.value=!0))}function ee(){O.value=!1,R.value=!1}function le(se){se.stopPropagation()}function ie(se){j.value&&(e.readonly&&s&&ar(()=>s.forceUpdate()),l.value=se.target.checked)}return zt(()=>{var _e,te;const se=r.label?r.label({label:e.label,props:{for:N.value}}):e.label,[H,Z]=Cd(n),ne=E("input",wt({ref:F,checked:l.value,disabled:!!e.disabled,id:N.value,onBlur:ee,onFocus:X,onInput:ie,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:k.value,name:e.name,"aria-checked":e.type==="checkbox"?l.value:void 0},Z),null);return E("div",wt({class:["v-selection-control",{"v-selection-control--dirty":l.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":O.value,"v-selection-control--focus-visible":R.value,"v-selection-control--inline":e.inline},u.value,e.class]},H,{style:e.style}),[E("div",{class:["v-selection-control__wrapper",v.value],style:_.value},[(_e=r.default)==null?void 0:_e.call(r,{backgroundColorClasses:S,backgroundColorStyles:C}),gi(E("div",{class:["v-selection-control__input"]},[((te=r.input)==null?void 0:te.call(r,{model:l,textColorClasses:v,textColorStyles:_,backgroundColorClasses:S,backgroundColorStyles:C,inputNode:ne,icon:h.value,props:{onFocus:X,onBlur:ee,id:N.value}}))??E(rn,null,[h.value&&E(pr,{key:"icon",icon:h.value},null),ne])]),[[So("ripple"),e.ripple&&[!e.disabled&&!e.readonly,null,["center","circle"]]]])]),se&&E(M0,{for:N.value,onClick:le},{default:()=>[se]})])}),{isFocused:O,input:F}}}),b5=Xe({indeterminate:Boolean,indeterminateIcon:{type:Rn,default:"$checkboxIndeterminate"},...V0({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),Ld=At()({name:"VCheckboxBtn",props:b5(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const r=xn(e,"indeterminate"),s=xn(e,"modelValue");function u(v){r.value&&(r.value=!1)}const h=Q(()=>r.value?e.indeterminateIcon:e.falseIcon),l=Q(()=>r.value?e.indeterminateIcon:e.trueIcon);return zt(()=>{const v=za(xg.filterProps(e),["modelValue"]);return E(xg,wt(v,{modelValue:s.value,"onUpdate:modelValue":[_=>s.value=_,u],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:h.value,trueIcon:l.value,"aria-checked":r.value?"mixed":void 0}),n)}),{}}}),x5=Xe({active:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...pn(),...vl({transition:{component:oA}})},"VCounter"),N0=At()({name:"VCounter",functional:!0,props:x5(),setup(e,t){let{slots:n}=t;const r=Q(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return zt(()=>E(hs,{transition:e.transition},{default:()=>[gi(E("div",{class:["v-counter",e.class],style:e.style},[n.default?n.default({counter:r.value,max:e.max,value:e.value}):r.value]),[[hl,e.active]])]})),{}}}),w5=["color","file","time","date","datetime-local","week","month"],$0=Xe({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...Md(),...Yf()},"VTextField"),Di=At()({name:"VTextField",directives:{Intersect:P0},inheritAttrs:!1,props:$0(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:s}=t;const u=xn(e,"modelValue"),{isFocused:h,focus:l,blur:v}=Wf(e),_=Q(()=>typeof e.counterValue=="function"?e.counterValue(u.value):typeof e.counterValue=="number"?e.counterValue:(u.value??"").toString().length),S=Q(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),C=Q(()=>["plain","underlined"].includes(e.variant));function k(ie,se){var H,Z;!e.autofocus||!ie||(Z=(H=se[0].target)==null?void 0:H.focus)==null||Z.call(H)}const D=lt(),O=lt(),R=lt(),F=Q(()=>w5.includes(e.type)||e.persistentPlaceholder||h.value||e.active);function N(){var ie;R.value!==document.activeElement&&((ie=R.value)==null||ie.focus()),h.value||l()}function j(ie){r("mousedown:control",ie),ie.target!==R.value&&(N(),ie.preventDefault())}function X(ie){N(),r("click:control",ie)}function ee(ie){ie.stopPropagation(),N(),ar(()=>{u.value=null,g0(e["onClick:clear"],ie)})}function le(ie){var H;const se=ie.target;if(u.value=se.value,(H=e.modelModifiers)!=null&&H.trim&&["text","search","password","tel","url"].includes(e.type)){const Z=[se.selectionStart,se.selectionEnd];ar(()=>{se.selectionStart=Z[0],se.selectionEnd=Z[1]})}}return zt(()=>{const ie=!!(s.counter||e.counter!==!1&&e.counter!=null),se=!!(ie||s.details),[H,Z]=Cd(n),{modelValue:ne,..._e}=bo.filterProps(e),te=rv(e);return E(bo,wt({ref:D,modelValue:u.value,"onUpdate:modelValue":Se=>u.value=Se,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":C.value},e.class],style:e.style},H,_e,{centerAffix:!C.value,focused:h.value}),{...s,default:Se=>{let{id:me,isDisabled:Ve,isDirty:Ge,isReadonly:$e,isValid:ke}=Se;return E(Zf,wt({ref:O,onMousedown:j,onClick:X,"onClick:clear":ee,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},te,{id:me.value,active:F.value||Ge.value,dirty:Ge.value||e.dirty,disabled:Ve.value,focused:h.value,error:ke.value===!1}),{...s,default:Pe=>{let{props:{class:Ze,...Je}}=Pe;const Ne=gi(E("input",wt({ref:R,value:u.value,onInput:le,autofocus:e.autofocus,readonly:$e.value,disabled:Ve.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:N,onBlur:v},Je,Z),null),[[So("intersect"),{handler:k},null,{once:!0}]]);return E(rn,null,[e.prefix&&E("span",{class:"v-text-field__prefix"},[E("span",{class:"v-text-field__prefix__text"},[e.prefix])]),s.default?E("div",{class:Ze,"data-no-activator":""},[s.default(),Ne]):ll(Ne,{class:Ze}),e.suffix&&E("span",{class:"v-text-field__suffix"},[E("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:se?Se=>{var me;return E(rn,null,[(me=s.details)==null?void 0:me.call(s,Se),ie&&E(rn,null,[E("span",null,null),E(N0,{active:e.persistentCounter||h.value,value:_.value,max:S.value},s.counter)])])}:void 0})}),yl({},D,O,R)}}),S5=Xe({renderless:Boolean,...pn()},"VVirtualScrollItem"),k5=At()({name:"VVirtualScrollItem",inheritAttrs:!1,props:S5(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:s}=t;const{resizeRef:u,contentRect:h}=cl(void 0,"border");ut(()=>{var l;return(l=h.value)==null?void 0:l.height},l=>{l!=null&&r("update:height",l)}),zt(()=>{var l,v;return e.renderless?E(rn,null,[(l=s.default)==null?void 0:l.call(s,{itemRef:u})]):E("div",wt({ref:u,class:["v-virtual-scroll__item",e.class],style:e.style},n),[(v=s.default)==null?void 0:v.call(s)])})}}),C5=-1,T5=1,u_=100,A5=Xe({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function E5(e,t){const n=Ad(),r=Ut(0);Ui(()=>{r.value=parseFloat(e.itemHeight||0)});const s=Ut(0),u=Ut(Math.ceil((parseInt(e.height)||n.height.value)/(r.value||16))||1),h=Ut(0),l=Ut(0),v=lt(),_=lt();let S=0;const{resizeRef:C,contentRect:k}=cl();Ui(()=>{C.value=v.value});const D=Q(()=>{var Pe;return v.value===document.documentElement?n.height.value:((Pe=k.value)==null?void 0:Pe.height)||parseInt(e.height)||0}),O=Q(()=>!!(v.value&&_.value&&D.value&&r.value));let R=Array.from({length:t.value.length}),F=Array.from({length:t.value.length});const N=Ut(0);let j=-1;function X(Pe){return R[Pe]||r.value}const ee=dO(()=>{const Pe=performance.now();F[0]=0;const Ze=t.value.length;for(let Je=1;Je<=Ze-1;Je++)F[Je]=(F[Je-1]||0)+X(Je-1);N.value=Math.max(N.value,performance.now()-Pe)},N),le=ut(O,Pe=>{Pe&&(le(),S=_.value.offsetTop,ee.immediate(),Ve(),~j&&ar(()=>{Cr&&window.requestAnimationFrame(()=>{$e(j),j=-1})}))});Ra(()=>{ee.clear()});function ie(Pe,Ze){const Je=R[Pe],Ne=r.value;r.value=Ne?Math.min(r.value,Ze):Ze,(Je!==Ze||Ne!==r.value)&&(R[Pe]=Ze,ee())}function se(Pe){return Pe=gs(Pe,0,t.value.length-1),F[Pe]||0}function H(Pe){return I5(F,Pe)}let Z=0,ne=0,_e=0;ut(D,(Pe,Ze)=>{Ze&&(Ve(),Pe<Ze&&requestAnimationFrame(()=>{ne=0,Ve()}))});function te(){if(!v.value||!_.value)return;const Pe=v.value.scrollTop,Ze=performance.now();Ze-_e>500?(ne=Math.sign(Pe-Z),S=_.value.offsetTop):ne=Pe-Z,Z=Pe,_e=Ze,Ve()}function Se(){!v.value||!_.value||(ne=0,_e=0,Ve())}let me=-1;function Ve(){cancelAnimationFrame(me),me=requestAnimationFrame(Ge)}function Ge(){if(!v.value||!D.value)return;const Pe=Z-S,Ze=Math.sign(ne),Je=Math.max(0,Pe-u_),Ne=gs(H(Je),0,t.value.length),tt=Pe+D.value+u_,_t=gs(H(tt)+1,Ne+1,t.value.length);if((Ze!==C5||Ne<s.value)&&(Ze!==T5||_t>u.value)){const kt=se(s.value)-se(Ne),St=se(_t)-se(u.value);Math.max(kt,St)>u_?(s.value=Ne,u.value=_t):(Ne<=0&&(s.value=Ne),_t>=t.value.length&&(u.value=_t))}h.value=se(s.value),l.value=se(t.value.length)-se(u.value)}function $e(Pe){const Ze=se(Pe);!v.value||Pe&&!Ze?j=Pe:v.value.scrollTop=Ze}const ke=Q(()=>t.value.slice(s.value,u.value).map((Pe,Ze)=>({raw:Pe,index:Ze+s.value})));return ut(t,()=>{R=Array.from({length:t.value.length}),F=Array.from({length:t.value.length}),ee.immediate(),Ve()},{deep:!0}),{containerRef:v,markerRef:_,computedItems:ke,paddingTop:h,paddingBottom:l,scrollToIndex:$e,handleScroll:te,handleScrollend:Se,handleItemResize:ie}}function I5(e,t){let n=e.length-1,r=0,s=0,u=null,h=-1;if(e[n]<t)return n;for(;r<=n;)if(s=r+n>>1,u=e[s],u>t)n=s-1;else if(u<t)h=s,r=s+1;else return u===t?s:r;return h}const P5=Xe({items:{type:Array,default:()=>[]},renderless:Boolean,...A5(),...pn(),...To()},"VVirtualScroll"),ZA=At()({name:"VVirtualScroll",props:P5(),setup(e,t){let{slots:n}=t;const r=ni("VVirtualScroll"),{dimensionStyles:s}=Ao(e),{containerRef:u,markerRef:h,handleScroll:l,handleScrollend:v,handleItemResize:_,scrollToIndex:S,paddingTop:C,paddingBottom:k,computedItems:D}=E5(e,Ct(e,"items"));return ms(()=>e.renderless,()=>{function O(){var N,j;const F=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";u.value===document.documentElement?(document[F]("scroll",l,{passive:!0}),document[F]("scrollend",v)):((N=u.value)==null||N[F]("scroll",l,{passive:!0}),(j=u.value)==null||j[F]("scrollend",v))}Oa(()=>{u.value=_T(r.vnode.el,!0),O(!0)}),Ra(O)}),zt(()=>{const O=D.value.map(R=>E(k5,{key:R.index,renderless:e.renderless,"onUpdate:height":F=>_(R.index,F)},{default:F=>{var N;return(N=n.default)==null?void 0:N.call(n,{item:R.raw,index:R.index,...F})}}));return e.renderless?E(rn,null,[E("div",{ref:h,class:"v-virtual-scroll__spacer",style:{paddingTop:Jt(C.value)}},null),O,E("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:Jt(k.value)}},null)]):E("div",{ref:u,class:["v-virtual-scroll",e.class],onScrollPassive:l,onScrollend:v,style:[s.value,e.style]},[E("div",{ref:h,class:"v-virtual-scroll__container",style:{paddingTop:Jt(C.value),paddingBottom:Jt(k.value)}},[O])])}),{scrollToIndex:S}}});function KA(e,t){const n=Ut(!1);let r;function s(l){cancelAnimationFrame(r),n.value=!0,r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{n.value=!1})})}async function u(){await new Promise(l=>requestAnimationFrame(l)),await new Promise(l=>requestAnimationFrame(l)),await new Promise(l=>requestAnimationFrame(l)),await new Promise(l=>{if(n.value){const v=ut(n,()=>{v(),l()})}else l()})}async function h(l){var S,C;if(l.key==="Tab"&&((S=t.value)==null||S.focus()),!["PageDown","PageUp","Home","End"].includes(l.key))return;const v=(C=e.value)==null?void 0:C.$el;if(!v)return;(l.key==="Home"||l.key==="End")&&v.scrollTo({top:l.key==="Home"?0:v.scrollHeight,behavior:"smooth"}),await u();const _=v.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(l.key==="PageDown"||l.key==="Home"){const k=v.getBoundingClientRect().top;for(const D of _)if(D.getBoundingClientRect().top>=k){D.focus();break}}else{const k=v.getBoundingClientRect().bottom;for(const D of[..._].reverse())if(D.getBoundingClientRect().bottom<=k){D.focus();break}}}return{onListScroll:s,onListKeydown:h}}const XA=Xe({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Rn,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...NA({itemChildren:!1})},"Select"),D5=Xe({...XA(),...za($0({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...vl({transition:{component:I0}})},"VSelect"),Pf=At()({name:"VSelect",props:D5(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:r}=qi(),s=lt(),u=lt(),h=lt(),l=xn(e,"menu"),v=Q({get:()=>l.value,set:ke=>{var Pe;l.value&&!ke&&((Pe=u.value)!=null&&Pe.openChildren)||(l.value=ke)}}),{items:_,transformIn:S,transformOut:C}=UA(e),k=xn(e,"modelValue",[],ke=>S(ke===null?[null]:Mi(ke)),ke=>{const Pe=C(ke);return e.multiple?Pe:Pe[0]??null}),D=Q(()=>typeof e.counterValue=="function"?e.counterValue(k.value):typeof e.counterValue=="number"?e.counterValue:k.value.length),O=R0(),R=Q(()=>k.value.map(ke=>ke.value)),F=Ut(!1),N=Q(()=>v.value?e.closeText:e.openText);let j="",X;const ee=Q(()=>e.hideSelected?_.value.filter(ke=>!k.value.some(Pe=>Pe===ke)):_.value),le=Q(()=>e.hideNoData&&!ee.value.length||e.readonly||(O==null?void 0:O.isReadonly.value)),ie=Q(()=>{var ke;return{...e.menuProps,activatorProps:{...((ke=e.menuProps)==null?void 0:ke.activatorProps)||{},"aria-haspopup":"listbox"}}}),se=lt(),{onListScroll:H,onListKeydown:Z}=KA(se,s);function ne(ke){e.openOnClear&&(v.value=!0)}function _e(){le.value||(v.value=!v.value)}function te(ke){var tt,_t;if(!ke.key||e.readonly||O!=null&&O.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(ke.key)&&ke.preventDefault(),["Enter","ArrowDown"," "].includes(ke.key)&&(v.value=!0),["Escape","Tab"].includes(ke.key)&&(v.value=!1),ke.key==="Home"?(tt=se.value)==null||tt.focus("first"):ke.key==="End"&&((_t=se.value)==null||_t.focus("last"));const Pe=1e3;function Ze(kt){const St=kt.key.length===1,Fe=!kt.ctrlKey&&!kt.metaKey&&!kt.altKey;return St&&Fe}if(e.multiple||!Ze(ke))return;const Je=performance.now();Je-X>Pe&&(j=""),j+=ke.key.toLowerCase(),X=Je;const Ne=_.value.find(kt=>kt.title.toLowerCase().startsWith(j));Ne!==void 0&&(k.value=[Ne])}function Se(ke){let Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!ke.props.disabled)if(e.multiple){const Ze=k.value.findIndex(Ne=>e.valueComparator(Ne.value,ke.value)),Je=Pe??!~Ze;if(~Ze){const Ne=Je?[...k.value,ke]:[...k.value];Ne.splice(Ze,1),k.value=Ne}else Je&&(k.value=[...k.value,ke])}else{const Ze=Pe!==!1;k.value=Ze?[ke]:[],ar(()=>{v.value=!1})}}function me(ke){var Pe;(Pe=se.value)!=null&&Pe.$el.contains(ke.relatedTarget)||(v.value=!1)}function Ve(){var ke;F.value&&((ke=s.value)==null||ke.focus())}function Ge(ke){F.value=!0}function $e(ke){if(ke==null)k.value=[];else if(yd(s.value,":autofill")||yd(s.value,":-webkit-autofill")){const Pe=_.value.find(Ze=>Ze.title===ke);Pe&&Se(Pe)}else s.value&&(s.value.value="")}return ut(v,()=>{if(!e.hideSelected&&v.value&&k.value.length){const ke=ee.value.findIndex(Pe=>k.value.some(Ze=>e.valueComparator(Ze.value,Pe.value)));Cr&&window.requestAnimationFrame(()=>{var Pe;ke>=0&&((Pe=h.value)==null||Pe.scrollToIndex(ke))})}}),ut(()=>e.items,(ke,Pe)=>{v.value||F.value&&!Pe.length&&ke.length&&(v.value=!0)}),zt(()=>{const ke=!!(e.chips||n.chip),Pe=!!(!e.hideNoData||ee.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),Ze=k.value.length>0,Je=Di.filterProps(e),Ne=Ze||!F.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return E(Di,wt({ref:s},Je,{modelValue:k.value.map(tt=>tt.props.value).join(", "),"onUpdate:modelValue":$e,focused:F.value,"onUpdate:focused":tt=>F.value=tt,validationValue:k.externalValue,counterValue:D.value,dirty:Ze,class:["v-select",{"v-select--active-menu":v.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":k.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:Ne,"onClick:clear":ne,"onMousedown:control":_e,onBlur:me,onKeydown:te,"aria-label":r(N.value),title:r(N.value)}),{...n,default:()=>E(rn,null,[E(bg,wt({ref:u,modelValue:v.value,"onUpdate:modelValue":tt=>v.value=tt,activator:"parent",contentClass:"v-select__content",disabled:le.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:Ve},ie.value),{default:()=>[Pe&&E(If,wt({ref:se,selected:R.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:tt=>tt.preventDefault(),onKeydown:Z,onFocusin:Ge,onScrollPassive:H,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>{var tt,_t,kt;return[(tt=n["prepend-item"])==null?void 0:tt.call(n),!ee.value.length&&!e.hideNoData&&(((_t=n["no-data"])==null?void 0:_t.call(n))??E(kr,{title:r(e.noDataText)},null)),E(ZA,{ref:h,renderless:!0,items:ee.value},{default:St=>{var bt;let{item:Fe,index:at,itemRef:qe}=St;const Be=wt(Fe.props,{ref:qe,key:at,onClick:()=>Se(Fe,null)});return((bt=n.item)==null?void 0:bt.call(n,{item:Fe,index:at,props:Be}))??E(kr,wt(Be,{role:"option"}),{prepend:Bt=>{let{isSelected:re}=Bt;return E(rn,null,[e.multiple&&!e.hideSelected?E(Ld,{key:Fe.value,modelValue:re,ripple:!1,tabindex:"-1"},null):void 0,Fe.props.prependAvatar&&E(ac,{image:Fe.props.prependAvatar},null),Fe.props.prependIcon&&E(pr,{icon:Fe.props.prependIcon},null)])}})}}),(kt=n["append-item"])==null?void 0:kt.call(n)]}})]}),k.value.map((tt,_t)=>{function kt(qe){qe.stopPropagation(),qe.preventDefault(),Se(tt,!1)}const St={"onClick:close":kt,onKeydown(qe){qe.key!=="Enter"&&qe.key!==" "||(qe.preventDefault(),qe.stopPropagation(),kt(qe))},onMousedown(qe){qe.preventDefault(),qe.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Fe=ke?!!n.chip:!!n.selection,at=Fe?v0(ke?n.chip({item:tt,index:_t,props:St}):n.selection({item:tt,index:_t})):void 0;if(!(Fe&&!at))return E("div",{key:tt.value,class:"v-select__selection"},[ke?n.chip?E(Qn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:tt.title}}},{default:()=>[at]}):E(sc,wt({key:"chip",closable:e.closableChips,size:"small",text:tt.title,disabled:tt.props.disabled},St),null):at??E("span",{class:"v-select__selection-text"},[tt.title,e.multiple&&_t<k.value.length-1&&E("span",{class:"v-select__selection-comma"},[Ot(",")])])])})]),"append-inner":function(){var St;for(var tt=arguments.length,_t=new Array(tt),kt=0;kt<tt;kt++)_t[kt]=arguments[kt];return E(rn,null,[(St=n["append-inner"])==null?void 0:St.call(n,..._t),e.menuIcon?E(pr,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),yl({isFocused:F,menu:v,select:Se},s)}}),M5=(e,t,n)=>e==null||t==null?-1:e.toString().toLocaleLowerCase().indexOf(t.toString().toLocaleLowerCase()),U0=Xe({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function L5(e,t,n){var l;const r=[],s=(n==null?void 0:n.default)??M5,u=n!=null&&n.filterKeys?Mi(n.filterKeys):!1,h=Object.keys((n==null?void 0:n.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return r;e:for(let v=0;v<e.length;v++){const[_,S=_]=Mi(e[v]),C={},k={};let D=-1;if(t&&!(n!=null&&n.noFilter)){if(typeof _=="object"){const F=u||Object.keys(S);for(const N of F){const j=ia(S,N),X=(l=n==null?void 0:n.customKeyFilter)==null?void 0:l[N];if(D=X?X(j,t,_):s(j,t,_),D!==-1&&D!==!1)X?C[N]=D:k[N]=D;else if((n==null?void 0:n.filterMode)==="every")continue e}}else D=s(_,t,_),D!==-1&&D!==!1&&(k.title=D);const O=Object.keys(k).length,R=Object.keys(C).length;if(!O&&!R||(n==null?void 0:n.filterMode)==="union"&&R!==h&&!O||(n==null?void 0:n.filterMode)==="intersection"&&(R!==h||!O))continue}r.push({index:v,matches:{...k,...C}})}return r}function q0(e,t,n,r){const s=lt([]),u=lt(new Map),h=Q(()=>r!=null&&r.transform?Fr(t).map(v=>[v,r.transform(v)]):Fr(t));Ui(()=>{const v=typeof n=="function"?n():Fr(n),_=typeof v!="string"&&typeof v!="number"?"":String(v),S=L5(h.value,_,{customKeyFilter:{...e.customKeyFilter,...Fr(r==null?void 0:r.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),C=Fr(t),k=[],D=new Map;S.forEach(O=>{let{index:R,matches:F}=O;const N=C[R];k.push(N),D.set(N.value,F)}),s.value=k,u.value=D});function l(v){return u.value.get(v.value)}return{filteredItems:s,filteredMatches:u,getMatches:l}}function R5(e,t,n){if(t==null)return e;if(Array.isArray(t))throw new Error("Multiple matches is not implemented");return typeof t=="number"&&~t?E(rn,null,[E("span",{class:"v-autocomplete__unmask"},[e.substr(0,t)]),E("span",{class:"v-autocomplete__mask"},[e.substr(t,n)]),E("span",{class:"v-autocomplete__unmask"},[e.substr(t+n)])]):e}const O5=Xe({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...U0({filterKeys:["title"]}),...XA(),...za($0({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...vl({transition:!1})},"VAutocomplete"),z5=At()({name:"VAutocomplete",props:O5(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:r}=qi(),s=lt(),u=Ut(!1),h=Ut(!0),l=Ut(!1),v=lt(),_=lt(),S=xn(e,"menu"),C=Q({get:()=>S.value,set:Be=>{var bt;S.value&&!Be&&((bt=v.value)!=null&&bt.openChildren)||(S.value=Be)}}),k=Ut(-1),D=Q(()=>{var Be;return(Be=s.value)==null?void 0:Be.color}),O=Q(()=>C.value?e.closeText:e.openText),{items:R,transformIn:F,transformOut:N}=UA(e),{textColorClasses:j,textColorStyles:X}=xa(D),ee=xn(e,"search",""),le=xn(e,"modelValue",[],Be=>F(Be===null?[null]:Mi(Be)),Be=>{const bt=N(Be);return e.multiple?bt:bt[0]??null}),ie=Q(()=>typeof e.counterValue=="function"?e.counterValue(le.value):typeof e.counterValue=="number"?e.counterValue:le.value.length),se=R0(),{filteredItems:H,getMatches:Z}=q0(e,R,()=>h.value?"":ee.value),ne=Q(()=>e.hideSelected?H.value.filter(Be=>!le.value.some(bt=>bt.value===Be.value)):H.value),_e=Q(()=>!!(e.chips||n.chip)),te=Q(()=>_e.value||!!n.selection),Se=Q(()=>le.value.map(Be=>Be.props.value)),me=Q(()=>{var bt;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&ee.value===((bt=ne.value[0])==null?void 0:bt.title))&&ne.value.length>0&&!h.value&&!l.value}),Ve=Q(()=>e.hideNoData&&!ne.value.length||e.readonly||(se==null?void 0:se.isReadonly.value)),Ge=lt(),{onListScroll:$e,onListKeydown:ke}=KA(Ge,s);function Pe(Be){e.openOnClear&&(C.value=!0),ee.value=""}function Ze(){Ve.value||(C.value=!0)}function Je(Be){Ve.value||(u.value&&(Be.preventDefault(),Be.stopPropagation()),C.value=!C.value)}function Ne(Be){var re,he,ze;if(e.readonly||se!=null&&se.isReadonly.value)return;const bt=s.value.selectionStart,Bt=le.value.length;if((k.value>-1||["Enter","ArrowDown","ArrowUp"].includes(Be.key))&&Be.preventDefault(),["Enter","ArrowDown"].includes(Be.key)&&(C.value=!0),["Escape"].includes(Be.key)&&(C.value=!1),me.value&&["Enter","Tab"].includes(Be.key)&&qe(ne.value[0]),Be.key==="ArrowDown"&&me.value&&((re=Ge.value)==null||re.focus("next")),["Backspace","Delete"].includes(Be.key)){if(!e.multiple&&te.value&&le.value.length>0)return qe(le.value[0],!1);if(k.value<0){Be.key==="Backspace"&&!ee.value&&(k.value=Bt-1);return}const He=k.value;qe(le.value[k.value],!1),k.value=He>=Bt-1?Bt-2:He}if(e.multiple){if(Be.key==="ArrowLeft"){if(k.value<0&&bt>0)return;const He=k.value>-1?k.value-1:Bt-1;le.value[He]?k.value=He:(k.value=-1,s.value.setSelectionRange((he=ee.value)==null?void 0:he.length,(ze=ee.value)==null?void 0:ze.length))}if(Be.key==="ArrowRight"){if(k.value<0)return;const He=k.value+1;le.value[He]?k.value=He:(k.value=-1,s.value.setSelectionRange(0,0))}}}function tt(Be){if(yd(s.value,":autofill")||yd(s.value,":-webkit-autofill")){const bt=R.value.find(Bt=>Bt.title===Be.target.value);bt&&qe(bt)}}function _t(){var Be;u.value&&(h.value=!0,(Be=s.value)==null||Be.focus())}function kt(Be){u.value=!0,setTimeout(()=>{l.value=!0})}function St(Be){l.value=!1}function Fe(Be){(Be==null||Be===""&&!e.multiple)&&(le.value=[])}const at=Ut(!1);function qe(Be){let bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!Be||Be.props.disabled))if(e.multiple){const Bt=le.value.findIndex(he=>e.valueComparator(he.value,Be.value)),re=bt??!~Bt;if(~Bt){const he=re?[...le.value,Be]:[...le.value];he.splice(Bt,1),le.value=he}else re&&(le.value=[...le.value,Be]);e.clearOnSelect&&(ee.value="")}else{const Bt=bt!==!1;le.value=Bt?[Be]:[],ee.value=Bt&&!te.value?Be.title:"",ar(()=>{C.value=!1,h.value=!0})}}return ut(u,(Be,bt)=>{var Bt;Be!==bt&&(Be?(at.value=!0,ee.value=e.multiple||te.value?"":String(((Bt=le.value.at(-1))==null?void 0:Bt.props.title)??""),h.value=!0,ar(()=>at.value=!1)):(!e.multiple&&ee.value==null?le.value=[]:me.value&&!l.value&&!le.value.some(re=>{let{value:he}=re;return he===ne.value[0].value})&&qe(ne.value[0]),C.value=!1,ee.value="",k.value=-1))}),ut(ee,Be=>{!u.value||at.value||(Be&&(C.value=!0),h.value=!Be)}),ut(C,()=>{if(!e.hideSelected&&C.value&&le.value.length){const Be=ne.value.findIndex(bt=>le.value.some(Bt=>bt.value===Bt.value));Cr&&window.requestAnimationFrame(()=>{var bt;Be>=0&&((bt=_.value)==null||bt.scrollToIndex(Be))})}}),ut(()=>e.items,(Be,bt)=>{C.value||u.value&&!bt.length&&Be.length&&(C.value=!0)}),zt(()=>{const Be=!!(!e.hideNoData||ne.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),bt=le.value.length>0,Bt=Di.filterProps(e);return E(Di,wt({ref:s},Bt,{modelValue:ee.value,"onUpdate:modelValue":[re=>ee.value=re,Fe],focused:u.value,"onUpdate:focused":re=>u.value=re,validationValue:le.externalValue,counterValue:ie.value,dirty:bt,onChange:tt,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":C.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!te.value,"v-autocomplete--selecting-index":k.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:bt?void 0:e.placeholder,"onClick:clear":Pe,"onMousedown:control":Ze,onKeydown:Ne}),{...n,default:()=>E(rn,null,[E(bg,wt({ref:v,modelValue:C.value,"onUpdate:modelValue":re=>C.value=re,activator:"parent",contentClass:"v-autocomplete__content",disabled:Ve.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:_t},e.menuProps),{default:()=>[Be&&E(If,wt({ref:Ge,selected:Se.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:re=>re.preventDefault(),onKeydown:ke,onFocusin:kt,onFocusout:St,onScrollPassive:$e,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>{var re,he,ze;return[(re=n["prepend-item"])==null?void 0:re.call(n),!ne.value.length&&!e.hideNoData&&(((he=n["no-data"])==null?void 0:he.call(n))??E(kr,{title:r(e.noDataText)},null)),E(ZA,{ref:_,renderless:!0,items:ne.value},{default:He=>{var pt;let{item:Ke,index:dt,itemRef:gt}=He;const Ce=wt(Ke.props,{ref:gt,key:dt,active:me.value&&dt===0?!0:void 0,onClick:()=>qe(Ke,null)});return((pt=n.item)==null?void 0:pt.call(n,{item:Ke,index:dt,props:Ce}))??E(kr,wt(Ce,{role:"option"}),{prepend:Qe=>{let{isSelected:st}=Qe;return E(rn,null,[e.multiple&&!e.hideSelected?E(Ld,{key:Ke.value,modelValue:st,ripple:!1,tabindex:"-1"},null):void 0,Ke.props.prependAvatar&&E(ac,{image:Ke.props.prependAvatar},null),Ke.props.prependIcon&&E(pr,{icon:Ke.props.prependIcon},null)])},title:()=>{var Qe,st;return h.value?Ke.title:R5(Ke.title,(Qe=Z(Ke))==null?void 0:Qe.title,((st=ee.value)==null?void 0:st.length)??0)}})}}),(ze=n["append-item"])==null?void 0:ze.call(n)]}})]}),le.value.map((re,he)=>{function ze(gt){gt.stopPropagation(),gt.preventDefault(),qe(re,!1)}const He={"onClick:close":ze,onKeydown(gt){gt.key!=="Enter"&&gt.key!==" "||(gt.preventDefault(),gt.stopPropagation(),ze(gt))},onMousedown(gt){gt.preventDefault(),gt.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Ke=_e.value?!!n.chip:!!n.selection,dt=Ke?v0(_e.value?n.chip({item:re,index:he,props:He}):n.selection({item:re,index:he})):void 0;if(!(Ke&&!dt))return E("div",{key:re.value,class:["v-autocomplete__selection",he===k.value&&["v-autocomplete__selection--selected",j.value]],style:he===k.value?X.value:{}},[_e.value?n.chip?E(Qn,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:re.title}}},{default:()=>[dt]}):E(sc,wt({key:"chip",closable:e.closableChips,size:"small",text:re.title,disabled:re.props.disabled},He),null):dt??E("span",{class:"v-autocomplete__selection-text"},[re.title,e.multiple&&he<le.value.length-1&&E("span",{class:"v-autocomplete__selection-comma"},[Ot(",")])])])})]),"append-inner":function(){var He;for(var re=arguments.length,he=new Array(re),ze=0;ze<re;ze++)he[ze]=arguments[ze];return E(rn,null,[(He=n["append-inner"])==null?void 0:He.call(n,...he),e.menuIcon?E(pr,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:Je,onClick:mO,"aria-label":r(O.value),title:r(O.value)},null):void 0])}})}),yl({isFocused:u,isPristine:h,menu:C,search:ee,filteredItems:H,select:qe},s)}}),F5=Xe({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...O0({origin:"center center",scrollStrategy:"block",transition:{component:I0},zIndex:2400})},"VDialog"),sd=At()({name:"VDialog",props:F5(),emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,afterLeave:()=>!0},setup(e,t){let{slots:n}=t;const r=xn(e,"modelValue"),{scopeId:s}=iv(),u=lt();function h(v){var C,k;const _=v.relatedTarget,S=v.target;if(_!==S&&((C=u.value)!=null&&C.contentEl)&&((k=u.value)!=null&&k.globalTop)&&![document,u.value.contentEl].includes(S)&&!u.value.contentEl.contains(S)){const D=wf(u.value.contentEl);if(!D.length)return;const O=D[0],R=D[D.length-1];_===O?R.focus():O.focus()}}Cr&&ut(()=>r.value&&e.retainFocus,v=>{v?document.addEventListener("focusin",h):document.removeEventListener("focusin",h)},{immediate:!0}),ut(r,async v=>{var _,S;await ar(),v?(_=u.value.contentEl)==null||_.focus({preventScroll:!0}):(S=u.value.activatorEl)==null||S.focus({preventScroll:!0})});const l=Q(()=>wt({"aria-haspopup":"dialog","aria-expanded":String(r.value)},e.activatorProps));return zt(()=>{const v=_g.filterProps(e);return E(_g,wt({ref:u,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},v,{modelValue:r.value,"onUpdate:modelValue":_=>r.value=_,"aria-modal":"true",activatorProps:l.value,role:"dialog"},s),{activator:n.activator,default:function(){for(var _=arguments.length,S=new Array(_),C=0;C<_;C++)S[C]=arguments[C];return E(Qn,{root:"VDialog"},{default:()=>{var k;return[(k=n.default)==null?void 0:k.call(n,...S)]}})}})}),yl({},u)}}),Jl=At()({name:"VCardActions",props:pn(),setup(e,t){let{slots:n}=t;return Ka({VBtn:{slim:!0,variant:"text"}}),zt(()=>{var r;return E("div",{class:["v-card-actions",e.class],style:e.style},[(r=n.default)==null?void 0:r.call(n)])}),{}}}),B5=cc("v-card-subtitle"),Yc=cc("v-card-title"),V5=Xe({appendAvatar:String,appendIcon:Rn,prependAvatar:String,prependIcon:Rn,subtitle:[String,Number],title:[String,Number],...pn(),...Ba()},"VCardItem"),N5=At()({name:"VCardItem",props:V5(),setup(e,t){let{slots:n}=t;return zt(()=>{var _;const r=!!(e.prependAvatar||e.prependIcon),s=!!(r||n.prepend),u=!!(e.appendAvatar||e.appendIcon),h=!!(u||n.append),l=!!(e.title!=null||n.title),v=!!(e.subtitle!=null||n.subtitle);return E("div",{class:["v-card-item",e.class],style:e.style},[s&&E("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?E(Qn,{key:"prepend-defaults",disabled:!r,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},n.prepend):E(rn,null,[e.prependAvatar&&E(ac,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&E(pr,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),E("div",{class:"v-card-item__content"},[l&&E(Yc,{key:"title"},{default:()=>{var S;return[((S=n.title)==null?void 0:S.call(n))??e.title]}}),v&&E(B5,{key:"subtitle"},{default:()=>{var S;return[((S=n.subtitle)==null?void 0:S.call(n))??e.subtitle]}}),(_=n.default)==null?void 0:_.call(n)]),h&&E("div",{key:"append",class:"v-card-item__append"},[n.append?E(Qn,{key:"append-defaults",disabled:!u,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},n.append):E(rn,null,[e.appendIcon&&E(pr,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&E(ac,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),mo=cc("v-card-text"),$5=Xe({appendAvatar:String,appendIcon:Rn,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:Rn,ripple:{type:[Boolean,Object],default:!0},subtitle:[String,Number],text:[String,Number],title:[String,Number],...Ws(),...pn(),...Ba(),...To(),...Ss(),...Qg(),...Ed(),...Kg(),...Wi(),...tv(),...cr(),...Tr(),...Eo({variant:"elevated"})},"VCard"),Ga=At()({name:"VCard",directives:{Ripple:Hf},props:$5(),setup(e,t){let{attrs:n,slots:r}=t;const{themeClasses:s}=Hr(e),{borderClasses:u}=Co(e),{colorClasses:h,colorStyles:l,variantClasses:v}=Dd(e),{densityClasses:_}=ks(e),{dimensionStyles:S}=Ao(e),{elevationClasses:C}=Ys(e),{loaderClasses:k}=ev(e),{locationStyles:D}=Id(e),{positionClasses:O}=Xg(e),{roundedClasses:R}=sa(e),F=jf(e,n),N=Q(()=>e.link!==!1&&F.isLink.value),j=Q(()=>!e.disabled&&e.link!==!1&&(e.link||F.isClickable.value));return zt(()=>{const X=N.value?"a":e.tag,ee=!!(r.title||e.title!=null),le=!!(r.subtitle||e.subtitle!=null),ie=ee||le,se=!!(r.append||e.appendAvatar||e.appendIcon),H=!!(r.prepend||e.prependAvatar||e.prependIcon),Z=!!(r.image||e.image),ne=ie||H||se,_e=!!(r.text||e.text!=null);return gi(E(X,{class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":j.value},s.value,u.value,h.value,_.value,C.value,k.value,O.value,R.value,v.value,e.class],style:[l.value,S.value,D.value,e.style],href:F.href.value,onClick:j.value&&F.navigate,tabindex:e.disabled?-1:void 0},{default:()=>{var te;return[Z&&E("div",{key:"image",class:"v-card__image"},[r.image?E(Qn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},r.image):E(Gf,{key:"image-img",cover:!0,src:e.image},null)]),E(E0,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:r.loader}),ne&&E(N5,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:r.item,prepend:r.prepend,title:r.title,subtitle:r.subtitle,append:r.append}),_e&&E(mo,{key:"text"},{default:()=>{var Se;return[((Se=r.text)==null?void 0:Se.call(r))??e.text]}}),(te=r.default)==null?void 0:te.call(r),r.actions&&E(Jl,null,{default:r.actions}),Pd(j.value,"v-card")]}}),[[So("ripple"),j.value&&e.ripple]])}),{}}}),U5=e=>{const{touchstartX:t,touchendX:n,touchstartY:r,touchendY:s}=e,u=.5,h=16;e.offsetX=n-t,e.offsetY=s-r,Math.abs(e.offsetY)<u*Math.abs(e.offsetX)&&(e.left&&n<t-h&&e.left(e),e.right&&n>t+h&&e.right(e)),Math.abs(e.offsetX)<u*Math.abs(e.offsetY)&&(e.up&&s<r-h&&e.up(e),e.down&&s>r+h&&e.down(e))};function q5(e,t){var r;const n=e.changedTouches[0];t.touchstartX=n.clientX,t.touchstartY=n.clientY,(r=t.start)==null||r.call(t,{originalEvent:e,...t})}function j5(e,t){var r;const n=e.changedTouches[0];t.touchendX=n.clientX,t.touchendY=n.clientY,(r=t.end)==null||r.call(t,{originalEvent:e,...t}),U5(t)}function H5(e,t){var r;const n=e.changedTouches[0];t.touchmoveX=n.clientX,t.touchmoveY=n.clientY,(r=t.move)==null||r.call(t,{originalEvent:e,...t})}function G5(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:n=>q5(n,t),touchend:n=>j5(n,t),touchmove:n=>H5(n,t)}}function W5(e,t){var l;const n=t.value,r=n!=null&&n.parent?e.parentElement:e,s=(n==null?void 0:n.options)??{passive:!0},u=(l=t.instance)==null?void 0:l.$.uid;if(!r||!u)return;const h=G5(t.value);r._touchHandlers=r._touchHandlers??Object.create(null),r._touchHandlers[u]=h,iT(h).forEach(v=>{r.addEventListener(v,h[v],s)})}function Y5(e,t){var u,h;const n=(u=t.value)!=null&&u.parent?e.parentElement:e,r=(h=t.instance)==null?void 0:h.$.uid;if(!(n!=null&&n._touchHandlers)||!r)return;const s=n._touchHandlers[r];iT(s).forEach(l=>{n.removeEventListener(l,s[l])}),delete n._touchHandlers[r]}const JA={mounted:W5,unmounted:Y5},Z5=JA,QA=Symbol.for("vuetify:v-window"),eE=Symbol.for("vuetify:v-window-group"),K5=Xe({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...pn(),...cr(),...Tr()},"VWindow"),X5=At()({name:"VWindow",directives:{Touch:JA},props:K5(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:r}=Hr(e),{isRtl:s}=ws(),{t:u}=qi(),h=Jg(e,eE),l=lt(),v=Q(()=>s.value?!e.reverse:e.reverse),_=Ut(!1),S=Q(()=>{const ee=e.direction==="vertical"?"y":"x",ie=(v.value?!_.value:_.value)?"-reverse":"";return`v-window-${ee}${ie}-transition`}),C=Ut(0),k=lt(void 0),D=Q(()=>h.items.value.findIndex(ee=>h.selected.value.includes(ee.id)));ut(D,(ee,le)=>{const ie=h.items.value.length,se=ie-1;ie<=2?_.value=ee<le:ee===se&&le===0?_.value=!0:ee===0&&le===se?_.value=!1:_.value=ee<le}),bn(QA,{transition:S,isReversed:_,transitionCount:C,transitionHeight:k,rootRef:l});const O=Q(()=>e.continuous||D.value!==0),R=Q(()=>e.continuous||D.value!==h.items.value.length-1);function F(){O.value&&h.prev()}function N(){R.value&&h.next()}const j=Q(()=>{const ee=[],le={icon:s.value?e.nextIcon:e.prevIcon,class:`v-window__${v.value?"right":"left"}`,onClick:h.prev,"aria-label":u("$vuetify.carousel.prev")};ee.push(O.value?n.prev?n.prev({props:le}):E(nn,le,null):E("div",null,null));const ie={icon:s.value?e.prevIcon:e.nextIcon,class:`v-window__${v.value?"left":"right"}`,onClick:h.next,"aria-label":u("$vuetify.carousel.next")};return ee.push(R.value?n.next?n.next({props:ie}):E(nn,ie,null):E("div",null,null)),ee}),X=Q(()=>e.touch===!1?e.touch:{...{left:()=>{v.value?F():N()},right:()=>{v.value?N():F()},start:le=>{let{originalEvent:ie}=le;ie.stopPropagation()}},...e.touch===!0?{}:e.touch});return zt(()=>gi(E(e.tag,{ref:l,class:["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover"},r.value,e.class],style:e.style},{default:()=>{var ee,le;return[E("div",{class:"v-window__container",style:{height:k.value}},[(ee=n.default)==null?void 0:ee.call(n,{group:h}),e.showArrows!==!1&&E("div",{class:"v-window__controls"},[j.value])]),(le=n.additional)==null?void 0:le.call(n,{group:h})]}}),[[So("touch"),X.value]])),{group:h}}}),J5=Xe({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...pn(),...C0(),...kA()},"VWindowItem"),d_=At()({name:"VWindowItem",directives:{Touch:Z5},props:J5(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const r=yt(QA),s=T0(e,eE),{isBooted:u}=Kf();if(!r||!s)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const h=Ut(!1),l=Q(()=>u.value&&(r.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function v(){!h.value||!r||(h.value=!1,r.transitionCount.value>0&&(r.transitionCount.value-=1,r.transitionCount.value===0&&(r.transitionHeight.value=void 0)))}function _(){var O;h.value||!r||(h.value=!0,r.transitionCount.value===0&&(r.transitionHeight.value=Jt((O=r.rootRef.value)==null?void 0:O.clientHeight)),r.transitionCount.value+=1)}function S(){v()}function C(O){h.value&&ar(()=>{!l.value||!h.value||!r||(r.transitionHeight.value=Jt(O.clientHeight))})}const k=Q(()=>{const O=r.isReversed.value?e.reverseTransition:e.transition;return l.value?{name:typeof O!="string"?r.transition.value:O,onBeforeEnter:_,onAfterEnter:v,onEnterCancelled:S,onBeforeLeave:_,onAfterLeave:v,onLeaveCancelled:S,onEnter:C}:!1}),{hasContent:D}=CA(e,s.isSelected);return zt(()=>E(hs,{transition:k.value,disabled:!u.value},{default:()=>{var O;return[gi(E("div",{class:["v-window-item",s.selectedClass.value,e.class],style:e.style},[D.value&&((O=n.default)==null?void 0:O.call(n))]),[[hl,s.isSelected.value]])]}})),{groupItem:s}}}),Q5=Xe({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),tE=Symbol.for("vuetify:datatable:expanded");function e4(e){const t=Ct(e,"expandOnClick"),n=xn(e,"expanded",e.expanded,l=>new Set(l),l=>[...l.values()]);function r(l,v){const _=new Set(n.value);v?_.add(l.value):_.delete(l.value),n.value=_}function s(l){return n.value.has(l.value)}function u(l){r(l,!s(l))}const h={expand:r,expanded:n,expandOnClick:t,isExpanded:s,toggleExpand:u};return bn(tE,h),h}function nE(){const e=yt(tE);if(!e)throw new Error("foo");return e}const t4=Xe({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),rE=Symbol.for("vuetify:data-table-group");function n4(e){return{groupBy:xn(e,"groupBy")}}function r4(e){const{groupBy:t,sortBy:n}=e,r=lt(new Set),s=Q(()=>t.value.map(_=>({..._,order:_.order??!1})).concat(n.value));function u(_){return r.value.has(_.id)}function h(_){const S=new Set(r.value);u(_)?S.delete(_.id):S.add(_.id),r.value=S}function l(_){function S(C){const k=[];for(const D of C.items)"type"in D&&D.type==="group"?k.push(...S(D)):k.push(D);return k}return S({type:"group",items:_,id:"dummy",key:"dummy",value:"dummy",depth:0})}const v={sortByWithGroups:s,toggleGroup:h,opened:r,groupBy:t,extractRows:l,isGroupOpen:u};return bn(rE,v),v}function iE(){const e=yt(rE);if(!e)throw new Error("Missing group!");return e}function i4(e,t){if(!e.length)return[];const n=new Map;for(const r of e){const s=nu(r.raw,t);n.has(s)||n.set(s,[]),n.get(s).push(r)}return n}function aE(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const s=i4(e,t[0]),u=[],h=t.slice(1);return s.forEach((l,v)=>{const _=t[0],S=`${r}_${_}_${v}`;u.push({depth:n,id:S,key:_,value:v,items:h.length?aE(l,h,n+1,S):l,type:"group"})}),u}function sE(e,t){const n=[];for(const r of e)"type"in r&&r.type==="group"?(r.value!=null&&n.push(r),(t.has(r.id)||r.value==null)&&n.push(...sE(r.items,t))):n.push(r);return n}function a4(e,t,n){return{flatItems:Q(()=>{if(!t.value.length)return e.value;const s=aE(e.value,t.value.map(u=>u.key));return sE(s,n.value)})}}function s4(e){let{page:t,itemsPerPage:n,sortBy:r,groupBy:s,search:u}=e;const h=ni("VDataTable"),l=Q(()=>({page:t.value,itemsPerPage:n.value,sortBy:r.value,groupBy:s.value,search:u.value}));let v=null;ut(l,()=>{fl(v,l.value)||(v&&v.search!==l.value.search&&(t.value=1),h.emit("update:options",l.value),v=l.value)},{deep:!0,immediate:!0})}const o4=Xe({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),oE=Symbol.for("vuetify:data-table-pagination");function l4(e){const t=xn(e,"page",void 0,r=>+(r??1)),n=xn(e,"itemsPerPage",void 0,r=>+(r??10));return{page:t,itemsPerPage:n}}function c4(e){const{page:t,itemsPerPage:n,itemsLength:r}=e,s=Q(()=>n.value===-1?0:n.value*(t.value-1)),u=Q(()=>n.value===-1?r.value:Math.min(r.value,s.value+n.value)),h=Q(()=>n.value===-1||r.value===0?1:Math.ceil(r.value/n.value));Ui(()=>{t.value>h.value&&(t.value=h.value)});function l(k){n.value=k,t.value=1}function v(){t.value=gs(t.value+1,1,h.value)}function _(){t.value=gs(t.value-1,1,h.value)}function S(k){t.value=gs(k,1,h.value)}const C={page:t,itemsPerPage:n,startIndex:s,stopIndex:u,pageCount:h,itemsLength:r,nextPage:v,prevPage:_,setPage:S,setItemsPerPage:l};return bn(oE,C),C}function u4(){const e=yt(oE);if(!e)throw new Error("Missing pagination!");return e}function d4(e){const t=ni("usePaginatedItems"),{items:n,startIndex:r,stopIndex:s,itemsPerPage:u}=e,h=Q(()=>u.value<=0?n.value:n.value.slice(r.value,s.value));return ut(h,l=>{t.emit("update:currentItems",l)}),{paginatedItems:h}}const h4={showSelectAll:!1,allSelected:()=>[],select:e=>{var r;let{items:t,value:n}=e;return new Set(n?[(r=t[0])==null?void 0:r.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},lE={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:n,selected:r}=e;for(const s of t)n?r.add(s.value):r.delete(s.value);return r},selectAll:e=>{let{value:t,currentPage:n,selected:r}=e;return lE.select({items:n,value:t,selected:r})}},cE={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:n,selected:r}=e;for(const s of t)n?r.add(s.value):r.delete(s.value);return r},selectAll:e=>{let{value:t,allItems:n,selected:r}=e;return cE.select({items:n,value:t,selected:r})}},f4=Xe({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:fl}},"DataTable-select"),uE=Symbol.for("vuetify:data-table-selection");function p4(e,t){let{allItems:n,currentPage:r}=t;const s=xn(e,"modelValue",e.modelValue,F=>new Set(Mi(F).map(N=>{var j;return((j=n.value.find(X=>e.valueComparator(N,X.value)))==null?void 0:j.value)??N})),F=>[...F.values()]),u=Q(()=>n.value.filter(F=>F.selectable)),h=Q(()=>r.value.filter(F=>F.selectable)),l=Q(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return h4;case"all":return cE;case"page":default:return lE}});function v(F){return Mi(F).every(N=>s.value.has(N.value))}function _(F){return Mi(F).some(N=>s.value.has(N.value))}function S(F,N){const j=l.value.select({items:F,value:N,selected:new Set(s.value)});s.value=j}function C(F){S([F],!v([F]))}function k(F){const N=l.value.selectAll({value:F,allItems:u.value,currentPage:h.value,selected:new Set(s.value)});s.value=N}const D=Q(()=>s.value.size>0),O=Q(()=>{const F=l.value.allSelected({allItems:u.value,currentPage:h.value});return!!F.length&&v(F)}),R={toggleSelect:C,select:S,selectAll:k,isSelected:v,isSomeSelected:_,someSelected:D,allSelected:O,showSelectAll:l.value.showSelectAll};return bn(uE,R),R}function av(){const e=yt(uE);if(!e)throw new Error("Missing selection!");return e}const m4=Xe({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),dE=Symbol.for("vuetify:data-table-sort");function g4(e){const t=xn(e,"sortBy"),n=Ct(e,"mustSort"),r=Ct(e,"multiSort");return{sortBy:t,mustSort:n,multiSort:r}}function v4(e){const{sortBy:t,mustSort:n,multiSort:r,page:s}=e,u=v=>{if(v.key==null)return;let _=t.value.map(C=>({...C}))??[];const S=_.find(C=>C.key===v.key);S?S.order==="desc"?n.value?S.order="asc":_=_.filter(C=>C.key!==v.key):S.order="desc":r.value?_=[..._,{key:v.key,order:"asc"}]:_=[{key:v.key,order:"asc"}],t.value=_,s&&(s.value=1)};function h(v){return!!t.value.find(_=>_.key===v.key)}const l={sortBy:t,toggleSort:u,isSorted:h};return bn(dE,l),l}function y4(){const e=yt(dE);if(!e)throw new Error("Missing sort!");return e}function _4(e,t,n,r,s){const u=qi();return{sortedItems:Q(()=>n.value.length?b4(t.value,n.value,u.current.value,{...e.customKeySort,...r==null?void 0:r.value},s==null?void 0:s.value):t.value)}}function b4(e,t,n,r,s){const u=new Intl.Collator(n,{sensitivity:"accent",usage:"sort"});return[...e].sort((h,l)=>{for(let v=0;v<t.length;v++){const _=t[v].key,S=t[v].order??"asc";if(S===!1)continue;let C=nu(h.raw,_),k=nu(l.raw,_),D=h.raw,O=l.raw;if(S==="desc"&&([C,k]=[k,C],[D,O]=[O,D]),s!=null&&s[_]){const R=s[_](D,O);if(!R)continue;return R}if(r!=null&&r[_]){const R=r[_](C,k);if(!R)continue;return R}if(C instanceof Date&&k instanceof Date)return C.getTime()-k.getTime();if([C,k]=[C,k].map(R=>R!=null?R.toString().toLocaleLowerCase():R),C!==k)return wm(C)&&wm(k)?0:wm(C)?-1:wm(k)?1:!isNaN(C)&&!isNaN(k)?Number(C)-Number(k):u.compare(C,k)}return 0})}function x4(){const e=lt([]);IC(()=>e.value=[]);function t(n,r){e.value[r]=n}return{refs:e,updateRef:t}}const w4=Xe({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:Rn,default:"$first"},prevIcon:{type:Rn,default:"$prev"},nextIcon:{type:Rn,default:"$next"},lastIcon:{type:Rn,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...Ws(),...pn(),...Ba(),...Ss(),...Wi(),...cu(),...cr({tag:"nav"}),...Tr(),...Eo({variant:"text"})},"VPagination"),hk=At()({name:"VPagination",props:w4(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,t){let{slots:n,emit:r}=t;const s=xn(e,"modelValue"),{t:u,n:h}=qi(),{isRtl:l}=ws(),{themeClasses:v}=Hr(e),{width:_}=Ad(),S=Ut(-1);Ka(void 0,{scoped:!0});const{resizeRef:C}=cl(H=>{if(!H.length)return;const{target:Z,contentRect:ne}=H[0],_e=Z.querySelector(".v-pagination__list > *");if(!_e)return;const te=ne.width,Se=_e.offsetWidth+parseFloat(getComputedStyle(_e).marginRight)*2;S.value=R(te,Se)}),k=Q(()=>parseInt(e.length,10)),D=Q(()=>parseInt(e.start,10)),O=Q(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):S.value>=0?S.value:R(_.value,58));function R(H,Z){const ne=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((H-Z*ne)/Z).toFixed(2)))}const F=Q(()=>{if(k.value<=0||isNaN(k.value)||k.value>Number.MAX_SAFE_INTEGER)return[];if(O.value<=0)return[];if(O.value===1)return[s.value];if(k.value<=O.value)return el(k.value,D.value);const H=O.value%2===0,Z=H?O.value/2:Math.floor(O.value/2),ne=H?Z:Z+1,_e=k.value-Z;if(ne-s.value>=0)return[...el(Math.max(1,O.value-1),D.value),e.ellipsis,k.value];if(s.value-_e>=(H?1:0)){const te=O.value-1,Se=k.value-te+D.value;return[D.value,e.ellipsis,...el(te,Se)]}else{const te=Math.max(1,O.value-3),Se=te===1?s.value:s.value-Math.ceil(te/2)+D.value;return[D.value,e.ellipsis,...el(te,Se),e.ellipsis,k.value]}});function N(H,Z,ne){H.preventDefault(),s.value=Z,ne&&r(ne,Z)}const{refs:j,updateRef:X}=x4();Ka({VPaginationBtn:{color:Ct(e,"color"),border:Ct(e,"border"),density:Ct(e,"density"),size:Ct(e,"size"),variant:Ct(e,"variant"),rounded:Ct(e,"rounded"),elevation:Ct(e,"elevation")}});const ee=Q(()=>F.value.map((H,Z)=>{const ne=_e=>X(_e,Z);if(typeof H=="string")return{isActive:!1,key:`ellipsis-${Z}`,page:H,props:{ref:ne,ellipsis:!0,icon:!0,disabled:!0}};{const _e=H===s.value;return{isActive:_e,key:H,page:h(H),props:{ref:ne,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:_e?e.activeColor:e.color,"aria-current":_e,"aria-label":u(_e?e.currentPageAriaLabel:e.pageAriaLabel,H),onClick:te=>N(te,H)}}}})),le=Q(()=>{const H=!!e.disabled||s.value<=D.value,Z=!!e.disabled||s.value>=D.value+k.value-1;return{first:e.showFirstLastPage?{icon:l.value?e.lastIcon:e.firstIcon,onClick:ne=>N(ne,D.value,"first"),disabled:H,"aria-label":u(e.firstAriaLabel),"aria-disabled":H}:void 0,prev:{icon:l.value?e.nextIcon:e.prevIcon,onClick:ne=>N(ne,s.value-1,"prev"),disabled:H,"aria-label":u(e.previousAriaLabel),"aria-disabled":H},next:{icon:l.value?e.prevIcon:e.nextIcon,onClick:ne=>N(ne,s.value+1,"next"),disabled:Z,"aria-label":u(e.nextAriaLabel),"aria-disabled":Z},last:e.showFirstLastPage?{icon:l.value?e.firstIcon:e.lastIcon,onClick:ne=>N(ne,D.value+k.value-1,"last"),disabled:Z,"aria-label":u(e.lastAriaLabel),"aria-disabled":Z}:void 0}});function ie(){var Z;const H=s.value-D.value;(Z=j.value[H])==null||Z.$el.focus()}function se(H){H.key===uS.left&&!e.disabled&&s.value>+e.start?(s.value=s.value-1,ar(ie)):H.key===uS.right&&!e.disabled&&s.value<D.value+k.value-1&&(s.value=s.value+1,ar(ie))}return zt(()=>E(e.tag,{ref:C,class:["v-pagination",v.value,e.class],style:e.style,role:"navigation","aria-label":u(e.ariaLabel),onKeydown:se,"data-test":"v-pagination-root"},{default:()=>[E("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&E("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[n.first?n.first(le.value.first):E(nn,wt({_as:"VPaginationBtn"},le.value.first),null)]),E("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[n.prev?n.prev(le.value.prev):E(nn,wt({_as:"VPaginationBtn"},le.value.prev),null)]),ee.value.map((H,Z)=>E("li",{key:H.key,class:["v-pagination__item",{"v-pagination__item--is-active":H.isActive}],"data-test":"v-pagination-item"},[n.item?n.item(H):E(nn,wt({_as:"VPaginationBtn"},H.props),{default:()=>[H.page]})])),E("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[n.next?n.next(le.value.next):E(nn,wt({_as:"VPaginationBtn"},le.value.next),null)]),e.showFirstLastPage&&E("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[n.last?n.last(le.value.last):E(nn,wt({_as:"VPaginationBtn"},le.value.last),null)])])]})),{}}}),hE=Xe({prevIcon:{type:String,default:"$prev"},nextIcon:{type:String,default:"$next"},firstIcon:{type:String,default:"$first"},lastIcon:{type:String,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),fk=At()({name:"VDataTableFooter",props:hE(),setup(e,t){let{slots:n}=t;const{t:r}=qi(),{page:s,pageCount:u,startIndex:h,stopIndex:l,itemsLength:v,itemsPerPage:_,setItemsPerPage:S}=u4(),C=Q(()=>e.itemsPerPageOptions.map(k=>typeof k=="number"?{value:k,title:k===-1?r("$vuetify.dataFooter.itemsPerPageAll"):String(k)}:{...k,title:r(k.title)}));return zt(()=>{var D;const k=hk.filterProps(e);return E("div",{class:"v-data-table-footer"},[(D=n.prepend)==null?void 0:D.call(n),E("div",{class:"v-data-table-footer__items-per-page"},[E("span",null,[r(e.itemsPerPageText)]),E(Pf,{items:C.value,modelValue:_.value,"onUpdate:modelValue":O=>S(Number(O)),density:"compact",variant:"outlined","hide-details":!0},null)]),E("div",{class:"v-data-table-footer__info"},[E("div",null,[r(e.pageText,v.value?h.value+1:0,l.value,v.value)])]),E("div",{class:"v-data-table-footer__pagination"},[E(hk,wt({modelValue:s.value,"onUpdate:modelValue":O=>s.value=O,density:"comfortable","first-aria-label":e.firstPageLabel,"last-aria-label":e.lastPageLabel,length:u.value,"next-aria-label":e.nextPageLabel,"previous-aria-label":e.prevPageLabel,rounded:!0,"show-first-last-page":!0,"total-visible":e.showCurrentPage?1:0,variant:"plain"},k),null)])])}),{}}}),j0=GO({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String]},(e,t)=>{let{slots:n}=t;const r=e.tag??"td";return E(r,{class:["v-data-table__td",{"v-data-table-column--fixed":e.fixed,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--no-padding":e.noPadding},`v-data-table-column--align-${e.align}`],style:{height:Jt(e.height),width:Jt(e.width),left:Jt(e.fixedOffset||null)}},{default:()=>{var s;return[(s=n.default)==null?void 0:s.call(n)]}})}),S4=Xe({headers:Array},"DataTable-header"),fE=Symbol.for("vuetify:data-table-headers"),pE={title:"",sortable:!1},k4={...pE,width:48};function C4(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(n=>({element:n,priority:0}));return{enqueue:(n,r)=>{let s=!1;for(let u=0;u<t.length;u++)if(t[u].priority>r){t.splice(u,0,{element:n,priority:r}),s=!0;break}s||t.push({element:n,priority:r})},size:()=>t.length,count:()=>{let n=0;if(!t.length)return 0;const r=Math.floor(t[0].priority);for(let s=0;s<t.length;s++)Math.floor(t[s].priority)===r&&(n+=1);return n},dequeue:()=>t.shift()}}function Sb(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)t.push(e);else for(const n of e.children)Sb(n,t);return t}function mE(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const n of e)n.key&&t.add(n.key),n.children&&mE(n.children,t);return t}function T4(e){if(e.key){if(e.key==="data-table-group")return pE;if(["data-table-expand","data-table-select"].includes(e.key))return k4}}function H0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(t,...e.children.map(n=>H0(n,t+1))):t}function A4(e){let t=!1;function n(u){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(u)if(h&&(u.fixed=!0),u.fixed)if(u.children)for(let l=u.children.length-1;l>=0;l--)n(u.children[l],!0);else t?isNaN(+u.width)&&(`${u.key}`,void 0):u.lastFixed=!0,t=!0;else if(u.children)for(let l=u.children.length-1;l>=0;l--)n(u.children[l]);else t=!1}for(let u=e.length-1;u>=0;u--)n(e[u]);function r(u){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!u)return h;if(u.children){u.fixedOffset=h;for(const l of u.children)h=r(l,h)}else u.fixed&&(u.fixedOffset=h,h+=parseFloat(u.width||"0")||0);return h}let s=0;for(const u of e)s=r(u,s)}function E4(e,t){const n=[];let r=0;const s=C4(e);for(;s.size()>0;){let h=s.count();const l=[];let v=1;for(;h>0;){const{element:_,priority:S}=s.dequeue(),C=t-r-H0(_);if(l.push({..._,rowspan:C??1,colspan:_.children?Sb(_).length:1}),_.children)for(const k of _.children){const D=S%1+v/Math.pow(10,r+2);s.enqueue(k,r+C+D)}v+=1,h-=1}r+=1,n.push(l)}return{columns:e.map(h=>Sb(h)).flat(),headers:n}}function gE(e){const t=[];for(const n of e){const r={...T4(n),...n},s=r.key??(typeof r.value=="string"?r.value:null),u=r.value??s??null,h={...r,key:s,value:u,sortable:r.sortable??(r.key!=null||!!r.sort),children:r.children?gE(r.children):void 0};t.push(h)}return t}function I4(e,t){const n=lt([]),r=lt([]),s=lt({}),u=lt({}),h=lt({});Ui(()=>{var R,F,N;const _=(e.headers||Object.keys(e.items[0]??{}).map(j=>({key:j,title:wo(j)}))).slice(),S=mE(_);(R=t==null?void 0:t.groupBy)!=null&&R.value.length&&!S.has("data-table-group")&&_.unshift({key:"data-table-group",title:"Group"}),(F=t==null?void 0:t.showSelect)!=null&&F.value&&!S.has("data-table-select")&&_.unshift({key:"data-table-select"}),(N=t==null?void 0:t.showExpand)!=null&&N.value&&!S.has("data-table-expand")&&_.push({key:"data-table-expand"});const C=gE(_);A4(C);const k=Math.max(...C.map(j=>H0(j)))+1,D=E4(C,k);n.value=D.headers,r.value=D.columns;const O=D.headers.flat(1);for(const j of O)j.key&&(j.sortable&&(j.sort&&(s.value[j.key]=j.sort),j.sortRaw&&(u.value[j.key]=j.sortRaw)),j.filter&&(h.value[j.key]=j.filter))});const l={headers:n,columns:r,sortFunctions:s,sortRawFunctions:u,filterFunctions:h};return bn(fE,l),l}function sv(){const e=yt(fE);if(!e)throw new Error("Missing headers!");return e}const vE=Xe({color:String,sticky:Boolean,multiSort:Boolean,sortAscIcon:{type:Rn,default:"$sortAsc"},sortDescIcon:{type:Rn,default:"$sortDesc"},headerProps:{type:Object},...Qg()},"VDataTableHeaders"),pk=At()({name:"VDataTableHeaders",props:vE(),setup(e,t){let{slots:n}=t;const{toggleSort:r,sortBy:s,isSorted:u}=y4(),{someSelected:h,allSelected:l,selectAll:v,showSelectAll:_}=av(),{columns:S,headers:C}=sv(),{loaderClasses:k}=ev(e);function D(X,ee){if(!(!e.sticky&&!X.fixed))return{position:"sticky",left:X.fixed?Jt(X.fixedOffset):void 0,top:e.sticky?`calc(var(--v-table-header-height) * ${ee})`:void 0}}function O(X){const ee=s.value.find(le=>le.key===X.key);return ee?ee.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:R,backgroundColorStyles:F}=Li(e,"color"),N=Q(()=>({headers:C.value,columns:S.value,toggleSort:r,isSorted:u,sortBy:s.value,someSelected:h.value,allSelected:l.value,selectAll:v,getSortIcon:O})),j=X=>{let{column:ee,x:le,y:ie}=X;const se=ee.key==="data-table-select"||ee.key==="data-table-expand",H=wt(e.headerProps??{},ee.headerProps??{});return E(j0,wt({tag:"th",align:ee.align,class:["v-data-table__th",{"v-data-table__th--sortable":ee.sortable,"v-data-table__th--sorted":u(ee),"v-data-table__th--fixed":ee.fixed,"v-data-table__th--sticky":e.sticky},k.value],style:{width:Jt(ee.width),minWidth:Jt(ee.minWidth),...D(ee,ie)},colspan:ee.colspan,rowspan:ee.rowspan,onClick:ee.sortable?()=>r(ee):void 0,fixed:ee.fixed,lastFixed:ee.lastFixed,noPadding:se},H),{default:()=>{var _e;const Z=`header.${ee.key}`,ne={column:ee,selectAll:v,isSorted:u,toggleSort:r,sortBy:s.value,someSelected:h.value,allSelected:l.value,getSortIcon:O};return n[Z]?n[Z](ne):ee.key==="data-table-select"?((_e=n["header.data-table-select"])==null?void 0:_e.call(n,ne))??(_&&E(Ld,{modelValue:l.value,indeterminate:h.value&&!l.value,"onUpdate:modelValue":v},null)):E("div",{class:"v-data-table-header__content"},[E("span",null,[ee.title]),ee.sortable&&E(pr,{key:"icon",class:"v-data-table-header__sort-icon",icon:O(ee)},null),e.multiSort&&u(ee)&&E("div",{key:"badge",class:["v-data-table-header__sort-badge",...R.value],style:F.value},[s.value.findIndex(te=>te.key===ee.key)+1])])}})};zt(()=>E(rn,null,[n.headers?n.headers(N.value):C.value.map((X,ee)=>E("tr",null,[X.map((le,ie)=>E(j,{column:le,x:ie,y:ee},null))])),e.loading&&E("tr",{class:"v-data-table-progress"},[E("th",{colspan:S.value.length},[E(E0,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:n.loader})])])]))}}),P4=Xe({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),D4=At()({name:"VDataTableGroupHeaderRow",props:P4(),setup(e,t){let{slots:n}=t;const{isGroupOpen:r,toggleGroup:s,extractRows:u}=iE(),{isSelected:h,isSomeSelected:l,select:v}=av(),{columns:_}=sv(),S=Q(()=>u([e.item]));return()=>E("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[_.value.map(C=>{var k,D;if(C.key==="data-table-group"){const O=r(e.item)?"$expand":"$next",R=()=>s(e.item);return((k=n["data-table-group"])==null?void 0:k.call(n,{item:e.item,count:S.value.length,props:{icon:O,onClick:R}}))??E(j0,{class:"v-data-table-group-header-row__column"},{default:()=>[E(nn,{size:"small",variant:"text",icon:O,onClick:R},null),E("span",null,[e.item.value]),E("span",null,[Ot("("),S.value.length,Ot(")")])]})}if(C.key==="data-table-select"){const O=h(S.value),R=l(S.value)&&!O,F=N=>v(S.value,N);return((D=n["data-table-select"])==null?void 0:D.call(n,{props:{modelValue:O,indeterminate:R,"onUpdate:modelValue":F}}))??E("td",null,[E(Ld,{modelValue:O,indeterminate:R,"onUpdate:modelValue":F},null)])}return E("td",null,null)})])}}),M4=Xe({index:Number,item:Object,cellProps:[Object,Function],onClick:Ma(),onContextmenu:Ma(),onDblclick:Ma()},"VDataTableRow"),L4=At()({name:"VDataTableRow",props:M4(),setup(e,t){let{slots:n}=t;const{isSelected:r,toggleSelect:s}=av(),{isExpanded:u,toggleExpand:h}=nE(),{columns:l}=sv();zt(()=>E("tr",{class:["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)}],onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&l.value.map((v,_)=>{const S=e.item,C=`item.${v.key}`,k={index:e.index,item:S.raw,internalItem:S,value:nu(S.columns,v.key),column:v,isSelected:r,toggleSelect:s,isExpanded:u,toggleExpand:h},D=typeof e.cellProps=="function"?e.cellProps({index:k.index,item:k.item,internalItem:k.internalItem,value:k.value,column:v}):e.cellProps,O=typeof v.cellProps=="function"?v.cellProps({index:k.index,item:k.item,internalItem:k.internalItem,value:k.value}):v.cellProps;return E(j0,wt({align:v.align,fixed:v.fixed,fixedOffset:v.fixedOffset,lastFixed:v.lastFixed,noPadding:v.key==="data-table-select"||v.key==="data-table-expand",width:v.width},D,O),{default:()=>{var R,F;return n[C]?n[C](k):v.key==="data-table-select"?((R=n["item.data-table-select"])==null?void 0:R.call(n,k))??E(Ld,{disabled:!S.selectable,modelValue:r([S]),onClick:sS(()=>s(S),["stop"])},null):v.key==="data-table-expand"?((F=n["item.data-table-expand"])==null?void 0:F.call(n,k))??E(nn,{icon:u(S)?"$collapse":"$expand",size:"small",variant:"text",onClick:sS(()=>h(S),["stop"])},null):qs(k.value)}})})]))}}),yE=Xe({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function]},"VDataTableRows"),mk=At()({name:"VDataTableRows",inheritAttrs:!1,props:yE(),setup(e,t){let{attrs:n,slots:r}=t;const{columns:s}=sv(),{expandOnClick:u,toggleExpand:h,isExpanded:l}=nE(),{isSelected:v,toggleSelect:_}=av(),{toggleGroup:S,isGroupOpen:C}=iE(),{t:k}=qi();return zt(()=>{var D,O;return e.loading&&(!e.items.length||r.loading)?E("tr",{class:"v-data-table-rows-loading",key:"loading"},[E("td",{colspan:s.value.length},[((D=r.loading)==null?void 0:D.call(r))??k(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?E("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[E("td",{colspan:s.value.length},[((O=r["no-data"])==null?void 0:O.call(r))??k(e.noDataText)])]):E(rn,null,[e.items.map((R,F)=>{var X;if(R.type==="group"){const ee={index:F,item:R,columns:s.value,isExpanded:l,toggleExpand:h,isSelected:v,toggleSelect:_,toggleGroup:S,isGroupOpen:C};return r["group-header"]?r["group-header"](ee):E(D4,wt({key:`group-header_${R.id}`,item:R},IS(n,":group-header",()=>ee)),r)}const N={index:F,item:R.raw,internalItem:R,columns:s.value,isExpanded:l,toggleExpand:h,isSelected:v,toggleSelect:_},j={...N,props:wt({key:`item_${R.key??R.index}`,onClick:u.value?()=>{h(R)}:void 0,index:F,item:R,cellProps:e.cellProps},IS(n,":row",()=>N),typeof e.rowProps=="function"?e.rowProps({item:N.item,index:N.index,internalItem:N.internalItem}):e.rowProps)};return E(rn,{key:j.props.key},[r.item?r.item(j):E(L4,j.props,r),l(R)&&((X=r["expanded-row"])==null?void 0:X.call(r,N))])})])}),{}}}),_E=Xe({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...pn(),...Ba(),...cr(),...Tr()},"VTable"),gk=At()({name:"VTable",props:_E(),setup(e,t){let{slots:n,emit:r}=t;const{themeClasses:s}=Hr(e),{densityClasses:u}=ks(e);return zt(()=>E(e.tag,{class:["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":e.hover},s.value,u.value,e.class],style:e.style},{default:()=>{var h,l,v;return[(h=n.top)==null?void 0:h.call(n),n.default?E("div",{class:"v-table__wrapper",style:{height:Jt(e.height)}},[E("table",null,[n.default()])]):(l=n.wrapper)==null?void 0:l.call(n),(v=n.bottom)==null?void 0:v.call(n)]}})),{}}}),R4=Xe({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function O4(e,t,n,r){const s=e.returnObject?t:ia(t,e.itemValue),u=ia(t,e.itemSelectable,!0),h=r.reduce((l,v)=>(v.key!=null&&(l[v.key]=ia(t,v.value)),l),{});return{type:"item",key:e.returnObject?ia(t,e.itemValue):s,index:n,value:s,selectable:u,columns:h,raw:t}}function z4(e,t,n){return t.map((r,s)=>O4(e,r,s,n))}function F4(e,t){return{items:Q(()=>z4(e,e.items,t.value))}}const B4=Xe({...yE(),width:[String,Number],search:String,...Q5(),...t4(),...S4(),...R4(),...f4(),...m4(),...vE(),..._E()},"DataTable"),V4=Xe({...o4(),...B4(),...U0(),...hE()},"VDataTable"),bE=At()({name:"VDataTable",props:V4(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const{groupBy:s}=n4(e),{sortBy:u,multiSort:h,mustSort:l}=g4(e),{page:v,itemsPerPage:_}=l4(e),{columns:S,headers:C,sortFunctions:k,sortRawFunctions:D,filterFunctions:O}=I4(e,{groupBy:s,showSelect:Ct(e,"showSelect"),showExpand:Ct(e,"showExpand")}),{items:R}=F4(e,S),F=Ct(e,"search"),{filteredItems:N}=q0(e,R,F,{transform:St=>St.columns,customKeyFilter:O}),{toggleSort:j}=v4({sortBy:u,multiSort:h,mustSort:l,page:v}),{sortByWithGroups:X,opened:ee,extractRows:le,isGroupOpen:ie,toggleGroup:se}=r4({groupBy:s,sortBy:u}),{sortedItems:H}=_4(e,N,X,k,D),{flatItems:Z}=a4(H,s,ee),ne=Q(()=>Z.value.length),{startIndex:_e,stopIndex:te,pageCount:Se,setItemsPerPage:me}=c4({page:v,itemsPerPage:_,itemsLength:ne}),{paginatedItems:Ve}=d4({items:Z,startIndex:_e,stopIndex:te,itemsPerPage:_}),Ge=Q(()=>le(Ve.value)),{isSelected:$e,select:ke,selectAll:Pe,toggleSelect:Ze,someSelected:Je,allSelected:Ne}=p4(e,{allItems:R,currentPage:Ge}),{isExpanded:tt,toggleExpand:_t}=e4(e);s4({page:v,itemsPerPage:_,sortBy:u,groupBy:s,search:F}),Ka({VDataTableRows:{hideNoData:Ct(e,"hideNoData"),noDataText:Ct(e,"noDataText"),loading:Ct(e,"loading"),loadingText:Ct(e,"loadingText")}});const kt=Q(()=>({page:v.value,itemsPerPage:_.value,sortBy:u.value,pageCount:Se.value,toggleSort:j,setItemsPerPage:me,someSelected:Je.value,allSelected:Ne.value,isSelected:$e,select:ke,selectAll:Pe,toggleSelect:Ze,isExpanded:tt,toggleExpand:_t,isGroupOpen:ie,toggleGroup:se,items:Ge.value.map(St=>St.raw),internalItems:Ge.value,groupedItems:Ve.value,columns:S.value,headers:C.value}));return zt(()=>{const St=fk.filterProps(e),Fe=pk.filterProps(e),at=mk.filterProps(e),qe=gk.filterProps(e);return E(gk,wt({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},qe),{top:()=>{var Be;return(Be=r.top)==null?void 0:Be.call(r,kt.value)},default:()=>{var Be,bt,Bt,re,he,ze;return r.default?r.default(kt.value):E(rn,null,[(Be=r.colgroup)==null?void 0:Be.call(r,kt.value),E("thead",null,[E(pk,Fe,r)]),(bt=r.thead)==null?void 0:bt.call(r,kt.value),E("tbody",null,[(Bt=r["body.prepend"])==null?void 0:Bt.call(r,kt.value),r.body?r.body(kt.value):E(mk,wt(n,at,{items:Ve.value}),r),(re=r["body.append"])==null?void 0:re.call(r,kt.value)]),(he=r.tbody)==null?void 0:he.call(r,kt.value),(ze=r.tfoot)==null?void 0:ze.call(r,kt.value)])},bottom:()=>r.bottom?r.bottom(kt.value):E(rn,null,[E(yr,null,null),E(fk,St,{prepend:r["footer.prepend"]})])})}),{}}}),N4=Xe({fluid:{type:Boolean,default:!1},...pn(),...cr()},"VContainer"),Dr=At()({name:"VContainer",props:N4(),setup(e,t){let{slots:n}=t;const{rtlClasses:r}=ws();return zt(()=>E(e.tag,{class:["v-container",{"v-container--fluid":e.fluid},r.value,e.class],style:e.style},n)),{}}}),xE=Gg.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}),wE=Gg.reduce((e,t)=>{const n="offset"+wo(t);return e[n]={type:[String,Number],default:null},e},{}),SE=Gg.reduce((e,t)=>{const n="order"+wo(t);return e[n]={type:[String,Number],default:null},e},{}),vk={col:Object.keys(xE),offset:Object.keys(wE),order:Object.keys(SE)};function $4(e,t,n){let r=e;if(!(n==null||n===!1)){if(t){const s=t.replace(e,"");r+=`-${s}`}return e==="col"&&(r="v-"+r),e==="col"&&(n===""||n===!0)||(r+=`-${n}`),r.toLowerCase()}}const U4=["auto","start","end","center","baseline","stretch"],q4=Xe({cols:{type:[Boolean,String,Number],default:!1},...xE,offset:{type:[String,Number],default:null},...wE,order:{type:[String,Number],default:null},...SE,alignSelf:{type:String,default:null,validator:e=>U4.includes(e)},...pn(),...cr()},"VCol"),na=At()({name:"VCol",props:q4(),setup(e,t){let{slots:n}=t;const r=Q(()=>{const s=[];let u;for(u in vk)vk[u].forEach(l=>{const v=e[l],_=$4(u,l,v);_&&s.push(_)});const h=s.some(l=>l.startsWith("v-col-"));return s.push({"v-col":!h||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),s});return()=>{var s;return Zr(e.tag,{class:[r.value,e.class],style:e.style},(s=n.default)==null?void 0:s.call(n))}}}),G0=["start","end","center"],kE=["space-between","space-around","space-evenly"];function W0(e,t){return Gg.reduce((n,r)=>{const s=e+wo(r);return n[s]=t(),n},{})}const j4=[...G0,"baseline","stretch"],CE=e=>j4.includes(e),TE=W0("align",()=>({type:String,default:null,validator:CE})),H4=[...G0,...kE],AE=e=>H4.includes(e),EE=W0("justify",()=>({type:String,default:null,validator:AE})),G4=[...G0,...kE,"stretch"],IE=e=>G4.includes(e),PE=W0("alignContent",()=>({type:String,default:null,validator:IE})),yk={align:Object.keys(TE),justify:Object.keys(EE),alignContent:Object.keys(PE)},W4={align:"align",justify:"justify",alignContent:"align-content"};function Y4(e,t,n){let r=W4[e];if(n!=null){if(t){const s=t.replace(e,"");r+=`-${s}`}return r+=`-${n}`,r.toLowerCase()}}const Z4=Xe({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:CE},...TE,justify:{type:String,default:null,validator:AE},...EE,alignContent:{type:String,default:null,validator:IE},...PE,...pn(),...cr()},"VRow"),Bs=At()({name:"VRow",props:Z4(),setup(e,t){let{slots:n}=t;const r=Q(()=>{const s=[];let u;for(u in yk)yk[u].forEach(h=>{const l=e[h],v=Y4(u,h,l);v&&s.push(v)});return s.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),s});return()=>{var s;return Zr(e.tag,{class:["v-row",r.value,e.class],style:e.style},(s=n.default)==null?void 0:s.call(n))}}}),co=cc("v-spacer","div","VSpacer"),K4=Xe({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...Md({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:()=>[],validator:e=>Mi(e).every(t=>t!=null&&typeof t=="object")},...Yf({clearable:!0})},"VFileInput"),X4=At()({name:"VFileInput",inheritAttrs:!1,props:K4(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:s}=t;const{t:u}=qi(),h=xn(e,"modelValue",e.modelValue,Z=>Mi(Z),Z=>e.multiple||Array.isArray(e.modelValue)?Z:Z[0]),{isFocused:l,focus:v,blur:_}=Wf(e),S=Q(()=>typeof e.showSize!="boolean"?e.showSize:void 0),C=Q(()=>(h.value??[]).reduce((Z,ne)=>{let{size:_e=0}=ne;return Z+_e},0)),k=Q(()=>pS(C.value,S.value)),D=Q(()=>(h.value??[]).map(Z=>{const{name:ne="",size:_e=0}=Z;return e.showSize?`${ne} (${pS(_e,S.value)})`:ne})),O=Q(()=>{var ne;const Z=((ne=h.value)==null?void 0:ne.length)??0;return e.showSize?u(e.counterSizeString,Z,k.value):u(e.counterString,Z)}),R=lt(),F=lt(),N=lt(),j=Q(()=>l.value||e.active),X=Q(()=>["plain","underlined"].includes(e.variant));function ee(){var Z;N.value!==document.activeElement&&((Z=N.value)==null||Z.focus()),l.value||v()}function le(Z){var ne;(ne=N.value)==null||ne.click()}function ie(Z){r("mousedown:control",Z)}function se(Z){var ne;(ne=N.value)==null||ne.click(),r("click:control",Z)}function H(Z){Z.stopPropagation(),ee(),ar(()=>{h.value=[],g0(e["onClick:clear"],Z)})}return ut(h,Z=>{(!Array.isArray(Z)||!Z.length)&&N.value&&(N.value.value="")}),zt(()=>{const Z=!!(s.counter||e.counter),ne=!!(Z||s.details),[_e,te]=Cd(n),{modelValue:Se,...me}=bo.filterProps(e),Ve=rv(e);return E(bo,wt({ref:R,modelValue:h.value,"onUpdate:modelValue":Ge=>h.value=Ge,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-input--plain-underlined":X.value},e.class],style:e.style,"onClick:prepend":le},_e,me,{centerAffix:!X.value,focused:l.value}),{...s,default:Ge=>{let{id:$e,isDisabled:ke,isDirty:Pe,isReadonly:Ze,isValid:Je}=Ge;return E(Zf,wt({ref:F,"prepend-icon":e.prependIcon,onMousedown:ie,onClick:se,"onClick:clear":H,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Ve,{id:$e.value,active:j.value||Pe.value,dirty:Pe.value,disabled:ke.value,focused:l.value,error:Je.value===!1}),{...s,default:Ne=>{var kt;let{props:{class:tt,..._t}}=Ne;return E(rn,null,[E("input",wt({ref:N,type:"file",readonly:Ze.value,disabled:ke.value,multiple:e.multiple,name:e.name,onClick:St=>{St.stopPropagation(),Ze.value&&St.preventDefault(),ee()},onChange:St=>{if(!St.target)return;const Fe=St.target;h.value=[...Fe.files??[]]},onFocus:ee,onBlur:_},_t,te),null),E("div",{class:tt},[!!((kt=h.value)!=null&&kt.length)&&(s.selection?s.selection({fileNames:D.value,totalBytes:C.value,totalBytesReadable:k.value}):e.chips?D.value.map(St=>E(sc,{key:St,size:"small",color:e.color},{default:()=>[St]})):D.value.join(", "))])])}})},details:ne?Ge=>{var $e,ke;return E(rn,null,[($e=s.details)==null?void 0:$e.call(s,Ge),Z&&E(rn,null,[E("span",null,null),E(N0,{active:!!((ke=h.value)!=null&&ke.length),value:O.value},s.counter)])])}:void 0})}),yl({},R,F,N)}}),J4=Xe({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...Ws(),...pn(),...Ss(),...Yg(),...Wi(),...cr({tag:"footer"}),...Tr()},"VFooter"),Q4=At()({name:"VFooter",props:J4(),setup(e,t){let{slots:n}=t;const{themeClasses:r}=Hr(e),{backgroundColorClasses:s,backgroundColorStyles:u}=Li(Ct(e,"color")),{borderClasses:h}=Co(e),{elevationClasses:l}=Ys(e),{roundedClasses:v}=sa(e),_=Ut(32),{resizeRef:S}=cl(D=>{D.length&&(_.value=D[0].target.clientHeight)}),C=Q(()=>e.height==="auto"?_.value:parseInt(e.height,10)),{layoutItemStyles:k}=Zg({id:e.name,order:Q(()=>parseInt(e.order,10)),position:Q(()=>"bottom"),layoutSize:C,elementSize:Q(()=>e.height==="auto"?void 0:C.value),active:Q(()=>e.app),absolute:Ct(e,"absolute")});return zt(()=>E(e.tag,{ref:S,class:["v-footer",r.value,s.value,h.value,l.value,v.value,e.class],style:[u.value,e.app?k.value:{height:Jt(e.height)},e.style]},n)),{}}}),eV=Xe({...pn(),...WB()},"VForm"),tV=At()({name:"VForm",props:eV(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:n,emit:r}=t;const s=YB(e),u=lt();function h(v){v.preventDefault(),s.reset()}function l(v){const _=v,S=s.validate();_.then=S.then.bind(S),_.catch=S.catch.bind(S),_.finally=S.finally.bind(S),r("submit",_),_.defaultPrevented||S.then(C=>{var D;let{valid:k}=C;k&&((D=u.value)==null||D.submit())}),_.preventDefault()}return zt(()=>{var v;return E("form",{ref:u,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:h,onSubmit:l},[(v=n.default)==null?void 0:v.call(n,s)])}),yl(s,u)}}),nV=Xe({scrollable:Boolean,...pn(),...cr({tag:"main"})},"VMain"),rV=At()({name:"VMain",props:nV(),setup(e,t){let{slots:n}=t;const{mainStyles:r}=eF(),{ssrBootStyles:s}=Kf();return zt(()=>E(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[r.value,s.value,e.style]},{default:()=>{var u,h;return[e.scrollable?E("div",{class:"v-main__scroller"},[(u=n.default)==null?void 0:u.call(n)]):(h=n.default)==null?void 0:h.call(n)]}})),{}}});function iV(e){let{rootEl:t,isSticky:n,layoutItemStyles:r}=e;const s=Ut(!1),u=Ut(0),h=Q(()=>{const _=typeof s.value=="boolean"?"top":s.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,s.value?{[_]:Jt(u.value)}:{top:r.value.top}]});Oa(()=>{ut(n,_=>{_?window.addEventListener("scroll",v,{passive:!0}):window.removeEventListener("scroll",v)},{immediate:!0})}),br(()=>{window.removeEventListener("scroll",v)});let l=0;function v(){const _=l>window.scrollY?"up":"down",S=t.value.getBoundingClientRect(),C=parseFloat(r.value.top??0),k=window.scrollY-Math.max(0,u.value-C),D=S.height+Math.max(u.value,C)-window.scrollY-window.innerHeight,O=parseFloat(getComputedStyle(t.value).getPropertyValue("--v-body-scroll-y"))||0;S.height<window.innerHeight-C?(s.value="top",u.value=C):_==="up"&&s.value==="bottom"||_==="down"&&s.value==="top"?(u.value=window.scrollY+S.top-O,s.value=!0):_==="down"&&D<=0?(u.value=0,s.value="bottom"):_==="up"&&k<=0&&(O?s.value!=="top"&&(u.value=-k+O+C,s.value="top"):(u.value=S.top+k,s.value="top")),l=window.scrollY}return{isStuck:s,stickyStyles:h}}const aV=100,sV=20;function _k(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function bk(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let t=0;for(let n=e.length-1;n>0;n--){if(e[n].t===e[n-1].t)continue;const r=_k(t),s=(e[n].d-e[n-1].d)/(e[n].t-e[n-1].t);t+=(s-r)*Math.abs(s),n===e.length-1&&(t*=.5)}return _k(t)*1e3}function oV(){const e={};function t(s){Array.from(s.changedTouches).forEach(u=>{(e[u.identifier]??(e[u.identifier]=new pO(sV))).push([s.timeStamp,u])})}function n(s){Array.from(s.changedTouches).forEach(u=>{delete e[u.identifier]})}function r(s){var _;const u=(_=e[s])==null?void 0:_.values().reverse();if(!u)throw new Error(`No samples for touch id ${s}`);const h=u[0],l=[],v=[];for(const S of u){if(h[0]-S[0]>aV)break;l.push({t:S[0],d:S[1].clientX}),v.push({t:S[0],d:S[1].clientY})}return{x:bk(l),y:bk(v),get direction(){const{x:S,y:C}=this,[k,D]=[Math.abs(S),Math.abs(C)];return k>D&&S>=0?"right":k>D&&S<=0?"left":D>k&&C>=0?"down":D>k&&C<=0?"up":lV()}}}return{addMovement:t,endTouch:n,getVelocity:r}}function lV(){throw new Error}function cV(e){let{isActive:t,isTemporary:n,width:r,touchless:s,position:u}=e;Oa(()=>{window.addEventListener("touchstart",N,{passive:!0}),window.addEventListener("touchmove",j,{passive:!1}),window.addEventListener("touchend",X,{passive:!0})}),br(()=>{window.removeEventListener("touchstart",N),window.removeEventListener("touchmove",j),window.removeEventListener("touchend",X)});const h=Q(()=>["left","right"].includes(u.value)),{addMovement:l,endTouch:v,getVelocity:_}=oV();let S=!1;const C=Ut(!1),k=Ut(0),D=Ut(0);let O;function R(le,ie){return(u.value==="left"?le:u.value==="right"?document.documentElement.clientWidth-le:u.value==="top"?le:u.value==="bottom"?document.documentElement.clientHeight-le:ed())-(ie?r.value:0)}function F(le){let ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const se=u.value==="left"?(le-D.value)/r.value:u.value==="right"?(document.documentElement.clientWidth-le-D.value)/r.value:u.value==="top"?(le-D.value)/r.value:u.value==="bottom"?(document.documentElement.clientHeight-le-D.value)/r.value:ed();return ie?Math.max(0,Math.min(1,se)):se}function N(le){if(s.value)return;const ie=le.changedTouches[0].clientX,se=le.changedTouches[0].clientY,H=25,Z=u.value==="left"?ie<H:u.value==="right"?ie>document.documentElement.clientWidth-H:u.value==="top"?se<H:u.value==="bottom"?se>document.documentElement.clientHeight-H:ed(),ne=t.value&&(u.value==="left"?ie<r.value:u.value==="right"?ie>document.documentElement.clientWidth-r.value:u.value==="top"?se<r.value:u.value==="bottom"?se>document.documentElement.clientHeight-r.value:ed());(Z||ne||t.value&&n.value)&&(S=!0,O=[ie,se],D.value=R(h.value?ie:se,t.value),k.value=F(h.value?ie:se),v(le),l(le))}function j(le){const ie=le.changedTouches[0].clientX,se=le.changedTouches[0].clientY;if(S){if(!le.cancelable){S=!1;return}const Z=Math.abs(ie-O[0]),ne=Math.abs(se-O[1]);(h.value?Z>ne&&Z>3:ne>Z&&ne>3)?(C.value=!0,S=!1):(h.value?ne:Z)>3&&(S=!1)}if(!C.value)return;le.preventDefault(),l(le);const H=F(h.value?ie:se,!1);k.value=Math.max(0,Math.min(1,H)),H>1?D.value=R(h.value?ie:se,!0):H<0&&(D.value=R(h.value?ie:se,!1))}function X(le){if(S=!1,!C.value)return;l(le),C.value=!1;const ie=_(le.changedTouches[0].identifier),se=Math.abs(ie.x),H=Math.abs(ie.y);(h.value?se>H&&se>400:H>se&&H>3)?t.value=ie.direction===({left:"right",right:"left",top:"down",bottom:"up"}[u.value]||ed()):t.value=k.value>.5}const ee=Q(()=>C.value?{transform:u.value==="left"?`translateX(calc(-100% + ${k.value*r.value}px))`:u.value==="right"?`translateX(calc(100% - ${k.value*r.value}px))`:u.value==="top"?`translateY(calc(-100% + ${k.value*r.value}px))`:u.value==="bottom"?`translateY(calc(100% - ${k.value*r.value}px))`:ed(),transition:"none"}:void 0);return{isDragging:C,dragProgress:k,dragStyles:ee}}function ed(){throw new Error}const uV=["start","end","left","right","top","bottom"],dV=Xe({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>uV.includes(e)},sticky:Boolean,...Ws(),...pn(),...ET(),...Ss(),...Yg(),...Wi(),...cr({tag:"nav"}),...Tr()},"VNavigationDrawer"),hV=At()({name:"VNavigationDrawer",props:dV(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:s}=t;const{isRtl:u}=ws(),{themeClasses:h}=Hr(e),{borderClasses:l}=Co(e),{backgroundColorClasses:v,backgroundColorStyles:_}=Li(Ct(e,"color")),{elevationClasses:S}=Ys(e),{displayClasses:C,mobile:k}=Ad(e),{roundedClasses:D}=sa(e),O=YT(),R=xn(e,"modelValue",null,Ze=>!!Ze),{ssrBootStyles:F}=Kf(),{scopeId:N}=iv(),j=lt(),X=Ut(!1),ee=Q(()=>e.rail&&e.expandOnHover&&X.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),le=Q(()=>Q_(e.location,u.value)),ie=Q(()=>!e.permanent&&(k.value||e.temporary)),se=Q(()=>e.sticky&&!ie.value&&le.value!=="bottom");ms(()=>e.expandOnHover&&e.rail!=null,()=>{ut(X,Ze=>r("update:rail",!Ze))}),ms(()=>!e.disableResizeWatcher,()=>{ut(ie,Ze=>!e.permanent&&ar(()=>R.value=!Ze))}),ms(()=>!e.disableRouteWatcher&&!!O,()=>{ut(O.currentRoute,()=>ie.value&&(R.value=!1))}),ut(()=>e.permanent,Ze=>{Ze&&(R.value=!0)}),Ug(()=>{e.modelValue!=null||ie.value||(R.value=e.permanent||!k.value)});const{isDragging:H,dragProgress:Z,dragStyles:ne}=cV({isActive:R,isTemporary:ie,width:ee,touchless:Ct(e,"touchless"),position:le}),_e=Q(()=>{const Ze=ie.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):ee.value;return H.value?Ze*Z.value:Ze}),{layoutItemStyles:te,layoutItemScrimStyles:Se}=Zg({id:e.name,order:Q(()=>parseInt(e.order,10)),position:le,layoutSize:_e,elementSize:ee,active:Q(()=>R.value||H.value),disableTransitions:Q(()=>H.value),absolute:Q(()=>e.absolute||se.value&&typeof me.value!="string")}),{isStuck:me,stickyStyles:Ve}=iV({rootEl:j,isSticky:se,layoutItemStyles:te}),Ge=Li(Q(()=>typeof e.scrim=="string"?e.scrim:null)),$e=Q(()=>({...H.value?{opacity:Z.value*.2,transition:"none"}:void 0,...Se.value}));Ka({VList:{bgColor:"transparent"}});function ke(){X.value=!0}function Pe(){X.value=!1}return zt(()=>{const Ze=s.image||e.image;return E(rn,null,[E(e.tag,wt({ref:j,onMouseenter:ke,onMouseleave:Pe,class:["v-navigation-drawer",`v-navigation-drawer--${le.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":X.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":ie.value,"v-navigation-drawer--active":R.value,"v-navigation-drawer--sticky":se.value},h.value,v.value,l.value,C.value,S.value,D.value,e.class],style:[_.value,te.value,ne.value,F.value,Ve.value,e.style]},N,n),{default:()=>{var Je,Ne,tt;return[Ze&&E("div",{key:"image",class:"v-navigation-drawer__img"},[s.image?E(Qn,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},s.image):E(Gf,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),s.prepend&&E("div",{class:"v-navigation-drawer__prepend"},[(Je=s.prepend)==null?void 0:Je.call(s)]),E("div",{class:"v-navigation-drawer__content"},[(Ne=s.default)==null?void 0:Ne.call(s)]),s.append&&E("div",{class:"v-navigation-drawer__append"},[(tt=s.append)==null?void 0:tt.call(s)])]}}),E(_o,{name:"fade-transition"},{default:()=>[ie.value&&(H.value||R.value)&&!!e.scrim&&E("div",wt({class:["v-navigation-drawer__scrim",Ge.backgroundColorClasses.value],style:[$e.value,Ge.backgroundColorStyles.value],onClick:()=>R.value=!1},N),null)]})])}),{isStuck:me}}}),fV=Xe({...V0({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),xk=At()({name:"VRadio",props:fV(),setup(e,t){let{slots:n}=t;return zt(()=>E(xg,wt(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),n)),{}}}),pV=Xe({height:{type:[Number,String],default:"auto"},...Md(),...za(B0(),["multiple"]),trueIcon:{type:Rn,default:"$radioOn"},falseIcon:{type:Rn,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),mV=At()({name:"VRadioGroup",inheritAttrs:!1,props:pV(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const s=Fa(),u=Q(()=>e.id||`radio-group-${s}`),h=xn(e,"modelValue");return zt(()=>{const[l,v]=Cd(n),_=bo.filterProps(e),S=xg.filterProps(e),C=r.label?r.label({label:e.label,props:{for:u.value}}):e.label;return E(bo,wt({class:["v-radio-group",e.class],style:e.style},l,_,{modelValue:h.value,"onUpdate:modelValue":k=>h.value=k,id:u.value}),{...r,default:k=>{let{id:D,messagesId:O,isDisabled:R,isReadonly:F}=k;return E(rn,null,[C&&E(M0,{id:D.value},{default:()=>[C]}),E(y5,wt(S,{id:D.value,"aria-describedby":O.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:R.value,readonly:F.value,"aria-labelledby":C?D.value:void 0,multiple:!1},v,{modelValue:h.value,"onUpdate:modelValue":N=>h.value=N}),r)])}})}),{}}}),DE=Symbol.for("vuetify:v-tabs"),gV=Xe({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...za(nv({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),Hm=At()({name:"VTab",props:gV(),setup(e,t){let{slots:n,attrs:r}=t;const{textColorClasses:s,textColorStyles:u}=xa(e,"sliderColor"),h=lt(),l=lt(),v=Q(()=>e.direction==="horizontal"),_=Q(()=>{var C,k;return((k=(C=h.value)==null?void 0:C.group)==null?void 0:k.isSelected.value)??!1});function S(C){var D,O;let{value:k}=C;if(k){const R=(O=(D=h.value)==null?void 0:D.$el.parentElement)==null?void 0:O.querySelector(".v-tab--selected .v-tab__slider"),F=l.value;if(!R||!F)return;const N=getComputedStyle(R).color,j=R.getBoundingClientRect(),X=F.getBoundingClientRect(),ee=v.value?"x":"y",le=v.value?"X":"Y",ie=v.value?"right":"bottom",se=v.value?"width":"height",H=j[ee],Z=X[ee],ne=H>Z?j[ie]-X[ie]:j[ee]-X[ee],_e=Math.sign(ne)>0?v.value?"right":"bottom":Math.sign(ne)<0?v.value?"left":"top":"center",Se=(Math.abs(ne)+(Math.sign(ne)<0?j[se]:X[se]))/Math.max(j[se],X[se])||0,me=j[se]/X[se]||0,Ve=1.5;Gc(F,{backgroundColor:[N,"currentcolor"],transform:[`translate${le}(${ne}px) scale${le}(${me})`,`translate${le}(${ne/Ve}px) scale${le}(${(Se-1)/Ve+1})`,"none"],transformOrigin:Array(3).fill(_e)},{duration:225,easing:kf})}}return zt(()=>{const C=nn.filterProps(e);return E(nn,wt({symbol:DE,ref:h,class:["v-tab",e.class],style:e.style,tabindex:_.value?0:-1,role:"tab","aria-selected":String(_.value),active:!1},C,r,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":S}),{...n,default:()=>{var k;return E(rn,null,[((k=n.default)==null?void 0:k.call(n))??e.text,!e.hideSlider&&E("div",{ref:l,class:["v-tab__slider",s.value],style:u.value},null)])}})}),yl({},h)}});function vV(e){return e?e.map(t=>og(t)?t:{text:t,value:t}):[]}const yV=Xe({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...D0({mandatory:"force"}),...Ba(),...cr()},"VTabs"),_V=At()({name:"VTabs",props:yV(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=xn(e,"modelValue"),s=Q(()=>vV(e.items)),{densityClasses:u}=ks(e),{backgroundColorClasses:h,backgroundColorStyles:l}=Li(Ct(e,"bgColor"));return Ka({VTab:{color:Ct(e,"color"),direction:Ct(e,"direction"),stacked:Ct(e,"stacked"),fixed:Ct(e,"fixedTabs"),sliderColor:Ct(e,"sliderColor"),hideSlider:Ct(e,"hideSlider")}}),zt(()=>{const v=vg.filterProps(e);return E(vg,wt(v,{modelValue:r.value,"onUpdate:modelValue":_=>r.value=_,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},u.value,h.value,e.class],style:[{"--v-tabs-height":Jt(e.height)},l.value,e.style],role:"tablist",symbol:DE}),{default:()=>[n.default?n.default():s.value.map(_=>E(Hm,wt(_,{key:_.text}),null))]})}),{}}}),bV=Xe({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Md(),...Yf()},"VTextarea"),xV=At()({name:"VTextarea",directives:{Intersect:P0},inheritAttrs:!1,props:bV(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:s}=t;const u=xn(e,"modelValue"),{isFocused:h,focus:l,blur:v}=Wf(e),_=Q(()=>typeof e.counterValue=="function"?e.counterValue(u.value):(u.value||"").toString().length),S=Q(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function C(_e,te){var Se,me;!e.autofocus||!_e||(me=(Se=te[0].target)==null?void 0:Se.focus)==null||me.call(Se)}const k=lt(),D=lt(),O=Ut(""),R=lt(),F=Q(()=>e.persistentPlaceholder||h.value||e.active);function N(){var _e;R.value!==document.activeElement&&((_e=R.value)==null||_e.focus()),h.value||l()}function j(_e){N(),r("click:control",_e)}function X(_e){r("mousedown:control",_e)}function ee(_e){_e.stopPropagation(),N(),ar(()=>{u.value="",g0(e["onClick:clear"],_e)})}function le(_e){var Se;const te=_e.target;if(u.value=te.value,(Se=e.modelModifiers)!=null&&Se.trim){const me=[te.selectionStart,te.selectionEnd];ar(()=>{te.selectionStart=me[0],te.selectionEnd=me[1]})}}const ie=lt(),se=lt(+e.rows),H=Q(()=>["plain","underlined"].includes(e.variant));Ui(()=>{e.autoGrow||(se.value=+e.rows)});function Z(){e.autoGrow&&ar(()=>{if(!ie.value||!D.value)return;const _e=getComputedStyle(ie.value),te=getComputedStyle(D.value.$el),Se=parseFloat(_e.getPropertyValue("--v-field-padding-top"))+parseFloat(_e.getPropertyValue("--v-input-padding-top"))+parseFloat(_e.getPropertyValue("--v-field-padding-bottom")),me=ie.value.scrollHeight,Ve=parseFloat(_e.lineHeight),Ge=Math.max(parseFloat(e.rows)*Ve+Se,parseFloat(te.getPropertyValue("--v-input-control-height"))),$e=parseFloat(e.maxRows)*Ve+Se||1/0,ke=gs(me??0,Ge,$e);se.value=Math.floor((ke-Se)/Ve),O.value=Jt(ke)})}Oa(Z),ut(u,Z),ut(()=>e.rows,Z),ut(()=>e.maxRows,Z),ut(()=>e.density,Z);let ne;return ut(ie,_e=>{_e?(ne=new ResizeObserver(Z),ne.observe(ie.value)):ne==null||ne.disconnect()}),br(()=>{ne==null||ne.disconnect()}),zt(()=>{const _e=!!(s.counter||e.counter||e.counterValue),te=!!(_e||s.details),[Se,me]=Cd(n),{modelValue:Ve,...Ge}=bo.filterProps(e),$e=rv(e);return E(bo,wt({ref:k,modelValue:u.value,"onUpdate:modelValue":ke=>u.value=ke,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":H.value},e.class],style:e.style},Se,Ge,{centerAffix:se.value===1&&!H.value,focused:h.value}),{...s,default:ke=>{let{id:Pe,isDisabled:Ze,isDirty:Je,isReadonly:Ne,isValid:tt}=ke;return E(Zf,wt({ref:D,style:{"--v-textarea-control-height":O.value},onClick:j,onMousedown:X,"onClick:clear":ee,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},$e,{id:Pe.value,active:F.value||Je.value,centerAffix:se.value===1&&!H.value,dirty:Je.value||e.dirty,disabled:Ze.value,focused:h.value,error:tt.value===!1}),{...s,default:_t=>{let{props:{class:kt,...St}}=_t;return E(rn,null,[e.prefix&&E("span",{class:"v-text-field__prefix"},[e.prefix]),gi(E("textarea",wt({ref:R,class:kt,value:u.value,onInput:le,autofocus:e.autofocus,readonly:Ne.value,disabled:Ze.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:N,onBlur:v},St,me),null),[[So("intersect"),{handler:C},null,{once:!0}]]),e.autoGrow&&gi(E("textarea",{class:[kt,"v-textarea__sizer"],id:`${St.id}-sizer`,"onUpdate:modelValue":Fe=>u.value=Fe,ref:ie,readonly:!0,"aria-hidden":"true"},null),[[tT,u.value]]),e.suffix&&E("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:te?ke=>{var Pe;return E(rn,null,[(Pe=s.details)==null?void 0:Pe.call(s,ke),_e&&E(rn,null,[E("span",null,null),E(N0,{active:e.persistentCounter||h.value,value:_.value,max:S.value},s.counter)])])}:void 0})}),yl({},k,D,R)}}),wV=Xe({loading:Boolean,toggleIcon:Rn,...BA({slim:!0})},"VTreeviewItem"),kb=At()({name:"VTreeviewItem",props:wV(),setup(e,t){let{attrs:n,slots:r,emit:s}=t;const u=jf(e,n),h=Q(()=>e.value===void 0?u.href.value:e.value),l=lt(),v=Q(()=>{var k;return!e.disabled&&e.link!==!1&&(e.link||u.isClickable.value||e.value!=null&&!!((k=l.value)!=null&&k.list))});function _(k){var D,O,R;!((D=l.value)!=null&&D.isGroupActivator)||!v.value||e.value!=null&&((R=l.value)==null||R.select(!((O=l.value)!=null&&O.isSelected),k))}function S(k){(k.key==="Enter"||k.key===" ")&&(k.preventDefault(),_(k))}const C=yt(GA,{visibleIds:lt()}).visibleIds;return zt(()=>{const k=kr.filterProps(e),D=r.prepend||e.toggleIcon;return E(kr,wt({ref:l},k,{class:["v-treeview-item",{"v-treeview-item--filtered":C.value&&!C.value.has(h.value)},e.class],onClick:_,onKeydown:v.value&&S}),{...r,prepend:D?O=>{var R;return E(rn,null,[e.toggleIcon&&E(n5,{start:!1},{default:()=>[E(nn,{density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text"},{loader(){return E(WT,{indeterminate:"disable-shrink",size:"20",width:"2"},null)}})]}),(R=r.prepend)==null?void 0:R.call(r,O)])}:void 0})}),{}}}),ME=Xe({loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,selectable:Boolean},"VTreeviewChildren"),wg=At()({name:"VTreeviewChildren",props:ME(),setup(e,t){let{emit:n,slots:r}=t;const s=Ut(!1),u=Ut(!1);function h(v){return new Promise(_=>{var S;if(!((S=e.items)!=null&&S.length)||!e.loadChildren||u.value)return _();s.value=!0,e.loadChildren(v).then(_)}).then(()=>{u.value=!0}).finally(()=>{s.value=!1})}function l(v,_){v.stopPropagation(),h(_)}return()=>{var v,_;return((v=r.default)==null?void 0:v.call(r))??((_=e.items)==null?void 0:_.map(S=>{var N;let{children:C,props:k,raw:D}=S;const O={prepend:r.prepend?j=>{var X;return(X=r.prepend)==null?void 0:X.call(r,{...j,item:D})}:e.selectable?j=>{let{isSelected:X,isIndeterminate:ee}=j;return E(Ld,{key:D.value,tabindex:"-1",modelValue:X,loading:s.value,indeterminate:ee,onClick:le=>l(le,D)},null)}:void 0,append:r.append?j=>{var X;return(X=r.append)==null?void 0:X.call(r,{...j,item:D})}:void 0,title:r.title?j=>{var X;return(X=r.title)==null?void 0:X.call(r,{...j,item:D})}:void 0},R=bb.filterProps(k),F=wg.filterProps(e);return C?E(bb,wt({value:k==null?void 0:k.value},R),{activator:j=>{let{props:X}=j;return E(kb,wt(k,X,{loading:s.value,onClick:ee=>l(ee,D)}),O)},default:()=>E(wg,wt(F,{items:C}),r)}):((N=r.item)==null?void 0:N.call(r,{props:k}))??E(kb,k,O)}))}}});function LE(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];for(const n of e)t.push(n),n.children&&LE(n.children,t);return t}const SV=Xe({openAll:Boolean,search:String,...U0({filterKeys:["title"]}),...ME(),...za(HA({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",selectStrategy:"independent",openStrategy:"multiple",slim:!0}),["nav"])},"VTreeview"),kV=At()({name:"VTreeview",props:SV(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n}=t;const{items:r}=jA(e),s=Ct(e,"activeColor"),u=Ct(e,"baseColor"),h=Ct(e,"color"),l=xn(e,"opened"),v=xn(e,"activated"),_=xn(e,"selected"),S=lt(),C=Q(()=>LE(r.value)),k=Ct(e,"search"),{filteredItems:D}=q0(e,C,k),O=Q(()=>k.value?new Set(D.value.flatMap(j=>[...R(j.props.value),...F(j.props.value)])):null);function R(j){var le;const X=[];let ee=j;for(;ee!=null;)X.unshift(ee),ee=(le=S.value)==null?void 0:le.parents.get(ee);return X}function F(j){var le,ie;const X=[],ee=(((le=S.value)==null?void 0:le.children.get(j))??[]).slice();for(;ee.length;){const se=ee.shift();se&&(X.push(se),ee.push(...(((ie=S.value)==null?void 0:ie.children.get(se))??[]).slice()))}return X}ut(()=>e.openAll,j=>{l.value=j?N(r.value):[]},{immediate:!0});function N(j){let X=[];for(const ee of j)ee.children&&(X.push(ee.value),ee.children&&(X=X.concat(N(ee.children))));return X}return bn(GA,{visibleIds:O}),Ka({VTreeviewGroup:{activeColor:s,baseColor:u,color:h,collapseIcon:Ct(e,"collapseIcon"),expandIcon:Ct(e,"expandIcon")},VTreeviewItem:{activeClass:Ct(e,"activeClass"),activeColor:s,baseColor:u,color:h,density:Ct(e,"density"),disabled:Ct(e,"disabled"),lines:Ct(e,"lines"),variant:Ct(e,"variant")}}),zt(()=>{const j=If.filterProps(e),X=wg.filterProps(e);return E(If,wt({ref:S},j,{class:["v-treeview",e.class],style:e.style,opened:l.value,"onUpdate:opened":ee=>l.value=ee,activated:v.value,"onUpdate:activated":ee=>v.value=ee,selected:_.value,"onUpdate:selected":ee=>_.value=ee}),{default:()=>[E(wg,wt(X,{items:r.value}),n)]})}),{open}}}),CV=Object.freeze(Object.defineProperty({__proto__:null,VCalendar:RB,VCalendarDay:qm,VCalendarHeader:hb,VCalendarInterval:cb,VCalendarIntervalEvent:lb,VCalendarMonthDay:fA,VConfirmEdit:zB,VEmptyState:BB,VFab:NB,VNumberInput:JB,VPicker:fb,VPickerTitle:gA,VSparkline:n3,VSpeedDial:E3,VTimePicker:z3,VTimePickerClock:vb,VTimePickerControls:yb,VTreeview:kV,VTreeviewGroup:bb,VTreeviewItem:kb},Symbol.toStringTag,{value:"Module"})),Kr=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},TV={props:["title","subtitle"]},AV={class:"text-center text-h2"},EV={class:"text-subtitle-1 text-center"};function IV(e,t,n,r,s,u){return fn(),Bn(Dr,null,{default:Ie(()=>[er("h1",AV,qs(n.title),1),er("p",EV,qs(n.subtitle),1)]),_:1})}const PV=Kr(TV,[["render",IV]]);var or={};const DV="",MV="",LV="",RV="",OV="",zV="",FV="",BV="",VV="",NV="",$V="",UV="",qV="",jV="",HV="",GV="",WV="",YV="",ZV="",KV="",XV="",JV="",QV="",e6="",t6="",n6="",r6="&",i6="&",a6="",s6="",o6="",l6="",c6="",u6="",d6="",h6="",f6="",p6="",m6="",g6="",v6="",y6="",_6="",b6="",x6="",w6="",S6="",k6="",C6="",T6="",A6="",E6="",I6="",P6="",D6="",M6="",L6="",R6="",O6="",z6="",F6="",B6="'",V6="",N6="",$6="",U6="",q6="",j6="",H6="",G6="",W6="*",Y6="",Z6="",K6="",X6="",J6="",Q6="",eN="",tN="",nN="",rN="",iN="",aN="",sN="",oN="",lN="",cN="",uN="",dN="",hN="",fN="",pN="",mN="",gN="",vN="",yN="",_N="",bN="",xN="",wN="",SN="",kN="",CN="",TN="",AN="",EN="",IN="",PN="",DN="",MN="",LN="",RN="",ON="",zN="",FN="",BN="",VN="",NN="",$N="",UN="",qN="",jN="",HN="",GN="",WN="",YN="",ZN="",KN="",XN="",JN="",QN="",e8="",t8="",n8="",r8="=",i8="",a8="",s8="",o8="",l8="",c8="",u8="",d8="",h8="",f8="",p8="",m8="",g8="",v8="",y8="",_8="",b8="",x8="",w8="",S8="",k8="",C8="",T8="",A8="",E8="",I8="",P8="",D8="",M8="",L8="",R8="",O8="",z8="",F8="",B8="",V8="",N8="",$8="",U8="",q8="",j8="",H8="",G8="",W8="",Y8="",Z8="",K8="",X8="",J8="",Q8="",e$="",t$="",n$="",r$="",i$="",a$="",s$="",o$="",l$="",c$="",u$="",d$="",h$="\\",f$="",p$="",m$="",g$="",v$="",y$="",_$="",b$="",x$="",w$="",S$="",k$="",C$="",T$="",A$="",E$="",I$="",P$="",D$="",M$="",L$="",R$="",O$="",z$="",F$="",B$="",V$="",N$="",$$="",U$="",q$="",j$="",H$="",G$="",W$="",Y$="",Z$="",K$="",X$="",J$="",Q$="",e9="",t9="",n9="",r9="",i9="",a9="",s9="",o9="",l9="",c9="",u9="",d9="",h9="",f9="",p9="",m9="",g9="",v9="",y9="",_9="",b9="",x9="",w9="",S9="",k9="",C9="",T9="",A9="",E9="",I9="",P9="",D9=":",M9="",L9="",R9="",O9="",z9=",",F9="@",B9="",V9="",N9="",$9="",U9="",q9="",j9="",H9="",G9="",W9="",Y9="",Z9="",K9="",X9="",J9="",Q9="",eU="",tU="",nU="",rU="",iU="",aU="",sU="",oU="",lU="",cU="",uU="",dU="",hU="",fU="",pU="",mU="",gU="",vU="",yU="",_U="",bU="",xU="",wU="",SU="",kU="",CU="",TU="",AU="",EU="",IU="",PU="",DU="",MU="",LU="",RU="",OU="",zU="",FU="",BU="",VU="",NU="",$U="",UU="",qU="",jU="",HU="",GU="",WU="",YU="",ZU="",KU="",XU="",JU="",QU="",eq="",tq="",nq="",rq="",iq="",aq="",sq="",oq="",lq="",cq="",uq="",dq="",hq="",fq="",pq="",mq="",gq="",vq="",yq="",_q="",bq="",xq="",wq="`",Sq="",kq="",Cq="",Tq="",Aq="",Eq="",Iq="",Pq="",Dq="",Mq="",Lq="",Rq="",Oq="",zq="",Fq="",Bq="",Vq="",Nq="",$q="$",Uq="",qq="",jq="",Hq="",Gq="",Wq="",Yq="",Zq="",Kq="",Xq="",Jq="",Qq="",e7="",t7="",n7="",r7="",i7="",a7="",s7="",o7="",l7="",c7="",u7="",d7="",h7="",f7="",p7="",m7="",g7="",v7="",y7="",_7="",b7="",x7="",w7="",S7="",k7="",C7="",T7="",A7="",E7="",I7="",P7="",D7="",M7="",L7="",R7="",O7="",z7="",F7="",B7="",V7="",N7="",$7="",U7="",q7="",j7="",H7="",G7="",W7="",Y7="",Z7="",K7="",X7="",J7="",Q7="",ej="",tj="",nj="",rj="",ij="",aj="",sj="",oj="",lj="",cj="",uj="",dj="",hj="",fj="",pj="",mj="",gj="",vj="",yj="",_j="",bj="",xj="",wj="",Sj="",kj="",Cj="",Tj="",Aj="",Ej="",Ij="",Pj="",Dj="",Mj="",Lj="",Rj="",Oj="",zj="",Fj="",Bj="",Vj="",Nj="",$j="",Uj="",qj="",jj="",Hj="",Gj="",Wj="",Yj="",Zj="",Kj="",Xj="",Jj="",Qj="",eH="",tH="",nH="",rH="=",iH="",aH="",sH="",oH="",lH="",cH="",uH="",dH="",hH="",fH="",pH="",mH="",gH="",vH="",yH="",_H="",bH="",xH="",wH="",SH="",kH="!",CH="",TH="",AH="",EH="",IH="",PH="",DH="",MH="",LH="",RH="",OH="",zH="",FH="",BH="",VH="",NH="",$H="",UH="fj",qH="",jH="",HH="",GH="",WH="",YH="",ZH="",KH="",XH="",JH="",QH="",eG="",tG="",nG="",rG="",iG="",aG="",sG="",oG="",lG="",cG="",uG="",dG="",hG="",fG="",pG="",mG="",gG="",vG="",yG="",_G="",bG="",xG="",wG="",SG="",kG="",CG="",TG="",AG="",EG="",IG="",PG="",DG="",MG="",LG="",RG="",OG="",zG="",FG="",BG="",VG="",NG="",$G="",UG="",qG="",jG="",HG="",GG="",WG="",YG="",ZG="",KG="",XG="",JG="",QG="",eW="",tW="",nW="",rW="",iW="",aW="",sW="",oW="",lW="",cW="",uW="",dW="",hW="",fW="",pW="",mW="",gW="`",vW="",yW="",_W="",bW="",xW="",wW="",SW="",kW="",CW="",TW="",AW="",EW="",IW="",PW="",DW=">",MW=">",LW="",RW="",OW="",zW="",FW="",BW="",VW="",NW="",$W="",UW="",qW="",jW="",HW="",GW="",WW="",YW="",ZW="",KW="",XW="",JW="",QW="",eY="",tY="",nY="^",rY="",iY="",aY="",sY="",oY="",lY="",cY="",uY="",dY="",hY="",fY="",pY="",mY="",gY="",vY="",yY="",_Y="",bY="",xY="",wY="",SY="",kY="",CY="",TY="",AY="",EY="",IY="",PY="",DY="",MY="",LY="",RY="",OY="",zY="",FY="",BY="",VY="",NY="",$Y="",UY="",qY="",jY="",HY="",GY="",WY="",YY="",ZY="",KY="",XY="",JY="",QY="",eZ="",tZ="",nZ="",rZ="",iZ="",aZ="",sZ="",oZ="",lZ="",cZ="",uZ="",dZ="",hZ="",fZ="",pZ="",mZ="",gZ="",vZ="",yZ="",_Z="",bZ="",xZ="",wZ="",SZ="",kZ="",CZ="",TZ="",AZ="",EZ="",IZ="",PZ="",DZ="",MZ="",LZ="",RZ="",OZ="",zZ="",FZ="",BZ="",VZ="",NZ="",$Z="",UZ="",qZ="",jZ="",HZ="",GZ="",WZ="",YZ="",ZZ="",KZ="",XZ="",JZ="",QZ="",eK="",tK="",nK="",rK="",iK="",aK="",sK="",oK="",lK="",cK="",uK="",dK="",hK="",fK="",pK="",mK="",gK="",vK="",yK="",_K="",bK="",xK="",wK="",SK="",kK="",CK="",TK="",AK="",EK="",IK="",PK="",DK="",MK="",LK="",RK="",OK="",zK="",FK="",BK="",VK="",NK="",$K="",UK="",qK="",jK="",HK="",GK="",WK="",YK="",ZK="",KK="",XK="",JK="",QK="",eX="",tX="",nX="",rX="",iX="",aX="",sX="",oX="",lX="",cX="",uX="{",dX="[",hX="",fX="",pX="",mX="",gX="",vX="",yX="",_X="",bX="{",xX="",wX="",SX="",kX="",CX="",TX="",AX="",EX="",IX="",PX="",DX="",MX="",LX="",RX="",OX="",zX="",FX="",BX="",VX="",NX="",$X="",UX="",qX="",jX="",HX="",GX="",WX="",YX="",ZX="",KX="",XX="",JX="",QX="",eJ="",tJ="",nJ="",rJ="",iJ="",aJ="",sJ="",oJ="",lJ="",cJ="",uJ="",dJ="",hJ="",fJ="",pJ="",mJ="",gJ="",vJ="",yJ="",_J="",bJ="",xJ="",wJ="",SJ="",kJ="",CJ="",TJ="",AJ="",EJ="",IJ="",PJ="",DJ="",MJ="",LJ="",RJ="",OJ="",zJ="",FJ="",BJ="",VJ="",NJ="",$J="",UJ="",qJ="",jJ="",HJ="",GJ="",WJ="",YJ="",ZJ="",KJ="",XJ="",JJ="",QJ="",eQ="",tQ="",nQ="",rQ="",iQ="",aQ="",sQ="",oQ="",lQ="",cQ="",uQ="",dQ="",hQ="",fQ="",pQ="",mQ="",gQ="",vQ="",yQ="",_Q="",bQ="",xQ="",wQ="",SQ="",kQ="",CQ="",TQ="",AQ="",EQ="",IQ="",PQ="",DQ="",MQ="",LQ="",RQ="",OQ="_",zQ="",FQ="",BQ="",VQ="",NQ="",$Q="(",UQ="",qQ="",jQ="",HQ="",GQ="",WQ="",YQ="",ZQ="",KQ="",XQ="",JQ="",QQ="",eee="",tee="",nee="",ree="[",iee="",aee="",see="",oee="",lee="",cee="",uee="<",dee="<",hee="",fee="",pee="",mee="",gee="",vee="",yee="",_ee="",bee="",xee="",wee="",See="",kee="",Cee="",Tee="",Aee="",Eee="",Iee="",Pee="",Dee="",Mee="",Lee="",Ree="",Oee="",zee="",Fee="",Bee="",Vee="",Nee="",$ee="",Uee="",qee="",jee="",Hee="",Gee="",Wee="",Yee="*",Zee="",Kee="",Xee="",Jee="",Qee="",ete="",tte="",nte="",rte="",ite="",ate="",ste="",ote="",lte="",cte="",ute="",dte="",hte="",fte="",pte="",mte="",gte="",vte="",yte="",_te="",bte="",xte="",wte="",Ste="",kte="",Cte="",Tte="",Ate="",Ete="",Ite="",Pte="",Dte="",Mte="",Lte="",Rte="",Ote="",zte="",Fte="",Bte="",Vte="",Nte="",$te="",Ute="",qte="",jte="",Hte="",Gte="",Wte="",Yte="",Zte="",Kte="",Xte="",Jte="",Qte="",ene="",tne="",nne="",rne="",ine=`
`,ane="",sne="",one="",lne="",cne="",une="",dne="",hne="",fne="",pne="",mne="",gne="",vne="",yne="",_ne="",bne="",xne="",wne="",Sne="",kne="",Cne="",Tne="",Ane="",Ene="",Ine="",Pne="",Dne="",Mne="",Lne="",Rne="",One="",zne="",Fne="",Bne="",Vne="",Nne="",$ne="",Une="",qne="",jne="",Hne="",Gne="",Wne="",Yne="",Zne="",Kne="",Xne="",Jne="",Qne="",ere="",tre="",nre="",rre="",ire="",are="",sre="",ore="",lre="",cre="",ure="",dre="",hre="",fre="",pre="",mre="",gre="",vre="",yre="",_re="",bre="",xre="",wre="",Sre="",kre="",Cre="",Tre="",Are="",Ere="",Ire="",Pre="",Dre="",Mre="",Lre="",Rre="",Ore="",zre="",Fre="",Bre="",Vre="",Nre="",$re="",Ure="",qre="",jre="",Hre="",Gre="",Wre="",Yre="",Zre="",Kre="",Xre="",Jre="",Qre="",eie="",tie="",nie="",rie="",iie="",aie="",sie="",oie="",lie="",cie="",uie="",die="",hie="",fie="",pie="",mie="",gie="",vie="",yie="",_ie="",bie="",xie="",wie="",Sie="",kie="",Cie="",Tie="",Aie="",Eie="",Iie="",Pie="",Die="",Mie="",Lie="",Rie="",Oie="",zie="",Fie="",Bie="",Vie="",Nie="",$ie="",Uie="",qie="",jie="",Hie="",Gie="",Wie="",Yie="",Zie="",Kie="",Xie="",Jie="",Qie="",eae="",tae="",nae="",rae="",iae="",aae="",sae="",oae="",lae="",cae="",uae="",dae="",hae="",fae="#",pae="",mae="",gae="",vae="",yae="",_ae="",bae="",xae="",wae=">",Sae="",kae="",Cae="",Tae="",Aae="<",Eae="",Iae="",Pae="",Dae="",Mae="",Lae="",Rae="",Oae="",zae="",Fae="",Bae="",Vae="",Nae="",$ae="",Uae="",qae="",jae="",Hae="",Gae="",Wae="",Yae="",Zae="",Kae="",Xae="",Jae="",Qae="",ese="",tse="",nse="",rse="",ise="",ase="",sse="",ose="",lse="",cse="",use="",dse="",hse="",fse="",pse="",mse="",gse="",vse="",yse="",_se="",bse="",xse="",wse="",Sse="",kse="",Cse="",Tse="",Ase="",Ese="",Ise="",Pse="",Dse="",Mse="",Lse="",Rse="",Ose="",zse="",Fse="",Bse="",Vse="",Nse="",$se="",Use="",qse="",jse="",Hse="",Gse="",Wse="",Yse="",Zse="",Kse="",Xse="",Jse="",Qse="",eoe="",toe="",noe="",roe="",ioe="",aoe="",soe="",ooe="",loe="",coe="",uoe="",doe="",hoe="",foe="",poe="%",moe=".",goe="",voe="",yoe="",_oe="",boe="",xoe="",woe="",Soe="",koe="",Coe="",Toe="",Aoe="",Eoe="",Ioe="",Poe="",Doe="",Moe="",Loe="",Roe="",Ooe="",zoe="+",Foe="",Boe="",Voe="",Noe="",$oe="",Uoe="",qoe="",joe="",Hoe="",Goe="",Woe="",Yoe="",Zoe="",Koe="",Xoe="",Joe="",Qoe="",ele="",tle="",nle="",rle="",ile="",ale="",sle="",ole="",lle="",cle="",ule="",dle="",hle="",fle="",ple="",mle="",gle="",vle="",yle="",_le="",ble="",xle="",wle="",Sle="",kle="",Cle="",Tle="",Ale="",Ele="",Ile="",Ple="",Dle="",Mle="",Lle="",Rle="",Ole="",zle="",Fle="",Ble="",Vle="",Nle="",$le="",Ule="",qle="",jle="",Hle="",Gle="?",Wle="",Yle='"',Zle='"',Kle="",Xle="",Jle="",Qle="",ece="",tce="",nce="",rce="",ice="",ace="",sce="",oce="",lce="",cce="",uce="",dce="",hce="",fce="",pce="",mce="",gce="",vce="",yce="",_ce="",bce="",xce="",wce="",Sce="",kce="",Cce="",Tce="",Ace="",Ece="",Ice="",Pce="",Dce="}",Mce="]",Lce="",Rce="",Oce="",zce="",Fce="",Bce="",Vce="",Nce="",$ce="}",Uce="",qce="",jce="",Hce="",Gce="",Wce="",Yce="",Zce="",Kce="",Xce="",Jce="",Qce="",eue="",tue="",nue="",rue="",iue="",aue="",sue="",oue="",lue="",cue="",uue="",due="",hue="",fue="",pue="",mue="",gue="",vue="",yue="",_ue="",bue="",xue="",wue="",Sue="",kue="",Cue="",Tue="",Aue="",Eue="",Iue="",Pue="",Due="",Mue="",Lue="",Rue="",Oue="",zue="",Fue="",Bue="",Vue="",Nue="",$ue="",Uue="",que="",jue="",Hue="",Gue="",Wue="",Yue="",Zue="",Kue="",Xue="",Jue="",Que="",ede="",tde="",nde="",rde="",ide="",ade="",sde="",ode="",lde="",cde="",ude="",dde="",hde=")",fde="",pde="",mde="",gde="",vde="",yde="",_de="",bde="",xde="",wde="]",Sde="",kde="",Cde="",Tde="",Ade="",Ede="",Ide="",Pde="",Dde="",Mde="",Lde="",Rde="",Ode="",zde="",Fde="",Bde="",Vde="",Nde="",$de="",Ude="",qde="",jde="",Hde="",Gde="",Wde="",Yde="",Zde="",Kde="",Xde="",Jde="",Qde="",ehe="",the="",nhe="",rhe="",ihe="",ahe="",she="",ohe="",lhe="",che="",uhe=";",dhe="",hhe="",fhe="",phe="",mhe="",ghe="",vhe="",yhe="",_he="",bhe="",xhe="",whe="",She="",khe="",Che="",The="",Ahe="",Ehe="",Ihe="",Phe="",Dhe="",Mhe="",Lhe="",Rhe="",Ohe="",zhe="",Fhe="",Bhe="",Vhe="",Nhe="",$he="",Uhe="",qhe="",jhe="",Hhe="",Ghe="",Whe="",Yhe="",Zhe="",Khe="",Xhe="",Jhe="",Qhe="",efe="",tfe="",nfe="",rfe="",ife="",afe="/",sfe="",ofe="",lfe="",cfe="",ufe="",dfe="",hfe="",ffe="",pfe="",mfe="",gfe="",vfe="",yfe="",_fe="",bfe="",xfe="",wfe="",Sfe="",kfe="",Cfe="",Tfe="",Afe="",Efe="",Ife="",Pfe="",Dfe="",Mfe="",Lfe="",Rfe="",Ofe="",zfe="",Ffe="",Bfe="",Vfe="",Nfe="",$fe="",Ufe="",qfe="",jfe="",Hfe="",Gfe="",Wfe="",Yfe="",Zfe="",Kfe="",Xfe="",Jfe="",Qfe="",epe="",tpe="",npe="",rpe="",ipe="",ape="",spe="",ope="",lpe="",cpe="",upe="",dpe="",hpe="",fpe="",ppe="",mpe="",gpe="",vpe="",ype="",_pe="",bpe="",xpe="",wpe="",Spe="",kpe="",Cpe="",Tpe="",Ape="",Epe="",Ipe="",Ppe="",Dpe="",Mpe="",Lpe="",Rpe="",Ope="",zpe="",Fpe="",Bpe="",Vpe="",Npe="",$pe="",Upe="",qpe="",jpe="",Hpe="",Gpe="",Wpe="",Ype="",Zpe="",Kpe="",Xpe="",Jpe="",Qpe="",eme="",tme="",nme="",rme="",ime="",ame="",sme="",ome="",lme="",cme="",ume="	",dme="",hme="",fme="",pme="",mme="",gme="",vme="",yme="",_me="",bme="",xme="",wme="",Sme="",kme="",Cme="",Tme="",Ame="",Eme="",Ime="",Pme="",Dme="",Mme="",Lme="",Rme="",Ome="",zme="",Fme="",Bme="",Vme="",Nme="",$me="",Ume="",qme="",jme="",Hme="",Gme="",Wme="",Yme="",Zme="",Kme="",Xme="",Jme="",Qme="",ege="",tge="",nge="",rge="",ige="",age="",sge="",oge="",lge="",cge="",uge="",dge="",hge="",fge="",pge="",mge="",gge="",vge="",yge="",_ge="",bge="",xge="",wge="",Sge="",kge="",Cge="",Tge="",Age="",Ege="",Ige="",Pge="",Dge="",Mge="",Lge="",Rge="",Oge="",zge="",Fge="",Bge="",Vge="",Nge="",$ge="",Uge="",qge="",jge="",Hge="",Gge="",Wge="",Yge="",Zge="",Kge="",Xge="",Jge="",Qge="",eve="",tve="",nve="",rve="",ive="",ave="",sve="",ove="",lve="",cve="",uve="",dve="",hve="",fve="",pve="_",mve="",gve="",vve="",yve="",_ve="",bve="",xve="",wve="",Sve="",kve="",Cve="",Tve="",Ave="",Eve="",Ive="",Pve="",Dve="",Mve="",Lve="",Rve="",Ove="",zve="",Fve="",Bve="",Vve="",Nve="",$ve="",Uve="",qve="",jve="",Hve="",Gve="",Wve="",Yve="",Zve="",Kve="",Xve="",Jve="",Qve="",eye="",tye="",nye="",rye="",iye="",aye="",sye="",oye="",lye="",cye="",uye="",dye="",hye="",fye="",pye="",mye="",gye="",vye="",yye="",_ye="",bye="",xye="",wye="",Sye="",kye="",Cye="",Tye="",Aye="",Eye="",Iye="",Pye="",Dye="",Mye="",Lye="",Rye="",Oye="",zye="",Fye="",Bye="",Vye="",Nye="",$ye="",Uye="|",qye="",jye="|",Hye="",Gye="",Wye="|",Yye="",Zye="",Kye="",Xye="",Jye="",Qye="",e_e="",t_e="",n_e="",r_e="",i_e="",a_e="",s_e="",o_e="",l_e="",c_e="",u_e="",d_e="",h_e="",f_e="",p_e="",m_e="",g_e="",v_e="",y_e="",__e="",b_e="",x_e="",w_e="",S_e="",k_e="",C_e="",T_e="",A_e="",E_e="",I_e="",P_e="",D_e="",M_e="",L_e="",R_e="",O_e="",z_e="",F_e="",B_e="",V_e="",N_e="",$_e="",U_e="",q_e="",j_e="",H_e="",G_e="",W_e="",Y_e="",Z_e="",K_e="",X_e="",J_e="",Q_e="",ebe="",tbe="",nbe="",rbe="",ibe="",abe="",sbe="",obe="",lbe="",cbe="",ube="",dbe="",hbe="",fbe="",pbe="",mbe="",gbe="",vbe="",ybe="",_be="",bbe="",xbe="",wbe="",Sbe="",kbe="",Cbe="",Tbe="",Abe="",Ebe="",Ibe="",Pbe="",Dbe="",Mbe="",Lbe="",Rbe="",Obe="",zbe="",Fbe="",Bbe="",Vbe="",Nbe="",$be="",Ube="",qbe="",jbe="",Hbe="",Gbe="",Wbe="",Ybe={Aacute:DV,aacute:MV,Abreve:LV,abreve:RV,ac:OV,acd:zV,acE:FV,Acirc:BV,acirc:VV,acute:NV,Acy:$V,acy:UV,AElig:qV,aelig:jV,af:HV,Afr:GV,afr:WV,Agrave:YV,agrave:ZV,alefsym:KV,aleph:XV,Alpha:JV,alpha:QV,Amacr:e6,amacr:t6,amalg:n6,amp:r6,AMP:i6,andand:a6,And:s6,and:o6,andd:l6,andslope:c6,andv:u6,ang:d6,ange:h6,angle:f6,angmsdaa:p6,angmsdab:m6,angmsdac:g6,angmsdad:v6,angmsdae:y6,angmsdaf:_6,angmsdag:b6,angmsdah:x6,angmsd:w6,angrt:S6,angrtvb:k6,angrtvbd:C6,angsph:T6,angst:A6,angzarr:E6,Aogon:I6,aogon:P6,Aopf:D6,aopf:M6,apacir:L6,ap:R6,apE:O6,ape:z6,apid:F6,apos:B6,ApplyFunction:V6,approx:N6,approxeq:$6,Aring:U6,aring:q6,Ascr:j6,ascr:H6,Assign:G6,ast:W6,asymp:Y6,asympeq:Z6,Atilde:K6,atilde:X6,Auml:J6,auml:Q6,awconint:eN,awint:tN,backcong:nN,backepsilon:rN,backprime:iN,backsim:aN,backsimeq:sN,Backslash:oN,Barv:lN,barvee:cN,barwed:uN,Barwed:dN,barwedge:hN,bbrk:fN,bbrktbrk:pN,bcong:mN,Bcy:gN,bcy:vN,bdquo:yN,becaus:_N,because:bN,Because:xN,bemptyv:wN,bepsi:SN,bernou:kN,Bernoullis:CN,Beta:TN,beta:AN,beth:EN,between:IN,Bfr:PN,bfr:DN,bigcap:MN,bigcirc:LN,bigcup:RN,bigodot:ON,bigoplus:zN,bigotimes:FN,bigsqcup:BN,bigstar:VN,bigtriangledown:NN,bigtriangleup:$N,biguplus:UN,bigvee:qN,bigwedge:jN,bkarow:HN,blacklozenge:GN,blacksquare:WN,blacktriangle:YN,blacktriangledown:ZN,blacktriangleleft:KN,blacktriangleright:XN,blank:JN,blk12:QN,blk14:e8,blk34:t8,block:n8,bne:r8,bnequiv:i8,bNot:a8,bnot:s8,Bopf:o8,bopf:l8,bot:c8,bottom:u8,bowtie:d8,boxbox:h8,boxdl:f8,boxdL:p8,boxDl:m8,boxDL:g8,boxdr:v8,boxdR:y8,boxDr:_8,boxDR:b8,boxh:x8,boxH:w8,boxhd:S8,boxHd:k8,boxhD:C8,boxHD:T8,boxhu:A8,boxHu:E8,boxhU:I8,boxHU:P8,boxminus:D8,boxplus:M8,boxtimes:L8,boxul:R8,boxuL:O8,boxUl:z8,boxUL:F8,boxur:B8,boxuR:V8,boxUr:N8,boxUR:$8,boxv:U8,boxV:q8,boxvh:j8,boxvH:H8,boxVh:G8,boxVH:W8,boxvl:Y8,boxvL:Z8,boxVl:K8,boxVL:X8,boxvr:J8,boxvR:Q8,boxVr:e$,boxVR:t$,bprime:n$,breve:r$,Breve:i$,brvbar:a$,bscr:s$,Bscr:o$,bsemi:l$,bsim:c$,bsime:u$,bsolb:d$,bsol:h$,bsolhsub:f$,bull:p$,bullet:m$,bump:g$,bumpE:v$,bumpe:y$,Bumpeq:_$,bumpeq:b$,Cacute:x$,cacute:w$,capand:S$,capbrcup:k$,capcap:C$,cap:T$,Cap:A$,capcup:E$,capdot:I$,CapitalDifferentialD:P$,caps:D$,caret:M$,caron:L$,Cayleys:R$,ccaps:O$,Ccaron:z$,ccaron:F$,Ccedil:B$,ccedil:V$,Ccirc:N$,ccirc:$$,Cconint:U$,ccups:q$,ccupssm:j$,Cdot:H$,cdot:G$,cedil:W$,Cedilla:Y$,cemptyv:Z$,cent:K$,centerdot:X$,CenterDot:J$,cfr:Q$,Cfr:e9,CHcy:t9,chcy:n9,check:r9,checkmark:i9,Chi:a9,chi:s9,circ:o9,circeq:l9,circlearrowleft:c9,circlearrowright:u9,circledast:d9,circledcirc:h9,circleddash:f9,CircleDot:p9,circledR:m9,circledS:g9,CircleMinus:v9,CirclePlus:y9,CircleTimes:_9,cir:b9,cirE:x9,cire:w9,cirfnint:S9,cirmid:k9,cirscir:C9,ClockwiseContourIntegral:T9,CloseCurlyDoubleQuote:A9,CloseCurlyQuote:E9,clubs:I9,clubsuit:P9,colon:D9,Colon:M9,Colone:L9,colone:R9,coloneq:O9,comma:z9,commat:F9,comp:B9,compfn:V9,complement:N9,complexes:$9,cong:U9,congdot:q9,Congruent:j9,conint:H9,Conint:G9,ContourIntegral:W9,copf:Y9,Copf:Z9,coprod:K9,Coproduct:X9,copy:J9,COPY:Q9,copysr:eU,CounterClockwiseContourIntegral:tU,crarr:nU,cross:rU,Cross:iU,Cscr:aU,cscr:sU,csub:oU,csube:lU,csup:cU,csupe:uU,ctdot:dU,cudarrl:hU,cudarrr:fU,cuepr:pU,cuesc:mU,cularr:gU,cularrp:vU,cupbrcap:yU,cupcap:_U,CupCap:bU,cup:xU,Cup:wU,cupcup:SU,cupdot:kU,cupor:CU,cups:TU,curarr:AU,curarrm:EU,curlyeqprec:IU,curlyeqsucc:PU,curlyvee:DU,curlywedge:MU,curren:LU,curvearrowleft:RU,curvearrowright:OU,cuvee:zU,cuwed:FU,cwconint:BU,cwint:VU,cylcty:NU,dagger:$U,Dagger:UU,daleth:qU,darr:jU,Darr:HU,dArr:GU,dash:WU,Dashv:YU,dashv:ZU,dbkarow:KU,dblac:XU,Dcaron:JU,dcaron:QU,Dcy:eq,dcy:tq,ddagger:nq,ddarr:rq,DD:iq,dd:aq,DDotrahd:sq,ddotseq:oq,deg:lq,Del:cq,Delta:uq,delta:dq,demptyv:hq,dfisht:fq,Dfr:pq,dfr:mq,dHar:gq,dharl:vq,dharr:yq,DiacriticalAcute:_q,DiacriticalDot:bq,DiacriticalDoubleAcute:xq,DiacriticalGrave:wq,DiacriticalTilde:Sq,diam:kq,diamond:Cq,Diamond:Tq,diamondsuit:Aq,diams:Eq,die:Iq,DifferentialD:Pq,digamma:Dq,disin:Mq,div:Lq,divide:Rq,divideontimes:Oq,divonx:zq,DJcy:Fq,djcy:Bq,dlcorn:Vq,dlcrop:Nq,dollar:$q,Dopf:Uq,dopf:qq,Dot:jq,dot:Hq,DotDot:Gq,doteq:Wq,doteqdot:Yq,DotEqual:Zq,dotminus:Kq,dotplus:Xq,dotsquare:Jq,doublebarwedge:Qq,DoubleContourIntegral:e7,DoubleDot:t7,DoubleDownArrow:n7,DoubleLeftArrow:r7,DoubleLeftRightArrow:i7,DoubleLeftTee:a7,DoubleLongLeftArrow:s7,DoubleLongLeftRightArrow:o7,DoubleLongRightArrow:l7,DoubleRightArrow:c7,DoubleRightTee:u7,DoubleUpArrow:d7,DoubleUpDownArrow:h7,DoubleVerticalBar:f7,DownArrowBar:p7,downarrow:m7,DownArrow:g7,Downarrow:v7,DownArrowUpArrow:y7,DownBreve:_7,downdownarrows:b7,downharpoonleft:x7,downharpoonright:w7,DownLeftRightVector:S7,DownLeftTeeVector:k7,DownLeftVectorBar:C7,DownLeftVector:T7,DownRightTeeVector:A7,DownRightVectorBar:E7,DownRightVector:I7,DownTeeArrow:P7,DownTee:D7,drbkarow:M7,drcorn:L7,drcrop:R7,Dscr:O7,dscr:z7,DScy:F7,dscy:B7,dsol:V7,Dstrok:N7,dstrok:$7,dtdot:U7,dtri:q7,dtrif:j7,duarr:H7,duhar:G7,dwangle:W7,DZcy:Y7,dzcy:Z7,dzigrarr:K7,Eacute:X7,eacute:J7,easter:Q7,Ecaron:ej,ecaron:tj,Ecirc:nj,ecirc:rj,ecir:ij,ecolon:aj,Ecy:sj,ecy:oj,eDDot:lj,Edot:cj,edot:uj,eDot:dj,ee:hj,efDot:fj,Efr:pj,efr:mj,eg:gj,Egrave:vj,egrave:yj,egs:_j,egsdot:bj,el:xj,Element:wj,elinters:Sj,ell:kj,els:Cj,elsdot:Tj,Emacr:Aj,emacr:Ej,empty:Ij,emptyset:Pj,EmptySmallSquare:Dj,emptyv:Mj,EmptyVerySmallSquare:Lj,emsp13:Rj,emsp14:Oj,emsp:zj,ENG:Fj,eng:Bj,ensp:Vj,Eogon:Nj,eogon:$j,Eopf:Uj,eopf:qj,epar:jj,eparsl:Hj,eplus:Gj,epsi:Wj,Epsilon:Yj,epsilon:Zj,epsiv:Kj,eqcirc:Xj,eqcolon:Jj,eqsim:Qj,eqslantgtr:eH,eqslantless:tH,Equal:nH,equals:rH,EqualTilde:iH,equest:aH,Equilibrium:sH,equiv:oH,equivDD:lH,eqvparsl:cH,erarr:uH,erDot:dH,escr:hH,Escr:fH,esdot:pH,Esim:mH,esim:gH,Eta:vH,eta:yH,ETH:_H,eth:bH,Euml:xH,euml:wH,euro:SH,excl:kH,exist:CH,Exists:TH,expectation:AH,exponentiale:EH,ExponentialE:IH,fallingdotseq:PH,Fcy:DH,fcy:MH,female:LH,ffilig:RH,fflig:OH,ffllig:zH,Ffr:FH,ffr:BH,filig:VH,FilledSmallSquare:NH,FilledVerySmallSquare:$H,fjlig:UH,flat:qH,fllig:jH,fltns:HH,fnof:GH,Fopf:WH,fopf:YH,forall:ZH,ForAll:KH,fork:XH,forkv:JH,Fouriertrf:QH,fpartint:eG,frac12:tG,frac13:nG,frac14:rG,frac15:iG,frac16:aG,frac18:sG,frac23:oG,frac25:lG,frac34:cG,frac35:uG,frac38:dG,frac45:hG,frac56:fG,frac58:pG,frac78:mG,frasl:gG,frown:vG,fscr:yG,Fscr:_G,gacute:bG,Gamma:xG,gamma:wG,Gammad:SG,gammad:kG,gap:CG,Gbreve:TG,gbreve:AG,Gcedil:EG,Gcirc:IG,gcirc:PG,Gcy:DG,gcy:MG,Gdot:LG,gdot:RG,ge:OG,gE:zG,gEl:FG,gel:BG,geq:VG,geqq:NG,geqslant:$G,gescc:UG,ges:qG,gesdot:jG,gesdoto:HG,gesdotol:GG,gesl:WG,gesles:YG,Gfr:ZG,gfr:KG,gg:XG,Gg:JG,ggg:QG,gimel:eW,GJcy:tW,gjcy:nW,gla:rW,gl:iW,glE:aW,glj:sW,gnap:oW,gnapprox:lW,gne:cW,gnE:uW,gneq:dW,gneqq:hW,gnsim:fW,Gopf:pW,gopf:mW,grave:gW,GreaterEqual:vW,GreaterEqualLess:yW,GreaterFullEqual:_W,GreaterGreater:bW,GreaterLess:xW,GreaterSlantEqual:wW,GreaterTilde:SW,Gscr:kW,gscr:CW,gsim:TW,gsime:AW,gsiml:EW,gtcc:IW,gtcir:PW,gt:DW,GT:MW,Gt:LW,gtdot:RW,gtlPar:OW,gtquest:zW,gtrapprox:FW,gtrarr:BW,gtrdot:VW,gtreqless:NW,gtreqqless:$W,gtrless:UW,gtrsim:qW,gvertneqq:jW,gvnE:HW,Hacek:GW,hairsp:WW,half:YW,hamilt:ZW,HARDcy:KW,hardcy:XW,harrcir:JW,harr:QW,hArr:eY,harrw:tY,Hat:nY,hbar:rY,Hcirc:iY,hcirc:aY,hearts:sY,heartsuit:oY,hellip:lY,hercon:cY,hfr:uY,Hfr:dY,HilbertSpace:hY,hksearow:fY,hkswarow:pY,hoarr:mY,homtht:gY,hookleftarrow:vY,hookrightarrow:yY,hopf:_Y,Hopf:bY,horbar:xY,HorizontalLine:wY,hscr:SY,Hscr:kY,hslash:CY,Hstrok:TY,hstrok:AY,HumpDownHump:EY,HumpEqual:IY,hybull:PY,hyphen:DY,Iacute:MY,iacute:LY,ic:RY,Icirc:OY,icirc:zY,Icy:FY,icy:BY,Idot:VY,IEcy:NY,iecy:$Y,iexcl:UY,iff:qY,ifr:jY,Ifr:HY,Igrave:GY,igrave:WY,ii:YY,iiiint:ZY,iiint:KY,iinfin:XY,iiota:JY,IJlig:QY,ijlig:eZ,Imacr:tZ,imacr:nZ,image:rZ,ImaginaryI:iZ,imagline:aZ,imagpart:sZ,imath:oZ,Im:lZ,imof:cZ,imped:uZ,Implies:dZ,incare:hZ,in:"",infin:fZ,infintie:pZ,inodot:mZ,intcal:gZ,int:vZ,Int:yZ,integers:_Z,Integral:bZ,intercal:xZ,Intersection:wZ,intlarhk:SZ,intprod:kZ,InvisibleComma:CZ,InvisibleTimes:TZ,IOcy:AZ,iocy:EZ,Iogon:IZ,iogon:PZ,Iopf:DZ,iopf:MZ,Iota:LZ,iota:RZ,iprod:OZ,iquest:zZ,iscr:FZ,Iscr:BZ,isin:VZ,isindot:NZ,isinE:$Z,isins:UZ,isinsv:qZ,isinv:jZ,it:HZ,Itilde:GZ,itilde:WZ,Iukcy:YZ,iukcy:ZZ,Iuml:KZ,iuml:XZ,Jcirc:JZ,jcirc:QZ,Jcy:eK,jcy:tK,Jfr:nK,jfr:rK,jmath:iK,Jopf:aK,jopf:sK,Jscr:oK,jscr:lK,Jsercy:cK,jsercy:uK,Jukcy:dK,jukcy:hK,Kappa:fK,kappa:pK,kappav:mK,Kcedil:gK,kcedil:vK,Kcy:yK,kcy:_K,Kfr:bK,kfr:xK,kgreen:wK,KHcy:SK,khcy:kK,KJcy:CK,kjcy:TK,Kopf:AK,kopf:EK,Kscr:IK,kscr:PK,lAarr:DK,Lacute:MK,lacute:LK,laemptyv:RK,lagran:OK,Lambda:zK,lambda:FK,lang:BK,Lang:VK,langd:NK,langle:$K,lap:UK,Laplacetrf:qK,laquo:jK,larrb:HK,larrbfs:GK,larr:WK,Larr:YK,lArr:ZK,larrfs:KK,larrhk:XK,larrlp:JK,larrpl:QK,larrsim:eX,larrtl:tX,latail:nX,lAtail:rX,lat:iX,late:aX,lates:sX,lbarr:oX,lBarr:lX,lbbrk:cX,lbrace:uX,lbrack:dX,lbrke:hX,lbrksld:fX,lbrkslu:pX,Lcaron:mX,lcaron:gX,Lcedil:vX,lcedil:yX,lceil:_X,lcub:bX,Lcy:xX,lcy:wX,ldca:SX,ldquo:kX,ldquor:CX,ldrdhar:TX,ldrushar:AX,ldsh:EX,le:IX,lE:PX,LeftAngleBracket:DX,LeftArrowBar:MX,leftarrow:LX,LeftArrow:RX,Leftarrow:OX,LeftArrowRightArrow:zX,leftarrowtail:FX,LeftCeiling:BX,LeftDoubleBracket:VX,LeftDownTeeVector:NX,LeftDownVectorBar:$X,LeftDownVector:UX,LeftFloor:qX,leftharpoondown:jX,leftharpoonup:HX,leftleftarrows:GX,leftrightarrow:WX,LeftRightArrow:YX,Leftrightarrow:ZX,leftrightarrows:KX,leftrightharpoons:XX,leftrightsquigarrow:JX,LeftRightVector:QX,LeftTeeArrow:eJ,LeftTee:tJ,LeftTeeVector:nJ,leftthreetimes:rJ,LeftTriangleBar:iJ,LeftTriangle:aJ,LeftTriangleEqual:sJ,LeftUpDownVector:oJ,LeftUpTeeVector:lJ,LeftUpVectorBar:cJ,LeftUpVector:uJ,LeftVectorBar:dJ,LeftVector:hJ,lEg:fJ,leg:pJ,leq:mJ,leqq:gJ,leqslant:vJ,lescc:yJ,les:_J,lesdot:bJ,lesdoto:xJ,lesdotor:wJ,lesg:SJ,lesges:kJ,lessapprox:CJ,lessdot:TJ,lesseqgtr:AJ,lesseqqgtr:EJ,LessEqualGreater:IJ,LessFullEqual:PJ,LessGreater:DJ,lessgtr:MJ,LessLess:LJ,lesssim:RJ,LessSlantEqual:OJ,LessTilde:zJ,lfisht:FJ,lfloor:BJ,Lfr:VJ,lfr:NJ,lg:$J,lgE:UJ,lHar:qJ,lhard:jJ,lharu:HJ,lharul:GJ,lhblk:WJ,LJcy:YJ,ljcy:ZJ,llarr:KJ,ll:XJ,Ll:JJ,llcorner:QJ,Lleftarrow:eQ,llhard:tQ,lltri:nQ,Lmidot:rQ,lmidot:iQ,lmoustache:aQ,lmoust:sQ,lnap:oQ,lnapprox:lQ,lne:cQ,lnE:uQ,lneq:dQ,lneqq:hQ,lnsim:fQ,loang:pQ,loarr:mQ,lobrk:gQ,longleftarrow:vQ,LongLeftArrow:yQ,Longleftarrow:_Q,longleftrightarrow:bQ,LongLeftRightArrow:xQ,Longleftrightarrow:wQ,longmapsto:SQ,longrightarrow:kQ,LongRightArrow:CQ,Longrightarrow:TQ,looparrowleft:AQ,looparrowright:EQ,lopar:IQ,Lopf:PQ,lopf:DQ,loplus:MQ,lotimes:LQ,lowast:RQ,lowbar:OQ,LowerLeftArrow:zQ,LowerRightArrow:FQ,loz:BQ,lozenge:VQ,lozf:NQ,lpar:$Q,lparlt:UQ,lrarr:qQ,lrcorner:jQ,lrhar:HQ,lrhard:GQ,lrm:WQ,lrtri:YQ,lsaquo:ZQ,lscr:KQ,Lscr:XQ,lsh:JQ,Lsh:QQ,lsim:eee,lsime:tee,lsimg:nee,lsqb:ree,lsquo:iee,lsquor:aee,Lstrok:see,lstrok:oee,ltcc:lee,ltcir:cee,lt:uee,LT:dee,Lt:hee,ltdot:fee,lthree:pee,ltimes:mee,ltlarr:gee,ltquest:vee,ltri:yee,ltrie:_ee,ltrif:bee,ltrPar:xee,lurdshar:wee,luruhar:See,lvertneqq:kee,lvnE:Cee,macr:Tee,male:Aee,malt:Eee,maltese:Iee,Map:"",map:Pee,mapsto:Dee,mapstodown:Mee,mapstoleft:Lee,mapstoup:Ree,marker:Oee,mcomma:zee,Mcy:Fee,mcy:Bee,mdash:Vee,mDDot:Nee,measuredangle:$ee,MediumSpace:Uee,Mellintrf:qee,Mfr:jee,mfr:Hee,mho:Gee,micro:Wee,midast:Yee,midcir:Zee,mid:Kee,middot:Xee,minusb:Jee,minus:Qee,minusd:ete,minusdu:tte,MinusPlus:nte,mlcp:rte,mldr:ite,mnplus:ate,models:ste,Mopf:ote,mopf:lte,mp:cte,mscr:ute,Mscr:dte,mstpos:hte,Mu:fte,mu:pte,multimap:mte,mumap:gte,nabla:vte,Nacute:yte,nacute:_te,nang:bte,nap:xte,napE:wte,napid:Ste,napos:kte,napprox:Cte,natural:Tte,naturals:Ate,natur:Ete,nbsp:Ite,nbump:Pte,nbumpe:Dte,ncap:Mte,Ncaron:Lte,ncaron:Rte,Ncedil:Ote,ncedil:zte,ncong:Fte,ncongdot:Bte,ncup:Vte,Ncy:Nte,ncy:$te,ndash:Ute,nearhk:qte,nearr:jte,neArr:Hte,nearrow:Gte,ne:Wte,nedot:Yte,NegativeMediumSpace:Zte,NegativeThickSpace:Kte,NegativeThinSpace:Xte,NegativeVeryThinSpace:Jte,nequiv:Qte,nesear:ene,nesim:tne,NestedGreaterGreater:nne,NestedLessLess:rne,NewLine:ine,nexist:ane,nexists:sne,Nfr:one,nfr:lne,ngE:cne,nge:une,ngeq:dne,ngeqq:hne,ngeqslant:fne,nges:pne,nGg:mne,ngsim:gne,nGt:vne,ngt:yne,ngtr:_ne,nGtv:bne,nharr:xne,nhArr:wne,nhpar:Sne,ni:kne,nis:Cne,nisd:Tne,niv:Ane,NJcy:Ene,njcy:Ine,nlarr:Pne,nlArr:Dne,nldr:Mne,nlE:Lne,nle:Rne,nleftarrow:One,nLeftarrow:zne,nleftrightarrow:Fne,nLeftrightarrow:Bne,nleq:Vne,nleqq:Nne,nleqslant:$ne,nles:Une,nless:qne,nLl:jne,nlsim:Hne,nLt:Gne,nlt:Wne,nltri:Yne,nltrie:Zne,nLtv:Kne,nmid:Xne,NoBreak:Jne,NonBreakingSpace:Qne,nopf:ere,Nopf:tre,Not:nre,not:rre,NotCongruent:ire,NotCupCap:are,NotDoubleVerticalBar:sre,NotElement:ore,NotEqual:lre,NotEqualTilde:cre,NotExists:ure,NotGreater:dre,NotGreaterEqual:hre,NotGreaterFullEqual:fre,NotGreaterGreater:pre,NotGreaterLess:mre,NotGreaterSlantEqual:gre,NotGreaterTilde:vre,NotHumpDownHump:yre,NotHumpEqual:_re,notin:bre,notindot:xre,notinE:wre,notinva:Sre,notinvb:kre,notinvc:Cre,NotLeftTriangleBar:Tre,NotLeftTriangle:Are,NotLeftTriangleEqual:Ere,NotLess:Ire,NotLessEqual:Pre,NotLessGreater:Dre,NotLessLess:Mre,NotLessSlantEqual:Lre,NotLessTilde:Rre,NotNestedGreaterGreater:Ore,NotNestedLessLess:zre,notni:Fre,notniva:Bre,notnivb:Vre,notnivc:Nre,NotPrecedes:$re,NotPrecedesEqual:Ure,NotPrecedesSlantEqual:qre,NotReverseElement:jre,NotRightTriangleBar:Hre,NotRightTriangle:Gre,NotRightTriangleEqual:Wre,NotSquareSubset:Yre,NotSquareSubsetEqual:Zre,NotSquareSuperset:Kre,NotSquareSupersetEqual:Xre,NotSubset:Jre,NotSubsetEqual:Qre,NotSucceeds:eie,NotSucceedsEqual:tie,NotSucceedsSlantEqual:nie,NotSucceedsTilde:rie,NotSuperset:iie,NotSupersetEqual:aie,NotTilde:sie,NotTildeEqual:oie,NotTildeFullEqual:lie,NotTildeTilde:cie,NotVerticalBar:uie,nparallel:die,npar:hie,nparsl:fie,npart:pie,npolint:mie,npr:gie,nprcue:vie,nprec:yie,npreceq:_ie,npre:bie,nrarrc:xie,nrarr:wie,nrArr:Sie,nrarrw:kie,nrightarrow:Cie,nRightarrow:Tie,nrtri:Aie,nrtrie:Eie,nsc:Iie,nsccue:Pie,nsce:Die,Nscr:Mie,nscr:Lie,nshortmid:Rie,nshortparallel:Oie,nsim:zie,nsime:Fie,nsimeq:Bie,nsmid:Vie,nspar:Nie,nsqsube:$ie,nsqsupe:Uie,nsub:qie,nsubE:jie,nsube:Hie,nsubset:Gie,nsubseteq:Wie,nsubseteqq:Yie,nsucc:Zie,nsucceq:Kie,nsup:Xie,nsupE:Jie,nsupe:Qie,nsupset:eae,nsupseteq:tae,nsupseteqq:nae,ntgl:rae,Ntilde:iae,ntilde:aae,ntlg:sae,ntriangleleft:oae,ntrianglelefteq:lae,ntriangleright:cae,ntrianglerighteq:uae,Nu:dae,nu:hae,num:fae,numero:pae,numsp:mae,nvap:gae,nvdash:vae,nvDash:yae,nVdash:_ae,nVDash:bae,nvge:xae,nvgt:wae,nvHarr:Sae,nvinfin:kae,nvlArr:Cae,nvle:Tae,nvlt:Aae,nvltrie:Eae,nvrArr:Iae,nvrtrie:Pae,nvsim:Dae,nwarhk:Mae,nwarr:Lae,nwArr:Rae,nwarrow:Oae,nwnear:zae,Oacute:Fae,oacute:Bae,oast:Vae,Ocirc:Nae,ocirc:$ae,ocir:Uae,Ocy:qae,ocy:jae,odash:Hae,Odblac:Gae,odblac:Wae,odiv:Yae,odot:Zae,odsold:Kae,OElig:Xae,oelig:Jae,ofcir:Qae,Ofr:ese,ofr:tse,ogon:nse,Ograve:rse,ograve:ise,ogt:ase,ohbar:sse,ohm:ose,oint:lse,olarr:cse,olcir:use,olcross:dse,oline:hse,olt:fse,Omacr:pse,omacr:mse,Omega:gse,omega:vse,Omicron:yse,omicron:_se,omid:bse,ominus:xse,Oopf:wse,oopf:Sse,opar:kse,OpenCurlyDoubleQuote:Cse,OpenCurlyQuote:Tse,operp:Ase,oplus:Ese,orarr:Ise,Or:Pse,or:Dse,ord:Mse,order:Lse,orderof:Rse,ordf:Ose,ordm:zse,origof:Fse,oror:Bse,orslope:Vse,orv:Nse,oS:$se,Oscr:Use,oscr:qse,Oslash:jse,oslash:Hse,osol:Gse,Otilde:Wse,otilde:Yse,otimesas:Zse,Otimes:Kse,otimes:Xse,Ouml:Jse,ouml:Qse,ovbar:eoe,OverBar:toe,OverBrace:noe,OverBracket:roe,OverParenthesis:ioe,para:aoe,parallel:soe,par:ooe,parsim:loe,parsl:coe,part:uoe,PartialD:doe,Pcy:hoe,pcy:foe,percnt:poe,period:moe,permil:goe,perp:voe,pertenk:yoe,Pfr:_oe,pfr:boe,Phi:xoe,phi:woe,phiv:Soe,phmmat:koe,phone:Coe,Pi:Toe,pi:Aoe,pitchfork:Eoe,piv:Ioe,planck:Poe,planckh:Doe,plankv:Moe,plusacir:Loe,plusb:Roe,pluscir:Ooe,plus:zoe,plusdo:Foe,plusdu:Boe,pluse:Voe,PlusMinus:Noe,plusmn:$oe,plussim:Uoe,plustwo:qoe,pm:joe,Poincareplane:Hoe,pointint:Goe,popf:Woe,Popf:Yoe,pound:Zoe,prap:Koe,Pr:Xoe,pr:Joe,prcue:Qoe,precapprox:ele,prec:tle,preccurlyeq:nle,Precedes:rle,PrecedesEqual:ile,PrecedesSlantEqual:ale,PrecedesTilde:sle,preceq:ole,precnapprox:lle,precneqq:cle,precnsim:ule,pre:dle,prE:hle,precsim:fle,prime:ple,Prime:mle,primes:gle,prnap:vle,prnE:yle,prnsim:_le,prod:ble,Product:xle,profalar:wle,profline:Sle,profsurf:kle,prop:Cle,Proportional:Tle,Proportion:Ale,propto:Ele,prsim:Ile,prurel:Ple,Pscr:Dle,pscr:Mle,Psi:Lle,psi:Rle,puncsp:Ole,Qfr:zle,qfr:Fle,qint:Ble,qopf:Vle,Qopf:Nle,qprime:$le,Qscr:Ule,qscr:qle,quaternions:jle,quatint:Hle,quest:Gle,questeq:Wle,quot:Yle,QUOT:Zle,rAarr:Kle,race:Xle,Racute:Jle,racute:Qle,radic:ece,raemptyv:tce,rang:nce,Rang:rce,rangd:ice,range:ace,rangle:sce,raquo:oce,rarrap:lce,rarrb:cce,rarrbfs:uce,rarrc:dce,rarr:hce,Rarr:fce,rArr:pce,rarrfs:mce,rarrhk:gce,rarrlp:vce,rarrpl:yce,rarrsim:_ce,Rarrtl:bce,rarrtl:xce,rarrw:wce,ratail:Sce,rAtail:kce,ratio:Cce,rationals:Tce,rbarr:Ace,rBarr:Ece,RBarr:Ice,rbbrk:Pce,rbrace:Dce,rbrack:Mce,rbrke:Lce,rbrksld:Rce,rbrkslu:Oce,Rcaron:zce,rcaron:Fce,Rcedil:Bce,rcedil:Vce,rceil:Nce,rcub:$ce,Rcy:Uce,rcy:qce,rdca:jce,rdldhar:Hce,rdquo:Gce,rdquor:Wce,rdsh:Yce,real:Zce,realine:Kce,realpart:Xce,reals:Jce,Re:Qce,rect:eue,reg:tue,REG:nue,ReverseElement:rue,ReverseEquilibrium:iue,ReverseUpEquilibrium:aue,rfisht:sue,rfloor:oue,rfr:lue,Rfr:cue,rHar:uue,rhard:due,rharu:hue,rharul:fue,Rho:pue,rho:mue,rhov:gue,RightAngleBracket:vue,RightArrowBar:yue,rightarrow:_ue,RightArrow:bue,Rightarrow:xue,RightArrowLeftArrow:wue,rightarrowtail:Sue,RightCeiling:kue,RightDoubleBracket:Cue,RightDownTeeVector:Tue,RightDownVectorBar:Aue,RightDownVector:Eue,RightFloor:Iue,rightharpoondown:Pue,rightharpoonup:Due,rightleftarrows:Mue,rightleftharpoons:Lue,rightrightarrows:Rue,rightsquigarrow:Oue,RightTeeArrow:zue,RightTee:Fue,RightTeeVector:Bue,rightthreetimes:Vue,RightTriangleBar:Nue,RightTriangle:$ue,RightTriangleEqual:Uue,RightUpDownVector:que,RightUpTeeVector:jue,RightUpVectorBar:Hue,RightUpVector:Gue,RightVectorBar:Wue,RightVector:Yue,ring:Zue,risingdotseq:Kue,rlarr:Xue,rlhar:Jue,rlm:Que,rmoustache:ede,rmoust:tde,rnmid:nde,roang:rde,roarr:ide,robrk:ade,ropar:sde,ropf:ode,Ropf:lde,roplus:cde,rotimes:ude,RoundImplies:dde,rpar:hde,rpargt:fde,rppolint:pde,rrarr:mde,Rrightarrow:gde,rsaquo:vde,rscr:yde,Rscr:_de,rsh:bde,Rsh:xde,rsqb:wde,rsquo:Sde,rsquor:kde,rthree:Cde,rtimes:Tde,rtri:Ade,rtrie:Ede,rtrif:Ide,rtriltri:Pde,RuleDelayed:Dde,ruluhar:Mde,rx:Lde,Sacute:Rde,sacute:Ode,sbquo:zde,scap:Fde,Scaron:Bde,scaron:Vde,Sc:Nde,sc:$de,sccue:Ude,sce:qde,scE:jde,Scedil:Hde,scedil:Gde,Scirc:Wde,scirc:Yde,scnap:Zde,scnE:Kde,scnsim:Xde,scpolint:Jde,scsim:Qde,Scy:ehe,scy:the,sdotb:nhe,sdot:rhe,sdote:ihe,searhk:ahe,searr:she,seArr:ohe,searrow:lhe,sect:che,semi:uhe,seswar:dhe,setminus:hhe,setmn:fhe,sext:phe,Sfr:mhe,sfr:ghe,sfrown:vhe,sharp:yhe,SHCHcy:_he,shchcy:bhe,SHcy:xhe,shcy:whe,ShortDownArrow:She,ShortLeftArrow:khe,shortmid:Che,shortparallel:The,ShortRightArrow:Ahe,ShortUpArrow:Ehe,shy:Ihe,Sigma:Phe,sigma:Dhe,sigmaf:Mhe,sigmav:Lhe,sim:Rhe,simdot:Ohe,sime:zhe,simeq:Fhe,simg:Bhe,simgE:Vhe,siml:Nhe,simlE:$he,simne:Uhe,simplus:qhe,simrarr:jhe,slarr:Hhe,SmallCircle:Ghe,smallsetminus:Whe,smashp:Yhe,smeparsl:Zhe,smid:Khe,smile:Xhe,smt:Jhe,smte:Qhe,smtes:efe,SOFTcy:tfe,softcy:nfe,solbar:rfe,solb:ife,sol:afe,Sopf:sfe,sopf:ofe,spades:lfe,spadesuit:cfe,spar:ufe,sqcap:dfe,sqcaps:hfe,sqcup:ffe,sqcups:pfe,Sqrt:mfe,sqsub:gfe,sqsube:vfe,sqsubset:yfe,sqsubseteq:_fe,sqsup:bfe,sqsupe:xfe,sqsupset:wfe,sqsupseteq:Sfe,square:kfe,Square:Cfe,SquareIntersection:Tfe,SquareSubset:Afe,SquareSubsetEqual:Efe,SquareSuperset:Ife,SquareSupersetEqual:Pfe,SquareUnion:Dfe,squarf:Mfe,squ:Lfe,squf:Rfe,srarr:Ofe,Sscr:zfe,sscr:Ffe,ssetmn:Bfe,ssmile:Vfe,sstarf:Nfe,Star:$fe,star:Ufe,starf:qfe,straightepsilon:jfe,straightphi:Hfe,strns:Gfe,sub:Wfe,Sub:Yfe,subdot:Zfe,subE:Kfe,sube:Xfe,subedot:Jfe,submult:Qfe,subnE:epe,subne:tpe,subplus:npe,subrarr:rpe,subset:ipe,Subset:ape,subseteq:spe,subseteqq:ope,SubsetEqual:lpe,subsetneq:cpe,subsetneqq:upe,subsim:dpe,subsub:hpe,subsup:fpe,succapprox:ppe,succ:mpe,succcurlyeq:gpe,Succeeds:vpe,SucceedsEqual:ype,SucceedsSlantEqual:_pe,SucceedsTilde:bpe,succeq:xpe,succnapprox:wpe,succneqq:Spe,succnsim:kpe,succsim:Cpe,SuchThat:Tpe,sum:Ape,Sum:Epe,sung:Ipe,sup1:Ppe,sup2:Dpe,sup3:Mpe,sup:Lpe,Sup:Rpe,supdot:Ope,supdsub:zpe,supE:Fpe,supe:Bpe,supedot:Vpe,Superset:Npe,SupersetEqual:$pe,suphsol:Upe,suphsub:qpe,suplarr:jpe,supmult:Hpe,supnE:Gpe,supne:Wpe,supplus:Ype,supset:Zpe,Supset:Kpe,supseteq:Xpe,supseteqq:Jpe,supsetneq:Qpe,supsetneqq:eme,supsim:tme,supsub:nme,supsup:rme,swarhk:ime,swarr:ame,swArr:sme,swarrow:ome,swnwar:lme,szlig:cme,Tab:ume,target:dme,Tau:hme,tau:fme,tbrk:pme,Tcaron:mme,tcaron:gme,Tcedil:vme,tcedil:yme,Tcy:_me,tcy:bme,tdot:xme,telrec:wme,Tfr:Sme,tfr:kme,there4:Cme,therefore:Tme,Therefore:Ame,Theta:Eme,theta:Ime,thetasym:Pme,thetav:Dme,thickapprox:Mme,thicksim:Lme,ThickSpace:Rme,ThinSpace:Ome,thinsp:zme,thkap:Fme,thksim:Bme,THORN:Vme,thorn:Nme,tilde:$me,Tilde:Ume,TildeEqual:qme,TildeFullEqual:jme,TildeTilde:Hme,timesbar:Gme,timesb:Wme,times:Yme,timesd:Zme,tint:Kme,toea:Xme,topbot:Jme,topcir:Qme,top:ege,Topf:tge,topf:nge,topfork:rge,tosa:ige,tprime:age,trade:sge,TRADE:oge,triangle:lge,triangledown:cge,triangleleft:uge,trianglelefteq:dge,triangleq:hge,triangleright:fge,trianglerighteq:pge,tridot:mge,trie:gge,triminus:vge,TripleDot:yge,triplus:_ge,trisb:bge,tritime:xge,trpezium:wge,Tscr:Sge,tscr:kge,TScy:Cge,tscy:Tge,TSHcy:Age,tshcy:Ege,Tstrok:Ige,tstrok:Pge,twixt:Dge,twoheadleftarrow:Mge,twoheadrightarrow:Lge,Uacute:Rge,uacute:Oge,uarr:zge,Uarr:Fge,uArr:Bge,Uarrocir:Vge,Ubrcy:Nge,ubrcy:$ge,Ubreve:Uge,ubreve:qge,Ucirc:jge,ucirc:Hge,Ucy:Gge,ucy:Wge,udarr:Yge,Udblac:Zge,udblac:Kge,udhar:Xge,ufisht:Jge,Ufr:Qge,ufr:eve,Ugrave:tve,ugrave:nve,uHar:rve,uharl:ive,uharr:ave,uhblk:sve,ulcorn:ove,ulcorner:lve,ulcrop:cve,ultri:uve,Umacr:dve,umacr:hve,uml:fve,UnderBar:pve,UnderBrace:mve,UnderBracket:gve,UnderParenthesis:vve,Union:yve,UnionPlus:_ve,Uogon:bve,uogon:xve,Uopf:wve,uopf:Sve,UpArrowBar:kve,uparrow:Cve,UpArrow:Tve,Uparrow:Ave,UpArrowDownArrow:Eve,updownarrow:Ive,UpDownArrow:Pve,Updownarrow:Dve,UpEquilibrium:Mve,upharpoonleft:Lve,upharpoonright:Rve,uplus:Ove,UpperLeftArrow:zve,UpperRightArrow:Fve,upsi:Bve,Upsi:Vve,upsih:Nve,Upsilon:$ve,upsilon:Uve,UpTeeArrow:qve,UpTee:jve,upuparrows:Hve,urcorn:Gve,urcorner:Wve,urcrop:Yve,Uring:Zve,uring:Kve,urtri:Xve,Uscr:Jve,uscr:Qve,utdot:eye,Utilde:tye,utilde:nye,utri:rye,utrif:iye,uuarr:aye,Uuml:sye,uuml:oye,uwangle:lye,vangrt:cye,varepsilon:uye,varkappa:dye,varnothing:hye,varphi:fye,varpi:pye,varpropto:mye,varr:gye,vArr:vye,varrho:yye,varsigma:_ye,varsubsetneq:bye,varsubsetneqq:xye,varsupsetneq:wye,varsupsetneqq:Sye,vartheta:kye,vartriangleleft:Cye,vartriangleright:Tye,vBar:Aye,Vbar:Eye,vBarv:Iye,Vcy:Pye,vcy:Dye,vdash:Mye,vDash:Lye,Vdash:Rye,VDash:Oye,Vdashl:zye,veebar:Fye,vee:Bye,Vee:Vye,veeeq:Nye,vellip:$ye,verbar:Uye,Verbar:qye,vert:jye,Vert:Hye,VerticalBar:Gye,VerticalLine:Wye,VerticalSeparator:Yye,VerticalTilde:Zye,VeryThinSpace:Kye,Vfr:Xye,vfr:Jye,vltri:Qye,vnsub:e_e,vnsup:t_e,Vopf:n_e,vopf:r_e,vprop:i_e,vrtri:a_e,Vscr:s_e,vscr:o_e,vsubnE:l_e,vsubne:c_e,vsupnE:u_e,vsupne:d_e,Vvdash:h_e,vzigzag:f_e,Wcirc:p_e,wcirc:m_e,wedbar:g_e,wedge:v_e,Wedge:y_e,wedgeq:__e,weierp:b_e,Wfr:x_e,wfr:w_e,Wopf:S_e,wopf:k_e,wp:C_e,wr:T_e,wreath:A_e,Wscr:E_e,wscr:I_e,xcap:P_e,xcirc:D_e,xcup:M_e,xdtri:L_e,Xfr:R_e,xfr:O_e,xharr:z_e,xhArr:F_e,Xi:B_e,xi:V_e,xlarr:N_e,xlArr:$_e,xmap:U_e,xnis:q_e,xodot:j_e,Xopf:H_e,xopf:G_e,xoplus:W_e,xotime:Y_e,xrarr:Z_e,xrArr:K_e,Xscr:X_e,xscr:J_e,xsqcup:Q_e,xuplus:ebe,xutri:tbe,xvee:nbe,xwedge:rbe,Yacute:ibe,yacute:abe,YAcy:sbe,yacy:obe,Ycirc:lbe,ycirc:cbe,Ycy:ube,ycy:dbe,yen:hbe,Yfr:fbe,yfr:pbe,YIcy:mbe,yicy:gbe,Yopf:vbe,yopf:ybe,Yscr:_be,yscr:bbe,YUcy:xbe,yucy:wbe,yuml:Sbe,Yuml:kbe,Zacute:Cbe,zacute:Tbe,Zcaron:Abe,zcaron:Ebe,Zcy:Ibe,zcy:Pbe,Zdot:Dbe,zdot:Mbe,zeetrf:Lbe,ZeroWidthSpace:Rbe,Zeta:Obe,zeta:zbe,zfr:Fbe,Zfr:Bbe,ZHcy:Vbe,zhcy:Nbe,zigrarr:$be,zopf:Ube,Zopf:qbe,Zscr:jbe,zscr:Hbe,zwj:Gbe,zwnj:Wbe};var RE=Ybe,Y0=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,Rd={},wk={};function Zbe(e){var t,n,r=wk[e];if(r)return r;for(r=wk[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)r[e.charCodeAt(t)]=e[t];return r}function ov(e,t,n){var r,s,u,h,l,v="";for(typeof t!="string"&&(n=t,t=ov.defaultChars),typeof n>"u"&&(n=!0),l=Zbe(t),r=0,s=e.length;r<s;r++){if(u=e.charCodeAt(r),n&&u===37&&r+2<s&&/^[0-9a-f]{2}$/i.test(e.slice(r+1,r+3))){v+=e.slice(r,r+3),r+=2;continue}if(u<128){v+=l[u];continue}if(u>=55296&&u<=57343){if(u>=55296&&u<=56319&&r+1<s&&(h=e.charCodeAt(r+1),h>=56320&&h<=57343)){v+=encodeURIComponent(e[r]+e[r+1]),r++;continue}v+="%EF%BF%BD";continue}v+=encodeURIComponent(e[r])}return v}ov.defaultChars=";/?:@&=+$,-_.!~*'()#";ov.componentChars="-_.!~*'()";var Kbe=ov,Sk={};function Xbe(e){var t,n,r=Sk[e];if(r)return r;for(r=Sk[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),r.push(n);for(t=0;t<e.length;t++)n=e.charCodeAt(t),r[n]="%"+("0"+n.toString(16).toUpperCase()).slice(-2);return r}function lv(e,t){var n;return typeof t!="string"&&(t=lv.defaultChars),n=Xbe(t),e.replace(/(%[a-f0-9]{2})+/gi,function(r){var s,u,h,l,v,_,S,C="";for(s=0,u=r.length;s<u;s+=3){if(h=parseInt(r.slice(s+1,s+3),16),h<128){C+=n[h];continue}if((h&224)===192&&s+3<u&&(l=parseInt(r.slice(s+4,s+6),16),(l&192)===128)){S=h<<6&1984|l&63,S<128?C+="":C+=String.fromCharCode(S),s+=3;continue}if((h&240)===224&&s+6<u&&(l=parseInt(r.slice(s+4,s+6),16),v=parseInt(r.slice(s+7,s+9),16),(l&192)===128&&(v&192)===128)){S=h<<12&61440|l<<6&4032|v&63,S<2048||S>=55296&&S<=57343?C+="":C+=String.fromCharCode(S),s+=6;continue}if((h&248)===240&&s+9<u&&(l=parseInt(r.slice(s+4,s+6),16),v=parseInt(r.slice(s+7,s+9),16),_=parseInt(r.slice(s+10,s+12),16),(l&192)===128&&(v&192)===128&&(_&192)===128)){S=h<<18&1835008|l<<12&258048|v<<6&4032|_&63,S<65536||S>1114111?C+="":(S-=65536,C+=String.fromCharCode(55296+(S>>10),56320+(S&1023))),s+=9;continue}C+=""}return C})}lv.defaultChars=";/?:@&=+$,#";lv.componentChars="";var Jbe=lv,Qbe=function(t){var n="";return n+=t.protocol||"",n+=t.slashes?"//":"",n+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?n+="["+t.hostname+"]":n+=t.hostname||"",n+=t.port?":"+t.port:"",n+=t.pathname||"",n+=t.search||"",n+=t.hash||"",n};function Sg(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var e0e=/^([a-z0-9.+-]+:)/i,t0e=/:[0-9]*$/,n0e=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,r0e=["<",">",'"',"`"," ","\r",`
`,"	"],i0e=["{","}","|","\\","^","`"].concat(r0e),a0e=["'"].concat(i0e),kk=["%","/","?",";","#"].concat(a0e),Ck=["/","?","#"],s0e=255,Tk=/^[+a-z0-9A-Z_-]{0,63}$/,o0e=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Ak={javascript:!0,"javascript:":!0},Ek={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function l0e(e,t){if(e&&e instanceof Sg)return e;var n=new Sg;return n.parse(e,t),n}Sg.prototype.parse=function(e,t){var n,r,s,u,h,l=e;if(l=l.trim(),!t&&e.split("#").length===1){var v=n0e.exec(l);if(v)return this.pathname=v[1],v[2]&&(this.search=v[2]),this}var _=e0e.exec(l);if(_&&(_=_[0],s=_.toLowerCase(),this.protocol=_,l=l.substr(_.length)),(t||_||l.match(/^\/\/[^@\/]+@[^@\/]+/))&&(h=l.substr(0,2)==="//",h&&!(_&&Ak[_])&&(l=l.substr(2),this.slashes=!0)),!Ak[_]&&(h||_&&!Ek[_])){var S=-1;for(n=0;n<Ck.length;n++)u=l.indexOf(Ck[n]),u!==-1&&(S===-1||u<S)&&(S=u);var C,k;for(S===-1?k=l.lastIndexOf("@"):k=l.lastIndexOf("@",S),k!==-1&&(C=l.slice(0,k),l=l.slice(k+1),this.auth=C),S=-1,n=0;n<kk.length;n++)u=l.indexOf(kk[n]),u!==-1&&(S===-1||u<S)&&(S=u);S===-1&&(S=l.length),l[S-1]===":"&&S--;var D=l.slice(0,S);l=l.slice(S),this.parseHost(D),this.hostname=this.hostname||"";var O=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!O){var R=this.hostname.split(/\./);for(n=0,r=R.length;n<r;n++){var F=R[n];if(F&&!F.match(Tk)){for(var N="",j=0,X=F.length;j<X;j++)F.charCodeAt(j)>127?N+="x":N+=F[j];if(!N.match(Tk)){var ee=R.slice(0,n),le=R.slice(n+1),ie=F.match(o0e);ie&&(ee.push(ie[1]),le.unshift(ie[2])),le.length&&(l=le.join(".")+l),this.hostname=ee.join(".");break}}}}this.hostname.length>s0e&&(this.hostname=""),O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var se=l.indexOf("#");se!==-1&&(this.hash=l.substr(se),l=l.slice(0,se));var H=l.indexOf("?");return H!==-1&&(this.search=l.substr(H),l=l.slice(0,H)),l&&(this.pathname=l),Ek[s]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Sg.prototype.parseHost=function(e){var t=t0e.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var c0e=l0e;Rd.encode=Kbe;Rd.decode=Jbe;Rd.format=Qbe;Rd.parse=c0e;var Vc={},h_,Ik;function OE(){return Ik||(Ik=1,h_=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/),h_}var f_,Pk;function zE(){return Pk||(Pk=1,f_=/[\0-\x1F\x7F-\x9F]/),f_}var p_,Dk;function u0e(){return Dk||(Dk=1,p_=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/),p_}var m_,Mk;function FE(){return Mk||(Mk=1,m_=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/),m_}var Lk;function d0e(){return Lk||(Lk=1,Vc.Any=OE(),Vc.Cc=zE(),Vc.Cf=u0e(),Vc.P=Y0,Vc.Z=FE()),Vc}(function(e){function t(me){return Object.prototype.toString.call(me)}function n(me){return t(me)==="[object String]"}var r=Object.prototype.hasOwnProperty;function s(me,Ve){return r.call(me,Ve)}function u(me){var Ve=Array.prototype.slice.call(arguments,1);return Ve.forEach(function(Ge){if(Ge){if(typeof Ge!="object")throw new TypeError(Ge+"must be object");Object.keys(Ge).forEach(function($e){me[$e]=Ge[$e]})}}),me}function h(me,Ve,Ge){return[].concat(me.slice(0,Ve),Ge,me.slice(Ve+1))}function l(me){return!(me>=55296&&me<=57343||me>=64976&&me<=65007||(me&65535)===65535||(me&65535)===65534||me>=0&&me<=8||me===11||me>=14&&me<=31||me>=127&&me<=159||me>1114111)}function v(me){if(me>65535){me-=65536;var Ve=55296+(me>>10),Ge=56320+(me&1023);return String.fromCharCode(Ve,Ge)}return String.fromCharCode(me)}var _=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,S=/&([a-z#][a-z0-9]{1,31});/gi,C=new RegExp(_.source+"|"+S.source,"gi"),k=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,D=RE;function O(me,Ve){var Ge=0;return s(D,Ve)?D[Ve]:Ve.charCodeAt(0)===35&&k.test(Ve)&&(Ge=Ve[1].toLowerCase()==="x"?parseInt(Ve.slice(2),16):parseInt(Ve.slice(1),10),l(Ge))?v(Ge):me}function R(me){return me.indexOf("\\")<0?me:me.replace(_,"$1")}function F(me){return me.indexOf("\\")<0&&me.indexOf("&")<0?me:me.replace(C,function(Ve,Ge,$e){return Ge||O(Ve,$e)})}var N=/[&<>"]/,j=/[&<>"]/g,X={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function ee(me){return X[me]}function le(me){return N.test(me)?me.replace(j,ee):me}var ie=/[.?*+^$[\]\\(){}|-]/g;function se(me){return me.replace(ie,"\\$&")}function H(me){switch(me){case 9:case 32:return!0}return!1}function Z(me){if(me>=8192&&me<=8202)return!0;switch(me){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var ne=Y0;function _e(me){return ne.test(me)}function te(me){switch(me){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Se(me){return me=me.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(me=me.replace(//g,"")),me.toLowerCase().toUpperCase()}e.lib={},e.lib.mdurl=Rd,e.lib.ucmicro=d0e(),e.assign=u,e.isString=n,e.has=s,e.unescapeMd=R,e.unescapeAll=F,e.isValidEntityCode=l,e.fromCodePoint=v,e.escapeHtml=le,e.arrayReplaceAt=h,e.isSpace=H,e.isWhiteSpace=Z,e.isMdAsciiPunct=te,e.isPunctChar=_e,e.escapeRE=se,e.normalizeReference=Se})(or);var cv={},h0e=function(t,n,r){var s,u,h,l,v=-1,_=t.posMax,S=t.pos;for(t.pos=n+1,s=1;t.pos<_;){if(h=t.src.charCodeAt(t.pos),h===93&&(s--,s===0)){u=!0;break}if(l=t.pos,t.md.inline.skipToken(t),h===91){if(l===t.pos-1)s++;else if(r)return t.pos=S,-1}}return u&&(v=t.pos),t.pos=S,v},Rk=or.unescapeAll,f0e=function(t,n,r){var s,u,h=0,l=n,v={ok:!1,pos:0,lines:0,str:""};if(t.charCodeAt(n)===60){for(n++;n<r;){if(s=t.charCodeAt(n),s===10||s===60)return v;if(s===62)return v.pos=n+1,v.str=Rk(t.slice(l+1,n)),v.ok=!0,v;if(s===92&&n+1<r){n+=2;continue}n++}return v}for(u=0;n<r&&(s=t.charCodeAt(n),!(s===32||s<32||s===127));){if(s===92&&n+1<r){if(t.charCodeAt(n+1)===32)break;n+=2;continue}if(s===40&&(u++,u>32))return v;if(s===41){if(u===0)break;u--}n++}return l===n||u!==0||(v.str=Rk(t.slice(l,n)),v.lines=h,v.pos=n,v.ok=!0),v},p0e=or.unescapeAll,m0e=function(t,n,r){var s,u,h=0,l=n,v={ok:!1,pos:0,lines:0,str:""};if(n>=r||(u=t.charCodeAt(n),u!==34&&u!==39&&u!==40))return v;for(n++,u===40&&(u=41);n<r;){if(s=t.charCodeAt(n),s===u)return v.pos=n+1,v.lines=h,v.str=p0e(t.slice(l+1,n)),v.ok=!0,v;if(s===40&&u===41)return v;s===10?h++:s===92&&n+1<r&&(n++,t.charCodeAt(n)===10&&h++),n++}return v};cv.parseLinkLabel=h0e;cv.parseLinkDestination=f0e;cv.parseLinkTitle=m0e;var g0e=or.assign,v0e=or.unescapeAll,ru=or.escapeHtml,Io={};Io.code_inline=function(e,t,n,r,s){var u=e[t];return"<code"+s.renderAttrs(u)+">"+ru(e[t].content)+"</code>"};Io.code_block=function(e,t,n,r,s){var u=e[t];return"<pre"+s.renderAttrs(u)+"><code>"+ru(e[t].content)+`</code></pre>
`};Io.fence=function(e,t,n,r,s){var u=e[t],h=u.info?v0e(u.info).trim():"",l="",v="",_,S,C,k,D;return h&&(C=h.split(/(\s+)/g),l=C[0],v=C.slice(2).join("")),n.highlight?_=n.highlight(u.content,l,v)||ru(u.content):_=ru(u.content),_.indexOf("<pre")===0?_+`
`:h?(S=u.attrIndex("class"),k=u.attrs?u.attrs.slice():[],S<0?k.push(["class",n.langPrefix+l]):(k[S]=k[S].slice(),k[S][1]+=" "+n.langPrefix+l),D={attrs:k},"<pre><code"+s.renderAttrs(D)+">"+_+`</code></pre>
`):"<pre><code"+s.renderAttrs(u)+">"+_+`</code></pre>
`};Io.image=function(e,t,n,r,s){var u=e[t];return u.attrs[u.attrIndex("alt")][1]=s.renderInlineAsText(u.children,n,r),s.renderToken(e,t,n)};Io.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};Io.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Io.text=function(e,t){return ru(e[t].content)};Io.html_block=function(e,t){return e[t].content};Io.html_inline=function(e,t){return e[t].content};function Od(){this.rules=g0e({},Io)}Od.prototype.renderAttrs=function(t){var n,r,s;if(!t.attrs)return"";for(s="",n=0,r=t.attrs.length;n<r;n++)s+=" "+ru(t.attrs[n][0])+'="'+ru(t.attrs[n][1])+'"';return s};Od.prototype.renderToken=function(t,n,r){var s,u="",h=!1,l=t[n];return l.hidden?"":(l.block&&l.nesting!==-1&&n&&t[n-1].hidden&&(u+=`
`),u+=(l.nesting===-1?"</":"<")+l.tag,u+=this.renderAttrs(l),l.nesting===0&&r.xhtmlOut&&(u+=" /"),l.block&&(h=!0,l.nesting===1&&n+1<t.length&&(s=t[n+1],(s.type==="inline"||s.hidden||s.nesting===-1&&s.tag===l.tag)&&(h=!1))),u+=h?`>
`:">",u)};Od.prototype.renderInline=function(e,t,n){for(var r,s="",u=this.rules,h=0,l=e.length;h<l;h++)r=e[h].type,typeof u[r]<"u"?s+=u[r](e,h,t,n,this):s+=this.renderToken(e,h,t);return s};Od.prototype.renderInlineAsText=function(e,t,n){for(var r="",s=0,u=e.length;s<u;s++)e[s].type==="text"?r+=e[s].content:e[s].type==="image"?r+=this.renderInlineAsText(e[s].children,t,n):e[s].type==="softbreak"&&(r+=`
`);return r};Od.prototype.render=function(e,t,n){var r,s,u,h="",l=this.rules;for(r=0,s=e.length;r<s;r++)u=e[r].type,u==="inline"?h+=this.renderInline(e[r].children,t,n):typeof l[u]<"u"?h+=l[e[r].type](e,r,t,n,this):h+=this.renderToken(e,r,t,n);return h};var y0e=Od;function Zs(){this.__rules__=[],this.__cache__=null}Zs.prototype.__find__=function(e){for(var t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Zs.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Zs.prototype.at=function(e,t,n){var r=this.__find__(e),s=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=s.alt||[],this.__cache__=null};Zs.prototype.before=function(e,t,n,r){var s=this.__find__(e),u=r||{};if(s===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s,0,{name:t,enabled:!0,fn:n,alt:u.alt||[]}),this.__cache__=null};Zs.prototype.after=function(e,t,n,r){var s=this.__find__(e),u=r||{};if(s===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s+1,0,{name:t,enabled:!0,fn:n,alt:u.alt||[]}),this.__cache__=null};Zs.prototype.push=function(e,t,n){var r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Zs.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach(function(r){var s=this.__find__(r);if(s<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[s].enabled=!0,n.push(r)},this),this.__cache__=null,n};Zs.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Zs.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);var n=[];return e.forEach(function(r){var s=this.__find__(r);if(s<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[s].enabled=!1,n.push(r)},this),this.__cache__=null,n};Zs.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};var Z0=Zs,_0e=/\r\n?|\n/g,b0e=/\0/g,x0e=function(t){var n;n=t.src.replace(_0e,`
`),n=n.replace(b0e,""),t.src=n},w0e=function(t){var n;t.inlineMode?(n=new t.Token("inline","",0),n.content=t.src,n.map=[0,1],n.children=[],t.tokens.push(n)):t.md.block.parse(t.src,t.md,t.env,t.tokens)},S0e=function(t){var n=t.tokens,r,s,u;for(s=0,u=n.length;s<u;s++)r=n[s],r.type==="inline"&&t.md.inline.parse(r.content,t.md,t.env,r.children)},k0e=or.arrayReplaceAt;function C0e(e){return/^<a[>\s]/i.test(e)}function T0e(e){return/^<\/a\s*>/i.test(e)}var A0e=function(t){var n,r,s,u,h,l,v,_,S,C,k,D,O,R,F,N,j=t.tokens,X;if(t.md.options.linkify){for(r=0,s=j.length;r<s;r++)if(!(j[r].type!=="inline"||!t.md.linkify.pretest(j[r].content)))for(u=j[r].children,O=0,n=u.length-1;n>=0;n--){if(l=u[n],l.type==="link_close"){for(n--;u[n].level!==l.level&&u[n].type!=="link_open";)n--;continue}if(l.type==="html_inline"&&(C0e(l.content)&&O>0&&O--,T0e(l.content)&&O++),!(O>0)&&l.type==="text"&&t.md.linkify.test(l.content)){for(S=l.content,X=t.md.linkify.match(S),v=[],D=l.level,k=0,_=0;_<X.length;_++)R=X[_].url,F=t.md.normalizeLink(R),t.md.validateLink(F)&&(N=X[_].text,X[_].schema?X[_].schema==="mailto:"&&!/^mailto:/i.test(N)?N=t.md.normalizeLinkText("mailto:"+N).replace(/^mailto:/,""):N=t.md.normalizeLinkText(N):N=t.md.normalizeLinkText("http://"+N).replace(/^http:\/\//,""),C=X[_].index,C>k&&(h=new t.Token("text","",0),h.content=S.slice(k,C),h.level=D,v.push(h)),h=new t.Token("link_open","a",1),h.attrs=[["href",F]],h.level=D++,h.markup="linkify",h.info="auto",v.push(h),h=new t.Token("text","",0),h.content=N,h.level=D,v.push(h),h=new t.Token("link_close","a",-1),h.level=--D,h.markup="linkify",h.info="auto",v.push(h),k=X[_].lastIndex);k<S.length&&(h=new t.Token("text","",0),h.content=S.slice(k),h.level=D,v.push(h)),j[r].children=u=k0e(u,n,v)}}}},BE=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,E0e=/\((c|tm|r|p)\)/i,I0e=/\((c|tm|r|p)\)/ig,P0e={c:"",r:"",p:"",tm:""};function D0e(e,t){return P0e[t.toLowerCase()]}function M0e(e){var t,n,r=0;for(t=e.length-1;t>=0;t--)n=e[t],n.type==="text"&&!r&&(n.content=n.content.replace(I0e,D0e)),n.type==="link_open"&&n.info==="auto"&&r--,n.type==="link_close"&&n.info==="auto"&&r++}function L0e(e){var t,n,r=0;for(t=e.length-1;t>=0;t--)n=e[t],n.type==="text"&&!r&&BE.test(n.content)&&(n.content=n.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),n.type==="link_open"&&n.info==="auto"&&r--,n.type==="link_close"&&n.info==="auto"&&r++}var R0e=function(t){var n;if(t.md.options.typographer)for(n=t.tokens.length-1;n>=0;n--)t.tokens[n].type==="inline"&&(E0e.test(t.tokens[n].content)&&M0e(t.tokens[n].children),BE.test(t.tokens[n].content)&&L0e(t.tokens[n].children))},Ok=or.isWhiteSpace,zk=or.isPunctChar,Fk=or.isMdAsciiPunct,O0e=/['"]/,Bk=/['"]/g,Vk="";function Im(e,t,n){return e.substr(0,t)+n+e.substr(t+1)}function z0e(e,t){var n,r,s,u,h,l,v,_,S,C,k,D,O,R,F,N,j,X,ee,le,ie;for(ee=[],n=0;n<e.length;n++){for(r=e[n],v=e[n].level,j=ee.length-1;j>=0&&!(ee[j].level<=v);j--);if(ee.length=j+1,r.type==="text"){s=r.content,h=0,l=s.length;e:for(;h<l&&(Bk.lastIndex=h,u=Bk.exec(s),!!u);){if(F=N=!0,h=u.index+1,X=u[0]==="'",S=32,u.index-1>=0)S=s.charCodeAt(u.index-1);else for(j=n-1;j>=0&&!(e[j].type==="softbreak"||e[j].type==="hardbreak");j--)if(e[j].content){S=e[j].content.charCodeAt(e[j].content.length-1);break}if(C=32,h<l)C=s.charCodeAt(h);else for(j=n+1;j<e.length&&!(e[j].type==="softbreak"||e[j].type==="hardbreak");j++)if(e[j].content){C=e[j].content.charCodeAt(0);break}if(k=Fk(S)||zk(String.fromCharCode(S)),D=Fk(C)||zk(String.fromCharCode(C)),O=Ok(S),R=Ok(C),R?F=!1:D&&(O||k||(F=!1)),O?N=!1:k&&(R||D||(N=!1)),C===34&&u[0]==='"'&&S>=48&&S<=57&&(N=F=!1),F&&N&&(F=k,N=D),!F&&!N){X&&(r.content=Im(r.content,u.index,Vk));continue}if(N){for(j=ee.length-1;j>=0&&(_=ee[j],!(ee[j].level<v));j--)if(_.single===X&&ee[j].level===v){_=ee[j],X?(le=t.md.options.quotes[2],ie=t.md.options.quotes[3]):(le=t.md.options.quotes[0],ie=t.md.options.quotes[1]),r.content=Im(r.content,u.index,ie),e[_.token].content=Im(e[_.token].content,_.pos,le),h+=ie.length-1,_.token===n&&(h+=le.length-1),s=r.content,l=s.length,ee.length=j;continue e}}F?ee.push({token:n,pos:u.index,single:X,level:v}):N&&X&&(r.content=Im(r.content,u.index,Vk))}}}}var F0e=function(t){var n;if(t.md.options.typographer)for(n=t.tokens.length-1;n>=0;n--)t.tokens[n].type!=="inline"||!O0e.test(t.tokens[n].content)||z0e(t.tokens[n].children,t)};function zd(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}zd.prototype.attrIndex=function(t){var n,r,s;if(!this.attrs)return-1;for(n=this.attrs,r=0,s=n.length;r<s;r++)if(n[r][0]===t)return r;return-1};zd.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};zd.prototype.attrSet=function(t,n){var r=this.attrIndex(t),s=[t,n];r<0?this.attrPush(s):this.attrs[r]=s};zd.prototype.attrGet=function(t){var n=this.attrIndex(t),r=null;return n>=0&&(r=this.attrs[n][1]),r};zd.prototype.attrJoin=function(t,n){var r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};var K0=zd,B0e=K0;function VE(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}VE.prototype.Token=B0e;var V0e=VE,N0e=Z0,g_=[["normalize",x0e],["block",w0e],["inline",S0e],["linkify",A0e],["replacements",R0e],["smartquotes",F0e]];function X0(){this.ruler=new N0e;for(var e=0;e<g_.length;e++)this.ruler.push(g_[e][0],g_[e][1])}X0.prototype.process=function(e){var t,n,r;for(r=this.ruler.getRules(""),t=0,n=r.length;t<n;t++)r[t](e)};X0.prototype.State=V0e;var $0e=X0,v_=or.isSpace;function y_(e,t){var n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.substr(n,r-n)}function Nk(e){var t=[],n=0,r=e.length,s,u=!1,h=0,l="";for(s=e.charCodeAt(n);n<r;)s===124&&(u?(l+=e.substring(h,n-1),h=n):(t.push(l+e.substring(h,n)),l="",h=n+1)),u=s===92,n++,s=e.charCodeAt(n);return t.push(l+e.substring(h)),t}var U0e=function(t,n,r,s){var u,h,l,v,_,S,C,k,D,O,R,F,N,j,X,ee,le,ie;if(n+2>r||(S=n+1,t.sCount[S]<t.blkIndent)||t.sCount[S]-t.blkIndent>=4||(l=t.bMarks[S]+t.tShift[S],l>=t.eMarks[S])||(le=t.src.charCodeAt(l++),le!==124&&le!==45&&le!==58)||l>=t.eMarks[S]||(ie=t.src.charCodeAt(l++),ie!==124&&ie!==45&&ie!==58&&!v_(ie))||le===45&&v_(ie))return!1;for(;l<t.eMarks[S];){if(u=t.src.charCodeAt(l),u!==124&&u!==45&&u!==58&&!v_(u))return!1;l++}for(h=y_(t,n+1),C=h.split("|"),O=[],v=0;v<C.length;v++){if(R=C[v].trim(),!R){if(v===0||v===C.length-1)continue;return!1}if(!/^:?-+:?$/.test(R))return!1;R.charCodeAt(R.length-1)===58?O.push(R.charCodeAt(0)===58?"center":"right"):R.charCodeAt(0)===58?O.push("left"):O.push("")}if(h=y_(t,n).trim(),h.indexOf("|")===-1||t.sCount[n]-t.blkIndent>=4||(C=Nk(h),C.length&&C[0]===""&&C.shift(),C.length&&C[C.length-1]===""&&C.pop(),k=C.length,k===0||k!==O.length))return!1;if(s)return!0;for(j=t.parentType,t.parentType="table",ee=t.md.block.ruler.getRules("blockquote"),D=t.push("table_open","table",1),D.map=F=[n,0],D=t.push("thead_open","thead",1),D.map=[n,n+1],D=t.push("tr_open","tr",1),D.map=[n,n+1],v=0;v<C.length;v++)D=t.push("th_open","th",1),O[v]&&(D.attrs=[["style","text-align:"+O[v]]]),D=t.push("inline","",0),D.content=C[v].trim(),D.children=[],D=t.push("th_close","th",-1);for(D=t.push("tr_close","tr",-1),D=t.push("thead_close","thead",-1),S=n+2;S<r&&!(t.sCount[S]<t.blkIndent);S++){for(X=!1,v=0,_=ee.length;v<_;v++)if(ee[v](t,S,r,!0)){X=!0;break}if(X||(h=y_(t,S).trim(),!h)||t.sCount[S]-t.blkIndent>=4)break;for(C=Nk(h),C.length&&C[0]===""&&C.shift(),C.length&&C[C.length-1]===""&&C.pop(),S===n+2&&(D=t.push("tbody_open","tbody",1),D.map=N=[n+2,0]),D=t.push("tr_open","tr",1),D.map=[S,S+1],v=0;v<k;v++)D=t.push("td_open","td",1),O[v]&&(D.attrs=[["style","text-align:"+O[v]]]),D=t.push("inline","",0),D.content=C[v]?C[v].trim():"",D.children=[],D=t.push("td_close","td",-1);D=t.push("tr_close","tr",-1)}return N&&(D=t.push("tbody_close","tbody",-1),N[1]=S),D=t.push("table_close","table",-1),F[1]=S,t.parentType=j,t.line=S,!0},q0e=function(t,n,r){var s,u,h;if(t.sCount[n]-t.blkIndent<4)return!1;for(u=s=n+1;s<r;){if(t.isEmpty(s)){s++;continue}if(t.sCount[s]-t.blkIndent>=4){s++,u=s;continue}break}return t.line=u,h=t.push("code_block","code",0),h.content=t.getLines(n,u,4+t.blkIndent,!1)+`
`,h.map=[n,t.line],!0},j0e=function(t,n,r,s){var u,h,l,v,_,S,C,k=!1,D=t.bMarks[n]+t.tShift[n],O=t.eMarks[n];if(t.sCount[n]-t.blkIndent>=4||D+3>O||(u=t.src.charCodeAt(D),u!==126&&u!==96)||(_=D,D=t.skipChars(D,u),h=D-_,h<3)||(C=t.src.slice(_,D),l=t.src.slice(D,O),u===96&&l.indexOf(String.fromCharCode(u))>=0))return!1;if(s)return!0;for(v=n;v++,!(v>=r||(D=_=t.bMarks[v]+t.tShift[v],O=t.eMarks[v],D<O&&t.sCount[v]<t.blkIndent));)if(t.src.charCodeAt(D)===u&&!(t.sCount[v]-t.blkIndent>=4)&&(D=t.skipChars(D,u),!(D-_<h)&&(D=t.skipSpaces(D),!(D<O)))){k=!0;break}return h=t.sCount[n],t.line=v+(k?1:0),S=t.push("fence","code",0),S.info=l,S.content=t.getLines(n+1,v,h,!0),S.markup=C,S.map=[n,t.line],!0},$k=or.isSpace,H0e=function(t,n,r,s){var u,h,l,v,_,S,C,k,D,O,R,F,N,j,X,ee,le,ie,se,H,Z=t.lineMax,ne=t.bMarks[n]+t.tShift[n],_e=t.eMarks[n];if(t.sCount[n]-t.blkIndent>=4||t.src.charCodeAt(ne++)!==62)return!1;if(s)return!0;for(v=D=t.sCount[n]+1,t.src.charCodeAt(ne)===32?(ne++,v++,D++,u=!1,ee=!0):t.src.charCodeAt(ne)===9?(ee=!0,(t.bsCount[n]+D)%4===3?(ne++,v++,D++,u=!1):u=!0):ee=!1,O=[t.bMarks[n]],t.bMarks[n]=ne;ne<_e&&(h=t.src.charCodeAt(ne),$k(h));){h===9?D+=4-(D+t.bsCount[n]+(u?1:0))%4:D++;ne++}for(R=[t.bsCount[n]],t.bsCount[n]=t.sCount[n]+1+(ee?1:0),S=ne>=_e,j=[t.sCount[n]],t.sCount[n]=D-v,X=[t.tShift[n]],t.tShift[n]=ne-t.bMarks[n],ie=t.md.block.ruler.getRules("blockquote"),N=t.parentType,t.parentType="blockquote",k=n+1;k<r&&(H=t.sCount[k]<t.blkIndent,ne=t.bMarks[k]+t.tShift[k],_e=t.eMarks[k],!(ne>=_e));k++){if(t.src.charCodeAt(ne++)===62&&!H){for(v=D=t.sCount[k]+1,t.src.charCodeAt(ne)===32?(ne++,v++,D++,u=!1,ee=!0):t.src.charCodeAt(ne)===9?(ee=!0,(t.bsCount[k]+D)%4===3?(ne++,v++,D++,u=!1):u=!0):ee=!1,O.push(t.bMarks[k]),t.bMarks[k]=ne;ne<_e&&(h=t.src.charCodeAt(ne),$k(h));){h===9?D+=4-(D+t.bsCount[k]+(u?1:0))%4:D++;ne++}S=ne>=_e,R.push(t.bsCount[k]),t.bsCount[k]=t.sCount[k]+1+(ee?1:0),j.push(t.sCount[k]),t.sCount[k]=D-v,X.push(t.tShift[k]),t.tShift[k]=ne-t.bMarks[k];continue}if(S)break;for(le=!1,l=0,_=ie.length;l<_;l++)if(ie[l](t,k,r,!0)){le=!0;break}if(le){t.lineMax=k,t.blkIndent!==0&&(O.push(t.bMarks[k]),R.push(t.bsCount[k]),X.push(t.tShift[k]),j.push(t.sCount[k]),t.sCount[k]-=t.blkIndent);break}O.push(t.bMarks[k]),R.push(t.bsCount[k]),X.push(t.tShift[k]),j.push(t.sCount[k]),t.sCount[k]=-1}for(F=t.blkIndent,t.blkIndent=0,se=t.push("blockquote_open","blockquote",1),se.markup=">",se.map=C=[n,0],t.md.block.tokenize(t,n,k),se=t.push("blockquote_close","blockquote",-1),se.markup=">",t.lineMax=Z,t.parentType=N,C[1]=t.line,l=0;l<X.length;l++)t.bMarks[l+n]=O[l],t.tShift[l+n]=X[l],t.sCount[l+n]=j[l],t.bsCount[l+n]=R[l];return t.blkIndent=F,!0},G0e=or.isSpace,W0e=function(t,n,r,s){var u,h,l,v,_=t.bMarks[n]+t.tShift[n],S=t.eMarks[n];if(t.sCount[n]-t.blkIndent>=4||(u=t.src.charCodeAt(_++),u!==42&&u!==45&&u!==95))return!1;for(h=1;_<S;){if(l=t.src.charCodeAt(_++),l!==u&&!G0e(l))return!1;l===u&&h++}return h<3?!1:(s||(t.line=n+1,v=t.push("hr","hr",0),v.map=[n,t.line],v.markup=Array(h+1).join(String.fromCharCode(u))),!0)},NE=or.isSpace;function Uk(e,t){var n,r,s,u;return r=e.bMarks[t]+e.tShift[t],s=e.eMarks[t],n=e.src.charCodeAt(r++),n!==42&&n!==45&&n!==43||r<s&&(u=e.src.charCodeAt(r),!NE(u))?-1:r}function qk(e,t){var n,r=e.bMarks[t]+e.tShift[t],s=r,u=e.eMarks[t];if(s+1>=u||(n=e.src.charCodeAt(s++),n<48||n>57))return-1;for(;;){if(s>=u)return-1;if(n=e.src.charCodeAt(s++),n>=48&&n<=57){if(s-r>=10)return-1;continue}if(n===41||n===46)break;return-1}return s<u&&(n=e.src.charCodeAt(s),!NE(n))?-1:s}function Y0e(e,t){var n,r,s=e.level+2;for(n=t+2,r=e.tokens.length-2;n<r;n++)e.tokens[n].level===s&&e.tokens[n].type==="paragraph_open"&&(e.tokens[n+2].hidden=!0,e.tokens[n].hidden=!0,n+=2)}var Z0e=function(t,n,r,s){var u,h,l,v,_,S,C,k,D,O,R,F,N,j,X,ee,le,ie,se,H,Z,ne,_e,te,Se,me,Ve,Ge,$e=!1,ke=!0;if(t.sCount[n]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[n]-t.listIndent>=4&&t.sCount[n]<t.blkIndent)return!1;if(s&&t.parentType==="paragraph"&&t.sCount[n]>=t.blkIndent&&($e=!0),(_e=qk(t,n))>=0){if(C=!0,Se=t.bMarks[n]+t.tShift[n],N=Number(t.src.slice(Se,_e-1)),$e&&N!==1)return!1}else if((_e=Uk(t,n))>=0)C=!1;else return!1;if($e&&t.skipSpaces(_e)>=t.eMarks[n])return!1;if(F=t.src.charCodeAt(_e-1),s)return!0;for(R=t.tokens.length,C?(Ge=t.push("ordered_list_open","ol",1),N!==1&&(Ge.attrs=[["start",N]])):Ge=t.push("bullet_list_open","ul",1),Ge.map=O=[n,0],Ge.markup=String.fromCharCode(F),X=n,te=!1,Ve=t.md.block.ruler.getRules("list"),ie=t.parentType,t.parentType="list";X<r;){for(ne=_e,j=t.eMarks[X],S=ee=t.sCount[X]+_e-(t.bMarks[n]+t.tShift[n]);ne<j;){if(u=t.src.charCodeAt(ne),u===9)ee+=4-(ee+t.bsCount[X])%4;else if(u===32)ee++;else break;ne++}if(h=ne,h>=j?_=1:_=ee-S,_>4&&(_=1),v=S+_,Ge=t.push("list_item_open","li",1),Ge.markup=String.fromCharCode(F),Ge.map=k=[n,0],C&&(Ge.info=t.src.slice(Se,_e-1)),Z=t.tight,H=t.tShift[n],se=t.sCount[n],le=t.listIndent,t.listIndent=t.blkIndent,t.blkIndent=v,t.tight=!0,t.tShift[n]=h-t.bMarks[n],t.sCount[n]=ee,h>=j&&t.isEmpty(n+1)?t.line=Math.min(t.line+2,r):t.md.block.tokenize(t,n,r,!0),(!t.tight||te)&&(ke=!1),te=t.line-n>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=le,t.tShift[n]=H,t.sCount[n]=se,t.tight=Z,Ge=t.push("list_item_close","li",-1),Ge.markup=String.fromCharCode(F),X=n=t.line,k[1]=X,h=t.bMarks[n],X>=r||t.sCount[X]<t.blkIndent||t.sCount[n]-t.blkIndent>=4)break;for(me=!1,l=0,D=Ve.length;l<D;l++)if(Ve[l](t,X,r,!0)){me=!0;break}if(me)break;if(C){if(_e=qk(t,X),_e<0)break;Se=t.bMarks[X]+t.tShift[X]}else if(_e=Uk(t,X),_e<0)break;if(F!==t.src.charCodeAt(_e-1))break}return C?Ge=t.push("ordered_list_close","ol",-1):Ge=t.push("bullet_list_close","ul",-1),Ge.markup=String.fromCharCode(F),O[1]=X,t.line=X,t.parentType=ie,ke&&Y0e(t,R),!0},K0e=or.normalizeReference,Pm=or.isSpace,X0e=function(t,n,r,s){var u,h,l,v,_,S,C,k,D,O,R,F,N,j,X,ee,le=0,ie=t.bMarks[n]+t.tShift[n],se=t.eMarks[n],H=n+1;if(t.sCount[n]-t.blkIndent>=4||t.src.charCodeAt(ie)!==91)return!1;for(;++ie<se;)if(t.src.charCodeAt(ie)===93&&t.src.charCodeAt(ie-1)!==92){if(ie+1===se||t.src.charCodeAt(ie+1)!==58)return!1;break}for(v=t.lineMax,X=t.md.block.ruler.getRules("reference"),O=t.parentType,t.parentType="reference";H<v&&!t.isEmpty(H);H++)if(!(t.sCount[H]-t.blkIndent>3)&&!(t.sCount[H]<0)){for(j=!1,S=0,C=X.length;S<C;S++)if(X[S](t,H,v,!0)){j=!0;break}if(j)break}for(N=t.getLines(n,H,t.blkIndent,!1).trim(),se=N.length,ie=1;ie<se;ie++){if(u=N.charCodeAt(ie),u===91)return!1;if(u===93){D=ie;break}else u===10?le++:u===92&&(ie++,ie<se&&N.charCodeAt(ie)===10&&le++)}if(D<0||N.charCodeAt(D+1)!==58)return!1;for(ie=D+2;ie<se;ie++)if(u=N.charCodeAt(ie),u===10)le++;else if(!Pm(u))break;if(R=t.md.helpers.parseLinkDestination(N,ie,se),!R.ok||(_=t.md.normalizeLink(R.str),!t.md.validateLink(_)))return!1;for(ie=R.pos,le+=R.lines,h=ie,l=le,F=ie;ie<se;ie++)if(u=N.charCodeAt(ie),u===10)le++;else if(!Pm(u))break;for(R=t.md.helpers.parseLinkTitle(N,ie,se),ie<se&&F!==ie&&R.ok?(ee=R.str,ie=R.pos,le+=R.lines):(ee="",ie=h,le=l);ie<se&&(u=N.charCodeAt(ie),!!Pm(u));)ie++;if(ie<se&&N.charCodeAt(ie)!==10&&ee)for(ee="",ie=h,le=l;ie<se&&(u=N.charCodeAt(ie),!!Pm(u));)ie++;return ie<se&&N.charCodeAt(ie)!==10||(k=K0e(N.slice(1,D)),!k)?!1:(s||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[k]>"u"&&(t.env.references[k]={title:ee,href:_}),t.parentType=O,t.line=n+le+1),!0)},J0e=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],uv={},Q0e="[a-zA-Z_:][a-zA-Z0-9:._-]*",exe="[^\"'=<>`\\x00-\\x20]+",txe="'[^']*'",nxe='"[^"]*"',rxe="(?:"+exe+"|"+txe+"|"+nxe+")",ixe="(?:\\s+"+Q0e+"(?:\\s*=\\s*"+rxe+")?)",$E="<[A-Za-z][A-Za-z0-9\\-]*"+ixe+"*\\s*\\/?>",UE="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",axe="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",sxe="<[?][\\s\\S]*?[?]>",oxe="<![A-Z]+\\s+[^>]*>",lxe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",cxe=new RegExp("^(?:"+$E+"|"+UE+"|"+axe+"|"+sxe+"|"+oxe+"|"+lxe+")"),uxe=new RegExp("^(?:"+$E+"|"+UE+")");uv.HTML_TAG_RE=cxe;uv.HTML_OPEN_CLOSE_TAG_RE=uxe;var dxe=J0e,hxe=uv.HTML_OPEN_CLOSE_TAG_RE,td=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+dxe.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(hxe.source+"\\s*$"),/^$/,!1]],fxe=function(t,n,r,s){var u,h,l,v,_=t.bMarks[n]+t.tShift[n],S=t.eMarks[n];if(t.sCount[n]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(_)!==60)return!1;for(v=t.src.slice(_,S),u=0;u<td.length&&!td[u][0].test(v);u++);if(u===td.length)return!1;if(s)return td[u][2];if(h=n+1,!td[u][1].test(v)){for(;h<r&&!(t.sCount[h]<t.blkIndent);h++)if(_=t.bMarks[h]+t.tShift[h],S=t.eMarks[h],v=t.src.slice(_,S),td[u][1].test(v)){v.length!==0&&h++;break}}return t.line=h,l=t.push("html_block","",0),l.map=[n,h],l.content=t.getLines(n,h,t.blkIndent,!0),!0},jk=or.isSpace,pxe=function(t,n,r,s){var u,h,l,v,_=t.bMarks[n]+t.tShift[n],S=t.eMarks[n];if(t.sCount[n]-t.blkIndent>=4||(u=t.src.charCodeAt(_),u!==35||_>=S))return!1;for(h=1,u=t.src.charCodeAt(++_);u===35&&_<S&&h<=6;)h++,u=t.src.charCodeAt(++_);return h>6||_<S&&!jk(u)?!1:(s||(S=t.skipSpacesBack(S,_),l=t.skipCharsBack(S,35,_),l>_&&jk(t.src.charCodeAt(l-1))&&(S=l),t.line=n+1,v=t.push("heading_open","h"+String(h),1),v.markup="########".slice(0,h),v.map=[n,t.line],v=t.push("inline","",0),v.content=t.src.slice(_,S).trim(),v.map=[n,t.line],v.children=[],v=t.push("heading_close","h"+String(h),-1),v.markup="########".slice(0,h)),!0)},mxe=function(t,n,r){var s,u,h,l,v,_,S,C,k,D=n+1,O,R=t.md.block.ruler.getRules("paragraph");if(t.sCount[n]-t.blkIndent>=4)return!1;for(O=t.parentType,t.parentType="paragraph";D<r&&!t.isEmpty(D);D++)if(!(t.sCount[D]-t.blkIndent>3)){if(t.sCount[D]>=t.blkIndent&&(_=t.bMarks[D]+t.tShift[D],S=t.eMarks[D],_<S&&(k=t.src.charCodeAt(_),(k===45||k===61)&&(_=t.skipChars(_,k),_=t.skipSpaces(_),_>=S)))){C=k===61?1:2;break}if(!(t.sCount[D]<0)){for(u=!1,h=0,l=R.length;h<l;h++)if(R[h](t,D,r,!0)){u=!0;break}if(u)break}}return C?(s=t.getLines(n,D,t.blkIndent,!1).trim(),t.line=D+1,v=t.push("heading_open","h"+String(C),1),v.markup=String.fromCharCode(k),v.map=[n,t.line],v=t.push("inline","",0),v.content=s,v.map=[n,t.line-1],v.children=[],v=t.push("heading_close","h"+String(C),-1),v.markup=String.fromCharCode(k),t.parentType=O,!0):!1},gxe=function(t,n){var r,s,u,h,l,v,_=n+1,S=t.md.block.ruler.getRules("paragraph"),C=t.lineMax;for(v=t.parentType,t.parentType="paragraph";_<C&&!t.isEmpty(_);_++)if(!(t.sCount[_]-t.blkIndent>3)&&!(t.sCount[_]<0)){for(s=!1,u=0,h=S.length;u<h;u++)if(S[u](t,_,C,!0)){s=!0;break}if(s)break}return r=t.getLines(n,_,t.blkIndent,!1).trim(),t.line=_,l=t.push("paragraph_open","p",1),l.map=[n,t.line],l=t.push("inline","",0),l.content=r,l.map=[n,t.line],l.children=[],l=t.push("paragraph_close","p",-1),t.parentType=v,!0},qE=K0,dv=or.isSpace;function Po(e,t,n,r){var s,u,h,l,v,_,S,C;for(this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",u=this.src,C=!1,h=l=_=S=0,v=u.length;l<v;l++){if(s=u.charCodeAt(l),!C)if(dv(s)){_++,s===9?S+=4-S%4:S++;continue}else C=!0;(s===10||l===v-1)&&(s!==10&&l++,this.bMarks.push(h),this.eMarks.push(l),this.tShift.push(_),this.sCount.push(S),this.bsCount.push(0),C=!1,_=0,S=0,h=l+1)}this.bMarks.push(u.length),this.eMarks.push(u.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Po.prototype.push=function(e,t,n){var r=new qE(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Po.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Po.prototype.skipEmptyLines=function(t){for(var n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Po.prototype.skipSpaces=function(t){for(var n,r=this.src.length;t<r&&(n=this.src.charCodeAt(t),!!dv(n));t++);return t};Po.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!dv(this.src.charCodeAt(--t)))return t+1;return t};Po.prototype.skipChars=function(t,n){for(var r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};Po.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Po.prototype.getLines=function(t,n,r,s){var u,h,l,v,_,S,C,k=t;if(t>=n)return"";for(S=new Array(n-t),u=0;k<n;k++,u++){for(h=0,C=v=this.bMarks[k],k+1<n||s?_=this.eMarks[k]+1:_=this.eMarks[k];v<_&&h<r;){if(l=this.src.charCodeAt(v),dv(l))l===9?h+=4-(h+this.bsCount[k])%4:h++;else if(v-C<this.tShift[k])h++;else break;v++}h>r?S[u]=new Array(h-r+1).join(" ")+this.src.slice(v,_):S[u]=this.src.slice(v,_)}return S.join("")};Po.prototype.Token=qE;var vxe=Po,yxe=Z0,Dm=[["table",U0e,["paragraph","reference"]],["code",q0e],["fence",j0e,["paragraph","reference","blockquote","list"]],["blockquote",H0e,["paragraph","reference","blockquote","list"]],["hr",W0e,["paragraph","reference","blockquote","list"]],["list",Z0e,["paragraph","reference","blockquote"]],["reference",X0e],["html_block",fxe,["paragraph","reference","blockquote"]],["heading",pxe,["paragraph","reference","blockquote"]],["lheading",mxe],["paragraph",gxe]];function hv(){this.ruler=new yxe;for(var e=0;e<Dm.length;e++)this.ruler.push(Dm[e][0],Dm[e][1],{alt:(Dm[e][2]||[]).slice()})}hv.prototype.tokenize=function(e,t,n){for(var r,s,u=this.ruler.getRules(""),h=u.length,l=t,v=!1,_=e.md.options.maxNesting;l<n&&(e.line=l=e.skipEmptyLines(l),!(l>=n||e.sCount[l]<e.blkIndent));){if(e.level>=_){e.line=n;break}for(s=0;s<h&&(r=u[s](e,l,n,!1),!r);s++);e.tight=!v,e.isEmpty(e.line-1)&&(v=!0),l=e.line,l<n&&e.isEmpty(l)&&(v=!0,l++,e.line=l)}};hv.prototype.parse=function(e,t,n,r){var s;e&&(s=new this.State(e,t,n,r),this.tokenize(s,s.line,s.lineMax))};hv.prototype.State=vxe;var _xe=hv;function bxe(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}var xxe=function(t,n){for(var r=t.pos;r<t.posMax&&!bxe(t.src.charCodeAt(r));)r++;return r===t.pos?!1:(n||(t.pending+=t.src.slice(t.pos,r)),t.pos=r,!0)},wxe=or.isSpace,Sxe=function(t,n){var r,s,u,h=t.pos;if(t.src.charCodeAt(h)!==10)return!1;if(r=t.pending.length-1,s=t.posMax,!n)if(r>=0&&t.pending.charCodeAt(r)===32)if(r>=1&&t.pending.charCodeAt(r-1)===32){for(u=r-1;u>=1&&t.pending.charCodeAt(u-1)===32;)u--;t.pending=t.pending.slice(0,u),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(h++;h<s&&wxe(t.src.charCodeAt(h));)h++;return t.pos=h,!0},kxe=or.isSpace,J0=[];for(var Hk=0;Hk<256;Hk++)J0.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){J0[e.charCodeAt(0)]=1});var Cxe=function(t,n){var r,s=t.pos,u=t.posMax;if(t.src.charCodeAt(s)!==92)return!1;if(s++,s<u){if(r=t.src.charCodeAt(s),r<256&&J0[r]!==0)return n||(t.pending+=t.src[s]),t.pos+=2,!0;if(r===10){for(n||t.push("hardbreak","br",0),s++;s<u&&(r=t.src.charCodeAt(s),!!kxe(r));)s++;return t.pos=s,!0}}return n||(t.pending+="\\"),t.pos++,!0},Txe=function(t,n){var r,s,u,h,l,v,_,S,C=t.pos,k=t.src.charCodeAt(C);if(k!==96)return!1;for(r=C,C++,s=t.posMax;C<s&&t.src.charCodeAt(C)===96;)C++;if(u=t.src.slice(r,C),_=u.length,t.backticksScanned&&(t.backticks[_]||0)<=r)return n||(t.pending+=u),t.pos+=_,!0;for(l=v=C;(l=t.src.indexOf("`",v))!==-1;){for(v=l+1;v<s&&t.src.charCodeAt(v)===96;)v++;if(S=v-l,S===_)return n||(h=t.push("code_inline","code",0),h.markup=u,h.content=t.src.slice(C,l).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),t.pos=v,!0;t.backticks[S]=l}return t.backticksScanned=!0,n||(t.pending+=u),t.pos+=_,!0},fv={};fv.tokenize=function(t,n){var r,s,u,h,l,v=t.pos,_=t.src.charCodeAt(v);if(n||_!==126||(s=t.scanDelims(t.pos,!0),h=s.length,l=String.fromCharCode(_),h<2))return!1;for(h%2&&(u=t.push("text","",0),u.content=l,h--),r=0;r<h;r+=2)u=t.push("text","",0),u.content=l+l,t.delimiters.push({marker:_,length:0,token:t.tokens.length-1,end:-1,open:s.can_open,close:s.can_close});return t.pos+=s.length,!0};function Gk(e,t){var n,r,s,u,h,l=[],v=t.length;for(n=0;n<v;n++)s=t[n],s.marker===126&&s.end!==-1&&(u=t[s.end],h=e.tokens[s.token],h.type="s_open",h.tag="s",h.nesting=1,h.markup="~~",h.content="",h=e.tokens[u.token],h.type="s_close",h.tag="s",h.nesting=-1,h.markup="~~",h.content="",e.tokens[u.token-1].type==="text"&&e.tokens[u.token-1].content==="~"&&l.push(u.token-1));for(;l.length;){for(n=l.pop(),r=n+1;r<e.tokens.length&&e.tokens[r].type==="s_close";)r++;r--,n!==r&&(h=e.tokens[r],e.tokens[r]=e.tokens[n],e.tokens[n]=h)}}fv.postProcess=function(t){var n,r=t.tokens_meta,s=t.tokens_meta.length;for(Gk(t,t.delimiters),n=0;n<s;n++)r[n]&&r[n].delimiters&&Gk(t,r[n].delimiters)};var pv={};pv.tokenize=function(t,n){var r,s,u,h=t.pos,l=t.src.charCodeAt(h);if(n||l!==95&&l!==42)return!1;for(s=t.scanDelims(t.pos,l===42),r=0;r<s.length;r++)u=t.push("text","",0),u.content=String.fromCharCode(l),t.delimiters.push({marker:l,length:s.length,token:t.tokens.length-1,end:-1,open:s.can_open,close:s.can_close});return t.pos+=s.length,!0};function Wk(e,t){var n,r,s,u,h,l,v=t.length;for(n=v-1;n>=0;n--)r=t[n],!(r.marker!==95&&r.marker!==42)&&r.end!==-1&&(s=t[r.end],l=n>0&&t[n-1].end===r.end+1&&t[n-1].marker===r.marker&&t[n-1].token===r.token-1&&t[r.end+1].token===s.token+1,h=String.fromCharCode(r.marker),u=e.tokens[r.token],u.type=l?"strong_open":"em_open",u.tag=l?"strong":"em",u.nesting=1,u.markup=l?h+h:h,u.content="",u=e.tokens[s.token],u.type=l?"strong_close":"em_close",u.tag=l?"strong":"em",u.nesting=-1,u.markup=l?h+h:h,u.content="",l&&(e.tokens[t[n-1].token].content="",e.tokens[t[r.end+1].token].content="",n--))}pv.postProcess=function(t){var n,r=t.tokens_meta,s=t.tokens_meta.length;for(Wk(t,t.delimiters),n=0;n<s;n++)r[n]&&r[n].delimiters&&Wk(t,r[n].delimiters)};var Axe=or.normalizeReference,__=or.isSpace,Exe=function(t,n){var r,s,u,h,l,v,_,S,C,k="",D="",O=t.pos,R=t.posMax,F=t.pos,N=!0;if(t.src.charCodeAt(t.pos)!==91||(l=t.pos+1,h=t.md.helpers.parseLinkLabel(t,t.pos,!0),h<0))return!1;if(v=h+1,v<R&&t.src.charCodeAt(v)===40){for(N=!1,v++;v<R&&(s=t.src.charCodeAt(v),!(!__(s)&&s!==10));v++);if(v>=R)return!1;if(F=v,_=t.md.helpers.parseLinkDestination(t.src,v,t.posMax),_.ok){for(k=t.md.normalizeLink(_.str),t.md.validateLink(k)?v=_.pos:k="",F=v;v<R&&(s=t.src.charCodeAt(v),!(!__(s)&&s!==10));v++);if(_=t.md.helpers.parseLinkTitle(t.src,v,t.posMax),v<R&&F!==v&&_.ok)for(D=_.str,v=_.pos;v<R&&(s=t.src.charCodeAt(v),!(!__(s)&&s!==10));v++);}(v>=R||t.src.charCodeAt(v)!==41)&&(N=!0),v++}if(N){if(typeof t.env.references>"u")return!1;if(v<R&&t.src.charCodeAt(v)===91?(F=v+1,v=t.md.helpers.parseLinkLabel(t,v),v>=0?u=t.src.slice(F,v++):v=h+1):v=h+1,u||(u=t.src.slice(l,h)),S=t.env.references[Axe(u)],!S)return t.pos=O,!1;k=S.href,D=S.title}return n||(t.pos=l,t.posMax=h,C=t.push("link_open","a",1),C.attrs=r=[["href",k]],D&&r.push(["title",D]),t.md.inline.tokenize(t),C=t.push("link_close","a",-1)),t.pos=v,t.posMax=R,!0},Ixe=or.normalizeReference,b_=or.isSpace,Pxe=function(t,n){var r,s,u,h,l,v,_,S,C,k,D,O,R,F="",N=t.pos,j=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91||(v=t.pos+2,l=t.md.helpers.parseLinkLabel(t,t.pos+1,!1),l<0))return!1;if(_=l+1,_<j&&t.src.charCodeAt(_)===40){for(_++;_<j&&(s=t.src.charCodeAt(_),!(!b_(s)&&s!==10));_++);if(_>=j)return!1;for(R=_,C=t.md.helpers.parseLinkDestination(t.src,_,t.posMax),C.ok&&(F=t.md.normalizeLink(C.str),t.md.validateLink(F)?_=C.pos:F=""),R=_;_<j&&(s=t.src.charCodeAt(_),!(!b_(s)&&s!==10));_++);if(C=t.md.helpers.parseLinkTitle(t.src,_,t.posMax),_<j&&R!==_&&C.ok)for(k=C.str,_=C.pos;_<j&&(s=t.src.charCodeAt(_),!(!b_(s)&&s!==10));_++);else k="";if(_>=j||t.src.charCodeAt(_)!==41)return t.pos=N,!1;_++}else{if(typeof t.env.references>"u")return!1;if(_<j&&t.src.charCodeAt(_)===91?(R=_+1,_=t.md.helpers.parseLinkLabel(t,_),_>=0?h=t.src.slice(R,_++):_=l+1):_=l+1,h||(h=t.src.slice(v,l)),S=t.env.references[Ixe(h)],!S)return t.pos=N,!1;F=S.href,k=S.title}return n||(u=t.src.slice(v,l),t.md.inline.parse(u,t.md,t.env,O=[]),D=t.push("image","img",0),D.attrs=r=[["src",F],["alt",""]],D.children=O,D.content=u,k&&r.push(["title",k])),t.pos=_,t.posMax=j,!0},Dxe=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Mxe=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/,Lxe=function(t,n){var r,s,u,h,l,v,_=t.pos;if(t.src.charCodeAt(_)!==60)return!1;for(l=t.pos,v=t.posMax;;){if(++_>=v||(h=t.src.charCodeAt(_),h===60))return!1;if(h===62)break}return r=t.src.slice(l+1,_),Mxe.test(r)?(s=t.md.normalizeLink(r),t.md.validateLink(s)?(n||(u=t.push("link_open","a",1),u.attrs=[["href",s]],u.markup="autolink",u.info="auto",u=t.push("text","",0),u.content=t.md.normalizeLinkText(r),u=t.push("link_close","a",-1),u.markup="autolink",u.info="auto"),t.pos+=r.length+2,!0):!1):Dxe.test(r)?(s=t.md.normalizeLink("mailto:"+r),t.md.validateLink(s)?(n||(u=t.push("link_open","a",1),u.attrs=[["href",s]],u.markup="autolink",u.info="auto",u=t.push("text","",0),u.content=t.md.normalizeLinkText(r),u=t.push("link_close","a",-1),u.markup="autolink",u.info="auto"),t.pos+=r.length+2,!0):!1):!1},Rxe=uv.HTML_TAG_RE;function Oxe(e){var t=e|32;return t>=97&&t<=122}var zxe=function(t,n){var r,s,u,h,l=t.pos;return!t.md.options.html||(u=t.posMax,t.src.charCodeAt(l)!==60||l+2>=u)||(r=t.src.charCodeAt(l+1),r!==33&&r!==63&&r!==47&&!Oxe(r))||(s=t.src.slice(l).match(Rxe),!s)?!1:(n||(h=t.push("html_inline","",0),h.content=t.src.slice(l,l+s[0].length)),t.pos+=s[0].length,!0)},Yk=RE,Fxe=or.has,Bxe=or.isValidEntityCode,Zk=or.fromCodePoint,Vxe=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Nxe=/^&([a-z][a-z0-9]{1,31});/i,$xe=function(t,n){var r,s,u,h=t.pos,l=t.posMax;if(t.src.charCodeAt(h)!==38)return!1;if(h+1<l){if(r=t.src.charCodeAt(h+1),r===35){if(u=t.src.slice(h).match(Vxe),u)return n||(s=u[1][0].toLowerCase()==="x"?parseInt(u[1].slice(1),16):parseInt(u[1],10),t.pending+=Bxe(s)?Zk(s):Zk(65533)),t.pos+=u[0].length,!0}else if(u=t.src.slice(h).match(Nxe),u&&Fxe(Yk,u[1]))return n||(t.pending+=Yk[u[1]]),t.pos+=u[0].length,!0}return n||(t.pending+="&"),t.pos++,!0};function Kk(e,t){var n,r,s,u,h,l,v,_,S={},C=t.length;if(C){var k=0,D=-2,O=[];for(n=0;n<C;n++)if(s=t[n],O.push(0),(t[k].marker!==s.marker||D!==s.token-1)&&(k=n),D=s.token,s.length=s.length||0,!!s.close){for(S.hasOwnProperty(s.marker)||(S[s.marker]=[-1,-1,-1,-1,-1,-1]),h=S[s.marker][(s.open?3:0)+s.length%3],r=k-O[k]-1,l=r;r>h;r-=O[r]+1)if(u=t[r],u.marker===s.marker&&u.open&&u.end<0&&(v=!1,(u.close||s.open)&&(u.length+s.length)%3===0&&(u.length%3!==0||s.length%3!==0)&&(v=!0),!v)){_=r>0&&!t[r-1].open?O[r-1]+1:0,O[n]=n-r+_,O[r]=_,s.open=!1,u.end=n,u.close=!1,l=-1,D=-2;break}l!==-1&&(S[s.marker][(s.open?3:0)+(s.length||0)%3]=l)}}}var Uxe=function(t){var n,r=t.tokens_meta,s=t.tokens_meta.length;for(Kk(t,t.delimiters),n=0;n<s;n++)r[n]&&r[n].delimiters&&Kk(t,r[n].delimiters)},qxe=function(t){var n,r,s=0,u=t.tokens,h=t.tokens.length;for(n=r=0;n<h;n++)u[n].nesting<0&&s--,u[n].level=s,u[n].nesting>0&&s++,u[n].type==="text"&&n+1<h&&u[n+1].type==="text"?u[n+1].content=u[n].content+u[n+1].content:(n!==r&&(u[r]=u[n]),r++);n!==r&&(u.length=r)},Q0=K0,Xk=or.isWhiteSpace,Jk=or.isPunctChar,Qk=or.isMdAsciiPunct;function Xf(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1}Xf.prototype.pushPending=function(){var e=new Q0("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};Xf.prototype.push=function(e,t,n){this.pending&&this.pushPending();var r=new Q0(e,t,n),s=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],s={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(s),r};Xf.prototype.scanDelims=function(e,t){var n=e,r,s,u,h,l,v,_,S,C,k=!0,D=!0,O=this.posMax,R=this.src.charCodeAt(e);for(r=e>0?this.src.charCodeAt(e-1):32;n<O&&this.src.charCodeAt(n)===R;)n++;return u=n-e,s=n<O?this.src.charCodeAt(n):32,_=Qk(r)||Jk(String.fromCharCode(r)),C=Qk(s)||Jk(String.fromCharCode(s)),v=Xk(r),S=Xk(s),S?k=!1:C&&(v||_||(k=!1)),v?D=!1:_&&(S||C||(D=!1)),t?(h=k,l=D):(h=k&&(!D||_),l=D&&(!k||C)),{can_open:h,can_close:l,length:u}};Xf.prototype.Token=Q0;var jxe=Xf,e2=Z0,x_=[["text",xxe],["newline",Sxe],["escape",Cxe],["backticks",Txe],["strikethrough",fv.tokenize],["emphasis",pv.tokenize],["link",Exe],["image",Pxe],["autolink",Lxe],["html_inline",zxe],["entity",$xe]],w_=[["balance_pairs",Uxe],["strikethrough",fv.postProcess],["emphasis",pv.postProcess],["text_collapse",qxe]];function Jf(){var e;for(this.ruler=new e2,e=0;e<x_.length;e++)this.ruler.push(x_[e][0],x_[e][1]);for(this.ruler2=new e2,e=0;e<w_.length;e++)this.ruler2.push(w_[e][0],w_[e][1])}Jf.prototype.skipToken=function(e){var t,n,r=e.pos,s=this.ruler.getRules(""),u=s.length,h=e.md.options.maxNesting,l=e.cache;if(typeof l[r]<"u"){e.pos=l[r];return}if(e.level<h)for(n=0;n<u&&(e.level++,t=s[n](e,!0),e.level--,!t);n++);else e.pos=e.posMax;t||e.pos++,l[r]=e.pos};Jf.prototype.tokenize=function(e){for(var t,n,r=this.ruler.getRules(""),s=r.length,u=e.posMax,h=e.md.options.maxNesting;e.pos<u;){if(e.level<h)for(n=0;n<s&&(t=r[n](e,!1),!t);n++);if(t){if(e.pos>=u)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};Jf.prototype.parse=function(e,t,n,r){var s,u,h,l=new this.State(e,t,n,r);for(this.tokenize(l),u=this.ruler2.getRules(""),h=u.length,s=0;s<h;s++)u[s](l)};Jf.prototype.State=jxe;var Hxe=Jf,S_,t2;function Gxe(){return t2||(t2=1,S_=function(e){var t={};t.src_Any=OE().source,t.src_Cc=zE().source,t.src_Z=FE().source,t.src_P=Y0.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");var n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-]).|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]).|"+(e&&e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+").|;(?!"+t.src_ZCc+").|\\!+(?!"+t.src_ZCc+"|[!]).|\\?(?!"+t.src_ZCc+"|[?]).)+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}),S_}function Cb(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function mv(e){return Object.prototype.toString.call(e)}function Wxe(e){return mv(e)==="[object String]"}function Yxe(e){return mv(e)==="[object Object]"}function Zxe(e){return mv(e)==="[object RegExp]"}function n2(e){return mv(e)==="[object Function]"}function Kxe(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var jE={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Xxe(e){return Object.keys(e||{}).reduce(function(t,n){return t||jE.hasOwnProperty(n)},!1)}var Jxe={"http:":{validate:function(e,t,n){var r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){var r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){var r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},Qxe="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",e1e="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function t1e(e){e.__index__=-1,e.__text_cache__=""}function n1e(e){return function(t,n){var r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function r2(){return function(e,t){t.normalize(e)}}function kg(e){var t=e.re=Gxe()(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(Qxe),n.push(t.src_xn),t.src_tlds=n.join("|");function r(l){return l.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");var s=[];e.__compiled__={};function u(l,v){throw new Error('(LinkifyIt) Invalid schema "'+l+'": '+v)}Object.keys(e.__schemas__).forEach(function(l){var v=e.__schemas__[l];if(v!==null){var _={validate:null,link:null};if(e.__compiled__[l]=_,Yxe(v)){Zxe(v.validate)?_.validate=n1e(v.validate):n2(v.validate)?_.validate=v.validate:u(l,v),n2(v.normalize)?_.normalize=v.normalize:v.normalize?u(l,v):_.normalize=r2();return}if(Wxe(v)){s.push(l);return}u(l,v)}}),s.forEach(function(l){e.__compiled__[e.__schemas__[l]]&&(e.__compiled__[l].validate=e.__compiled__[e.__schemas__[l]].validate,e.__compiled__[l].normalize=e.__compiled__[e.__schemas__[l]].normalize)}),e.__compiled__[""]={validate:null,normalize:r2()};var h=Object.keys(e.__compiled__).filter(function(l){return l.length>0&&e.__compiled__[l]}).map(Kxe).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+h+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+h+")","ig"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),t1e(e)}function r1e(e,t){var n=e.__index__,r=e.__last_index__,s=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=s,this.text=s,this.url=s}function i2(e,t){var n=new r1e(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function _s(e,t){if(!(this instanceof _s))return new _s(e,t);t||Xxe(e)&&(t=e,e={}),this.__opts__=Cb({},jE,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Cb({},Jxe,e),this.__compiled__={},this.__tlds__=e1e,this.__tlds_replaced__=!1,this.re={},kg(this)}_s.prototype.add=function(t,n){return this.__schemas__[t]=n,kg(this),this};_s.prototype.set=function(t){return this.__opts__=Cb(this.__opts__,t),this};_s.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;var n,r,s,u,h,l,v,_,S;if(this.re.schema_test.test(t)){for(v=this.re.schema_search,v.lastIndex=0;(n=v.exec(t))!==null;)if(u=this.testSchemaAt(t,n[2],v.lastIndex),u){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+u;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(_=t.search(this.re.host_fuzzy_test),_>=0&&(this.__index__<0||_<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(h=r.index+r[1].length,(this.__index__<0||h<this.__index__)&&(this.__schema__="",this.__index__=h,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(S=t.indexOf("@"),S>=0&&(s=t.match(this.re.email_fuzzy))!==null&&(h=s.index+s[1].length,l=s.index+s[0].length,(this.__index__<0||h<this.__index__||h===this.__index__&&l>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=h,this.__last_index__=l))),this.__index__>=0};_s.prototype.pretest=function(t){return this.re.pretest.test(t)};_s.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};_s.prototype.match=function(t){var n=0,r=[];this.__index__>=0&&this.__text_cache__===t&&(r.push(i2(this,n)),n=this.__last_index__);for(var s=n?t.slice(n):t;this.test(s);)r.push(i2(this,n)),s=s.slice(this.__last_index__),n+=this.__last_index__;return r.length?r:null};_s.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,s,u){return r!==u[s-1]}).reverse(),kg(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,kg(this),this)};_s.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};_s.prototype.onCompile=function(){};var i1e=_s;const fd=2147483647,go=36,ex=1,Df=26,a1e=38,s1e=700,HE=72,GE=128,WE="-",o1e=/^xn--/,l1e=/[^\0-\x7F]/,c1e=/[\x2E\u3002\uFF0E\uFF61]/g,u1e={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k_=go-ex,vo=Math.floor,C_=String.fromCharCode;function Kl(e){throw new RangeError(u1e[e])}function d1e(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function YE(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(c1e,".");const s=e.split("."),u=d1e(s,t).join(".");return r+u}function tx(e){const t=[];let n=0;const r=e.length;for(;n<r;){const s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){const u=e.charCodeAt(n++);(u&64512)==56320?t.push(((s&1023)<<10)+(u&1023)+65536):(t.push(s),n--)}else t.push(s)}return t}const ZE=e=>String.fromCodePoint(...e),h1e=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:go},a2=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},KE=function(e,t,n){let r=0;for(e=n?vo(e/s1e):e>>1,e+=vo(e/t);e>k_*Df>>1;r+=go)e=vo(e/k_);return vo(r+(k_+1)*e/(e+a1e))},nx=function(e){const t=[],n=e.length;let r=0,s=GE,u=HE,h=e.lastIndexOf(WE);h<0&&(h=0);for(let l=0;l<h;++l)e.charCodeAt(l)>=128&&Kl("not-basic"),t.push(e.charCodeAt(l));for(let l=h>0?h+1:0;l<n;){const v=r;for(let S=1,C=go;;C+=go){l>=n&&Kl("invalid-input");const k=h1e(e.charCodeAt(l++));k>=go&&Kl("invalid-input"),k>vo((fd-r)/S)&&Kl("overflow"),r+=k*S;const D=C<=u?ex:C>=u+Df?Df:C-u;if(k<D)break;const O=go-D;S>vo(fd/O)&&Kl("overflow"),S*=O}const _=t.length+1;u=KE(r-v,_,v==0),vo(r/_)>fd-s&&Kl("overflow"),s+=vo(r/_),r%=_,t.splice(r++,0,s)}return String.fromCodePoint(...t)},rx=function(e){const t=[];e=tx(e);const n=e.length;let r=GE,s=0,u=HE;for(const v of e)v<128&&t.push(C_(v));const h=t.length;let l=h;for(h&&t.push(WE);l<n;){let v=fd;for(const S of e)S>=r&&S<v&&(v=S);const _=l+1;v-r>vo((fd-s)/_)&&Kl("overflow"),s+=(v-r)*_,r=v;for(const S of e)if(S<r&&++s>fd&&Kl("overflow"),S===r){let C=s;for(let k=go;;k+=go){const D=k<=u?ex:k>=u+Df?Df:k-u;if(C<D)break;const O=C-D,R=go-D;t.push(C_(a2(D+O%R,0))),C=vo(O/R)}t.push(C_(a2(C,0))),u=KE(s,_,l===h),s=0,++l}++s,++r}return t.join("")},XE=function(e){return YE(e,function(t){return o1e.test(t)?nx(t.slice(4).toLowerCase()):t})},JE=function(e){return YE(e,function(t){return l1e.test(t)?"xn--"+rx(t):t})},f1e={version:"2.3.1",ucs2:{decode:tx,encode:ZE},decode:nx,encode:rx,toASCII:JE,toUnicode:XE},p1e=Object.freeze(Object.defineProperty({__proto__:null,decode:nx,default:f1e,encode:rx,toASCII:JE,toUnicode:XE,ucs2decode:tx,ucs2encode:ZE},Symbol.toStringTag,{value:"Module"})),m1e=aF(p1e);var g1e={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},v1e={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}},y1e={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}},df=or,_1e=cv,b1e=y0e,x1e=$0e,w1e=_xe,S1e=Hxe,k1e=i1e,Zc=Rd,QE=m1e,C1e={default:g1e,zero:v1e,commonmark:y1e},T1e=/^(vbscript|javascript|file|data):/,A1e=/^data:image\/(gif|png|jpeg|webp);/;function E1e(e){var t=e.trim().toLowerCase();return T1e.test(t)?!!A1e.test(t):!0}var eI=["http:","https:","mailto:"];function I1e(e){var t=Zc.parse(e,!0);if(t.hostname&&(!t.protocol||eI.indexOf(t.protocol)>=0))try{t.hostname=QE.toASCII(t.hostname)}catch{}return Zc.encode(Zc.format(t))}function P1e(e){var t=Zc.parse(e,!0);if(t.hostname&&(!t.protocol||eI.indexOf(t.protocol)>=0))try{t.hostname=QE.toUnicode(t.hostname)}catch{}return Zc.decode(Zc.format(t),Zc.decode.defaultChars+"%")}function bs(e,t){if(!(this instanceof bs))return new bs(e,t);t||df.isString(e)||(t=e||{},e="default"),this.inline=new S1e,this.block=new w1e,this.core=new x1e,this.renderer=new b1e,this.linkify=new k1e,this.validateLink=E1e,this.normalizeLink=I1e,this.normalizeLinkText=P1e,this.utils=df,this.helpers=df.assign({},_1e),this.options={},this.configure(e),t&&this.set(t)}bs.prototype.set=function(e){return df.assign(this.options,e),this};bs.prototype.configure=function(e){var t=this,n;if(df.isString(e)&&(n=e,e=C1e[n],!e))throw new Error('Wrong `markdown-it` preset "'+n+'", check name');if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(r){e.components[r].rules&&t[r].ruler.enableOnly(e.components[r].rules),e.components[r].rules2&&t[r].ruler2.enableOnly(e.components[r].rules2)}),this};bs.prototype.enable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(s){n=n.concat(this[s].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));var r=e.filter(function(s){return n.indexOf(s)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};bs.prototype.disable=function(e,t){var n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(s){n=n.concat(this[s].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));var r=e.filter(function(s){return n.indexOf(s)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};bs.prototype.use=function(e){var t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};bs.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");var n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};bs.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};bs.prototype.parseInline=function(e,t){var n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};bs.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};var D1e=bs,M1e=D1e;const L1e=iF(M1e);var R1e=sr({name:"VueMarkdown",props:{source:{type:String,required:!0},options:{type:Object,required:!1},plugins:{type:Array,required:!1}},setup:function(e){for(var t,n,r=lt(new L1e((t=e.options)!==null&&t!==void 0?t:{})),s=0,u=(n=e.plugins)!==null&&n!==void 0?n:[];s<u.length;s++){var h=u[s];r.value.use(h)}var l=Q(function(){return r.value.render(e.source)});return function(){return Zr("div",{innerHTML:l.value})}}});const O1e=R1e,z1e={data(){return{options:{html:!0,breaks:!0}}},components:{VueMarkdown:O1e},props:{markdownText:{type:String,required:!0}}},F1e={class:"markdown"};function B1e(e,t,n,r,s,u){const h=wn("vue-markdown");return fn(),ds("section",F1e,[E(h,{source:n.markdownText,options:s.options},null,8,["source","options"])])}const V1e=Kr(z1e,[["render",B1e]]);function tI(e,t){return function(){return e.apply(t,arguments)}}const{toString:N1e}=Object.prototype,{getPrototypeOf:ix}=Object,gv=(e=>t=>{const n=N1e.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Do=e=>(e=e.toLowerCase(),t=>gv(t)===e),vv=e=>t=>typeof t===e,{isArray:Fd}=Array,Mf=vv("undefined");function $1e(e){return e!==null&&!Mf(e)&&e.constructor!==null&&!Mf(e.constructor)&&vs(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const nI=Do("ArrayBuffer");function U1e(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&nI(e.buffer),t}const q1e=vv("string"),vs=vv("function"),rI=vv("number"),yv=e=>e!==null&&typeof e=="object",j1e=e=>e===!0||e===!1,Gm=e=>{if(gv(e)!=="object")return!1;const t=ix(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},H1e=Do("Date"),G1e=Do("File"),W1e=Do("Blob"),Y1e=Do("FileList"),Z1e=e=>yv(e)&&vs(e.pipe),K1e=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||vs(e.append)&&((t=gv(e))==="formdata"||t==="object"&&vs(e.toString)&&e.toString()==="[object FormData]"))},X1e=Do("URLSearchParams"),J1e=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qf(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),Fd(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const u=n?Object.getOwnPropertyNames(e):Object.keys(e),h=u.length;let l;for(r=0;r<h;r++)l=u[r],t.call(null,e[l],l,e)}}function iI(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const aI=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,sI=e=>!Mf(e)&&e!==aI;function Tb(){const{caseless:e}=sI(this)&&this||{},t={},n=(r,s)=>{const u=e&&iI(t,s)||s;Gm(t[u])&&Gm(r)?t[u]=Tb(t[u],r):Gm(r)?t[u]=Tb({},r):Fd(r)?t[u]=r.slice():t[u]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Qf(arguments[r],n);return t}const Q1e=(e,t,n,{allOwnKeys:r}={})=>(Qf(t,(s,u)=>{n&&vs(s)?e[u]=tI(s,n):e[u]=s},{allOwnKeys:r}),e),ewe=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),twe=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},nwe=(e,t,n,r)=>{let s,u,h;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),u=s.length;u-- >0;)h=s[u],(!r||r(h,e,t))&&!l[h]&&(t[h]=e[h],l[h]=!0);e=n!==!1&&ix(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},rwe=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},iwe=e=>{if(!e)return null;if(Fd(e))return e;let t=e.length;if(!rI(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},awe=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ix(Uint8Array)),swe=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=r.next())&&!s.done;){const u=s.value;t.call(e,u[0],u[1])}},owe=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},lwe=Do("HTMLFormElement"),cwe=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),s2=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),uwe=Do("RegExp"),oI=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Qf(n,(s,u)=>{let h;(h=t(s,u,e))!==!1&&(r[u]=h||s)}),Object.defineProperties(e,r)},dwe=e=>{oI(e,(t,n)=>{if(vs(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(vs(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},hwe=(e,t)=>{const n={},r=s=>{s.forEach(u=>{n[u]=!0})};return Fd(e)?r(e):r(String(e).split(t)),n},fwe=()=>{},pwe=(e,t)=>(e=+e,Number.isFinite(e)?e:t),T_="abcdefghijklmnopqrstuvwxyz",o2="0123456789",lI={DIGIT:o2,ALPHA:T_,ALPHA_DIGIT:T_+T_.toUpperCase()+o2},mwe=(e=16,t=lI.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function gwe(e){return!!(e&&vs(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const vwe=e=>{const t=new Array(10),n=(r,s)=>{if(yv(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[s]=r;const u=Fd(r)?[]:{};return Qf(r,(h,l)=>{const v=n(h,s+1);!Mf(v)&&(u[l]=v)}),t[s]=void 0,u}}return r};return n(e,0)},ywe=Do("AsyncFunction"),_we=e=>e&&(yv(e)||vs(e))&&vs(e.then)&&vs(e.catch),ht={isArray:Fd,isArrayBuffer:nI,isBuffer:$1e,isFormData:K1e,isArrayBufferView:U1e,isString:q1e,isNumber:rI,isBoolean:j1e,isObject:yv,isPlainObject:Gm,isUndefined:Mf,isDate:H1e,isFile:G1e,isBlob:W1e,isRegExp:uwe,isFunction:vs,isStream:Z1e,isURLSearchParams:X1e,isTypedArray:awe,isFileList:Y1e,forEach:Qf,merge:Tb,extend:Q1e,trim:J1e,stripBOM:ewe,inherits:twe,toFlatObject:nwe,kindOf:gv,kindOfTest:Do,endsWith:rwe,toArray:iwe,forEachEntry:swe,matchAll:owe,isHTMLForm:lwe,hasOwnProperty:s2,hasOwnProp:s2,reduceDescriptors:oI,freezeMethods:dwe,toObjectSet:hwe,toCamelCase:cwe,noop:fwe,toFiniteNumber:pwe,findKey:iI,global:aI,isContextDefined:sI,ALPHABET:lI,generateString:mwe,isSpecCompliantForm:gwe,toJSONObject:vwe,isAsyncFn:ywe,isThenable:_we};function Wn(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}ht.inherits(Wn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ht.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const cI=Wn.prototype,uI={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{uI[e]={value:e}});Object.defineProperties(Wn,uI);Object.defineProperty(cI,"isAxiosError",{value:!0});Wn.from=(e,t,n,r,s,u)=>{const h=Object.create(cI);return ht.toFlatObject(e,h,function(v){return v!==Error.prototype},l=>l!=="isAxiosError"),Wn.call(h,e.message,t,n,r,s),h.cause=e,h.name=e.name,u&&Object.assign(h,u),h};const bwe=null;function Ab(e){return ht.isPlainObject(e)||ht.isArray(e)}function dI(e){return ht.endsWith(e,"[]")?e.slice(0,-2):e}function l2(e,t,n){return e?e.concat(t).map(function(s,u){return s=dI(s),!n&&u?"["+s+"]":s}).join(n?".":""):t}function xwe(e){return ht.isArray(e)&&!e.some(Ab)}const wwe=ht.toFlatObject(ht,{},null,function(t){return/^is[A-Z]/.test(t)});function _v(e,t,n){if(!ht.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=ht.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,F){return!ht.isUndefined(F[R])});const r=n.metaTokens,s=n.visitor||S,u=n.dots,h=n.indexes,v=(n.Blob||typeof Blob<"u"&&Blob)&&ht.isSpecCompliantForm(t);if(!ht.isFunction(s))throw new TypeError("visitor must be a function");function _(O){if(O===null)return"";if(ht.isDate(O))return O.toISOString();if(!v&&ht.isBlob(O))throw new Wn("Blob is not supported. Use a Buffer instead.");return ht.isArrayBuffer(O)||ht.isTypedArray(O)?v&&typeof Blob=="function"?new Blob([O]):Buffer.from(O):O}function S(O,R,F){let N=O;if(O&&!F&&typeof O=="object"){if(ht.endsWith(R,"{}"))R=r?R:R.slice(0,-2),O=JSON.stringify(O);else if(ht.isArray(O)&&xwe(O)||(ht.isFileList(O)||ht.endsWith(R,"[]"))&&(N=ht.toArray(O)))return R=dI(R),N.forEach(function(X,ee){!(ht.isUndefined(X)||X===null)&&t.append(h===!0?l2([R],ee,u):h===null?R:R+"[]",_(X))}),!1}return Ab(O)?!0:(t.append(l2(F,R,u),_(O)),!1)}const C=[],k=Object.assign(wwe,{defaultVisitor:S,convertValue:_,isVisitable:Ab});function D(O,R){if(!ht.isUndefined(O)){if(C.indexOf(O)!==-1)throw Error("Circular reference detected in "+R.join("."));C.push(O),ht.forEach(O,function(N,j){(!(ht.isUndefined(N)||N===null)&&s.call(t,N,ht.isString(j)?j.trim():j,R,k))===!0&&D(N,R?R.concat(j):[j])}),C.pop()}}if(!ht.isObject(e))throw new TypeError("data must be an object");return D(e),t}function c2(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function ax(e,t){this._pairs=[],e&&_v(e,this,t)}const hI=ax.prototype;hI.append=function(t,n){this._pairs.push([t,n])};hI.toString=function(t){const n=t?function(r){return t.call(this,r,c2)}:c2;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Swe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function fI(e,t,n){if(!t)return e;const r=n&&n.encode||Swe,s=n&&n.serialize;let u;if(s?u=s(t,n):u=ht.isURLSearchParams(t)?t.toString():new ax(t,n).toString(r),u){const h=e.indexOf("#");h!==-1&&(e=e.slice(0,h)),e+=(e.indexOf("?")===-1?"?":"&")+u}return e}class u2{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ht.forEach(this.handlers,function(r){r!==null&&t(r)})}}const pI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kwe=typeof URLSearchParams<"u"?URLSearchParams:ax,Cwe=typeof FormData<"u"?FormData:null,Twe=typeof Blob<"u"?Blob:null,Awe={isBrowser:!0,classes:{URLSearchParams:kwe,FormData:Cwe,Blob:Twe},protocols:["http","https","file","blob","url","data"]},mI=typeof window<"u"&&typeof document<"u",Ewe=(e=>mI&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),Iwe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Pwe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:mI,hasStandardBrowserEnv:Ewe,hasStandardBrowserWebWorkerEnv:Iwe},Symbol.toStringTag,{value:"Module"})),yo={...Pwe,...Awe};function Dwe(e,t){return _v(e,new yo.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,u){return yo.isNode&&ht.isBuffer(n)?(this.append(r,n.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)}},t))}function Mwe(e){return ht.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Lwe(e){const t={},n=Object.keys(e);let r;const s=n.length;let u;for(r=0;r<s;r++)u=n[r],t[u]=e[u];return t}function gI(e){function t(n,r,s,u){let h=n[u++];if(h==="__proto__")return!0;const l=Number.isFinite(+h),v=u>=n.length;return h=!h&&ht.isArray(s)?s.length:h,v?(ht.hasOwnProp(s,h)?s[h]=[s[h],r]:s[h]=r,!l):((!s[h]||!ht.isObject(s[h]))&&(s[h]=[]),t(n,r,s[h],u)&&ht.isArray(s[h])&&(s[h]=Lwe(s[h])),!l)}if(ht.isFormData(e)&&ht.isFunction(e.entries)){const n={};return ht.forEachEntry(e,(r,s)=>{t(Mwe(r),s,n,0)}),n}return null}function Rwe(e,t,n){if(ht.isString(e))try{return(t||JSON.parse)(e),ht.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const sx={transitional:pI,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,u=ht.isObject(t);if(u&&ht.isHTMLForm(t)&&(t=new FormData(t)),ht.isFormData(t))return s?JSON.stringify(gI(t)):t;if(ht.isArrayBuffer(t)||ht.isBuffer(t)||ht.isStream(t)||ht.isFile(t)||ht.isBlob(t))return t;if(ht.isArrayBufferView(t))return t.buffer;if(ht.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(u){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Dwe(t,this.formSerializer).toString();if((l=ht.isFileList(t))||r.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return _v(l?{"files[]":t}:t,v&&new v,this.formSerializer)}}return u||s?(n.setContentType("application/json",!1),Rwe(t)):t}],transformResponse:[function(t){const n=this.transitional||sx.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(t&&ht.isString(t)&&(r&&!this.responseType||s)){const h=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(h)throw l.name==="SyntaxError"?Wn.from(l,Wn.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yo.classes.FormData,Blob:yo.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ht.forEach(["delete","get","head","post","put","patch"],e=>{sx.headers[e]={}});const ox=sx,Owe=ht.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),zwe=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(h){s=h.indexOf(":"),n=h.substring(0,s).trim().toLowerCase(),r=h.substring(s+1).trim(),!(!n||t[n]&&Owe[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},d2=Symbol("internals");function Xh(e){return e&&String(e).trim().toLowerCase()}function Wm(e){return e===!1||e==null?e:ht.isArray(e)?e.map(Wm):String(e)}function Fwe(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const Bwe=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function A_(e,t,n,r,s){if(ht.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!ht.isString(t)){if(ht.isString(r))return t.indexOf(r)!==-1;if(ht.isRegExp(r))return r.test(t)}}function Vwe(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function Nwe(e,t){const n=ht.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,u,h){return this[r].call(this,t,s,u,h)},configurable:!0})})}class bv{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function u(l,v,_){const S=Xh(v);if(!S)throw new Error("header name must be a non-empty string");const C=ht.findKey(s,S);(!C||s[C]===void 0||_===!0||_===void 0&&s[C]!==!1)&&(s[C||v]=Wm(l))}const h=(l,v)=>ht.forEach(l,(_,S)=>u(_,S,v));return ht.isPlainObject(t)||t instanceof this.constructor?h(t,n):ht.isString(t)&&(t=t.trim())&&!Bwe(t)?h(zwe(t),n):t!=null&&u(n,t,r),this}get(t,n){if(t=Xh(t),t){const r=ht.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return Fwe(s);if(ht.isFunction(n))return n.call(this,s,r);if(ht.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Xh(t),t){const r=ht.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||A_(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function u(h){if(h=Xh(h),h){const l=ht.findKey(r,h);l&&(!n||A_(r,r[l],l,n))&&(delete r[l],s=!0)}}return ht.isArray(t)?t.forEach(u):u(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const u=n[r];(!t||A_(this,this[u],u,t,!0))&&(delete this[u],s=!0)}return s}normalize(t){const n=this,r={};return ht.forEach(this,(s,u)=>{const h=ht.findKey(r,u);if(h){n[h]=Wm(s),delete n[u];return}const l=t?Vwe(u):String(u).trim();l!==u&&delete n[u],n[l]=Wm(s),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return ht.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&ht.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[d2]=this[d2]={accessors:{}}).accessors,s=this.prototype;function u(h){const l=Xh(h);r[l]||(Nwe(s,h),r[l]=!0)}return ht.isArray(t)?t.forEach(u):u(t),this}}bv.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ht.reduceDescriptors(bv.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});ht.freezeMethods(bv);const al=bv;function E_(e,t){const n=this||ox,r=t||n,s=al.from(r.headers);let u=r.data;return ht.forEach(e,function(l){u=l.call(n,u,s.normalize(),t?t.status:void 0)}),s.normalize(),u}function vI(e){return!!(e&&e.__CANCEL__)}function ep(e,t,n){Wn.call(this,e??"canceled",Wn.ERR_CANCELED,t,n),this.name="CanceledError"}ht.inherits(ep,Wn,{__CANCEL__:!0});function $we(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Wn("Request failed with status code "+n.status,[Wn.ERR_BAD_REQUEST,Wn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const Uwe=yo.hasStandardBrowserEnv?{write(e,t,n,r,s,u){const h=[e+"="+encodeURIComponent(t)];ht.isNumber(n)&&h.push("expires="+new Date(n).toGMTString()),ht.isString(r)&&h.push("path="+r),ht.isString(s)&&h.push("domain="+s),u===!0&&h.push("secure"),document.cookie=h.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function qwe(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function jwe(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function yI(e,t){return e&&!qwe(t)?jwe(e,t):t}const Hwe=yo.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(u){let h=u;return t&&(n.setAttribute("href",h),h=n.href),n.setAttribute("href",h),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(h){const l=ht.isString(h)?s(h):h;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}();function Gwe(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Wwe(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,u=0,h;return t=t!==void 0?t:1e3,function(v){const _=Date.now(),S=r[u];h||(h=_),n[s]=v,r[s]=_;let C=u,k=0;for(;C!==s;)k+=n[C++],C=C%e;if(s=(s+1)%e,s===u&&(u=(u+1)%e),_-h<t)return;const D=S&&_-S;return D?Math.round(k*1e3/D):void 0}}function h2(e,t){let n=0;const r=Wwe(50,250);return s=>{const u=s.loaded,h=s.lengthComputable?s.total:void 0,l=u-n,v=r(l),_=u<=h;n=u;const S={loaded:u,total:h,progress:h?u/h:void 0,bytes:l,rate:v||void 0,estimated:v&&h&&_?(h-u)/v:void 0,event:s};S[t?"download":"upload"]=!0,e(S)}}const Ywe=typeof XMLHttpRequest<"u",Zwe=Ywe&&function(e){return new Promise(function(n,r){let s=e.data;const u=al.from(e.headers).normalize();let{responseType:h,withXSRFToken:l}=e,v;function _(){e.cancelToken&&e.cancelToken.unsubscribe(v),e.signal&&e.signal.removeEventListener("abort",v)}let S;if(ht.isFormData(s)){if(yo.hasStandardBrowserEnv||yo.hasStandardBrowserWebWorkerEnv)u.setContentType(!1);else if((S=u.getContentType())!==!1){const[R,...F]=S?S.split(";").map(N=>N.trim()).filter(Boolean):[];u.setContentType([R||"multipart/form-data",...F].join("; "))}}let C=new XMLHttpRequest;if(e.auth){const R=e.auth.username||"",F=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";u.set("Authorization","Basic "+btoa(R+":"+F))}const k=yI(e.baseURL,e.url);C.open(e.method.toUpperCase(),fI(k,e.params,e.paramsSerializer),!0),C.timeout=e.timeout;function D(){if(!C)return;const R=al.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),N={data:!h||h==="text"||h==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:R,config:e,request:C};$we(function(X){n(X),_()},function(X){r(X),_()},N),C=null}if("onloadend"in C?C.onloadend=D:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(D)},C.onabort=function(){C&&(r(new Wn("Request aborted",Wn.ECONNABORTED,e,C)),C=null)},C.onerror=function(){r(new Wn("Network Error",Wn.ERR_NETWORK,e,C)),C=null},C.ontimeout=function(){let F=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const N=e.transitional||pI;e.timeoutErrorMessage&&(F=e.timeoutErrorMessage),r(new Wn(F,N.clarifyTimeoutError?Wn.ETIMEDOUT:Wn.ECONNABORTED,e,C)),C=null},yo.hasStandardBrowserEnv&&(l&&ht.isFunction(l)&&(l=l(e)),l||l!==!1&&Hwe(k))){const R=e.xsrfHeaderName&&e.xsrfCookieName&&Uwe.read(e.xsrfCookieName);R&&u.set(e.xsrfHeaderName,R)}s===void 0&&u.setContentType(null),"setRequestHeader"in C&&ht.forEach(u.toJSON(),function(F,N){C.setRequestHeader(N,F)}),ht.isUndefined(e.withCredentials)||(C.withCredentials=!!e.withCredentials),h&&h!=="json"&&(C.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&C.addEventListener("progress",h2(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",h2(e.onUploadProgress)),(e.cancelToken||e.signal)&&(v=R=>{C&&(r(!R||R.type?new ep(null,e,C):R),C.abort(),C=null)},e.cancelToken&&e.cancelToken.subscribe(v),e.signal&&(e.signal.aborted?v():e.signal.addEventListener("abort",v)));const O=Gwe(k);if(O&&yo.protocols.indexOf(O)===-1){r(new Wn("Unsupported protocol "+O+":",Wn.ERR_BAD_REQUEST,e));return}C.send(s||null)})},Eb={http:bwe,xhr:Zwe};ht.forEach(Eb,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const f2=e=>`- ${e}`,Kwe=e=>ht.isFunction(e)||e===null||e===!1,_I={getAdapter:e=>{e=ht.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let u=0;u<t;u++){n=e[u];let h;if(r=n,!Kwe(n)&&(r=Eb[(h=String(n)).toLowerCase()],r===void 0))throw new Wn(`Unknown adapter '${h}'`);if(r)break;s[h||"#"+u]=r}if(!r){const u=Object.entries(s).map(([l,v])=>`adapter ${l} `+(v===!1?"is not supported by the environment":"is not available in the build"));let h=t?u.length>1?`since :
`+u.map(f2).join(`
`):" "+f2(u[0]):"as no adapter specified";throw new Wn("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return r},adapters:Eb};function I_(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ep(null,e)}function p2(e){return I_(e),e.headers=al.from(e.headers),e.data=E_.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),_I.getAdapter(e.adapter||ox.adapter)(e).then(function(r){return I_(e),r.data=E_.call(e,e.transformResponse,r),r.headers=al.from(r.headers),r},function(r){return vI(r)||(I_(e),r&&r.response&&(r.response.data=E_.call(e,e.transformResponse,r.response),r.response.headers=al.from(r.response.headers))),Promise.reject(r)})}const m2=e=>e instanceof al?{...e}:e;function xd(e,t){t=t||{};const n={};function r(_,S,C){return ht.isPlainObject(_)&&ht.isPlainObject(S)?ht.merge.call({caseless:C},_,S):ht.isPlainObject(S)?ht.merge({},S):ht.isArray(S)?S.slice():S}function s(_,S,C){if(ht.isUndefined(S)){if(!ht.isUndefined(_))return r(void 0,_,C)}else return r(_,S,C)}function u(_,S){if(!ht.isUndefined(S))return r(void 0,S)}function h(_,S){if(ht.isUndefined(S)){if(!ht.isUndefined(_))return r(void 0,_)}else return r(void 0,S)}function l(_,S,C){if(C in t)return r(_,S);if(C in e)return r(void 0,_)}const v={url:u,method:u,data:u,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:l,headers:(_,S)=>s(m2(_),m2(S),!0)};return ht.forEach(Object.keys(Object.assign({},e,t)),function(S){const C=v[S]||s,k=C(e[S],t[S],S);ht.isUndefined(k)&&C!==l||(n[S]=k)}),n}const bI="1.6.8",lx={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{lx[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const g2={};lx.transitional=function(t,n,r){function s(u,h){return"[Axios v"+bI+"] Transitional option '"+u+"'"+h+(r?". "+r:"")}return(u,h,l)=>{if(t===!1)throw new Wn(s(h," has been removed"+(n?" in "+n:"")),Wn.ERR_DEPRECATED);return n&&!g2[h]&&(g2[h]=!0,console.warn(s(h," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(u,h,l):!0}};function Xwe(e,t,n){if(typeof e!="object")throw new Wn("options must be an object",Wn.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const u=r[s],h=t[u];if(h){const l=e[u],v=l===void 0||h(l,u,e);if(v!==!0)throw new Wn("option "+u+" must be "+v,Wn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Wn("Unknown option "+u,Wn.ERR_BAD_OPTION)}}const Ib={assertOptions:Xwe,validators:lx},ql=Ib.validators;class Cg{constructor(t){this.defaults=t,this.interceptors={request:new u2,response:new u2}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const u=s.stack?s.stack.replace(/^.+\n/,""):"";r.stack?u&&!String(r.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+u):r.stack=u}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=xd(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:u}=n;r!==void 0&&Ib.assertOptions(r,{silentJSONParsing:ql.transitional(ql.boolean),forcedJSONParsing:ql.transitional(ql.boolean),clarifyTimeoutError:ql.transitional(ql.boolean)},!1),s!=null&&(ht.isFunction(s)?n.paramsSerializer={serialize:s}:Ib.assertOptions(s,{encode:ql.function,serialize:ql.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let h=u&&ht.merge(u.common,u[n.method]);u&&ht.forEach(["delete","get","head","post","put","patch","common"],O=>{delete u[O]}),n.headers=al.concat(h,u);const l=[];let v=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(n)===!1||(v=v&&R.synchronous,l.unshift(R.fulfilled,R.rejected))});const _=[];this.interceptors.response.forEach(function(R){_.push(R.fulfilled,R.rejected)});let S,C=0,k;if(!v){const O=[p2.bind(this),void 0];for(O.unshift.apply(O,l),O.push.apply(O,_),k=O.length,S=Promise.resolve(n);C<k;)S=S.then(O[C++],O[C++]);return S}k=l.length;let D=n;for(C=0;C<k;){const O=l[C++],R=l[C++];try{D=O(D)}catch(F){R.call(this,F);break}}try{S=p2.call(this,D)}catch(O){return Promise.reject(O)}for(C=0,k=_.length;C<k;)S=S.then(_[C++],_[C++]);return S}getUri(t){t=xd(this.defaults,t);const n=yI(t.baseURL,t.url);return fI(n,t.params,t.paramsSerializer)}}ht.forEach(["delete","get","head","options"],function(t){Cg.prototype[t]=function(n,r){return this.request(xd(r||{},{method:t,url:n,data:(r||{}).data}))}});ht.forEach(["post","put","patch"],function(t){function n(r){return function(u,h,l){return this.request(xd(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:u,data:h}))}}Cg.prototype[t]=n(),Cg.prototype[t+"Form"]=n(!0)});const Ym=Cg;class cx{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(u){n=u});const r=this;this.promise.then(s=>{if(!r._listeners)return;let u=r._listeners.length;for(;u-- >0;)r._listeners[u](s);r._listeners=null}),this.promise.then=s=>{let u;const h=new Promise(l=>{r.subscribe(l),u=l}).then(s);return h.cancel=function(){r.unsubscribe(u)},h},t(function(u,h,l){r.reason||(r.reason=new ep(u,h,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new cx(function(s){t=s}),cancel:t}}}const Jwe=cx;function Qwe(e){return function(n){return e.apply(null,n)}}function eSe(e){return ht.isObject(e)&&e.isAxiosError===!0}const Pb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Pb).forEach(([e,t])=>{Pb[t]=e});const tSe=Pb;function xI(e){const t=new Ym(e),n=tI(Ym.prototype.request,t);return ht.extend(n,Ym.prototype,t,{allOwnKeys:!0}),ht.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return xI(xd(e,s))},n}const Br=xI(ox);Br.Axios=Ym;Br.CanceledError=ep;Br.CancelToken=Jwe;Br.isCancel=vI;Br.VERSION=bI;Br.toFormData=_v;Br.AxiosError=Wn;Br.Cancel=Br.CanceledError;Br.all=function(t){return Promise.all(t)};Br.spread=Qwe;Br.isAxiosError=eSe;Br.mergeConfig=xd;Br.AxiosHeaders=al;Br.formToJSON=e=>gI(ht.isHTMLForm(e)?new FormData(e):e);Br.getAdapter=_I.getAdapter;Br.HttpStatusCode=tSe;Br.default=Br;const nSe="https://api-geography.azurewebsites.net/rest/postcodes/",rSe="https://api-geography.librarydata.uk/rest/lsoas/{z}/{x}/{y}.mvt",iSe="https://api.librarydata.uk/libraries/{z}/{x}/{y}.mvt",wI="https://api-geography.librarydata.uk/rest/libraryAuthorities",aSe="https://api.librarydata.uk/authenticate",sSe="create.librarydata.uk",SI="https://api.librarydata.uk/schemas/",oSe=[{text:"Local authority",value:"LAL"},{text:"Local authority unstaffed",value:"LAL-"},{text:"Commisioned",value:"CL"},{text:"Community-run",value:"CRL"},{text:"Independent",value:"ICL"}];async function kI(){const e=await Br.get(wI);return e&&e.data?e.data:[]}async function lSe(e){const t=await Br.get(wI+"/name/"+e);return t&&t.data?t.data:{}}const cSe={props:["actions"],data(){return{}},methods:{async getServices(){let e=await kI();e=e.sort((t,n)=>t.name.localeCompare(n.name)),this.$store.commit("setServices",e),this.library_services=e},async logout(){this.$store.commit("logout")}},beforeMount(){this.getServices()}},uSe={key:0},dSe={key:0},hSe={key:1};function fSe(e,t,n,r,s,u){return fn(),Bn(Ga,{variant:"tonal",color:"info"},{default:Ie(()=>[E(mo,null,{default:Ie(()=>[this.$store.state.loginKey?(fn(),ds("p",uSe,[Ot(" Logged in as "),er("strong",null,qs(this.$store.state.loginSubject),1),this.$store.state.loginAdmin?(fn(),ds("span",dSe,[E(sc,{color:"info",class:"mx-2 my-2","prepend-icon":"mdi-shield-crown"},{default:Ie(()=>[Ot(" Admin ")]),_:1})])):Yn("",!0),(fn(!0),ds(rn,null,Fm(this.$store.state.loginCodes,h=>(fn(),Bn(sc,{class:"mr-1",key:"chip_"+h},{default:Ie(()=>[E(pr,{left:""},{default:Ie(()=>[Ot("mdi-map-legend")]),_:1}),Ot(" "+qs(e.library_services.length>0?e.library_services.filter(l=>l.code===h)[0].nice_name:h),1)]),_:2},1024))),128))])):Yn("",!0),this.$store.state.loginKey?Yn("",!0):(fn(),ds("p",hSe,"You are not logged in"))]),_:1}),this.actions?(fn(),Bn(Jl,{key:0},{default:Ie(()=>[E(co),this.$store.state.loginKey?(fn(),Bn(nn,{key:0,size:"small",variant:"tonal",color:"info",text:"",onClick:u.logout},{default:Ie(()=>[Ot(" Log out "),E(pr,{right:""},{default:Ie(()=>[Ot("mdi-logout")]),_:1})]),_:1},8,["onClick"])):Yn("",!0),this.$store.state.loginKey?Yn("",!0):(fn(),Bn(nn,{key:1,size:"small",variant:"tonal",color:"info",to:"/login"},{default:Ie(()=>[Ot(" Log in "),E(pr,{right:""},{default:Ie(()=>[Ot("mdi-login")]),_:1})]),_:1}))]),_:1})):Yn("",!0)]),_:1})}const tp=Kr(cSe,[["render",fSe]]);function pSe(){return CI().__VUE_DEVTOOLS_GLOBAL_HOOK__}function CI(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const mSe=typeof Proxy=="function",gSe="devtools-plugin:setup",vSe="plugin:settings:set";let nd,Db;function ySe(){var e;return nd!==void 0||(typeof window<"u"&&window.performance?(nd=!0,Db=window.performance):typeof globalThis<"u"&&(!((e=globalThis.perf_hooks)===null||e===void 0)&&e.performance)?(nd=!0,Db=globalThis.perf_hooks.performance):nd=!1),nd}function _Se(){return ySe()?Db.now():Date.now()}class bSe{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const r={};if(t.settings)for(const h in t.settings){const l=t.settings[h];r[h]=l.defaultValue}const s=`__vue-devtools-plugin-settings__${t.id}`;let u=Object.assign({},r);try{const h=localStorage.getItem(s),l=JSON.parse(h);Object.assign(u,l)}catch{}this.fallbacks={getSettings(){return u},setSettings(h){try{localStorage.setItem(s,JSON.stringify(h))}catch{}u=h},now(){return _Se()}},n&&n.on(vSe,(h,l)=>{h===this.plugin.id&&this.fallbacks.setSettings(l)}),this.proxiedOn=new Proxy({},{get:(h,l)=>this.target?this.target.on[l]:(...v)=>{this.onQueue.push({method:l,args:v})}}),this.proxiedTarget=new Proxy({},{get:(h,l)=>this.target?this.target[l]:l==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(l)?(...v)=>(this.targetQueue.push({method:l,args:v,resolve:()=>{}}),this.fallbacks[l](...v)):(...v)=>new Promise(_=>{this.targetQueue.push({method:l,args:v,resolve:_})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function xSe(e,t){const n=e,r=CI(),s=pSe(),u=mSe&&n.enableEarlyProxy;if(s&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!u))s.emit(gSe,e,t);else{const h=u?new bSe(n,s):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:h}),h&&t(h.proxiedTarget)}}/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const od=typeof document<"u";function wSe(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const fr=Object.assign;function P_(e,t){const n={};for(const r in t){const s=t[r];n[r]=js(s)?s.map(e):e(s)}return n}const hf=()=>{},js=Array.isArray,TI=/#/g,SSe=/&/g,kSe=/\//g,CSe=/=/g,TSe=/\?/g,AI=/\+/g,ASe=/%5B/g,ESe=/%5D/g,EI=/%5E/g,ISe=/%60/g,II=/%7B/g,PSe=/%7C/g,PI=/%7D/g,DSe=/%20/g;function ux(e){return encodeURI(""+e).replace(PSe,"|").replace(ASe,"[").replace(ESe,"]")}function MSe(e){return ux(e).replace(II,"{").replace(PI,"}").replace(EI,"^")}function Mb(e){return ux(e).replace(AI,"%2B").replace(DSe,"+").replace(TI,"%23").replace(SSe,"%26").replace(ISe,"`").replace(II,"{").replace(PI,"}").replace(EI,"^")}function LSe(e){return Mb(e).replace(CSe,"%3D")}function RSe(e){return ux(e).replace(TI,"%23").replace(TSe,"%3F")}function OSe(e){return e==null?"":RSe(e).replace(kSe,"%2F")}function Lf(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const zSe=/\/$/,FSe=e=>e.replace(zSe,"");function D_(e,t,n="/"){let r,s={},u="",h="";const l=t.indexOf("#");let v=t.indexOf("?");return l<v&&l>=0&&(v=-1),v>-1&&(r=t.slice(0,v),u=t.slice(v+1,l>-1?l:t.length),s=e(u)),l>-1&&(r=r||t.slice(0,l),h=t.slice(l,t.length)),r=$Se(r??t,n),{fullPath:r+(u&&"?")+u+h,path:r,query:s,hash:Lf(h)}}function BSe(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function v2(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function VSe(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&wd(t.matched[r],n.matched[s])&&DI(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function wd(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function DI(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!NSe(e[n],t[n]))return!1;return!0}function NSe(e,t){return js(e)?y2(e,t):js(t)?y2(t,e):e===t}function y2(e,t){return js(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function $Se(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let u=n.length-1,h,l;for(h=0;h<r.length;h++)if(l=r[h],l!==".")if(l==="..")u>1&&u--;else break;return n.slice(0,u).join("/")+"/"+r.slice(h).join("/")}var Rf;(function(e){e.pop="pop",e.push="push"})(Rf||(Rf={}));var ff;(function(e){e.back="back",e.forward="forward",e.unknown=""})(ff||(ff={}));function USe(e){if(!e)if(od){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),FSe(e)}const qSe=/^[^#]+#/;function jSe(e,t){return e.replace(qSe,"#")+t}function HSe(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const xv=()=>({left:window.scrollX,top:window.scrollY});function GSe(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=HSe(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function _2(e,t){return(history.state?history.state.position-t:-1)+e}const Lb=new Map;function WSe(e,t){Lb.set(e,t)}function YSe(e){const t=Lb.get(e);return Lb.delete(e),t}let ZSe=()=>location.protocol+"//"+location.host;function MI(e,t){const{pathname:n,search:r,hash:s}=t,u=e.indexOf("#");if(u>-1){let l=s.includes(e.slice(u))?e.slice(u).length:1,v=s.slice(l);return v[0]!=="/"&&(v="/"+v),v2(v,"")}return v2(n,e)+r+s}function KSe(e,t,n,r){let s=[],u=[],h=null;const l=({state:k})=>{const D=MI(e,location),O=n.value,R=t.value;let F=0;if(k){if(n.value=D,t.value=k,h&&h===O){h=null;return}F=R?k.position-R.position:0}else r(D);s.forEach(N=>{N(n.value,O,{delta:F,type:Rf.pop,direction:F?F>0?ff.forward:ff.back:ff.unknown})})};function v(){h=n.value}function _(k){s.push(k);const D=()=>{const O=s.indexOf(k);O>-1&&s.splice(O,1)};return u.push(D),D}function S(){const{history:k}=window;k.state&&k.replaceState(fr({},k.state,{scroll:xv()}),"")}function C(){for(const k of u)k();u=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",S)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",S,{passive:!0}),{pauseListeners:v,listen:_,destroy:C}}function b2(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?xv():null}}function XSe(e){const{history:t,location:n}=window,r={value:MI(e,n)},s={value:t.state};s.value||u(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function u(v,_,S){const C=e.indexOf("#"),k=C>-1?(n.host&&document.querySelector("base")?e:e.slice(C))+v:ZSe()+e+v;try{t[S?"replaceState":"pushState"](_,"",k),s.value=_}catch(D){console.error(D),n[S?"replace":"assign"](k)}}function h(v,_){const S=fr({},t.state,b2(s.value.back,v,s.value.forward,!0),_,{position:s.value.position});u(v,S,!0),r.value=v}function l(v,_){const S=fr({},s.value,t.state,{forward:v,scroll:xv()});u(S.current,S,!0);const C=fr({},b2(r.value,v,null),{position:S.position+1},_);u(v,C,!1),r.value=v}return{location:r,state:s,push:l,replace:h}}function JSe(e){e=USe(e);const t=XSe(e),n=KSe(e,t.state,t.location,t.replace);function r(u,h=!0){h||n.pauseListeners(),history.go(u)}const s=fr({location:"",base:e,go:r,createHref:jSe.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function QSe(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),JSe(e)}function eke(e){return typeof e=="string"||e&&typeof e=="object"}function LI(e){return typeof e=="string"||typeof e=="symbol"}const jl={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},RI=Symbol("");var x2;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(x2||(x2={}));function Sd(e,t){return fr(new Error,{type:e,[RI]:!0},t)}function Ko(e,t){return e instanceof Error&&RI in e&&(t==null||!!(e.type&t))}const w2="[^/]+?",tke={sensitive:!1,strict:!1,start:!0,end:!0},nke=/[.+*?^${}()[\]/\\]/g;function rke(e,t){const n=fr({},tke,t),r=[];let s=n.start?"^":"";const u=[];for(const _ of e){const S=_.length?[]:[90];n.strict&&!_.length&&(s+="/");for(let C=0;C<_.length;C++){const k=_[C];let D=40+(n.sensitive?.25:0);if(k.type===0)C||(s+="/"),s+=k.value.replace(nke,"\\$&"),D+=40;else if(k.type===1){const{value:O,repeatable:R,optional:F,regexp:N}=k;u.push({name:O,repeatable:R,optional:F});const j=N||w2;if(j!==w2){D+=10;try{new RegExp(`(${j})`)}catch(ee){throw new Error(`Invalid custom RegExp for param "${O}" (${j}): `+ee.message)}}let X=R?`((?:${j})(?:/(?:${j}))*)`:`(${j})`;C||(X=F&&_.length<2?`(?:/${X})`:"/"+X),F&&(X+="?"),s+=X,D+=20,F&&(D+=-8),R&&(D+=-20),j===".*"&&(D+=-50)}S.push(D)}r.push(S)}if(n.strict&&n.end){const _=r.length-1;r[_][r[_].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const h=new RegExp(s,n.sensitive?"":"i");function l(_){const S=_.match(h),C={};if(!S)return null;for(let k=1;k<S.length;k++){const D=S[k]||"",O=u[k-1];C[O.name]=D&&O.repeatable?D.split("/"):D}return C}function v(_){let S="",C=!1;for(const k of e){(!C||!S.endsWith("/"))&&(S+="/"),C=!1;for(const D of k)if(D.type===0)S+=D.value;else if(D.type===1){const{value:O,repeatable:R,optional:F}=D,N=O in _?_[O]:"";if(js(N)&&!R)throw new Error(`Provided param "${O}" is an array but it is not repeatable (* or + modifiers)`);const j=js(N)?N.join("/"):N;if(!j)if(F)k.length<2&&(S.endsWith("/")?S=S.slice(0,-1):C=!0);else throw new Error(`Missing required param "${O}"`);S+=j}}return S||"/"}return{re:h,score:r,keys:u,parse:l,stringify:v}}function ike(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function ake(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const u=ike(r[n],s[n]);if(u)return u;n++}if(Math.abs(s.length-r.length)===1){if(S2(r))return 1;if(S2(s))return-1}return s.length-r.length}function S2(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ske={type:0,value:""},oke=/[a-zA-Z0-9_]/;function lke(e){if(!e)return[[]];if(e==="/")return[[ske]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(D){throw new Error(`ERR (${n})/"${_}": ${D}`)}let n=0,r=n;const s=[];let u;function h(){u&&s.push(u),u=[]}let l=0,v,_="",S="";function C(){_&&(n===0?u.push({type:0,value:_}):n===1||n===2||n===3?(u.length>1&&(v==="*"||v==="+")&&t(`A repeatable param (${_}) must be alone in its segment. eg: '/:ids+.`),u.push({type:1,value:_,regexp:S,repeatable:v==="*"||v==="+",optional:v==="*"||v==="?"})):t("Invalid state to consume buffer"),_="")}function k(){_+=v}for(;l<e.length;){if(v=e[l++],v==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:v==="/"?(_&&C(),h()):v===":"?(C(),n=1):k();break;case 4:k(),n=r;break;case 1:v==="("?n=2:oke.test(v)?k():(C(),n=0,v!=="*"&&v!=="?"&&v!=="+"&&l--);break;case 2:v===")"?S[S.length-1]=="\\"?S=S.slice(0,-1)+v:n=3:S+=v;break;case 3:C(),n=0,v!=="*"&&v!=="?"&&v!=="+"&&l--,S="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${_}"`),C(),h(),s}function cke(e,t,n){const r=rke(lke(e.path),n),s=fr(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function uke(e,t){const n=[],r=new Map;t=T2({strict:!1,end:!0,sensitive:!1},t);function s(S){return r.get(S)}function u(S,C,k){const D=!k,O=dke(S);O.aliasOf=k&&k.record;const R=T2(t,S),F=[O];if("alias"in S){const X=typeof S.alias=="string"?[S.alias]:S.alias;for(const ee of X)F.push(fr({},O,{components:k?k.record.components:O.components,path:ee,aliasOf:k?k.record:O}))}let N,j;for(const X of F){const{path:ee}=X;if(C&&ee[0]!=="/"){const le=C.record.path,ie=le[le.length-1]==="/"?"":"/";X.path=C.record.path+(ee&&ie+ee)}if(N=cke(X,C,R),k?k.alias.push(N):(j=j||N,j!==N&&j.alias.push(N),D&&S.name&&!C2(N)&&h(S.name)),O.children){const le=O.children;for(let ie=0;ie<le.length;ie++)u(le[ie],N,k&&k.children[ie])}k=k||N,(N.record.components&&Object.keys(N.record.components).length||N.record.name||N.record.redirect)&&v(N)}return j?()=>{h(j)}:hf}function h(S){if(LI(S)){const C=r.get(S);C&&(r.delete(S),n.splice(n.indexOf(C),1),C.children.forEach(h),C.alias.forEach(h))}else{const C=n.indexOf(S);C>-1&&(n.splice(C,1),S.record.name&&r.delete(S.record.name),S.children.forEach(h),S.alias.forEach(h))}}function l(){return n}function v(S){let C=0;for(;C<n.length&&ake(S,n[C])>=0&&(S.record.path!==n[C].record.path||!OI(S,n[C]));)C++;n.splice(C,0,S),S.record.name&&!C2(S)&&r.set(S.record.name,S)}function _(S,C){let k,D={},O,R;if("name"in S&&S.name){if(k=r.get(S.name),!k)throw Sd(1,{location:S});R=k.record.name,D=fr(k2(C.params,k.keys.filter(j=>!j.optional).concat(k.parent?k.parent.keys.filter(j=>j.optional):[]).map(j=>j.name)),S.params&&k2(S.params,k.keys.map(j=>j.name))),O=k.stringify(D)}else if(S.path!=null)O=S.path,k=n.find(j=>j.re.test(O)),k&&(D=k.parse(O),R=k.record.name);else{if(k=C.name?r.get(C.name):n.find(j=>j.re.test(C.path)),!k)throw Sd(1,{location:S,currentLocation:C});R=k.record.name,D=fr({},C.params,S.params),O=k.stringify(D)}const F=[];let N=k;for(;N;)F.unshift(N.record),N=N.parent;return{name:R,path:O,params:D,matched:F,meta:fke(F)}}return e.forEach(S=>u(S)),{addRoute:u,resolve:_,removeRoute:h,getRoutes:l,getRecordMatcher:s}}function k2(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function dke(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:hke(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function hke(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function C2(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function fke(e){return e.reduce((t,n)=>fr(t,n.meta),{})}function T2(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function OI(e,t){return t.children.some(n=>n===e||OI(e,n))}function pke(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const u=r[s].replace(AI," "),h=u.indexOf("="),l=Lf(h<0?u:u.slice(0,h)),v=h<0?null:Lf(u.slice(h+1));if(l in t){let _=t[l];js(_)||(_=t[l]=[_]),_.push(v)}else t[l]=v}return t}function A2(e){let t="";for(let n in e){const r=e[n];if(n=LSe(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(js(r)?r.map(u=>u&&Mb(u)):[r&&Mb(r)]).forEach(u=>{u!==void 0&&(t+=(t.length?"&":"")+n,u!=null&&(t+="="+u))})}return t}function mke(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=js(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const gke=Symbol(""),E2=Symbol(""),dx=Symbol(""),hx=Symbol(""),Rb=Symbol("");function Jh(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Xl(e,t,n,r,s,u=h=>h()){const h=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((l,v)=>{const _=k=>{k===!1?v(Sd(4,{from:n,to:t})):k instanceof Error?v(k):eke(k)?v(Sd(2,{from:t,to:k})):(h&&r.enterCallbacks[s]===h&&typeof k=="function"&&h.push(k),l())},S=u(()=>e.call(r&&r.instances[s],t,n,_));let C=Promise.resolve(S);e.length<3&&(C=C.then(_)),C.catch(k=>v(k))})}function M_(e,t,n,r,s=u=>u()){const u=[];for(const h of e)for(const l in h.components){let v=h.components[l];if(!(t!=="beforeRouteEnter"&&!h.instances[l]))if(vke(v)){const S=(v.__vccOpts||v)[t];S&&u.push(Xl(S,n,r,h,l,s))}else{let _=v();u.push(()=>_.then(S=>{if(!S)return Promise.reject(new Error(`Couldn't resolve component "${l}" at "${h.path}"`));const C=wSe(S)?S.default:S;h.components[l]=C;const D=(C.__vccOpts||C)[t];return D&&Xl(D,n,r,h,l,s)()}))}}return u}function vke(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function I2(e){const t=yt(dx),n=yt(hx),r=Q(()=>t.resolve(Fr(e.to))),s=Q(()=>{const{matched:v}=r.value,{length:_}=v,S=v[_-1],C=n.matched;if(!S||!C.length)return-1;const k=C.findIndex(wd.bind(null,S));if(k>-1)return k;const D=P2(v[_-2]);return _>1&&P2(S)===D&&C[C.length-1].path!==D?C.findIndex(wd.bind(null,v[_-2])):k}),u=Q(()=>s.value>-1&&xke(n.params,r.value.params)),h=Q(()=>s.value>-1&&s.value===n.matched.length-1&&DI(n.params,r.value.params));function l(v={}){return bke(v)?t[Fr(e.replace)?"replace":"push"](Fr(e.to)).catch(hf):Promise.resolve()}return{route:r,href:Q(()=>r.value.href),isActive:u,isExactActive:h,navigate:l}}const yke=sr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:I2,setup(e,{slots:t}){const n=Si(I2(e)),{options:r}=yt(dx),s=Q(()=>({[D2(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[D2(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const u=t.default&&t.default(n);return e.custom?u:Zr("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},u)}}}),_ke=yke;function bke(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function xke(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!js(s)||s.length!==r.length||r.some((u,h)=>u!==s[h]))return!1}return!0}function P2(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const D2=(e,t,n)=>e??t??n,wke=sr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=yt(Rb),s=Q(()=>e.route||r.value),u=yt(E2,0),h=Q(()=>{let _=Fr(u);const{matched:S}=s.value;let C;for(;(C=S[_])&&!C.components;)_++;return _}),l=Q(()=>s.value.matched[h.value]);bn(E2,Q(()=>h.value+1)),bn(gke,l),bn(Rb,s);const v=lt();return ut(()=>[v.value,l.value,e.name],([_,S,C],[k,D,O])=>{S&&(S.instances[C]=_,D&&D!==S&&_&&_===k&&(S.leaveGuards.size||(S.leaveGuards=D.leaveGuards),S.updateGuards.size||(S.updateGuards=D.updateGuards))),_&&S&&(!D||!wd(S,D)||!k)&&(S.enterCallbacks[C]||[]).forEach(R=>R(_))},{flush:"post"}),()=>{const _=s.value,S=e.name,C=l.value,k=C&&C.components[S];if(!k)return M2(n.default,{Component:k,route:_});const D=C.props[S],O=D?D===!0?_.params:typeof D=="function"?D(_):D:null,F=Zr(k,fr({},O,t,{onVnodeUnmounted:N=>{N.component.isUnmounted&&(C.instances[S]=null)},ref:v}));return M2(n.default,{Component:F,route:_})||F}}});function M2(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Ske=wke;function kke(e){const t=uke(e.routes,e),n=e.parseQuery||pke,r=e.stringifyQuery||A2,s=e.history,u=Jh(),h=Jh(),l=Jh(),v=Ut(jl);let _=jl;od&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const S=P_.bind(null,Fe=>""+Fe),C=P_.bind(null,OSe),k=P_.bind(null,Lf);function D(Fe,at){let qe,Be;return LI(Fe)?(qe=t.getRecordMatcher(Fe),Be=at):Be=Fe,t.addRoute(Be,qe)}function O(Fe){const at=t.getRecordMatcher(Fe);at&&t.removeRoute(at)}function R(){return t.getRoutes().map(Fe=>Fe.record)}function F(Fe){return!!t.getRecordMatcher(Fe)}function N(Fe,at){if(at=fr({},at||v.value),typeof Fe=="string"){const he=D_(n,Fe,at.path),ze=t.resolve({path:he.path},at),He=s.createHref(he.fullPath);return fr(he,ze,{params:k(ze.params),hash:Lf(he.hash),redirectedFrom:void 0,href:He})}let qe;if(Fe.path!=null)qe=fr({},Fe,{path:D_(n,Fe.path,at.path).path});else{const he=fr({},Fe.params);for(const ze in he)he[ze]==null&&delete he[ze];qe=fr({},Fe,{params:C(he)}),at.params=C(at.params)}const Be=t.resolve(qe,at),bt=Fe.hash||"";Be.params=S(k(Be.params));const Bt=BSe(r,fr({},Fe,{hash:MSe(bt),path:Be.path})),re=s.createHref(Bt);return fr({fullPath:Bt,hash:bt,query:r===A2?mke(Fe.query):Fe.query||{}},Be,{redirectedFrom:void 0,href:re})}function j(Fe){return typeof Fe=="string"?D_(n,Fe,v.value.path):fr({},Fe)}function X(Fe,at){if(_!==Fe)return Sd(8,{from:at,to:Fe})}function ee(Fe){return se(Fe)}function le(Fe){return ee(fr(j(Fe),{replace:!0}))}function ie(Fe){const at=Fe.matched[Fe.matched.length-1];if(at&&at.redirect){const{redirect:qe}=at;let Be=typeof qe=="function"?qe(Fe):qe;return typeof Be=="string"&&(Be=Be.includes("?")||Be.includes("#")?Be=j(Be):{path:Be},Be.params={}),fr({query:Fe.query,hash:Fe.hash,params:Be.path!=null?{}:Fe.params},Be)}}function se(Fe,at){const qe=_=N(Fe),Be=v.value,bt=Fe.state,Bt=Fe.force,re=Fe.replace===!0,he=ie(qe);if(he)return se(fr(j(he),{state:typeof he=="object"?fr({},bt,he.state):bt,force:Bt,replace:re}),at||qe);const ze=qe;ze.redirectedFrom=at;let He;return!Bt&&VSe(r,Be,qe)&&(He=Sd(16,{to:ze,from:Be}),Je(Be,Be,!0,!1)),(He?Promise.resolve(He):ne(ze,Be)).catch(Ke=>Ko(Ke)?Ko(Ke,2)?Ke:Ze(Ke):ke(Ke,ze,Be)).then(Ke=>{if(Ke){if(Ko(Ke,2))return se(fr({replace:re},j(Ke.to),{state:typeof Ke.to=="object"?fr({},bt,Ke.to.state):bt,force:Bt}),at||ze)}else Ke=te(ze,Be,!0,re,bt);return _e(ze,Be,Ke),Ke})}function H(Fe,at){const qe=X(Fe,at);return qe?Promise.reject(qe):Promise.resolve()}function Z(Fe){const at=_t.values().next().value;return at&&typeof at.runWithContext=="function"?at.runWithContext(Fe):Fe()}function ne(Fe,at){let qe;const[Be,bt,Bt]=Cke(Fe,at);qe=M_(Be.reverse(),"beforeRouteLeave",Fe,at);for(const he of Be)he.leaveGuards.forEach(ze=>{qe.push(Xl(ze,Fe,at))});const re=H.bind(null,Fe,at);return qe.push(re),St(qe).then(()=>{qe=[];for(const he of u.list())qe.push(Xl(he,Fe,at));return qe.push(re),St(qe)}).then(()=>{qe=M_(bt,"beforeRouteUpdate",Fe,at);for(const he of bt)he.updateGuards.forEach(ze=>{qe.push(Xl(ze,Fe,at))});return qe.push(re),St(qe)}).then(()=>{qe=[];for(const he of Bt)if(he.beforeEnter)if(js(he.beforeEnter))for(const ze of he.beforeEnter)qe.push(Xl(ze,Fe,at));else qe.push(Xl(he.beforeEnter,Fe,at));return qe.push(re),St(qe)}).then(()=>(Fe.matched.forEach(he=>he.enterCallbacks={}),qe=M_(Bt,"beforeRouteEnter",Fe,at,Z),qe.push(re),St(qe))).then(()=>{qe=[];for(const he of h.list())qe.push(Xl(he,Fe,at));return qe.push(re),St(qe)}).catch(he=>Ko(he,8)?he:Promise.reject(he))}function _e(Fe,at,qe){l.list().forEach(Be=>Z(()=>Be(Fe,at,qe)))}function te(Fe,at,qe,Be,bt){const Bt=X(Fe,at);if(Bt)return Bt;const re=at===jl,he=od?history.state:{};qe&&(Be||re?s.replace(Fe.fullPath,fr({scroll:re&&he&&he.scroll},bt)):s.push(Fe.fullPath,bt)),v.value=Fe,Je(Fe,at,qe,re),Ze()}let Se;function me(){Se||(Se=s.listen((Fe,at,qe)=>{if(!kt.listening)return;const Be=N(Fe),bt=ie(Be);if(bt){se(fr(bt,{replace:!0}),Be).catch(hf);return}_=Be;const Bt=v.value;od&&WSe(_2(Bt.fullPath,qe.delta),xv()),ne(Be,Bt).catch(re=>Ko(re,12)?re:Ko(re,2)?(se(re.to,Be).then(he=>{Ko(he,20)&&!qe.delta&&qe.type===Rf.pop&&s.go(-1,!1)}).catch(hf),Promise.reject()):(qe.delta&&s.go(-qe.delta,!1),ke(re,Be,Bt))).then(re=>{re=re||te(Be,Bt,!1),re&&(qe.delta&&!Ko(re,8)?s.go(-qe.delta,!1):qe.type===Rf.pop&&Ko(re,20)&&s.go(-1,!1)),_e(Be,Bt,re)}).catch(hf)}))}let Ve=Jh(),Ge=Jh(),$e;function ke(Fe,at,qe){Ze(Fe);const Be=Ge.list();return Be.length?Be.forEach(bt=>bt(Fe,at,qe)):console.error(Fe),Promise.reject(Fe)}function Pe(){return $e&&v.value!==jl?Promise.resolve():new Promise((Fe,at)=>{Ve.add([Fe,at])})}function Ze(Fe){return $e||($e=!Fe,me(),Ve.list().forEach(([at,qe])=>Fe?qe(Fe):at()),Ve.reset()),Fe}function Je(Fe,at,qe,Be){const{scrollBehavior:bt}=e;if(!od||!bt)return Promise.resolve();const Bt=!qe&&YSe(_2(Fe.fullPath,0))||(Be||!qe)&&history.state&&history.state.scroll||null;return ar().then(()=>bt(Fe,at,Bt)).then(re=>re&&GSe(re)).catch(re=>ke(re,Fe,at))}const Ne=Fe=>s.go(Fe);let tt;const _t=new Set,kt={currentRoute:v,listening:!0,addRoute:D,removeRoute:O,hasRoute:F,getRoutes:R,resolve:N,options:e,push:ee,replace:le,go:Ne,back:()=>Ne(-1),forward:()=>Ne(1),beforeEach:u.add,beforeResolve:h.add,afterEach:l.add,onError:Ge.add,isReady:Pe,install(Fe){const at=this;Fe.component("RouterLink",_ke),Fe.component("RouterView",Ske),Fe.config.globalProperties.$router=at,Object.defineProperty(Fe.config.globalProperties,"$route",{enumerable:!0,get:()=>Fr(v)}),od&&!tt&&v.value===jl&&(tt=!0,ee(s.location).catch(bt=>{}));const qe={};for(const bt in jl)Object.defineProperty(qe,bt,{get:()=>v.value[bt],enumerable:!0});Fe.provide(dx,at),Fe.provide(hx,lC(qe)),Fe.provide(Rb,v);const Be=Fe.unmount;_t.add(Fe),Fe.unmount=function(){_t.delete(Fe),_t.size<1&&(_=jl,Se&&Se(),Se=null,v.value=jl,tt=!1,$e=!1),Be()}}};function St(Fe){return Fe.reduce((at,qe)=>at.then(()=>Z(qe)),Promise.resolve())}return kt}function Cke(e,t){const n=[],r=[],s=[],u=Math.max(t.matched.length,e.matched.length);for(let h=0;h<u;h++){const l=t.matched[h];l&&(e.matched.find(_=>wd(_,l))?r.push(l):n.push(l));const v=e.matched[h];v&&(t.matched.find(_=>wd(_,v))||s.push(v))}return[n,r,s]}function Tke(){return yt(hx)}const Ake=`In 2019 a set of library workers collaborated on the [public library data schemas](https://schema.librarydata.uk/). These were designed to help public library services publish open data.

Here is some resources on that project:

- DCMS blog - [Libraries and open data](https://dcmslibraries.blog.gov.uk/2019/09/06/libraries-and-open-data/)
- DCMS blog - [Open data - an update](https://dcmslibraries.blog.gov.uk/2020/08/03/library-open-data-an-update/)
- Frictionless Data blog - [Libraries Hacked](https://frictionlessdata.io/blog/2022/02/07/libraries-hacked/#schemas-and-frictionless-data) - a case study of using Table Schema to create a public library data schemas.

This website is to aid in using those schemas.

- Tools to help libraries create and publish open data
- Visualisations from the data
- Data analysis techniques using the data.
- Data tools to aid in decision-making
`,Eke={data(){return{mdText:Ake}},methods:{},components:{}};function Ike(e,t,n,r,s,u){const h=wn("layout-header"),l=wn("markdown-section");return fn(),Bn(Dr,null,{default:Ie(()=>[E(h,{title:"About",subtitle:"What the site is and does, and who for"}),E(l,{markdownText:s.mdText},null,8,["markdownText"])]),_:1})}const Pke=Kr(Eke,[["render",Ike]]),Dke=`We want as many people as possible to be able to use this website. For example, that means you should be able to:

- change colours, contrast levels and fonts
- zoom in up to 300% without the text spilling off the screen
- navigate most of the website using just a keyboard
- navigate most of the website using speech recognition software
- listen to most of the website using a screen reader (including the most recent versions of JAWS, NVDA and VoiceOver)

We've also made the website text as simple as possible to understand.

[AbilityNet](https://mcmw.abilitynet.org.uk/) has advice on making your device easier to use if you have a disability.

## Technical information about this website's accessibility

This website is in development and being used by pilot library services. During this time it is being tested for accessibility issues. This is being done using Government Digital Service guidelines [doing a basic accessibility check](https://www.gov.uk/government/publications/doing-a-basic-accessibility-check-if-you-cant-do-a-detailed-one/doing-a-basic-accessibility-check-if-you-cant-do-a-detailed-one).

There are some aspects of the website that use maps to explore data. Although maps are difficult to make accessible, we are looking at making sure the information presented by the map is also available in other formats.

If you do experience any problems using this website, please raise these and [send us an email](mailto:info@librarieshacked.org).
`,Mke={data(){return{mdText:Dke}},methods:{},components:{}};function Lke(e,t,n,r,s,u){const h=wn("layout-header"),l=wn("markdown-section");return fn(),Bn(Dr,null,{default:Ie(()=>[E(h,{title:"Accessibility",subtitle:"How this site meets accessibility requirements"}),E(l,{markdownText:s.mdText},null,8,["markdownText"])]),_:1})}const Rke=Kr(Mke,[["render",Lke]]),Oke=`An event is an event facilitated or organised by the library service.

The events dataset is a **time-series**. Data is maintained by adding new data (e.g. the next months events).
`,zke={data(){return{mdText:Oke}},methods:{},components:{}},Fke={class:"text-center"};function Bke(e,t,n,r,s,u){const h=wn("layout-header"),l=wn("markdown-section");return fn(),Bn(Dr,null,{default:Ie(()=>[E(h,{title:"Events",subtitle:"Library event attendance and outcomes"}),er("p",Fke,[E(nn,{variant:"tonal",size:"large",color:"info",href:"https://schema.librarydata.uk/events",target:"_blank"},{default:Ie(()=>[Ot(" Explore the events data schema ")]),_:1})]),E(yr,{inset:"",color:"info",class:"my-2"}),E(l,{markdownText:s.mdText},null,8,["markdownText"]),E(yr,{inset:"",color:"info",class:"my-2"})]),_:1})}const Vke=Kr(zke,[["render",Bke]]),Nke=`We provide tools to help libraries publish and use open data.

Inspired by the public library [open data schemas](https://schema.librarydata.uk), each tool is tailored for a different dataset documented in that project.
`,$ke={data(){return{mdText:Nke}},methods:{},components:{}},Uke={key:1};function qke(e,t,n,r,s,u){const h=wn("layout-header"),l=wn("markdown-section"),v=tp;return fn(),Bn(Dr,null,{default:Ie(()=>[E(h,{title:"Create",subtitle:"Helping libraries publish and use library open data"}),E(l,{markdownText:s.mdText},null,8,["markdownText"]),this.$store.state.loginKey?Yn("",!0):(fn(),Bn(Dr,{key:0,class:"text-center"},{default:Ie(()=>[E(nn,{"prepend-icon":"mdi-login-variant",variant:"tonal",size:"x-large",color:"success",class:"mx-1 my-1",to:"/login"},{default:Ie(()=>[Ot(" Log in ")]),_:1})]),_:1})),this.$store.state.loginKey?(fn(),ds("div",Uke,[E(v,{actions:!0})])):Yn("",!0)]),_:1})}const jke=Kr($ke,[["render",qke]]),Hke=`A library is a static service point which provides library services for the public.

The libraries dataset is a **register**. This means that the data needs to be maintained and kept up to date.
`,Gke={data(){return{mdText:Hke}},methods:{},components:{}},Wke={class:"text-center"};function Yke(e,t,n,r,s,u){const h=wn("layout-header"),l=wn("markdown-section");return fn(),Bn(Dr,null,{default:Ie(()=>[E(h,{title:"Libraries",subtitle:"Public library locations, hours, and contact details"}),er("p",Wke,[E(nn,{size:"large","prepend-icon":"mdi-information-outline",variant:"tonal",color:"info",href:"https://schema.librarydata.uk/libraries",target:"_blank"},{default:Ie(()=>[Ot(" Explore the locations data schema ")]),_:1})]),E(yr,{inset:"",color:"info",class:"my-2"}),E(l,{markdownText:s.mdText},null,8,["markdownText"]),E(yr,{inset:"",color:"info",class:"my-2"})]),_:1})}const Zke=Kr(Gke,[["render",Yke]]),Kke={data(){return{libraryServices:[],selectedService:null}},created(){this.libraryServices=this.$store.state.libraryServices,this.libraryServices.length===0&&this.getServices()},methods:{deselectService(){this.selectedService=null,this.$emit("select",null)},async getServices(){let e=await kI();e=e.sort((t,n)=>t.nice_name.localeCompare(n.nice_name)),this.$store.commit("setServices",e),this.libraryServices=e},updateSelection(e){this.selectedService=e,this.$emit("select",this.selectedService)}}},Xke=er("div",{class:"text-caption pa-3"},"Select local authority",-1);function Jke(e,t,n,r,s,u){return fn(),Bn(Ga,{elevation:"0",color:"grey-lighten-5"},{default:Ie(()=>[Xke,E(z5,{"persistent-hint":"",variant:"outlined","bg-color":"white",class:"elevation-0",clearable:"",items:s.libraryServices,"item-title":"nice_name","item-value":"code",label:"Select local library authority","return-object":"",loading:s.libraryServices.length===0,"prepend-inner-icon":"mdi-domain","onUpdate:modelValue":u.updateSelection,hint:"You can type to search library services."},null,8,["items","loading","onUpdate:modelValue"]),s.selectedService!=null?(fn(),Bn(sc,{key:0,class:"ma-2",closable:"","onClick:close":t[0]||(t[0]=h=>u.deselectService())},{default:Ie(()=>[Ot(qs(s.selectedService.nice_name),1)]),_:1})):Yn("",!0)]),_:1})}const wv=Kr(Kke,[["render",Jke]]),Qke=`This tool allows you to view and edit library service points, grouped by local authority. To make changes you must first [Log in](/login). At the end you must **publish changes** to ensure you overwrite the existing data.
`;var zI={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){(function(n,r){e.exports=r()})(jc,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},s=!r.document&&!!r.postMessage,u=r.IS_PAPA_WORKER||!1,h={},l=0,v={parse:function(H,Z){var ne=(Z=Z||{}).dynamicTyping||!1;if(se(ne)&&(Z.dynamicTypingFunction=ne,ne={}),Z.dynamicTyping=ne,Z.transform=!!se(Z.transform)&&Z.transform,Z.worker&&v.WORKERS_SUPPORTED){var _e=function(){if(!v.WORKERS_SUPPORTED)return!1;var Se=(Ve=r.URL||r.webkitURL||null,Ge=n.toString(),v.BLOB_URL||(v.BLOB_URL=Ve.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Ge,")();"],{type:"text/javascript"})))),me=new r.Worker(Se),Ve,Ge;return me.onmessage=j,me.id=l++,h[me.id]=me}();return _e.userStep=Z.step,_e.userChunk=Z.chunk,_e.userComplete=Z.complete,_e.userError=Z.error,Z.step=se(Z.step),Z.chunk=se(Z.chunk),Z.complete=se(Z.complete),Z.error=se(Z.error),delete Z.worker,void _e.postMessage({input:H,config:Z,workerId:_e.id})}var te=null;return v.NODE_STREAM_INPUT,typeof H=="string"?(H=function(Se){return Se.charCodeAt(0)===65279?Se.slice(1):Se}(H),te=Z.download?new C(Z):new D(Z)):H.readable===!0&&se(H.read)&&se(H.on)?te=new O(Z):(r.File&&H instanceof File||H instanceof Object)&&(te=new k(Z)),te.stream(H)},unparse:function(H,Z){var ne=!1,_e=!0,te=",",Se=`\r
`,me='"',Ve=me+me,Ge=!1,$e=null,ke=!1;(function(){if(typeof Z=="object"){if(typeof Z.delimiter!="string"||v.BAD_DELIMITERS.filter(function(Ne){return Z.delimiter.indexOf(Ne)!==-1}).length||(te=Z.delimiter),(typeof Z.quotes=="boolean"||typeof Z.quotes=="function"||Array.isArray(Z.quotes))&&(ne=Z.quotes),typeof Z.skipEmptyLines!="boolean"&&typeof Z.skipEmptyLines!="string"||(Ge=Z.skipEmptyLines),typeof Z.newline=="string"&&(Se=Z.newline),typeof Z.quoteChar=="string"&&(me=Z.quoteChar),typeof Z.header=="boolean"&&(_e=Z.header),Array.isArray(Z.columns)){if(Z.columns.length===0)throw new Error("Option columns is empty");$e=Z.columns}Z.escapeChar!==void 0&&(Ve=Z.escapeChar+me),(typeof Z.escapeFormulae=="boolean"||Z.escapeFormulae instanceof RegExp)&&(ke=Z.escapeFormulae instanceof RegExp?Z.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var Pe=new RegExp(F(me),"g");if(typeof H=="string"&&(H=JSON.parse(H)),Array.isArray(H)){if(!H.length||Array.isArray(H[0]))return Ze(null,H,Ge);if(typeof H[0]=="object")return Ze($e||Object.keys(H[0]),H,Ge)}else if(typeof H=="object")return typeof H.data=="string"&&(H.data=JSON.parse(H.data)),Array.isArray(H.data)&&(H.fields||(H.fields=H.meta&&H.meta.fields||$e),H.fields||(H.fields=Array.isArray(H.data[0])?H.fields:typeof H.data[0]=="object"?Object.keys(H.data[0]):[]),Array.isArray(H.data[0])||typeof H.data[0]=="object"||(H.data=[H.data])),Ze(H.fields||[],H.data||[],Ge);throw new Error("Unable to serialize unrecognized input");function Ze(Ne,tt,_t){var kt="";typeof Ne=="string"&&(Ne=JSON.parse(Ne)),typeof tt=="string"&&(tt=JSON.parse(tt));var St=Array.isArray(Ne)&&0<Ne.length,Fe=!Array.isArray(tt[0]);if(St&&_e){for(var at=0;at<Ne.length;at++)0<at&&(kt+=te),kt+=Je(Ne[at],at);0<tt.length&&(kt+=Se)}for(var qe=0;qe<tt.length;qe++){var Be=St?Ne.length:tt[qe].length,bt=!1,Bt=St?Object.keys(tt[qe]).length===0:tt[qe].length===0;if(_t&&!St&&(bt=_t==="greedy"?tt[qe].join("").trim()==="":tt[qe].length===1&&tt[qe][0].length===0),_t==="greedy"&&St){for(var re=[],he=0;he<Be;he++){var ze=Fe?Ne[he]:he;re.push(tt[qe][ze])}bt=re.join("").trim()===""}if(!bt){for(var He=0;He<Be;He++){0<He&&!Bt&&(kt+=te);var Ke=St&&Fe?Ne[He]:He;kt+=Je(tt[qe][Ke],He)}qe<tt.length-1&&(!_t||0<Be&&!Bt)&&(kt+=Se)}}return kt}function Je(Ne,tt){if(Ne==null)return"";if(Ne.constructor===Date)return JSON.stringify(Ne).slice(1,25);var _t=!1;ke&&typeof Ne=="string"&&ke.test(Ne)&&(Ne="'"+Ne,_t=!0);var kt=Ne.toString().replace(Pe,Ve);return(_t=_t||ne===!0||typeof ne=="function"&&ne(Ne,tt)||Array.isArray(ne)&&ne[tt]||function(St,Fe){for(var at=0;at<Fe.length;at++)if(-1<St.indexOf(Fe[at]))return!0;return!1}(kt,v.BAD_DELIMITERS)||-1<kt.indexOf(te)||kt.charAt(0)===" "||kt.charAt(kt.length-1)===" ")?me+kt+me:kt}}};if(v.RECORD_SEP="",v.UNIT_SEP="",v.BYTE_ORDER_MARK="\uFEFF",v.BAD_DELIMITERS=["\r",`
`,'"',v.BYTE_ORDER_MARK],v.WORKERS_SUPPORTED=!s&&!!r.Worker,v.NODE_STREAM_INPUT=1,v.LocalChunkSize=10485760,v.RemoteChunkSize=5242880,v.DefaultDelimiter=",",v.Parser=N,v.ParserHandle=R,v.NetworkStreamer=C,v.FileStreamer=k,v.StringStreamer=D,v.ReadableStreamStreamer=O,r.jQuery){var _=r.jQuery;_.fn.parse=function(H){var Z=H.config||{},ne=[];return this.each(function(Se){if(!(_(this).prop("tagName").toUpperCase()==="INPUT"&&_(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var me=0;me<this.files.length;me++)ne.push({file:this.files[me],inputElem:this,instanceConfig:_.extend({},Z)})}),_e(),this;function _e(){if(ne.length!==0){var Se,me,Ve,Ge,$e=ne[0];if(se(H.before)){var ke=H.before($e.file,$e.inputElem);if(typeof ke=="object"){if(ke.action==="abort")return Se="AbortError",me=$e.file,Ve=$e.inputElem,Ge=ke.reason,void(se(H.error)&&H.error({name:Se},me,Ve,Ge));if(ke.action==="skip")return void te();typeof ke.config=="object"&&($e.instanceConfig=_.extend($e.instanceConfig,ke.config))}else if(ke==="skip")return void te()}var Pe=$e.instanceConfig.complete;$e.instanceConfig.complete=function(Ze){se(Pe)&&Pe(Ze,$e.file,$e.inputElem),te()},v.parse($e.file,$e.instanceConfig)}else se(H.complete)&&H.complete()}function te(){ne.splice(0,1),_e()}}}function S(H){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(Z){var ne=le(Z);ne.chunkSize=parseInt(ne.chunkSize),Z.step||Z.chunk||(ne.chunkSize=null),this._handle=new R(ne),(this._handle.streamer=this)._config=ne}).call(this,H),this.parseChunk=function(Z,ne){if(this.isFirstChunk&&se(this._config.beforeFirstChunk)){var _e=this._config.beforeFirstChunk(Z);_e!==void 0&&(Z=_e)}this.isFirstChunk=!1,this._halted=!1;var te=this._partialLine+Z;this._partialLine="";var Se=this._handle.parse(te,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var me=Se.meta.cursor;this._finished||(this._partialLine=te.substring(me-this._baseIndex),this._baseIndex=me),Se&&Se.data&&(this._rowCount+=Se.data.length);var Ve=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(u)r.postMessage({results:Se,workerId:v.WORKER_ID,finished:Ve});else if(se(this._config.chunk)&&!ne){if(this._config.chunk(Se,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);Se=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(Se.data),this._completeResults.errors=this._completeResults.errors.concat(Se.errors),this._completeResults.meta=Se.meta),this._completed||!Ve||!se(this._config.complete)||Se&&Se.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Ve||Se&&Se.meta.paused||this._nextChunk(),Se}this._halted=!0},this._sendError=function(Z){se(this._config.error)?this._config.error(Z):u&&this._config.error&&r.postMessage({workerId:v.WORKER_ID,error:Z,finished:!1})}}function C(H){var Z;(H=H||{}).chunkSize||(H.chunkSize=v.RemoteChunkSize),S.call(this,H),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(ne){this._input=ne,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(Z=new XMLHttpRequest,this._config.withCredentials&&(Z.withCredentials=this._config.withCredentials),s||(Z.onload=ie(this._chunkLoaded,this),Z.onerror=ie(this._chunkError,this)),Z.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var ne=this._config.downloadRequestHeaders;for(var _e in ne)Z.setRequestHeader(_e,ne[_e])}if(this._config.chunkSize){var te=this._start+this._config.chunkSize-1;Z.setRequestHeader("Range","bytes="+this._start+"-"+te)}try{Z.send(this._config.downloadRequestBody)}catch(Se){this._chunkError(Se.message)}s&&Z.status===0&&this._chunkError()}},this._chunkLoaded=function(){Z.readyState===4&&(Z.status<200||400<=Z.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:Z.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(ne){var _e=ne.getResponseHeader("Content-Range");return _e===null?-1:parseInt(_e.substring(_e.lastIndexOf("/")+1))}(Z),this.parseChunk(Z.responseText)))},this._chunkError=function(ne){var _e=Z.statusText||ne;this._sendError(new Error(_e))}}function k(H){var Z,ne;(H=H||{}).chunkSize||(H.chunkSize=v.LocalChunkSize),S.call(this,H);var _e=typeof FileReader<"u";this.stream=function(te){this._input=te,ne=te.slice||te.webkitSlice||te.mozSlice,_e?((Z=new FileReader).onload=ie(this._chunkLoaded,this),Z.onerror=ie(this._chunkError,this)):Z=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var te=this._input;if(this._config.chunkSize){var Se=Math.min(this._start+this._config.chunkSize,this._input.size);te=ne.call(te,this._start,Se)}var me=Z.readAsText(te,this._config.encoding);_e||this._chunkLoaded({target:{result:me}})},this._chunkLoaded=function(te){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(te.target.result)},this._chunkError=function(){this._sendError(Z.error)}}function D(H){var Z;S.call(this,H=H||{}),this.stream=function(ne){return Z=ne,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var ne,_e=this._config.chunkSize;return _e?(ne=Z.substring(0,_e),Z=Z.substring(_e)):(ne=Z,Z=""),this._finished=!Z,this.parseChunk(ne)}}}function O(H){S.call(this,H=H||{});var Z=[],ne=!0,_e=!1;this.pause=function(){S.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){S.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(te){this._input=te,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){_e&&Z.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),Z.length?this.parseChunk(Z.shift()):ne=!0},this._streamData=ie(function(te){try{Z.push(typeof te=="string"?te:te.toString(this._config.encoding)),ne&&(ne=!1,this._checkIsFinished(),this.parseChunk(Z.shift()))}catch(Se){this._streamError(Se)}},this),this._streamError=ie(function(te){this._streamCleanUp(),this._sendError(te)},this),this._streamEnd=ie(function(){this._streamCleanUp(),_e=!0,this._streamData("")},this),this._streamCleanUp=ie(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function R(H){var Z,ne,_e,te=Math.pow(2,53),Se=-te,me=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Ve=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Ge=this,$e=0,ke=0,Pe=!1,Ze=!1,Je=[],Ne={data:[],errors:[],meta:{}};if(se(H.step)){var tt=H.step;H.step=function(qe){if(Ne=qe,St())kt();else{if(kt(),Ne.data.length===0)return;$e+=qe.data.length,H.preview&&$e>H.preview?ne.abort():(Ne.data=Ne.data[0],tt(Ne,Ge))}}}function _t(qe){return H.skipEmptyLines==="greedy"?qe.join("").trim()==="":qe.length===1&&qe[0].length===0}function kt(){return Ne&&_e&&(at("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+v.DefaultDelimiter+"'"),_e=!1),H.skipEmptyLines&&(Ne.data=Ne.data.filter(function(qe){return!_t(qe)})),St()&&function(){if(!Ne)return;function qe(bt,Bt){se(H.transformHeader)&&(bt=H.transformHeader(bt,Bt)),Je.push(bt)}if(Array.isArray(Ne.data[0])){for(var Be=0;St()&&Be<Ne.data.length;Be++)Ne.data[Be].forEach(qe);Ne.data.splice(0,1)}else Ne.data.forEach(qe)}(),function(){if(!Ne||!H.header&&!H.dynamicTyping&&!H.transform)return Ne;function qe(bt,Bt){var re,he=H.header?{}:[];for(re=0;re<bt.length;re++){var ze=re,He=bt[re];H.header&&(ze=re>=Je.length?"__parsed_extra":Je[re]),H.transform&&(He=H.transform(He,ze)),He=Fe(ze,He),ze==="__parsed_extra"?(he[ze]=he[ze]||[],he[ze].push(He)):he[ze]=He}return H.header&&(re>Je.length?at("FieldMismatch","TooManyFields","Too many fields: expected "+Je.length+" fields but parsed "+re,ke+Bt):re<Je.length&&at("FieldMismatch","TooFewFields","Too few fields: expected "+Je.length+" fields but parsed "+re,ke+Bt)),he}var Be=1;return!Ne.data.length||Array.isArray(Ne.data[0])?(Ne.data=Ne.data.map(qe),Be=Ne.data.length):Ne.data=qe(Ne.data,0),H.header&&Ne.meta&&(Ne.meta.fields=Je),ke+=Be,Ne}()}function St(){return H.header&&Je.length===0}function Fe(qe,Be){return bt=qe,H.dynamicTypingFunction&&H.dynamicTyping[bt]===void 0&&(H.dynamicTyping[bt]=H.dynamicTypingFunction(bt)),(H.dynamicTyping[bt]||H.dynamicTyping)===!0?Be==="true"||Be==="TRUE"||Be!=="false"&&Be!=="FALSE"&&(function(Bt){if(me.test(Bt)){var re=parseFloat(Bt);if(Se<re&&re<te)return!0}return!1}(Be)?parseFloat(Be):Ve.test(Be)?new Date(Be):Be===""?null:Be):Be;var bt}function at(qe,Be,bt,Bt){var re={type:qe,code:Be,message:bt};Bt!==void 0&&(re.row=Bt),Ne.errors.push(re)}this.parse=function(qe,Be,bt){var Bt=H.quoteChar||'"';if(H.newline||(H.newline=function(ze,He){ze=ze.substring(0,1048576);var Ke=new RegExp(F(He)+"([^]*?)"+F(He),"gm"),dt=(ze=ze.replace(Ke,"")).split("\r"),gt=ze.split(`
`),Ce=1<gt.length&&gt[0].length<dt[0].length;if(dt.length===1||Ce)return`
`;for(var pt=0,Qe=0;Qe<dt.length;Qe++)dt[Qe][0]===`
`&&pt++;return pt>=dt.length/2?`\r
`:"\r"}(qe,Bt)),_e=!1,H.delimiter)se(H.delimiter)&&(H.delimiter=H.delimiter(qe),Ne.meta.delimiter=H.delimiter);else{var re=function(ze,He,Ke,dt,gt){var Ce,pt,Qe,st;gt=gt||[",","	","|",";",v.RECORD_SEP,v.UNIT_SEP];for(var Et=0;Et<gt.length;Et++){var It=gt[Et],an=0,ln=0,Tn=0;Qe=void 0;for(var In=new N({comments:dt,delimiter:It,newline:He,preview:10}).parse(ze),Vn=0;Vn<In.data.length;Vn++)if(Ke&&_t(In.data[Vn]))Tn++;else{var lr=In.data[Vn].length;ln+=lr,Qe!==void 0?0<lr&&(an+=Math.abs(lr-Qe),Qe=lr):Qe=lr}0<In.data.length&&(ln/=In.data.length-Tn),(pt===void 0||an<=pt)&&(st===void 0||st<ln)&&1.99<ln&&(pt=an,Ce=It,st=ln)}return{successful:!!(H.delimiter=Ce),bestDelimiter:Ce}}(qe,H.newline,H.skipEmptyLines,H.comments,H.delimitersToGuess);re.successful?H.delimiter=re.bestDelimiter:(_e=!0,H.delimiter=v.DefaultDelimiter),Ne.meta.delimiter=H.delimiter}var he=le(H);return H.preview&&H.header&&he.preview++,Z=qe,ne=new N(he),Ne=ne.parse(Z,Be,bt),kt(),Pe?{meta:{paused:!0}}:Ne||{meta:{paused:!1}}},this.paused=function(){return Pe},this.pause=function(){Pe=!0,ne.abort(),Z=se(H.chunk)?"":Z.substring(ne.getCharIndex())},this.resume=function(){Ge.streamer._halted?(Pe=!1,Ge.streamer.parseChunk(Z,!0)):setTimeout(Ge.resume,3)},this.aborted=function(){return Ze},this.abort=function(){Ze=!0,ne.abort(),Ne.meta.aborted=!0,se(H.complete)&&H.complete(Ne),Z=""}}function F(H){return H.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function N(H){var Z,ne=(H=H||{}).delimiter,_e=H.newline,te=H.comments,Se=H.step,me=H.preview,Ve=H.fastMode,Ge=Z=H.quoteChar===void 0||H.quoteChar===null?'"':H.quoteChar;if(H.escapeChar!==void 0&&(Ge=H.escapeChar),(typeof ne!="string"||-1<v.BAD_DELIMITERS.indexOf(ne))&&(ne=","),te===ne)throw new Error("Comment character same as delimiter");te===!0?te="#":(typeof te!="string"||-1<v.BAD_DELIMITERS.indexOf(te))&&(te=!1),_e!==`
`&&_e!=="\r"&&_e!==`\r
`&&(_e=`
`);var $e=0,ke=!1;this.parse=function(Pe,Ze,Je){if(typeof Pe!="string")throw new Error("Input must be a string");var Ne=Pe.length,tt=ne.length,_t=_e.length,kt=te.length,St=se(Se),Fe=[],at=[],qe=[],Be=$e=0;if(!Pe)return ft();if(H.header&&!Ze){var bt=Pe.split(_e)[0].split(ne),Bt=[],re={},he=!1;for(var ze in bt){var He=bt[ze];se(H.transformHeader)&&(He=H.transformHeader(He,ze));var Ke=He,dt=re[He]||0;for(0<dt&&(he=!0,Ke=He+"_"+dt),re[He]=dt+1;Bt.includes(Ke);)Ke=Ke+"_"+dt;Bt.push(Ke)}if(he){var gt=Pe.split(_e);gt[0]=Bt.join(ne),Pe=gt.join(_e)}}if(Ve||Ve!==!1&&Pe.indexOf(Z)===-1){for(var Ce=Pe.split(_e),pt=0;pt<Ce.length;pt++){if(qe=Ce[pt],$e+=qe.length,pt!==Ce.length-1)$e+=_e.length;else if(Je)return ft();if(!te||qe.substring(0,kt)!==te){if(St){if(Fe=[],Tn(qe.split(ne)),fi(),ke)return ft()}else Tn(qe.split(ne));if(me&&me<=pt)return Fe=Fe.slice(0,me),ft(!0)}}return ft()}for(var Qe=Pe.indexOf(ne,$e),st=Pe.indexOf(_e,$e),Et=new RegExp(F(Ge)+F(Z),"g"),It=Pe.indexOf(Z,$e);;)if(Pe[$e]!==Z)if(te&&qe.length===0&&Pe.substring($e,$e+kt)===te){if(st===-1)return ft();$e=st+_t,st=Pe.indexOf(_e,$e),Qe=Pe.indexOf(ne,$e)}else if(Qe!==-1&&(Qe<st||st===-1))qe.push(Pe.substring($e,Qe)),$e=Qe+tt,Qe=Pe.indexOf(ne,$e);else{if(st===-1)break;if(qe.push(Pe.substring($e,st)),lr(st+_t),St&&(fi(),ke))return ft();if(me&&Fe.length>=me)return ft(!0)}else for(It=$e,$e++;;){if((It=Pe.indexOf(Z,It+1))===-1)return Je||at.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Fe.length,index:$e}),Vn();if(It===Ne-1)return Vn(Pe.substring($e,It).replace(Et,Z));if(Z!==Ge||Pe[It+1]!==Ge){if(Z===Ge||It===0||Pe[It-1]!==Ge){Qe!==-1&&Qe<It+1&&(Qe=Pe.indexOf(ne,It+1)),st!==-1&&st<It+1&&(st=Pe.indexOf(_e,It+1));var an=In(st===-1?Qe:Math.min(Qe,st));if(Pe.substr(It+1+an,tt)===ne){qe.push(Pe.substring($e,It).replace(Et,Z)),Pe[$e=It+1+an+tt]!==Z&&(It=Pe.indexOf(Z,$e)),Qe=Pe.indexOf(ne,$e),st=Pe.indexOf(_e,$e);break}var ln=In(st);if(Pe.substring(It+1+ln,It+1+ln+_t)===_e){if(qe.push(Pe.substring($e,It).replace(Et,Z)),lr(It+1+ln+_t),Qe=Pe.indexOf(ne,$e),It=Pe.indexOf(Z,$e),St&&(fi(),ke))return ft();if(me&&Fe.length>=me)return ft(!0);break}at.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Fe.length,index:$e}),It++}}else It++}return Vn();function Tn(Sn){Fe.push(Sn),Be=$e}function In(Sn){var oa=0;if(Sn!==-1){var ur=Pe.substring(It+1,Sn);ur&&ur.trim()===""&&(oa=ur.length)}return oa}function Vn(Sn){return Je||(Sn===void 0&&(Sn=Pe.substring($e)),qe.push(Sn),$e=Ne,Tn(qe),St&&fi()),ft()}function lr(Sn){$e=Sn,Tn(qe),qe=[],st=Pe.indexOf(_e,$e)}function ft(Sn){return{data:Fe,errors:at,meta:{delimiter:ne,linebreak:_e,aborted:ke,truncated:!!Sn,cursor:Be+(Ze||0)}}}function fi(){Se(ft()),Fe=[],at=[]}},this.abort=function(){ke=!0},this.getCharIndex=function(){return $e}}function j(H){var Z=H.data,ne=h[Z.workerId],_e=!1;if(Z.error)ne.userError(Z.error,Z.file);else if(Z.results&&Z.results.data){var te={abort:function(){_e=!0,X(Z.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ee,resume:ee};if(se(ne.userStep)){for(var Se=0;Se<Z.results.data.length&&(ne.userStep({data:Z.results.data[Se],errors:Z.results.errors,meta:Z.results.meta},te),!_e);Se++);delete Z.results}else se(ne.userChunk)&&(ne.userChunk(Z.results,te,Z.file),delete Z.results)}Z.finished&&!_e&&X(Z.workerId,Z.results)}function X(H,Z){var ne=h[H];se(ne.userComplete)&&ne.userComplete(Z),ne.terminate(),delete h[H]}function ee(){throw new Error("Not implemented.")}function le(H){if(typeof H!="object"||H===null)return H;var Z=Array.isArray(H)?[]:{};for(var ne in H)Z[ne]=le(H[ne]);return Z}function ie(H,Z){return function(){H.apply(Z,arguments)}}function se(H){return typeof H=="function"}return u&&(r.onmessage=function(H){var Z=H.data;if(v.WORKER_ID===void 0&&Z&&(v.WORKER_ID=Z.workerId),typeof Z.input=="string")r.postMessage({workerId:v.WORKER_ID,results:v.parse(Z.input,Z.config),finished:!0});else if(r.File&&Z.input instanceof File||Z.input instanceof Object){var ne=v.parse(Z.input,Z.config);ne&&r.postMessage({workerId:v.WORKER_ID,results:ne,finished:!0})}}),(C.prototype=Object.create(S.prototype)).constructor=C,(k.prototype=Object.create(S.prototype)).constructor=k,(D.prototype=Object.create(D.prototype)).constructor=D,(O.prototype=Object.create(S.prototype)).constructor=O,v})})(zI);var Tg=zI.exports;const fx=(e,t)=>new Promise(n=>{const r=[];Tg.parse(e,{skipEmptyLines:!0,worker:!0,header:t,step:s=>{r.push(s.data)},complete:()=>{n(r)}})}),e2e=async e=>{const t={headers:{accept:"text/csv"},responseType:"blob"},n=await Br.get(e,t);return fx(n.data,!0)},t2e=async(e,t)=>{const n=`${SI}${e}/${t}`;return await e2e(n)},n2e=async(e,t,n,r)=>{const s=`${SI}${e}/${t}`;return(await Br.put(s,n,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"text/csv"}})).status===200},r2e={beforeMount(){window.addEventListener("beforeunload",e=>{this.isEditing&&(e.preventDefault(),e.returnValue="")})},beforeUnmount(){window.removeEventListener("beforeunload",this.preventNav)},beforeRouteLeave(e,t,n){this.isEditing&&!window.confirm("Leave without saving?")||n()},data(){return{days:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],openingHourTypes:["Staffed","Unstaffed"],dialogMainLibrary:!1,dialogOpeningHours:!1,dialogDelete:!1,dialogOpeningHoursEntry:!1,editedIndex:-1,editTabs:1,editedItem:{},defaultItem:{Local_authority:"",Library_name:"",Address_1:"",Address_2:"",Address_3:"",Postcode:"",Unique_property_reference_number:"",Statutory:"",Type_of_library:"LAL",Year_opened:"",Year_closed:"",Monday_staffed_hours:"",Tuesday_staffed_hours:"",Wednesday_staffed_hours:"",Thursday_staffed_hours:"",Friday_staffed_hours:"",Saturday_staffed_hours:"",Sunday_staffed_hours:"",Monday_unstaffed_hours:"",Tuesday_unstaffed_hours:"",Wednesday_unstaffed_hours:"",Thursday_unstaffed_hours:"",Friday_unstaffed_hours:"",Saturday_unstaffed_hours:"",Sunday_unstaffed_hours:"",Special_hours:"",Colocated:"",Colocated_with:"",Notes:"",URL:"",Email_address:""},errorDialog:!1,headers:[{title:"Name",align:"start",key:"Library_name"},{title:"Closed",key:"Year_closed"},{title:"Address 1",align:"start",key:"Address_1"},{title:"Postcode",key:"Postcode"},{title:"Actions",key:"actions",sortable:!1}],isEditing:!1,libraries:[],libraryTypes:oSe,loadingServiceData:!1,mdText:Qke,openingHoursOpenMenuOpen:!1,openingHoursCloseMenuOpen:!1,openingHoursEditKey:null,openingHoursOpen:null,openingHoursClose:null,selectedService:null,successDialog:!1}},methods:{addOpeningHoursEntry(e){this.openingHoursEditKey=e,this.dialogOpeningHoursEntry=!0},close(){this.dialogMainLibrary=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedItem.Local_authority=this.selectedService.name,this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeOpeningHoursEntry(){this.dialogOpeningHoursEntry=!1},confirmOpeningHoursEntry(){const e=this.editedItem[this.openingHoursEditKey].split(",").filter(t=>t.length>0);e.push(`${this.openingHoursOpen}-${this.openingHoursClose}`),this.editedItem[this.openingHoursEditKey]=e.join(","),this.dialogOpeningHoursEntry=!1,this.openingHoursOpen=null,this.openingHoursClose=null},deleteItem(e){this.editedIndex=this.libraries.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm(){this.isEditing=!0,this.libraries.splice(this.editedIndex,1),this.closeDelete()},download(){const e=this.selectedService;this.downloadFile(`${e.code}_libraries.csv`,this.libraries)},downloadFile:function(e,t){const n=new Blob([Tg.unparse(t)],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(n,e);else{const r=document.createElement("a");r.href=window.URL.createObjectURL(n),r.setAttribute("download",e),document.body.appendChild(r),r.click(),document.body.removeChild(r)}},editItem(e){this.editedIndex=this.libraries.indexOf(e),this.editedItem=Object.assign({},e),this.dialogMainLibrary=!0},loadLibraries:async function(e){if(this.selectedService=e,this.libraries=[],!(e!=null&&e.code))return;this.loadingServiceData=!0;const t=this,n=await t2e("libraries",e.code);n.forEach((r,s)=>{Object.keys(r).forEach(u=>{const h=r[u],l=u.replace(/\s+/g,"_");delete n[s][u],n[s][l]=h})}),t.libraries=n,this.loadingServiceData=!1},publishChanges:async function(){const e=JSON.parse(JSON.stringify(this.libraries));e.forEach((r,s)=>{Object.keys(r).forEach(u=>{const h=r[u],l=u.replace(/_/g," ");delete e[s][u],e[s][l]=h})});const t=new Blob([Tg.unparse(e)],{type:"text/csv;charset=utf-8;"});await n2e("libraries",this.selectedService.code,t,this.$store.state.loginKey)?this.successDialog=!0:this.errorDialog=!0,this.isEditing=!1},preventNav(e){this.isEditing&&(e.preventDefault(),e.returnValue="")},removeOpeningHoursEntry(e,t){const n=this.editedItem[e].split(",").filter(r=>r.length>0);n.splice(n.indexOf(t),1),this.editedItem[e]=n.join(","),this.dialogOpeningHoursEntry=!1},save(){this.isEditing=!0,this.editedIndex>-1?Object.assign(this.libraries[this.editedIndex],this.editedItem):this.libraries.push(this.editedItem),this.close()}},components:{"service-select":wv}},i2e=er("h2",{class:"text-h5 text-decoration-underline my-3"}," Edit library locations ",-1),a2e={class:"text-subtitle"},s2e={class:"text-subtitle-2"},o2e={class:"d-flex"},l2e=er("strong",null,"Publish changes",-1);function c2e(e,t,n,r,s,u){const h=wn("layout-header"),l=wn("markdown-section"),v=tp,_=wv;return fn(),Bn(Dr,null,{default:Ie(()=>[E(h,{title:"Edit library locations",subtitle:"View and edit the data held for public library locations"}),E(yr,{inset:"",color:"info",class:"my-2"}),E(l,{markdownText:s.mdText},null,8,["markdownText"]),E(yr,{inset:"",color:"info",class:"my-2"}),E(v,{actions:!0}),i2e,E(bd,{color:"grey-lighten-5",rounded:"",elevation:"0",class:"px-5 py-5"},{default:Ie(()=>[E(tl,{icon:"mdi-numeric-1-circle",class:"mb-1",text:"Search for a local authority to view the libraries within that area.",title:"Local authority"}),E(_,{onSelect:t[0]||(t[0]=S=>u.loadLibraries(S))}),E(tl,{class:"mt-8 mb-1",icon:"mdi-numeric-2-circle",text:`Select the edit icon for each library to see and edit full details.
        Changes are not saved until the next step.`,title:"Make changes"}),E(Ga,{color:"grey-lighten-2",variant:"outlined",elevation:"0"},{default:Ie(()=>[E(bE,{hover:"","items-per-page":"5","no-filter":"","no-data-text":"To load library data ensure you select a local authority in Step 1.",headers:s.headers,items:s.libraries,"sort-by":[{key:"Library_name",order:"asc"}],class:"elevation-0"},{top:Ie(()=>[E(wb,{flat:"",color:"grey-lighten-5"},{default:Ie(()=>[E(co),E(sd,{persistent:"",modelValue:s.dialogMainLibrary,"onUpdate:modelValue":t[16]||(t[16]=S=>s.dialogMainLibrary=S),"max-width":"500px","overlay-opacity":"0.3","content-class":"elevation-0"},{activator:Ie(({props:S})=>[E(nn,wt({disabled:s.selectedService===null},S,{variant:"tonal",color:"success","prepend-icon":"mdi-plus-circle"}),{default:Ie(()=>[Ot(" Add library ")]),_:2},1040,["disabled"])]),default:Ie(()=>[E(Ga,null,{default:Ie(()=>[E(Dr,null,{default:Ie(()=>[E(_V,{"align-tabs":"center",modelValue:s.editTabs,"onUpdate:modelValue":t[1]||(t[1]=S=>s.editTabs=S)},{default:Ie(()=>[E(Hm,{value:1},{default:Ie(()=>[Ot("Details")]),_:1}),E(Hm,{value:2},{default:Ie(()=>[Ot("Address")]),_:1}),E(Hm,{value:3},{default:Ie(()=>[Ot("Hours")]),_:1})]),_:1},8,["modelValue"]),E(X5,{modelValue:s.editTabs,"onUpdate:modelValue":t[15]||(t[15]=S=>s.editTabs=S)},{default:Ie(()=>[(fn(),Bn(d_,{key:1,value:1},{default:Ie(()=>[E(Dr,null,{default:Ie(()=>[E(Bs,{dense:""},{default:Ie(()=>[E(na,{cols:"12"},{default:Ie(()=>[E(Di,{variant:"outlined",density:"compact",modelValue:s.editedItem.Library_name,"onUpdate:modelValue":t[2]||(t[2]=S=>s.editedItem.Library_name=S),label:"Name"},null,8,["modelValue"])]),_:1})]),_:1}),E(Bs,{dense:""},{default:Ie(()=>[E(na,{cols:"12",sm:"8",md:"8"},{default:Ie(()=>[E(Pf,{modelValue:s.editedItem.Type_of_library,"onUpdate:modelValue":t[3]||(t[3]=S=>s.editedItem.Type_of_library=S),items:s.libraryTypes,variant:"outlined",density:"compact","item-title":"text","item-value":"value",label:"Type"},null,8,["modelValue","items"])]),_:1}),E(na,{cols:"12",sm:"4",md:"4"},{default:Ie(()=>[E(Pf,{variant:"outlined",density:"compact",modelValue:s.editedItem.Statutory,"onUpdate:modelValue":t[4]||(t[4]=S=>s.editedItem.Statutory=S),"menu-props":{zIndex:1e4},items:["Yes","No"],label:"Statutory"},null,8,["modelValue"])]),_:1})]),_:1}),E(Bs,{dense:""},{default:Ie(()=>[E(na,{cols:"12",sm:"6",md:"6"},{default:Ie(()=>[E(Di,{density:"compact",variant:"outlined",modelValue:s.editedItem.Year_opened,"onUpdate:modelValue":t[5]||(t[5]=S=>s.editedItem.Year_opened=S),label:"Year opened",type:"number"},null,8,["modelValue"])]),_:1}),E(na,{cols:"12",sm:"6",md:"6"},{default:Ie(()=>[E(Di,{density:"compact",variant:"outlined",modelValue:s.editedItem.Year_closed,"onUpdate:modelValue":t[6]||(t[6]=S=>s.editedItem.Year_closed=S),label:"Year closed",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),E(Bs,{dense:""},{default:Ie(()=>[E(na,{cols:"12",sm:"6",md:"6"},{default:Ie(()=>[E(Di,{density:"compact",variant:"outlined",modelValue:s.editedItem.Email_address,"onUpdate:modelValue":t[7]||(t[7]=S=>s.editedItem.Email_address=S),label:"Email address"},null,8,["modelValue"])]),_:1}),E(na,{cols:"12",sm:"6",md:"6"},{default:Ie(()=>[E(Di,{density:"compact",variant:"outlined",modelValue:s.editedItem.URL,"onUpdate:modelValue":t[8]||(t[8]=S=>s.editedItem.URL=S),label:"Website"},null,8,["modelValue"])]),_:1})]),_:1}),E(Bs,{dense:""},{default:Ie(()=>[E(na,{cols:"12",sm:"12",md:"12"},{default:Ie(()=>[E(xV,{rows:"2",density:"compact",variant:"outlined",modelValue:s.editedItem.Notes,"onUpdate:modelValue":t[9]||(t[9]=S=>s.editedItem.Notes=S),label:"Notes",clearable:"","persistent-clear":"","full-width":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})),(fn(),Bn(d_,{key:2,value:2},{default:Ie(()=>[E(Dr,null,{default:Ie(()=>[E(Bs,{dense:""},{default:Ie(()=>[E(na,{cols:"12",sm:"6",md:"6"},{default:Ie(()=>[E(Di,{density:"compact",variant:"outlined",modelValue:s.editedItem.Address_1,"onUpdate:modelValue":t[10]||(t[10]=S=>s.editedItem.Address_1=S),label:"Address 1"},null,8,["modelValue"])]),_:1}),E(na,{cols:"12",sm:"6",md:"6"},{default:Ie(()=>[E(Di,{density:"compact",variant:"outlined",modelValue:s.editedItem.Address_2,"onUpdate:modelValue":t[11]||(t[11]=S=>s.editedItem.Address_2=S),label:"Address 2"},null,8,["modelValue"])]),_:1})]),_:1}),E(Bs,{dense:""},{default:Ie(()=>[E(na,{cols:"12",sm:"6",md:"6"},{default:Ie(()=>[E(Di,{density:"compact",variant:"outlined",modelValue:s.editedItem.Address_3,"onUpdate:modelValue":t[12]||(t[12]=S=>s.editedItem.Address_3=S),label:"Address 3"},null,8,["modelValue"])]),_:1}),E(na,{cols:"12",sm:"6",md:"6"},{default:Ie(()=>[E(Di,{density:"compact",variant:"outlined",modelValue:s.editedItem.Postcode,"onUpdate:modelValue":t[13]||(t[13]=S=>s.editedItem.Postcode=S),label:"Postcode"},null,8,["modelValue"])]),_:1})]),_:1}),E(Bs,{dense:""},{default:Ie(()=>[E(na,{cols:"12",sm:"12",md:"12"},{default:Ie(()=>[E(Di,{density:"compact",variant:"outlined",modelValue:s.editedItem.Unique_property_reference_number,"onUpdate:modelValue":t[14]||(t[14]=S=>s.editedItem.Unique_property_reference_number=S),label:"Unique property reference number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})),(fn(),Bn(d_,{key:3,value:3},{default:Ie(()=>[E(Dr,null,{default:Ie(()=>[E(Bs,{dense:""},{default:Ie(()=>[(fn(!0),ds(rn,null,Fm(s.openingHourTypes,S=>(fn(),Bn(na,{cols:"12",sm:"6",md:"6",key:S},{default:Ie(()=>[er("h4",a2e,qs(S),1),(fn(!0),ds(rn,null,Fm(s.days,C=>(fn(),ds("div",{key:C,class:"my-1"},[E(yr,{class:"my-1"}),er("div",s2e,[E(nn,{variant:"tonal",icon:"mdi-plus-circle",size:"x-small",color:"success",onClick:k=>u.addOpeningHoursEntry(C+"_"+S.toLowerCase()+"_hours")},null,8,["onClick"]),Ot(" "+qs(C),1)]),(fn(!0),ds(rn,null,Fm(s.editedItem[C+"_"+S.toLowerCase()+"_hours"]?s.editedItem[C+"_"+S.toLowerCase()+"_hours"].split(","):"",k=>(fn(),Bn(sc,{class:"ma-1",size:"small",key:k,label:"",closable:"","close-icon":"mdi-delete",color:"success","onClick:close":D=>u.removeOpeningHoursEntry(C+"_"+S.toLowerCase()+"_hours",k)},{default:Ie(()=>[Ot(qs(k),1)]),_:2},1032,["onClick:close"]))),128))]))),128))]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))]),_:1},8,["modelValue"])]),_:1}),E(Jl,null,{default:Ie(()=>[E(co),E(nn,{variant:"plain",onClick:u.close,"append-icon":"mdi-close-circle"},{default:Ie(()=>[Ot(" Cancel ")]),_:1},8,["onClick"]),E(nn,{variant:"tonal",color:"success",onClick:u.save,"append-icon":"mdi-check-circle"},{default:Ie(()=>[Ot(" Ok ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),E(sd,{persistent:"","overlay-opacity":"0.1","content-class":"elevation-0",modelValue:s.dialogDelete,"onUpdate:modelValue":t[17]||(t[17]=S=>s.dialogDelete=S),"max-width":"500px"},{default:Ie(()=>[E(Ga,null,{default:Ie(()=>[E(Yc,null,{default:Ie(()=>[Ot("Remove library?")]),_:1}),E(mo,null,{default:Ie(()=>[Ot(" This action will remove the library. If the library has closed it should not be removed. The closed year can be entered in the library details to mark it as closed and retain the details. ")]),_:1}),E(Jl,null,{default:Ie(()=>[E(co),E(nn,{variant:"plain",onClick:u.closeDelete,"append-icon":"mdi-close-circle"},{default:Ie(()=>[Ot(" Cancel ")]),_:1},8,["onClick"]),E(nn,{variant:"tonal",color:"warning",onClick:u.deleteItemConfirm,"append-icon":"mdi-delete"},{default:Ie(()=>[Ot(" Remove ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),E(sd,{persistent:"","overlay-opacity":"0.3","content-class":"elevation-0",modelValue:s.dialogOpeningHoursEntry,"onUpdate:modelValue":t[20]||(t[20]=S=>s.dialogOpeningHoursEntry=S),"max-width":"500px"},{default:Ie(()=>[E(Ga,null,{default:Ie(()=>[E(Yc,null,{default:Ie(()=>[Ot("Add opening hours")]),_:1}),E(mo,null,{default:Ie(()=>[E(Bs,{dense:""},{default:Ie(()=>[E(na,{cols:"12",sm:"6",md:"6"},{default:Ie(()=>[E(Di,{variant:"outlined",density:"compact",modelValue:s.openingHoursOpen,"onUpdate:modelValue":t[18]||(t[18]=S=>s.openingHoursOpen=S),label:"Opening time",type:"time"},null,8,["modelValue"])]),_:1}),E(na,{cols:"12",sm:"6",md:"6"},{default:Ie(()=>[E(Di,{variant:"outlined",density:"compact",modelValue:s.openingHoursClose,"onUpdate:modelValue":t[19]||(t[19]=S=>s.openingHoursClose=S),label:"Closing time",type:"time"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),E(Jl,null,{default:Ie(()=>[E(co),E(nn,{variant:"plain",onClick:u.closeOpeningHoursEntry,"append-icon":"mdi-close-circle"},{default:Ie(()=>[Ot("Cancel")]),_:1},8,["onClick"]),E(nn,{variant:"tonal",color:"success",onClick:u.confirmOpeningHoursEntry,disabled:!s.openingHoursOpen||!s.openingHoursClose,"append-icon":"mdi-check-circle"},{default:Ie(()=>[Ot("Ok")]),_:1},8,["onClick","disabled"]),E(co)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.actions":Ie(({item:S})=>[er("div",o2e,[E(pr,{class:"mr-2",onClick:C=>u.editItem(S)},{default:Ie(()=>[Ot(" mdi-pencil ")]),_:2},1032,["onClick"]),E(pr,{onClick:C=>u.deleteItem(S)},{default:Ie(()=>[Ot("mdi-delete")]),_:2},1032,["onClick"])])]),_:2},1032,["headers","items"])]),_:1}),E(tl,{class:"mt-8",icon:"mdi-numeric-3-circle",title:"Save changes"},{default:Ie(()=>[Ot(" If you are logged in with access to edit the library authority data, you can overwrite the existing data by selecting "),l2e,Ot(". You can also save a copy of the data to your computer. ")]),_:1}),E(nn,{disabled:!s.isEditing,size:"large",variant:"tonal",color:"info","append-icon":"mdi-content-save",onClick:u.download},{default:Ie(()=>[Ot(" Save local copy ")]),_:1},8,["disabled","onClick"]),E(nn,{disabled:!s.isEditing||!this.$store.state.loginKey,size:"large",variant:"tonal",color:"success",class:"ma-2","append-icon":"mdi-cloud-upload",onClick:u.publishChanges},{default:Ie(()=>[Ot(" Publish changes ")]),_:1},8,["disabled","onClick"]),E(sd,{modelValue:s.successDialog,"onUpdate:modelValue":t[22]||(t[22]=S=>s.successDialog=S),persistent:"","max-width":"290"},{default:Ie(()=>[E(Ga,null,{default:Ie(()=>[E(Yc,{class:"text-h5"},{default:Ie(()=>[Ot("Success")]),_:1}),E(mo,null,{default:Ie(()=>[Ot("Your changes have been published. Thank you")]),_:1}),E(Jl,null,{default:Ie(()=>[E(co),E(nn,{color:"secondary",text:"",onClick:t[21]||(t[21]=S=>s.successDialog=!1)},{default:Ie(()=>[Ot(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),E(sd,{modelValue:s.errorDialog,"onUpdate:modelValue":t[24]||(t[24]=S=>s.errorDialog=S),persistent:"","max-width":"290"},{default:Ie(()=>[E(Ga,null,{default:Ie(()=>[E(Yc,{class:"text-h5"},{default:Ie(()=>[Ot("Sorry")]),_:1}),E(mo,null,{default:Ie(()=>[Ot(" Your changes failed to publish - please contact info@librarieshacked.org ")]),_:1}),E(Jl,null,{default:Ie(()=>[E(co),E(nn,{color:"secondary",text:"",onClick:t[23]||(t[23]=S=>s.errorDialog=!1)},{default:Ie(()=>[Ot(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}const u2e=Kr(r2e,[["render",c2e]]),d2e=`A loan is the issuing of an item of stock to a library member. Renewing an item already on loan should be counted as an additional loan.

The loans dataset is a **time-series**. Data is maintained by adding new data (e.g. the next months loans).
`,h2e={data(){return{mdText:d2e}},methods:{},components:{}},f2e={class:"text-center"};function p2e(e,t,n,r,s,u){const h=wn("layout-header"),l=wn("markdown-section");return fn(),Bn(Dr,null,{default:Ie(()=>[E(h,{title:"Loans",subtitle:"Lending of library items"}),er("p",f2e,[E(nn,{size:"large",variant:"tonal",color:"info",href:"https://schema.librarydata.uk/loans",target:"_blank"},{default:Ie(()=>[Ot(" Explore the loans data schema ")]),_:1})]),E(yr,{inset:"",color:"info",class:"my-2"}),E(l,{markdownText:s.mdText},null,8,["markdownText"]),E(yr,{inset:"",color:"info",class:"my-2"})]),_:1})}const m2e=Kr(h2e,[["render",p2e]]),g2e=`Anyone can browse this site, as well use the tools to build and visualise library data.

To publish updates to existing data, you need to login. If your organisation has access you will be able to login using your organisation email address.

Once you've entered a valid email address you will be emailed an access link.
`;async function v2e(e){try{const t=await Br.post(aSe,{email:e,website:sSe});if(t&&t.status===200)return!0}catch{return!1}return!1}const y2e={data(){return{mdText:g2e,email:"",emailRules:[e=>!!e||"E-mail is required",e=>/.+@.+\..+/.test(e)||"E-mail must be valid"],valid:!0,loading:!1,success:!1,message:""}},created:function(){this.processLoginKey()},methods:{async login(){if(this.loading=!0,this.$refs.form.validate(),this.valid){var e=await v2e(this.email);e?this.success=!0:(this.success=!1,this.message="You do not have access rights with that email address")}this.loading=!1},processLoginKey:function(){const t=Tke().query.key;t&&(this.$store.commit("setLoginKey",t),this.$router.push("/profile"))}},components:{}};function _2e(e,t,n,r,s,u){const h=wn("layout-header"),l=wn("markdown-section");return fn(),Bn(Dr,null,{default:Ie(()=>[E(h,{title:"Log in",subtitle:"Gain access to edit and submit data for your service"}),E(l,{markdownText:s.mdText},null,8,["markdownText"]),er("section",null,[E(Dr,null,{default:Ie(()=>[E(Ga,{color:"success",variant:"outlined",elevation:"0",loading:s.loading,"max-width":"350",class:"mx-auto"},{progress:Ie(()=>[E(A0,{height:"5",indeterminate:""})]),default:Ie(()=>[E(Yc,null,{default:Ie(()=>[Ot("Access the site")]),_:1}),s.success?Yn("",!0):(fn(),Bn(mo,{key:0},{default:Ie(()=>[E(tV,{ref:"form",modelValue:s.valid,"onUpdate:modelValue":t[1]||(t[1]=v=>s.valid=v)},{default:Ie(()=>[E(Di,{clearable:"",variant:"outlined",modelValue:s.email,"onUpdate:modelValue":t[0]||(t[0]=v=>s.email=v),rules:s.emailRules,label:"Enter email address",type:"email","prepend-inner-icon":"mdi-email",required:""},null,8,["modelValue","rules"]),er("p",null,qs(s.message),1)]),_:1},8,["modelValue"])]),_:1})),s.success?(fn(),Bn(mo,{key:1},{default:Ie(()=>[Ot(" Thank you - you should receive an email shortly. ")]),_:1})):Yn("",!0),s.success?Yn("",!0):(fn(),Bn(Jl,{key:2},{default:Ie(()=>[E(co),E(nn,{"append-icon":"mdi-email",variant:"tonal",size:"large",color:"success",text:"",onClick:u.login,disabled:!s.valid},{default:Ie(()=>[Ot(" Log in ")]),_:1},8,["onClick","disabled"])]),_:1}))]),_:1},8,["loading"])]),_:1})])]),_:1})}const b2e=Kr(y2e,[["render",_2e]]),x2e=`A library member is any member of the public currently registered with the library service.

The membership dataset is a **snapshot**. This means that each update to the data is a fresh export, representing the membership at that point in time.
`,w2e={data(){return{mdText:x2e}},methods:{},components:{}},S2e={class:"text-center"};function k2e(e,t,n,r,s,u){const h=wn("layout-header"),l=wn("markdown-section");return fn(),Bn(Dr,null,{default:Ie(()=>[E(h,{title:"Membership",subtitle:"Snapshot counts of library membership by geographic area"}),er("p",S2e,[E(nn,{size:"large",variant:"tonal",color:"info",href:"https://schema.librarydata.uk/membership",target:"_blank"},{default:Ie(()=>[Ot(" Explore the membership data schema ")]),_:1})]),E(yr,{inset:"",color:"info",class:"my-2"}),E(l,{markdownText:s.mdText},null,8,["markdownText"]),E(yr,{inset:"",color:"info",class:"my-2"})]),_:1})}const C2e=Kr(w2e,[["render",k2e]]),T2e={props:["files"],methods:{updateSelection(e){this.$emit("change-files",e)}}};function A2e(e,t,n,r,s,u){return fn(),Bn(Ga,{elevation:"0",color:"grey-lighten-5",class:"pt-4"},{default:Ie(()=>[E(X4,{chips:"","show-size":"",accept:"text/csv",counter:"",variant:"outlined","bg-color":"white",multiple:"",label:"Select a file on your computer","model-value":n.files,"onUpdate:modelValue":t[0]||(t[0]=h=>u.updateSelection(h)),"prepend-icon":"mdi-file-document",hint:"Only files with an extension of .csv will be displayed","persistent-hint":""},null,8,["model-value"])]),_:1})}const Sv=Kr(T2e,[["render",A2e]]),E2e=`This tool displays library membership on a map to help explore areas of low or high membership, alongside other data such as the socioeconomic deprivation of areas.

You need library membership data in the [membership data schema format](https://schema.librarydata.uk/membership). This can be created using the [postcode to statistical area converter](/postcode-to-lsoa).
`,I2e=e=>/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/.test(e);String.prototype.isUrl=I2e;var wi={schemeGroups:{sequential:["BuGn","BuPu","GnBu","OrRd","PuBu","PuBuGn","PuRd","RdPu","YlGn","YlGnBu","YlOrBr","YlOrRd"],singlehue:["Blues","Greens","Greys","Oranges","Purples","Reds"],diverging:["BrBG","PiYG","PRGn","PuOr","RdBu","RdGy","RdYlBu","RdYlGn","Spectral"],qualitative:["Accent","Dark2","Paired","Pastel1","Pastel2","Set1","Set2","Set3"]},YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}};function FI(e,t,n){if(e!==null)for(var r,s,u,h,l,v,_,S=0,C=0,k,D=e.type,O=D==="FeatureCollection",R=D==="Feature",F=O?e.features.length:1,N=0;N<F;N++){_=O?e.features[N].geometry:R?e.geometry:e,k=_?_.type==="GeometryCollection":!1,l=k?_.geometries.length:1;for(var j=0;j<l;j++){var X=0,ee=0;if(h=k?_.geometries[j]:_,h!==null){v=h.coordinates;var le=h.type;switch(S=n&&(le==="Polygon"||le==="MultiPolygon")?1:0,le){case null:break;case"Point":if(t(v,C,N,X,ee)===!1)return!1;C++,X++;break;case"LineString":case"MultiPoint":for(r=0;r<v.length;r++){if(t(v[r],C,N,X,ee)===!1)return!1;C++,le==="MultiPoint"&&X++}le==="LineString"&&X++;break;case"Polygon":case"MultiLineString":for(r=0;r<v.length;r++){for(s=0;s<v[r].length-S;s++){if(t(v[r][s],C,N,X,ee)===!1)return!1;C++}le==="MultiLineString"&&X++,le==="Polygon"&&ee++}le==="Polygon"&&X++;break;case"MultiPolygon":for(r=0;r<v.length;r++){for(ee=0,s=0;s<v[r].length;s++){for(u=0;u<v[r][s].length-S;u++){if(t(v[r][s][u],C,N,X,ee)===!1)return!1;C++}ee++}X++}break;case"GeometryCollection":for(r=0;r<h.geometries.length;r++)if(FI(h.geometries[r],t,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ob(e){var t=[1/0,1/0,-1/0,-1/0];return FI(e,function(n){t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}Ob.default=Ob;const P2e={data(){return{authoritySource:{data:{type:"FeatureCollection",features:[]},show:!1},authorityLayerLine:{type:"line",minzoom:10,paint:{"line-color":"#697B89","line-width":["interpolate",["linear"],["zoom"],10,2,22,8]}},authorityLayerLabel:{type:"symbol",layout:{"text-field":["to-string",["get","utla19nm"]],"text-font":["Open Sans Bold"],"text-allow-overlap":!0,"text-ignore-placement":!0,"symbol-placement":"line","text-max-angle":90,"text-size":{base:1.2,stops:[[10,8],[22,48]]},"text-line-height":1},paint:{"text-color":"#697B89","text-halo-color":"#fafaf8","text-halo-width":2}},center:[-2,52],zoom:7,librariesSource:{tiles:[iSe]},librariesLayerCircle:{filter:["!",["has","Year closed"]],"source-layer":"libraries",paint:{"circle-radius":["interpolate",["linear"],["zoom"],5,2,18,10],"circle-color":"#1b5e20","circle-stroke-width":["interpolate",["linear"],["zoom"],5,1,18,4],"circle-stroke-color":"#ffffff","circle-stroke-opacity":["interpolate",["linear"],["zoom"],5,.8,18,1],"circle-opacity":["interpolate",["linear"],["zoom"],5,.4,18,.9]}},lsoaFiles:[],lsoasSource:{tiles:[rSe],promoteId:{lsoa_boundaries:"code"},show:!1},lsoasLayerFill:{paint:{"fill-color":"rgba(254, 113, 144, 1)","fill-opacity":.5}},lsoasLayerLabel:{minzoom:12,layout:{"text-field":["to-string",["get","code"]],"text-font":["Source Sans Pro SemiBold"],"symbol-placement":"point","text-size":{base:1.2,stops:[[12,14],[22,48]]},"text-line-height":1},paint:{"text-color":"#697B89","text-halo-color":"#fafaf8","text-halo-width":1}},matchColourLsoaPopulation:"rgba(254, 113, 144, 1)",matchColourLsoaDeprivation:"rgba(254, 113, 144, 1)",matchFilter:["in",["get","code"],["literal",[]]],mapDisplay:"populationPercentage",mapStyle:"https://zoomstack.librarydata.uk/light.json",minZoom:5,maxZoom:16,matchFieldLsoaPopulation:["to-string",["get","code"]],matchFieldLsoaDeprivation:["to-string",["get","code"]],mdText:E2e}},methods:{addMembershipData:async function(){let e=this;if(e.lsoaFiles[0].name){const n=await fx(e.lsoaFiles[0],!1);this.setLsoaFields(n.slice(1));const r=await lSe(n[1][0]),s=JSON.parse(r.geojson);this.authoritySource.data=s,this.authoritySource.show=!0;var t=Ob(s);this.$refs.mglMap.map.fitBounds(t,{padding:10})}},setDisplayOptions:function(){this.mapDisplay==="populationPercentage"&&(this.lsoasLayerFill.paint["fill-color"]=this.matchColourLsoaPopulation,this.lsoasLayerLabel.layout["text-field"]=this.matchFieldLsoaPopulation,this.$refs.mglMap.map.setPaintProperty("lsoas_layer_fill","fill-color",this.matchColourLsoaPopulation),this.$refs.mglMap.map.setLayoutProperty("lsoas_layer_label","text-field",this.matchFieldLsoaPopulation)),this.mapDisplay==="imd"&&(this.lsoasLayerFill.paint["fill-color"]=this.matchColourLsoaDeprivation,this.lsoasLayerLabel.layout["text-field"]=this.matchFieldLsoaDeprivation,this.$refs.mglMap.map.setPaintProperty("lsoas_layer_fill","fill-color",this.matchColourLsoaDeprivation),this.$refs.mglMap.map.setLayoutProperty("lsoas_layer_label","text-field",this.matchFieldLsoaDeprivation))},setLsoaFields:function(e){let t=[],n=["match",["get","code"]],r=["match",["get","code"]];e.forEach(l=>{const v=parseInt(l[3].replace("x","2"));this.$refs.mglMap.map.setFeatureState({source:"lsoas",sourceLayer:"lsoa_boundaries",id:l[2]},{members:v}),t.push(l[2]),n.push(l[2]),n.push(["concat",["to-string",["round",["*",["/",v,["to-number",["get","population"]]],100]]],"%"]),r.push(l[2]),r.push(["get","imd"])}),n.push(""),r.push("");let s=["interpolate",["linear"],["round",["*",["/",["to-number",["feature-state","members"]],["to-number",["get","population"]]],100]],0,wi.OrRd[9][0],5,wi.OrRd[9][1],10,wi.OrRd[9][2],15,wi.OrRd[9][3],20,wi.OrRd[9][4],25,wi.OrRd[9][5],30,wi.OrRd[9][6],35,wi.OrRd[9][7],40,wi.OrRd[9][8]],u=["interpolate",["linear"],["to-number",["get","imd"]],1,wi.OrRd[9][8],2,wi.OrRd[9][7],3,wi.OrRd[9][6],4,wi.OrRd[9][5],5,wi.OrRd[9][4],6,wi.OrRd[9][3],7,wi.OrRd[9][2],8,wi.OrRd[9][1],9,wi.OrRd[9][0],10,wi.OrRd[9][0]],h=["in",["get","code"],["literal",t]];this.matchFilter=h,this.$refs.mglMap.map.setFilter("lsoas_layer_fill",h),this.$refs.mglMap.map.setFilter("lsoas_layer_label",h),this.matchFieldLsoaPopulation=n,this.matchFieldLsoaDeprivation=r,this.matchColourLsoaPopulation=s,this.matchColourLsoaDeprivation=u,this.setDisplayOptions()}},components:{"file-upload":Sv}},D2e=er("h2",{class:"text-h5 text-decoration-underline my-3"},"Map library members",-1),M2e=er("strong",null,"Population percentage",-1),L2e=er("strong",null,"Areas of deprivation",-1);function R2e(e,t,n,r,s,u){const h=wn("layout-header"),l=wn("markdown-section"),v=Sv,_=wn("mgl-fullscreen-control"),S=wn("mgl-navigation-control"),C=wn("mgl-scale-control"),k=wn("mgl-circle-layer"),D=wn("mgl-vector-source"),O=wn("mgl-fill-layer"),R=wn("mgl-symbol-layer"),F=wn("mgl-line-layer"),N=wn("mgl-geo-json-source"),j=wn("mgl-map");return fn(),Bn(Dr,null,{default:Ie(()=>[E(h,{title:"Membership map",subtitle:"Insights from library membership data"}),E(yr,{inset:"",color:"info",class:"my-2"}),E(l,{markdownText:s.mdText},null,8,["markdownText"]),E(yr,{inset:"",color:"info",class:"my-2"}),D2e,E(bd,{color:"grey-lighten-5",rounded:"",elevation:"0",class:"px-5 py-5"},{default:Ie(()=>[E(tl,{icon:"mdi-numeric-1-circle",class:"mb-1",title:"Load a file"},{default:Ie(()=>[Ot(" This tool loads CSV files in the format of the membership data schema. ")]),_:1}),E(v,{files:s.lsoaFiles,onChangeFiles:t[0]||(t[0]=X=>s.lsoaFiles=X),onDeleteFile:t[1]||(t[1]=X=>s.lsoaFiles=null)},null,8,["files"]),E(nn,{"append-icon":"mdi-map-marker-plus",color:"info",class:"mt-3",variant:"tonal",size:"large",onClick:u.addMembershipData,disabled:s.lsoaFiles.length==0},{default:Ie(()=>[Ot(" Add to map ")]),_:1},8,["onClick","disabled"]),E(tl,{class:"mt-8 mb-4",icon:"mdi-numeric-2-circle",title:"Map"},{default:Ie(()=>[M2e,Ot(" shades the map to highlight concentration of membership. When zooming in in also displays the membership population percentage. "),L2e,Ot(" shades the map to highlight highly deprived areas. Uses the index of multiple deprivation for each area. 1 represents highly deprived areas, 10 the least deprived. ")]),_:1}),E(mV,{modelValue:s.mapDisplay,"onUpdate:modelValue":t[2]||(t[2]=X=>s.mapDisplay=X),onChange:u.setDisplayOptions,inline:""},{default:Ie(()=>[E(xk,{label:"Display population percentage",value:"populationPercentage"}),E(xk,{label:"Display areas of deprivation",value:"imd"})]),_:1},8,["modelValue","onChange"]),E(Dr,{class:"map"},{default:Ie(()=>[E(j,{ref:"mglMap",center:s.center,zoom:s.zoom,mapStyle:s.mapStyle},{default:Ie(()=>[E(_),E(S),E(C),E(D,{"source-id":"libraries",tiles:s.librariesSource.tiles},{default:Ie(()=>[E(k,{"source-layer":"libraries","layer-id":"libraries_layer_circles",paint:s.librariesLayerCircle.paint},null,8,["paint"])]),_:1},8,["tiles"]),E(D,{"source-id":"lsoas",tiles:s.lsoasSource.tiles,promoteId:s.lsoasSource.promoteId},{default:Ie(()=>[E(O,{"source-layer":"lsoa_boundaries","layer-id":"lsoas_layer_fill",paint:s.lsoasLayerFill.paint,filter:s.matchFilter},null,8,["paint","filter"]),E(R,{"source-layer":"lsoa_boundaries","layer-id":"lsoas_layer_label",paint:s.lsoasLayerLabel.paint,layout:s.lsoasLayerLabel.layout,filter:s.matchFilter,minzoom:s.lsoasLayerLabel.minzoom},null,8,["paint","layout","filter","minzoom"])]),_:1},8,["tiles","promoteId"]),E(N,{"source-id":"authority",data:s.authoritySource.data},{default:Ie(()=>[s.authoritySource.show?(fn(),Bn(F,{key:0,"layer-id":"authority-line",paint:s.authorityLayerLine.paint},null,8,["paint"])):Yn("",!0),s.authoritySource.show?(fn(),Bn(R,{key:1,"layer-id":"authority-label",layout:s.authorityLayerLabel.layout,paint:s.authorityLayerLabel.paint},null,8,["layout","paint"])):Yn("",!0)]),_:1},8,["data"])]),_:1},8,["center","zoom","mapStyle"])]),_:1})]),_:1})]),_:1})}const O2e=Kr(P2e,[["render",R2e]]),z2e=`This tool converts UK postcodes into statistical areas for further analysis. England and Wales store data at the census-based 'lower super output area' geographic level. In Scotland, 'Data Zones' are commonly used, and in Northern Ireland, 'Small Areas'.

Postcodes are kept secure, and never published online.
`;//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var BI;function jt(){return BI.apply(null,arguments)}function F2e(e){BI=e}function Hs(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function tu(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function tr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function px(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(tr(e,t))return!1;return!0}function Da(e){return e===void 0}function ul(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function np(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function VI(e,t){var n=[],r,s=e.length;for(r=0;r<s;++r)n.push(t(e[r],r));return n}function Ql(e,t){for(var n in t)tr(t,n)&&(e[n]=t[n]);return tr(t,"toString")&&(e.toString=t.toString),tr(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Mo(e,t,n,r){return lP(e,t,n,r,!0).utc()}function B2e(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Ln(e){return e._pf==null&&(e._pf=B2e()),e._pf}var zb;Array.prototype.some?zb=Array.prototype.some:zb=function(e){var t=Object(this),n=t.length>>>0,r;for(r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};function mx(e){var t=null,n=!1,r=e._d&&!isNaN(e._d.getTime());if(r&&(t=Ln(e),n=zb.call(t.parsedDateParts,function(s){return s!=null}),r=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n),e._strict&&(r=r&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=r;else return r;return e._isValid}function kv(e){var t=Mo(NaN);return e!=null?Ql(Ln(t),e):Ln(t).userInvalidated=!0,t}var L2=jt.momentProperties=[],L_=!1;function gx(e,t){var n,r,s,u=L2.length;if(Da(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),Da(t._i)||(e._i=t._i),Da(t._f)||(e._f=t._f),Da(t._l)||(e._l=t._l),Da(t._strict)||(e._strict=t._strict),Da(t._tzm)||(e._tzm=t._tzm),Da(t._isUTC)||(e._isUTC=t._isUTC),Da(t._offset)||(e._offset=t._offset),Da(t._pf)||(e._pf=Ln(t)),Da(t._locale)||(e._locale=t._locale),u>0)for(n=0;n<u;n++)r=L2[n],s=t[r],Da(s)||(e[r]=s);return e}function rp(e){gx(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),L_===!1&&(L_=!0,jt.updateOffset(this),L_=!1)}function Gs(e){return e instanceof rp||e!=null&&e._isAMomentObject!=null}function NI(e){jt.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Cs(e,t){var n=!0;return Ql(function(){if(jt.deprecationHandler!=null&&jt.deprecationHandler(null,e),n){var r=[],s,u,h,l=arguments.length;for(u=0;u<l;u++){if(s="",typeof arguments[u]=="object"){s+=`
[`+u+"] ";for(h in arguments[0])tr(arguments[0],h)&&(s+=h+": "+arguments[0][h]+", ");s=s.slice(0,-2)}else s=arguments[u];r.push(s)}NI(e+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),n=!1}return t.apply(this,arguments)},t)}var R2={};function $I(e,t){jt.deprecationHandler!=null&&jt.deprecationHandler(e,t),R2[e]||(NI(t),R2[e]=!0)}jt.suppressDeprecationWarnings=!1;jt.deprecationHandler=null;function Lo(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function V2e(e){var t,n;for(n in e)tr(e,n)&&(t=e[n],Lo(t)?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Fb(e,t){var n=Ql({},e),r;for(r in t)tr(t,r)&&(tu(e[r])&&tu(t[r])?(n[r]={},Ql(n[r],e[r]),Ql(n[r],t[r])):t[r]!=null?n[r]=t[r]:delete n[r]);for(r in e)tr(e,r)&&!tr(t,r)&&tu(e[r])&&(n[r]=Ql({},n[r]));return n}function vx(e){e!=null&&this.set(e)}var Bb;Object.keys?Bb=Object.keys:Bb=function(e){var t,n=[];for(t in e)tr(e,t)&&n.push(t);return n};var N2e={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function $2e(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return Lo(r)?r.call(t,n):r}function xo(e,t,n){var r=""+Math.abs(e),s=t-r.length,u=e>=0;return(u?n?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+r}var yx=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Mm=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,R_={},pd={};function cn(e,t,n,r){var s=r;typeof r=="string"&&(s=function(){return this[r]()}),e&&(pd[e]=s),t&&(pd[t[0]]=function(){return xo(s.apply(this,arguments),t[1],t[2])}),n&&(pd[n]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function U2e(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function q2e(e){var t=e.match(yx),n,r;for(n=0,r=t.length;n<r;n++)pd[t[n]]?t[n]=pd[t[n]]:t[n]=U2e(t[n]);return function(s){var u="",h;for(h=0;h<r;h++)u+=Lo(t[h])?t[h].call(s,e):t[h];return u}}function Zm(e,t){return e.isValid()?(t=UI(t,e.localeData()),R_[t]=R_[t]||q2e(t),R_[t](e)):e.localeData().invalidDate()}function UI(e,t){var n=5;function r(s){return t.longDateFormat(s)||s}for(Mm.lastIndex=0;n>=0&&Mm.test(e);)e=e.replace(Mm,r),Mm.lastIndex=0,n-=1;return e}var j2e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function H2e(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(yx).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[e])}var G2e="Invalid date";function W2e(){return this._invalidDate}var Y2e="%d",Z2e=/\d{1,2}/;function K2e(e){return this._ordinal.replace("%d",e)}var X2e={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function J2e(e,t,n,r){var s=this._relativeTime[n];return Lo(s)?s(e,t,n,r):s.replace(/%d/i,e)}function Q2e(e,t){var n=this._relativeTime[e>0?"future":"past"];return Lo(n)?n(t):n.replace(/%s/i,t)}var O2={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Ts(e){return typeof e=="string"?O2[e]||O2[e.toLowerCase()]:void 0}function _x(e){var t={},n,r;for(r in e)tr(e,r)&&(n=Ts(r),n&&(t[n]=e[r]));return t}var eCe={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function tCe(e){var t=[],n;for(n in e)tr(e,n)&&t.push({unit:n,priority:eCe[n]});return t.sort(function(r,s){return r.priority-s.priority}),t}var qI=/\d/,Qa=/\d\d/,jI=/\d{3}/,bx=/\d{4}/,Cv=/[+-]?\d{6}/,Nr=/\d\d?/,HI=/\d\d\d\d?/,GI=/\d\d\d\d\d\d?/,Tv=/\d{1,3}/,xx=/\d{1,4}/,Av=/[+-]?\d{1,6}/,Bd=/\d+/,Ev=/[+-]?\d+/,nCe=/Z|[+-]\d\d:?\d\d/gi,Iv=/Z|[+-]\d\d(?::?\d\d)?/gi,rCe=/[+-]?\d+(\.\d{1,3})?/,ip=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Vd=/^[1-9]\d?/,wx=/^([1-9]\d|\d)/,Ag;Ag={};function Xt(e,t,n){Ag[e]=Lo(t)?t:function(r,s){return r&&n?n:t}}function iCe(e,t){return tr(Ag,e)?Ag[e](t._strict,t._locale):new RegExp(aCe(e))}function aCe(e){return sl(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,n,r,s,u){return n||r||s||u}))}function sl(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function us(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function $n(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=us(t)),n}var Vb={};function xr(e,t){var n,r=t,s;for(typeof e=="string"&&(e=[e]),ul(t)&&(r=function(u,h){h[t]=$n(u)}),s=e.length,n=0;n<s;n++)Vb[e[n]]=r}function ap(e,t){xr(e,function(n,r,s,u){s._w=s._w||{},t(n,s._w,s,u)})}function sCe(e,t,n){t!=null&&tr(Vb,e)&&Vb[e](t,n._a,n,e)}function Pv(e){return e%4===0&&e%100!==0||e%400===0}var aa=0,nl=1,fo=2,ki=3,Us=4,rl=5,Kc=6,oCe=7,lCe=8;cn("Y",0,0,function(){var e=this.year();return e<=9999?xo(e,4):"+"+e});cn(0,["YY",2],0,function(){return this.year()%100});cn(0,["YYYY",4],0,"year");cn(0,["YYYYY",5],0,"year");cn(0,["YYYYYY",6,!0],0,"year");Xt("Y",Ev);Xt("YY",Nr,Qa);Xt("YYYY",xx,bx);Xt("YYYYY",Av,Cv);Xt("YYYYYY",Av,Cv);xr(["YYYYY","YYYYYY"],aa);xr("YYYY",function(e,t){t[aa]=e.length===2?jt.parseTwoDigitYear(e):$n(e)});xr("YY",function(e,t){t[aa]=jt.parseTwoDigitYear(e)});xr("Y",function(e,t){t[aa]=parseInt(e,10)});function pf(e){return Pv(e)?366:365}jt.parseTwoDigitYear=function(e){return $n(e)+($n(e)>68?1900:2e3)};var WI=Nd("FullYear",!0);function cCe(){return Pv(this.year())}function Nd(e,t){return function(n){return n!=null?(YI(this,e,n),jt.updateOffset(this,t),this):Of(this,e)}}function Of(e,t){if(!e.isValid())return NaN;var n=e._d,r=e._isUTC;switch(t){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function YI(e,t,n){var r,s,u,h,l;if(!(!e.isValid()||isNaN(n))){switch(r=e._d,s=e._isUTC,t){case"Milliseconds":return void(s?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(s?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(s?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(s?r.setUTCHours(n):r.setHours(n));case"Date":return void(s?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}u=n,h=e.month(),l=e.date(),l=l===29&&h===1&&!Pv(u)?28:l,s?r.setUTCFullYear(u,h,l):r.setFullYear(u,h,l)}}function uCe(e){return e=Ts(e),Lo(this[e])?this[e]():this}function dCe(e,t){if(typeof e=="object"){e=_x(e);var n=tCe(e),r,s=n.length;for(r=0;r<s;r++)this[n[r].unit](e[n[r].unit])}else if(e=Ts(e),Lo(this[e]))return this[e](t);return this}function hCe(e,t){return(e%t+t)%t}var di;Array.prototype.indexOf?di=Array.prototype.indexOf:di=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Sx(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=hCe(t,12);return e+=(t-n)/12,n===1?Pv(e)?29:28:31-n%7%2}cn("M",["MM",2],"Mo",function(){return this.month()+1});cn("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});cn("MMMM",0,0,function(e){return this.localeData().months(this,e)});Xt("M",Nr,Vd);Xt("MM",Nr,Qa);Xt("MMM",function(e,t){return t.monthsShortRegex(e)});Xt("MMMM",function(e,t){return t.monthsRegex(e)});xr(["M","MM"],function(e,t){t[nl]=$n(e)-1});xr(["MMM","MMMM"],function(e,t,n,r){var s=n._locale.monthsParse(e,r,n._strict);s!=null?t[nl]=s:Ln(n).invalidMonth=e});var fCe="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ZI="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),KI=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,pCe=ip,mCe=ip;function gCe(e,t){return e?Hs(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||KI).test(t)?"format":"standalone"][e.month()]:Hs(this._months)?this._months:this._months.standalone}function vCe(e,t){return e?Hs(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[KI.test(t)?"format":"standalone"][e.month()]:Hs(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function yCe(e,t,n){var r,s,u,h=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)u=Mo([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(u,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(u,"").toLocaleLowerCase();return n?t==="MMM"?(s=di.call(this._shortMonthsParse,h),s!==-1?s:null):(s=di.call(this._longMonthsParse,h),s!==-1?s:null):t==="MMM"?(s=di.call(this._shortMonthsParse,h),s!==-1?s:(s=di.call(this._longMonthsParse,h),s!==-1?s:null)):(s=di.call(this._longMonthsParse,h),s!==-1?s:(s=di.call(this._shortMonthsParse,h),s!==-1?s:null))}function _Ce(e,t,n){var r,s,u;if(this._monthsParseExact)return yCe.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(s=Mo([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(u="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[r]=new RegExp(u.replace(".",""),"i")),n&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function XI(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=$n(t);else if(t=e.localeData().monthsParse(t),!ul(t))return e}var n=t,r=e.date();return r=r<29?r:Math.min(r,Sx(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,r):e._d.setMonth(n,r),e}function JI(e){return e!=null?(XI(this,e),jt.updateOffset(this,!0),this):Of(this,"Month")}function bCe(){return Sx(this.year(),this.month())}function xCe(e){return this._monthsParseExact?(tr(this,"_monthsRegex")||QI.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(tr(this,"_monthsShortRegex")||(this._monthsShortRegex=pCe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function wCe(e){return this._monthsParseExact?(tr(this,"_monthsRegex")||QI.call(this),e?this._monthsStrictRegex:this._monthsRegex):(tr(this,"_monthsRegex")||(this._monthsRegex=mCe),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function QI(){function e(v,_){return _.length-v.length}var t=[],n=[],r=[],s,u,h,l;for(s=0;s<12;s++)u=Mo([2e3,s]),h=sl(this.monthsShort(u,"")),l=sl(this.months(u,"")),t.push(h),n.push(l),r.push(l),r.push(h);t.sort(e),n.sort(e),r.sort(e),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function SCe(e,t,n,r,s,u,h){var l;return e<100&&e>=0?(l=new Date(e+400,t,n,r,s,u,h),isFinite(l.getFullYear())&&l.setFullYear(e)):l=new Date(e,t,n,r,s,u,h),l}function zf(e){var t,n;return e<100&&e>=0?(n=Array.prototype.slice.call(arguments),n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Eg(e,t,n){var r=7+t-n,s=(7+zf(e,0,r).getUTCDay()-t)%7;return-s+r-1}function eP(e,t,n,r,s){var u=(7+n-r)%7,h=Eg(e,r,s),l=1+7*(t-1)+u+h,v,_;return l<=0?(v=e-1,_=pf(v)+l):l>pf(e)?(v=e+1,_=l-pf(e)):(v=e,_=l),{year:v,dayOfYear:_}}function Ff(e,t,n){var r=Eg(e.year(),t,n),s=Math.floor((e.dayOfYear()-r-1)/7)+1,u,h;return s<1?(h=e.year()-1,u=s+ol(h,t,n)):s>ol(e.year(),t,n)?(u=s-ol(e.year(),t,n),h=e.year()+1):(h=e.year(),u=s),{week:u,year:h}}function ol(e,t,n){var r=Eg(e,t,n),s=Eg(e+1,t,n);return(pf(e)-r+s)/7}cn("w",["ww",2],"wo","week");cn("W",["WW",2],"Wo","isoWeek");Xt("w",Nr,Vd);Xt("ww",Nr,Qa);Xt("W",Nr,Vd);Xt("WW",Nr,Qa);ap(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=$n(e)});function kCe(e){return Ff(e,this._week.dow,this._week.doy).week}var CCe={dow:0,doy:6};function TCe(){return this._week.dow}function ACe(){return this._week.doy}function ECe(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function ICe(e){var t=Ff(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}cn("d",0,"do","day");cn("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});cn("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});cn("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});cn("e",0,0,"weekday");cn("E",0,0,"isoWeekday");Xt("d",Nr);Xt("e",Nr);Xt("E",Nr);Xt("dd",function(e,t){return t.weekdaysMinRegex(e)});Xt("ddd",function(e,t){return t.weekdaysShortRegex(e)});Xt("dddd",function(e,t){return t.weekdaysRegex(e)});ap(["dd","ddd","dddd"],function(e,t,n,r){var s=n._locale.weekdaysParse(e,r,n._strict);s!=null?t.d=s:Ln(n).invalidWeekday=e});ap(["d","e","E"],function(e,t,n,r){t[r]=$n(e)});function PCe(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function DCe(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function kx(e,t){return e.slice(t,7).concat(e.slice(0,t))}var MCe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),tP="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),LCe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),RCe=ip,OCe=ip,zCe=ip;function FCe(e,t){var n=Hs(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?kx(n,this._week.dow):e?n[e.day()]:n}function BCe(e){return e===!0?kx(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function VCe(e){return e===!0?kx(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function NCe(e,t,n){var r,s,u,h=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)u=Mo([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(u,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(u,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(u,"").toLocaleLowerCase();return n?t==="dddd"?(s=di.call(this._weekdaysParse,h),s!==-1?s:null):t==="ddd"?(s=di.call(this._shortWeekdaysParse,h),s!==-1?s:null):(s=di.call(this._minWeekdaysParse,h),s!==-1?s:null):t==="dddd"?(s=di.call(this._weekdaysParse,h),s!==-1||(s=di.call(this._shortWeekdaysParse,h),s!==-1)?s:(s=di.call(this._minWeekdaysParse,h),s!==-1?s:null)):t==="ddd"?(s=di.call(this._shortWeekdaysParse,h),s!==-1||(s=di.call(this._weekdaysParse,h),s!==-1)?s:(s=di.call(this._minWeekdaysParse,h),s!==-1?s:null)):(s=di.call(this._minWeekdaysParse,h),s!==-1||(s=di.call(this._weekdaysParse,h),s!==-1)?s:(s=di.call(this._shortWeekdaysParse,h),s!==-1?s:null))}function $Ce(e,t,n){var r,s,u;if(this._weekdaysParseExact)return NCe.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(s=Mo([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(u="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[r]=new RegExp(u.replace(".",""),"i")),n&&t==="dddd"&&this._fullWeekdaysParse[r].test(e))return r;if(n&&t==="ddd"&&this._shortWeekdaysParse[r].test(e))return r;if(n&&t==="dd"&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function UCe(e){if(!this.isValid())return e!=null?this:NaN;var t=Of(this,"Day");return e!=null?(e=PCe(e,this.localeData()),this.add(e-t,"d")):t}function qCe(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function jCe(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=DCe(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function HCe(e){return this._weekdaysParseExact?(tr(this,"_weekdaysRegex")||Cx.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(tr(this,"_weekdaysRegex")||(this._weekdaysRegex=RCe),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function GCe(e){return this._weekdaysParseExact?(tr(this,"_weekdaysRegex")||Cx.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(tr(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=OCe),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function WCe(e){return this._weekdaysParseExact?(tr(this,"_weekdaysRegex")||Cx.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(tr(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=zCe),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Cx(){function e(S,C){return C.length-S.length}var t=[],n=[],r=[],s=[],u,h,l,v,_;for(u=0;u<7;u++)h=Mo([2e3,1]).day(u),l=sl(this.weekdaysMin(h,"")),v=sl(this.weekdaysShort(h,"")),_=sl(this.weekdays(h,"")),t.push(l),n.push(v),r.push(_),s.push(l),s.push(v),s.push(_);t.sort(e),n.sort(e),r.sort(e),s.sort(e),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Tx(){return this.hours()%12||12}function YCe(){return this.hours()||24}cn("H",["HH",2],0,"hour");cn("h",["hh",2],0,Tx);cn("k",["kk",2],0,YCe);cn("hmm",0,0,function(){return""+Tx.apply(this)+xo(this.minutes(),2)});cn("hmmss",0,0,function(){return""+Tx.apply(this)+xo(this.minutes(),2)+xo(this.seconds(),2)});cn("Hmm",0,0,function(){return""+this.hours()+xo(this.minutes(),2)});cn("Hmmss",0,0,function(){return""+this.hours()+xo(this.minutes(),2)+xo(this.seconds(),2)});function nP(e,t){cn(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}nP("a",!0);nP("A",!1);function rP(e,t){return t._meridiemParse}Xt("a",rP);Xt("A",rP);Xt("H",Nr,wx);Xt("h",Nr,Vd);Xt("k",Nr,Vd);Xt("HH",Nr,Qa);Xt("hh",Nr,Qa);Xt("kk",Nr,Qa);Xt("hmm",HI);Xt("hmmss",GI);Xt("Hmm",HI);Xt("Hmmss",GI);xr(["H","HH"],ki);xr(["k","kk"],function(e,t,n){var r=$n(e);t[ki]=r===24?0:r});xr(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e});xr(["h","hh"],function(e,t,n){t[ki]=$n(e),Ln(n).bigHour=!0});xr("hmm",function(e,t,n){var r=e.length-2;t[ki]=$n(e.substr(0,r)),t[Us]=$n(e.substr(r)),Ln(n).bigHour=!0});xr("hmmss",function(e,t,n){var r=e.length-4,s=e.length-2;t[ki]=$n(e.substr(0,r)),t[Us]=$n(e.substr(r,2)),t[rl]=$n(e.substr(s)),Ln(n).bigHour=!0});xr("Hmm",function(e,t,n){var r=e.length-2;t[ki]=$n(e.substr(0,r)),t[Us]=$n(e.substr(r))});xr("Hmmss",function(e,t,n){var r=e.length-4,s=e.length-2;t[ki]=$n(e.substr(0,r)),t[Us]=$n(e.substr(r,2)),t[rl]=$n(e.substr(s))});function ZCe(e){return(e+"").toLowerCase().charAt(0)==="p"}var KCe=/[ap]\.?m?\.?/i,XCe=Nd("Hours",!0);function JCe(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var iP={calendar:N2e,longDateFormat:j2e,invalidDate:G2e,ordinal:Y2e,dayOfMonthOrdinalParse:Z2e,relativeTime:X2e,months:fCe,monthsShort:ZI,week:CCe,weekdays:MCe,weekdaysMin:LCe,weekdaysShort:tP,meridiemParse:KCe},jr={},Qh={},Bf;function QCe(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function z2(e){return e&&e.toLowerCase().replace("_","-")}function eTe(e){for(var t=0,n,r,s,u;t<e.length;){for(u=z2(e[t]).split("-"),n=u.length,r=z2(e[t+1]),r=r?r.split("-"):null;n>0;){if(s=Dv(u.slice(0,n).join("-")),s)return s;if(r&&r.length>=n&&QCe(u,r)>=n-1)break;n--}t++}return Bf}function tTe(e){return!!(e&&e.match("^[^/\\\\]*$"))}function Dv(e){var t=null,n;if(jr[e]===void 0&&typeof Jm<"u"&&Jm&&Jm.exports&&tTe(e))try{t=Bf._abbr,n=require,n("./locale/"+e),rc(t)}catch{jr[e]=null}return jr[e]}function rc(e,t){var n;return e&&(Da(t)?n=_l(e):n=Ax(e,t),n?Bf=n:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Bf._abbr}function Ax(e,t){if(t!==null){var n,r=iP;if(t.abbr=e,jr[e]!=null)$I("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=jr[e]._config;else if(t.parentLocale!=null)if(jr[t.parentLocale]!=null)r=jr[t.parentLocale]._config;else if(n=Dv(t.parentLocale),n!=null)r=n._config;else return Qh[t.parentLocale]||(Qh[t.parentLocale]=[]),Qh[t.parentLocale].push({name:e,config:t}),null;return jr[e]=new vx(Fb(r,t)),Qh[e]&&Qh[e].forEach(function(s){Ax(s.name,s.config)}),rc(e),jr[e]}else return delete jr[e],null}function nTe(e,t){if(t!=null){var n,r,s=iP;jr[e]!=null&&jr[e].parentLocale!=null?jr[e].set(Fb(jr[e]._config,t)):(r=Dv(e),r!=null&&(s=r._config),t=Fb(s,t),r==null&&(t.abbr=e),n=new vx(t),n.parentLocale=jr[e],jr[e]=n),rc(e)}else jr[e]!=null&&(jr[e].parentLocale!=null?(jr[e]=jr[e].parentLocale,e===rc()&&rc(e)):jr[e]!=null&&delete jr[e]);return jr[e]}function _l(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Bf;if(!Hs(e)){if(t=Dv(e),t)return t;e=[e]}return eTe(e)}function rTe(){return Bb(jr)}function Ex(e){var t,n=e._a;return n&&Ln(e).overflow===-2&&(t=n[nl]<0||n[nl]>11?nl:n[fo]<1||n[fo]>Sx(n[aa],n[nl])?fo:n[ki]<0||n[ki]>24||n[ki]===24&&(n[Us]!==0||n[rl]!==0||n[Kc]!==0)?ki:n[Us]<0||n[Us]>59?Us:n[rl]<0||n[rl]>59?rl:n[Kc]<0||n[Kc]>999?Kc:-1,Ln(e)._overflowDayOfYear&&(t<aa||t>fo)&&(t=fo),Ln(e)._overflowWeeks&&t===-1&&(t=oCe),Ln(e)._overflowWeekday&&t===-1&&(t=lCe),Ln(e).overflow=t),e}var iTe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,aTe=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,sTe=/Z|[+-]\d\d(?::?\d\d)?/,Lm=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],O_=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],oTe=/^\/?Date\((-?\d+)/i,lTe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,cTe={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function aP(e){var t,n,r=e._i,s=iTe.exec(r)||aTe.exec(r),u,h,l,v,_=Lm.length,S=O_.length;if(s){for(Ln(e).iso=!0,t=0,n=_;t<n;t++)if(Lm[t][1].exec(s[1])){h=Lm[t][0],u=Lm[t][2]!==!1;break}if(h==null){e._isValid=!1;return}if(s[3]){for(t=0,n=S;t<n;t++)if(O_[t][1].exec(s[3])){l=(s[2]||" ")+O_[t][0];break}if(l==null){e._isValid=!1;return}}if(!u&&l!=null){e._isValid=!1;return}if(s[4])if(sTe.exec(s[4]))v="Z";else{e._isValid=!1;return}e._f=h+(l||"")+(v||""),Px(e)}else e._isValid=!1}function uTe(e,t,n,r,s,u){var h=[dTe(e),ZI.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(s,10)];return u&&h.push(parseInt(u,10)),h}function dTe(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function hTe(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function fTe(e,t,n){if(e){var r=tP.indexOf(e),s=new Date(t[0],t[1],t[2]).getDay();if(r!==s)return Ln(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function pTe(e,t,n){if(e)return cTe[e];if(t)return 0;var r=parseInt(n,10),s=r%100,u=(r-s)/100;return u*60+s}function sP(e){var t=lTe.exec(hTe(e._i)),n;if(t){if(n=uTe(t[4],t[3],t[2],t[5],t[6],t[7]),!fTe(t[1],n,e))return;e._a=n,e._tzm=pTe(t[8],t[9],t[10]),e._d=zf.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),Ln(e).rfc2822=!0}else e._isValid=!1}function mTe(e){var t=oTe.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(aP(e),e._isValid===!1)delete e._isValid;else return;if(sP(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:jt.createFromInputFallback(e)}jt.createFromInputFallback=Cs("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function ld(e,t,n){return e??t??n}function gTe(e){var t=new Date(jt.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Ix(e){var t,n,r=[],s,u,h;if(!e._d){for(s=gTe(e),e._w&&e._a[fo]==null&&e._a[nl]==null&&vTe(e),e._dayOfYear!=null&&(h=ld(e._a[aa],s[aa]),(e._dayOfYear>pf(h)||e._dayOfYear===0)&&(Ln(e)._overflowDayOfYear=!0),n=zf(h,0,e._dayOfYear),e._a[nl]=n.getUTCMonth(),e._a[fo]=n.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=s[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[ki]===24&&e._a[Us]===0&&e._a[rl]===0&&e._a[Kc]===0&&(e._nextDay=!0,e._a[ki]=0),e._d=(e._useUTC?zf:SCe).apply(null,r),u=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ki]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==u&&(Ln(e).weekdayMismatch=!0)}}function vTe(e){var t,n,r,s,u,h,l,v,_;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(u=1,h=4,n=ld(t.GG,e._a[aa],Ff(Vr(),1,4).year),r=ld(t.W,1),s=ld(t.E,1),(s<1||s>7)&&(v=!0)):(u=e._locale._week.dow,h=e._locale._week.doy,_=Ff(Vr(),u,h),n=ld(t.gg,e._a[aa],_.year),r=ld(t.w,_.week),t.d!=null?(s=t.d,(s<0||s>6)&&(v=!0)):t.e!=null?(s=t.e+u,(t.e<0||t.e>6)&&(v=!0)):s=u),r<1||r>ol(n,u,h)?Ln(e)._overflowWeeks=!0:v!=null?Ln(e)._overflowWeekday=!0:(l=eP(n,r,s,u,h),e._a[aa]=l.year,e._dayOfYear=l.dayOfYear)}jt.ISO_8601=function(){};jt.RFC_2822=function(){};function Px(e){if(e._f===jt.ISO_8601){aP(e);return}if(e._f===jt.RFC_2822){sP(e);return}e._a=[],Ln(e).empty=!0;var t=""+e._i,n,r,s,u,h,l=t.length,v=0,_,S;for(s=UI(e._f,e._locale).match(yx)||[],S=s.length,n=0;n<S;n++)u=s[n],r=(t.match(iCe(u,e))||[])[0],r&&(h=t.substr(0,t.indexOf(r)),h.length>0&&Ln(e).unusedInput.push(h),t=t.slice(t.indexOf(r)+r.length),v+=r.length),pd[u]?(r?Ln(e).empty=!1:Ln(e).unusedTokens.push(u),sCe(u,r,e)):e._strict&&!r&&Ln(e).unusedTokens.push(u);Ln(e).charsLeftOver=l-v,t.length>0&&Ln(e).unusedInput.push(t),e._a[ki]<=12&&Ln(e).bigHour===!0&&e._a[ki]>0&&(Ln(e).bigHour=void 0),Ln(e).parsedDateParts=e._a.slice(0),Ln(e).meridiem=e._meridiem,e._a[ki]=yTe(e._locale,e._a[ki],e._meridiem),_=Ln(e).era,_!==null&&(e._a[aa]=e._locale.erasConvertYear(_,e._a[aa])),Ix(e),Ex(e)}function yTe(e,t,n){var r;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):(e.isPM!=null&&(r=e.isPM(n),r&&t<12&&(t+=12),!r&&t===12&&(t=0)),t)}function _Te(e){var t,n,r,s,u,h,l=!1,v=e._f.length;if(v===0){Ln(e).invalidFormat=!0,e._d=new Date(NaN);return}for(s=0;s<v;s++)u=0,h=!1,t=gx({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[s],Px(t),mx(t)&&(h=!0),u+=Ln(t).charsLeftOver,u+=Ln(t).unusedTokens.length*10,Ln(t).score=u,l?u<r&&(r=u,n=t):(r==null||u<r||h)&&(r=u,n=t,h&&(l=!0));Ql(e,n||t)}function bTe(e){if(!e._d){var t=_x(e._i),n=t.day===void 0?t.date:t.day;e._a=VI([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(r){return r&&parseInt(r,10)}),Ix(e)}}function xTe(e){var t=new rp(Ex(oP(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function oP(e){var t=e._i,n=e._f;return e._locale=e._locale||_l(e._l),t===null||n===void 0&&t===""?kv({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),Gs(t)?new rp(Ex(t)):(np(t)?e._d=t:Hs(n)?_Te(e):n?Px(e):wTe(e),mx(e)||(e._d=null),e))}function wTe(e){var t=e._i;Da(t)?e._d=new Date(jt.now()):np(t)?e._d=new Date(t.valueOf()):typeof t=="string"?mTe(e):Hs(t)?(e._a=VI(t.slice(0),function(n){return parseInt(n,10)}),Ix(e)):tu(t)?bTe(e):ul(t)?e._d=new Date(t):jt.createFromInputFallback(e)}function lP(e,t,n,r,s){var u={};return(t===!0||t===!1)&&(r=t,t=void 0),(n===!0||n===!1)&&(r=n,n=void 0),(tu(e)&&px(e)||Hs(e)&&e.length===0)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=s,u._l=n,u._i=e,u._f=t,u._strict=r,xTe(u)}function Vr(e,t,n,r){return lP(e,t,n,r,!1)}var STe=Cs("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Vr.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:kv()}),kTe=Cs("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Vr.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:kv()});function cP(e,t){var n,r;if(t.length===1&&Hs(t[0])&&(t=t[0]),!t.length)return Vr();for(n=t[0],r=1;r<t.length;++r)(!t[r].isValid()||t[r][e](n))&&(n=t[r]);return n}function CTe(){var e=[].slice.call(arguments,0);return cP("isBefore",e)}function TTe(){var e=[].slice.call(arguments,0);return cP("isAfter",e)}var ATe=function(){return Date.now?Date.now():+new Date},ef=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ETe(e){var t,n=!1,r,s=ef.length;for(t in e)if(tr(e,t)&&!(di.call(ef,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(r=0;r<s;++r)if(e[ef[r]]){if(n)return!1;parseFloat(e[ef[r]])!==$n(e[ef[r]])&&(n=!0)}return!0}function ITe(){return this._isValid}function PTe(){return Ks(NaN)}function Mv(e){var t=_x(e),n=t.year||0,r=t.quarter||0,s=t.month||0,u=t.week||t.isoWeek||0,h=t.day||0,l=t.hour||0,v=t.minute||0,_=t.second||0,S=t.millisecond||0;this._isValid=ETe(t),this._milliseconds=+S+_*1e3+v*6e4+l*1e3*60*60,this._days=+h+u*7,this._months=+s+r*3+n*12,this._data={},this._locale=_l(),this._bubble()}function Km(e){return e instanceof Mv}function Nb(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function DTe(e,t,n){var r=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),u=0,h;for(h=0;h<r;h++)(n&&e[h]!==t[h]||!n&&$n(e[h])!==$n(t[h]))&&u++;return u+s}function uP(e,t){cn(e,0,0,function(){var n=this.utcOffset(),r="+";return n<0&&(n=-n,r="-"),r+xo(~~(n/60),2)+t+xo(~~n%60,2)})}uP("Z",":");uP("ZZ","");Xt("Z",Iv);Xt("ZZ",Iv);xr(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Dx(Iv,e)});var MTe=/([\+\-]|\d\d)/gi;function Dx(e,t){var n=(t||"").match(e),r,s,u;return n===null?null:(r=n[n.length-1]||[],s=(r+"").match(MTe)||["-",0,0],u=+(s[1]*60)+$n(s[2]),u===0?0:s[0]==="+"?u:-u)}function Mx(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(Gs(e)||np(e)?e.valueOf():Vr(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),jt.updateOffset(n,!1),n):Vr(e).local()}function $b(e){return-Math.round(e._d.getTimezoneOffset())}jt.updateOffset=function(){};function LTe(e,t,n){var r=this._offset||0,s;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Dx(Iv,e),e===null)return this}else Math.abs(e)<16&&!n&&(e=e*60);return!this._isUTC&&t&&(s=$b(this)),this._offset=e,this._isUTC=!0,s!=null&&this.add(s,"m"),r!==e&&(!t||this._changeInProgress?fP(this,Ks(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,jt.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:$b(this)}function RTe(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function OTe(e){return this.utcOffset(0,e)}function zTe(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract($b(this),"m")),this}function FTe(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Dx(nCe,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function BTe(e){return this.isValid()?(e=e?Vr(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function VTe(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function NTe(){if(!Da(this._isDSTShifted))return this._isDSTShifted;var e={},t;return gx(e,this),e=oP(e),e._a?(t=e._isUTC?Mo(e._a):Vr(e._a),this._isDSTShifted=this.isValid()&&DTe(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function $Te(){return this.isValid()?!this._isUTC:!1}function UTe(){return this.isValid()?this._isUTC:!1}function dP(){return this.isValid()?this._isUTC&&this._offset===0:!1}var qTe=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,jTe=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ks(e,t){var n=e,r=null,s,u,h;return Km(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:ul(e)||!isNaN(+e)?(n={},t?n[t]=+e:n.milliseconds=+e):(r=qTe.exec(e))?(s=r[1]==="-"?-1:1,n={y:0,d:$n(r[fo])*s,h:$n(r[ki])*s,m:$n(r[Us])*s,s:$n(r[rl])*s,ms:$n(Nb(r[Kc]*1e3))*s}):(r=jTe.exec(e))?(s=r[1]==="-"?-1:1,n={y:Nc(r[2],s),M:Nc(r[3],s),w:Nc(r[4],s),d:Nc(r[5],s),h:Nc(r[6],s),m:Nc(r[7],s),s:Nc(r[8],s)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(h=HTe(Vr(n.from),Vr(n.to)),n={},n.ms=h.milliseconds,n.M=h.months),u=new Mv(n),Km(e)&&tr(e,"_locale")&&(u._locale=e._locale),Km(e)&&tr(e,"_isValid")&&(u._isValid=e._isValid),u}Ks.fn=Mv.prototype;Ks.invalid=PTe;function Nc(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function F2(e,t){var n={};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function HTe(e,t){var n;return e.isValid()&&t.isValid()?(t=Mx(t,e),e.isBefore(t)?n=F2(e,t):(n=F2(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function hP(e,t){return function(n,r){var s,u;return r!==null&&!isNaN(+r)&&($I(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),u=n,n=r,r=u),s=Ks(n,r),fP(this,s,e),this}}function fP(e,t,n,r){var s=t._milliseconds,u=Nb(t._days),h=Nb(t._months);e.isValid()&&(r=r??!0,h&&XI(e,Of(e,"Month")+h*n),u&&YI(e,"Date",Of(e,"Date")+u*n),s&&e._d.setTime(e._d.valueOf()+s*n),r&&jt.updateOffset(e,u||h))}var GTe=hP(1,"add"),WTe=hP(-1,"subtract");function pP(e){return typeof e=="string"||e instanceof String}function YTe(e){return Gs(e)||np(e)||pP(e)||ul(e)||KTe(e)||ZTe(e)||e===null||e===void 0}function ZTe(e){var t=tu(e)&&!px(e),n=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,u,h=r.length;for(s=0;s<h;s+=1)u=r[s],n=n||tr(e,u);return t&&n}function KTe(e){var t=Hs(e),n=!1;return t&&(n=e.filter(function(r){return!ul(r)&&pP(e)}).length===0),t&&n}function XTe(e){var t=tu(e)&&!px(e),n=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,u;for(s=0;s<r.length;s+=1)u=r[s],n=n||tr(e,u);return t&&n}function JTe(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function QTe(e,t){arguments.length===1&&(arguments[0]?YTe(arguments[0])?(e=arguments[0],t=void 0):XTe(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Vr(),r=Mx(n,this).startOf("day"),s=jt.calendarFormat(this,r)||"sameElse",u=t&&(Lo(t[s])?t[s].call(this,n):t[s]);return this.format(u||this.localeData().calendar(s,this,Vr(n)))}function eAe(){return new rp(this)}function tAe(e,t){var n=Gs(e)?e:Vr(e);return this.isValid()&&n.isValid()?(t=Ts(t)||"millisecond",t==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf()):!1}function nAe(e,t){var n=Gs(e)?e:Vr(e);return this.isValid()&&n.isValid()?(t=Ts(t)||"millisecond",t==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf()):!1}function rAe(e,t,n,r){var s=Gs(e)?e:Vr(e),u=Gs(t)?t:Vr(t);return this.isValid()&&s.isValid()&&u.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(s,n):!this.isBefore(s,n))&&(r[1]===")"?this.isBefore(u,n):!this.isAfter(u,n))):!1}function iAe(e,t){var n=Gs(e)?e:Vr(e),r;return this.isValid()&&n.isValid()?(t=Ts(t)||"millisecond",t==="millisecond"?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf())):!1}function aAe(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function sAe(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function oAe(e,t,n){var r,s,u;if(!this.isValid())return NaN;if(r=Mx(e,this),!r.isValid())return NaN;switch(s=(r.utcOffset()-this.utcOffset())*6e4,t=Ts(t),t){case"year":u=Xm(this,r)/12;break;case"month":u=Xm(this,r);break;case"quarter":u=Xm(this,r)/3;break;case"second":u=(this-r)/1e3;break;case"minute":u=(this-r)/6e4;break;case"hour":u=(this-r)/36e5;break;case"day":u=(this-r-s)/864e5;break;case"week":u=(this-r-s)/6048e5;break;default:u=this-r}return n?u:us(u)}function Xm(e,t){if(e.date()<t.date())return-Xm(t,e);var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),s,u;return t-r<0?(s=e.clone().add(n-1,"months"),u=(t-r)/(r-s)):(s=e.clone().add(n+1,"months"),u=(t-r)/(s-r)),-(n+u)||0}jt.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";jt.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function lAe(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function cAe(e){if(!this.isValid())return null;var t=e!==!0,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?Zm(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Lo(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Zm(n,"Z")):Zm(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function uAe(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",n,r,s,u;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",u=t+'[")]',this.format(n+r+s+u)}function dAe(e){e||(e=this.isUtc()?jt.defaultFormatUtc:jt.defaultFormat);var t=Zm(this,e);return this.localeData().postformat(t)}function hAe(e,t){return this.isValid()&&(Gs(e)&&e.isValid()||Vr(e).isValid())?Ks({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function fAe(e){return this.from(Vr(),e)}function pAe(e,t){return this.isValid()&&(Gs(e)&&e.isValid()||Vr(e).isValid())?Ks({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function mAe(e){return this.to(Vr(),e)}function mP(e){var t;return e===void 0?this._locale._abbr:(t=_l(e),t!=null&&(this._locale=t),this)}var gP=Cs("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function vP(){return this._locale}var Ig=1e3,md=60*Ig,Pg=60*md,yP=(365*400+97)*24*Pg;function gd(e,t){return(e%t+t)%t}function _P(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-yP:new Date(e,t,n).valueOf()}function bP(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-yP:Date.UTC(e,t,n)}function gAe(e){var t,n;if(e=Ts(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?bP:_P,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=gd(t+(this._isUTC?0:this.utcOffset()*md),Pg);break;case"minute":t=this._d.valueOf(),t-=gd(t,md);break;case"second":t=this._d.valueOf(),t-=gd(t,Ig);break}return this._d.setTime(t),jt.updateOffset(this,!0),this}function vAe(e){var t,n;if(e=Ts(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?bP:_P,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Pg-gd(t+(this._isUTC?0:this.utcOffset()*md),Pg)-1;break;case"minute":t=this._d.valueOf(),t+=md-gd(t,md)-1;break;case"second":t=this._d.valueOf(),t+=Ig-gd(t,Ig)-1;break}return this._d.setTime(t),jt.updateOffset(this,!0),this}function yAe(){return this._d.valueOf()-(this._offset||0)*6e4}function _Ae(){return Math.floor(this.valueOf()/1e3)}function bAe(){return new Date(this.valueOf())}function xAe(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function wAe(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function SAe(){return this.isValid()?this.toISOString():null}function kAe(){return mx(this)}function CAe(){return Ql({},Ln(this))}function TAe(){return Ln(this).overflow}function AAe(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}cn("N",0,0,"eraAbbr");cn("NN",0,0,"eraAbbr");cn("NNN",0,0,"eraAbbr");cn("NNNN",0,0,"eraName");cn("NNNNN",0,0,"eraNarrow");cn("y",["y",1],"yo","eraYear");cn("y",["yy",2],0,"eraYear");cn("y",["yyy",3],0,"eraYear");cn("y",["yyyy",4],0,"eraYear");Xt("N",Lx);Xt("NN",Lx);Xt("NNN",Lx);Xt("NNNN",BAe);Xt("NNNNN",VAe);xr(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,r){var s=n._locale.erasParse(e,r,n._strict);s?Ln(n).era=s:Ln(n).invalidEra=e});Xt("y",Bd);Xt("yy",Bd);Xt("yyy",Bd);Xt("yyyy",Bd);Xt("yo",NAe);xr(["y","yy","yyy","yyyy"],aa);xr(["yo"],function(e,t,n,r){var s;n._locale._eraYearOrdinalRegex&&(s=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[aa]=n._locale.eraYearOrdinalParse(e,s):t[aa]=parseInt(e,10)});function EAe(e,t){var n,r,s,u=this._eras||_l("en")._eras;for(n=0,r=u.length;n<r;++n){switch(typeof u[n].since){case"string":s=jt(u[n].since).startOf("day"),u[n].since=s.valueOf();break}switch(typeof u[n].until){case"undefined":u[n].until=1/0;break;case"string":s=jt(u[n].until).startOf("day").valueOf(),u[n].until=s.valueOf();break}}return u}function IAe(e,t,n){var r,s,u=this.eras(),h,l,v;for(e=e.toUpperCase(),r=0,s=u.length;r<s;++r)if(h=u[r].name.toUpperCase(),l=u[r].abbr.toUpperCase(),v=u[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(l===e)return u[r];break;case"NNNN":if(h===e)return u[r];break;case"NNNNN":if(v===e)return u[r];break}else if([h,l,v].indexOf(e)>=0)return u[r]}function PAe(e,t){var n=e.since<=e.until?1:-1;return t===void 0?jt(e.since).year():jt(e.since).year()+(t-e.offset)*n}function DAe(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].name;return""}function MAe(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].narrow;return""}function LAe(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].abbr;return""}function RAe(){var e,t,n,r,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(n=s[e].since<=s[e].until?1:-1,r=this.clone().startOf("day").valueOf(),s[e].since<=r&&r<=s[e].until||s[e].until<=r&&r<=s[e].since)return(this.year()-jt(s[e].since).year())*n+s[e].offset;return this.year()}function OAe(e){return tr(this,"_erasNameRegex")||Rx.call(this),e?this._erasNameRegex:this._erasRegex}function zAe(e){return tr(this,"_erasAbbrRegex")||Rx.call(this),e?this._erasAbbrRegex:this._erasRegex}function FAe(e){return tr(this,"_erasNarrowRegex")||Rx.call(this),e?this._erasNarrowRegex:this._erasRegex}function Lx(e,t){return t.erasAbbrRegex(e)}function BAe(e,t){return t.erasNameRegex(e)}function VAe(e,t){return t.erasNarrowRegex(e)}function NAe(e,t){return t._eraYearOrdinalRegex||Bd}function Rx(){var e=[],t=[],n=[],r=[],s,u,h,l,v,_=this.eras();for(s=0,u=_.length;s<u;++s)h=sl(_[s].name),l=sl(_[s].abbr),v=sl(_[s].narrow),t.push(h),e.push(l),n.push(v),r.push(h),r.push(l),r.push(v);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}cn(0,["gg",2],0,function(){return this.weekYear()%100});cn(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Lv(e,t){cn(0,[e,e.length],0,t)}Lv("gggg","weekYear");Lv("ggggg","weekYear");Lv("GGGG","isoWeekYear");Lv("GGGGG","isoWeekYear");Xt("G",Ev);Xt("g",Ev);Xt("GG",Nr,Qa);Xt("gg",Nr,Qa);Xt("GGGG",xx,bx);Xt("gggg",xx,bx);Xt("GGGGG",Av,Cv);Xt("ggggg",Av,Cv);ap(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=$n(e)});ap(["gg","GG"],function(e,t,n,r){t[r]=jt.parseTwoDigitYear(e)});function $Ae(e){return xP.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function UAe(e){return xP.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function qAe(){return ol(this.year(),1,4)}function jAe(){return ol(this.isoWeekYear(),1,4)}function HAe(){var e=this.localeData()._week;return ol(this.year(),e.dow,e.doy)}function GAe(){var e=this.localeData()._week;return ol(this.weekYear(),e.dow,e.doy)}function xP(e,t,n,r,s){var u;return e==null?Ff(this,r,s).year:(u=ol(e,r,s),t>u&&(t=u),WAe.call(this,e,t,n,r,s))}function WAe(e,t,n,r,s){var u=eP(e,t,n,r,s),h=zf(u.year,0,u.dayOfYear);return this.year(h.getUTCFullYear()),this.month(h.getUTCMonth()),this.date(h.getUTCDate()),this}cn("Q",0,"Qo","quarter");Xt("Q",qI);xr("Q",function(e,t){t[nl]=($n(e)-1)*3});function YAe(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}cn("D",["DD",2],"Do","date");Xt("D",Nr,Vd);Xt("DD",Nr,Qa);Xt("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});xr(["D","DD"],fo);xr("Do",function(e,t){t[fo]=$n(e.match(Nr)[0])});var wP=Nd("Date",!0);cn("DDD",["DDDD",3],"DDDo","dayOfYear");Xt("DDD",Tv);Xt("DDDD",jI);xr(["DDD","DDDD"],function(e,t,n){n._dayOfYear=$n(e)});function ZAe(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}cn("m",["mm",2],0,"minute");Xt("m",Nr,wx);Xt("mm",Nr,Qa);xr(["m","mm"],Us);var KAe=Nd("Minutes",!1);cn("s",["ss",2],0,"second");Xt("s",Nr,wx);Xt("ss",Nr,Qa);xr(["s","ss"],rl);var XAe=Nd("Seconds",!1);cn("S",0,0,function(){return~~(this.millisecond()/100)});cn(0,["SS",2],0,function(){return~~(this.millisecond()/10)});cn(0,["SSS",3],0,"millisecond");cn(0,["SSSS",4],0,function(){return this.millisecond()*10});cn(0,["SSSSS",5],0,function(){return this.millisecond()*100});cn(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});cn(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});cn(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});cn(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Xt("S",Tv,qI);Xt("SS",Tv,Qa);Xt("SSS",Tv,jI);var ec,SP;for(ec="SSSS";ec.length<=9;ec+="S")Xt(ec,Bd);function JAe(e,t){t[Kc]=$n(("0."+e)*1e3)}for(ec="S";ec.length<=9;ec+="S")xr(ec,JAe);SP=Nd("Milliseconds",!1);cn("z",0,0,"zoneAbbr");cn("zz",0,0,"zoneName");function QAe(){return this._isUTC?"UTC":""}function eEe(){return this._isUTC?"Coordinated Universal Time":""}var Mt=rp.prototype;Mt.add=GTe;Mt.calendar=QTe;Mt.clone=eAe;Mt.diff=oAe;Mt.endOf=vAe;Mt.format=dAe;Mt.from=hAe;Mt.fromNow=fAe;Mt.to=pAe;Mt.toNow=mAe;Mt.get=uCe;Mt.invalidAt=TAe;Mt.isAfter=tAe;Mt.isBefore=nAe;Mt.isBetween=rAe;Mt.isSame=iAe;Mt.isSameOrAfter=aAe;Mt.isSameOrBefore=sAe;Mt.isValid=kAe;Mt.lang=gP;Mt.locale=mP;Mt.localeData=vP;Mt.max=kTe;Mt.min=STe;Mt.parsingFlags=CAe;Mt.set=dCe;Mt.startOf=gAe;Mt.subtract=WTe;Mt.toArray=xAe;Mt.toObject=wAe;Mt.toDate=bAe;Mt.toISOString=cAe;Mt.inspect=uAe;typeof Symbol<"u"&&Symbol.for!=null&&(Mt[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});Mt.toJSON=SAe;Mt.toString=lAe;Mt.unix=_Ae;Mt.valueOf=yAe;Mt.creationData=AAe;Mt.eraName=DAe;Mt.eraNarrow=MAe;Mt.eraAbbr=LAe;Mt.eraYear=RAe;Mt.year=WI;Mt.isLeapYear=cCe;Mt.weekYear=$Ae;Mt.isoWeekYear=UAe;Mt.quarter=Mt.quarters=YAe;Mt.month=JI;Mt.daysInMonth=bCe;Mt.week=Mt.weeks=ECe;Mt.isoWeek=Mt.isoWeeks=ICe;Mt.weeksInYear=HAe;Mt.weeksInWeekYear=GAe;Mt.isoWeeksInYear=qAe;Mt.isoWeeksInISOWeekYear=jAe;Mt.date=wP;Mt.day=Mt.days=UCe;Mt.weekday=qCe;Mt.isoWeekday=jCe;Mt.dayOfYear=ZAe;Mt.hour=Mt.hours=XCe;Mt.minute=Mt.minutes=KAe;Mt.second=Mt.seconds=XAe;Mt.millisecond=Mt.milliseconds=SP;Mt.utcOffset=LTe;Mt.utc=OTe;Mt.local=zTe;Mt.parseZone=FTe;Mt.hasAlignedHourOffset=BTe;Mt.isDST=VTe;Mt.isLocal=$Te;Mt.isUtcOffset=UTe;Mt.isUtc=dP;Mt.isUTC=dP;Mt.zoneAbbr=QAe;Mt.zoneName=eEe;Mt.dates=Cs("dates accessor is deprecated. Use date instead.",wP);Mt.months=Cs("months accessor is deprecated. Use month instead",JI);Mt.years=Cs("years accessor is deprecated. Use year instead",WI);Mt.zone=Cs("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",RTe);Mt.isDSTShifted=Cs("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",NTe);function tEe(e){return Vr(e*1e3)}function nEe(){return Vr.apply(null,arguments).parseZone()}function kP(e){return e}var nr=vx.prototype;nr.calendar=$2e;nr.longDateFormat=H2e;nr.invalidDate=W2e;nr.ordinal=K2e;nr.preparse=kP;nr.postformat=kP;nr.relativeTime=J2e;nr.pastFuture=Q2e;nr.set=V2e;nr.eras=EAe;nr.erasParse=IAe;nr.erasConvertYear=PAe;nr.erasAbbrRegex=zAe;nr.erasNameRegex=OAe;nr.erasNarrowRegex=FAe;nr.months=gCe;nr.monthsShort=vCe;nr.monthsParse=_Ce;nr.monthsRegex=wCe;nr.monthsShortRegex=xCe;nr.week=kCe;nr.firstDayOfYear=ACe;nr.firstDayOfWeek=TCe;nr.weekdays=FCe;nr.weekdaysMin=VCe;nr.weekdaysShort=BCe;nr.weekdaysParse=$Ce;nr.weekdaysRegex=HCe;nr.weekdaysShortRegex=GCe;nr.weekdaysMinRegex=WCe;nr.isPM=ZCe;nr.meridiem=JCe;function Dg(e,t,n,r){var s=_l(),u=Mo().set(r,t);return s[n](u,e)}function CP(e,t,n){if(ul(e)&&(t=e,e=void 0),e=e||"",t!=null)return Dg(e,t,n,"month");var r,s=[];for(r=0;r<12;r++)s[r]=Dg(e,r,n,"month");return s}function Ox(e,t,n,r){typeof e=="boolean"?(ul(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,ul(t)&&(n=t,t=void 0),t=t||"");var s=_l(),u=e?s._week.dow:0,h,l=[];if(n!=null)return Dg(t,(n+u)%7,r,"day");for(h=0;h<7;h++)l[h]=Dg(t,(h+u)%7,r,"day");return l}function rEe(e,t){return CP(e,t,"months")}function iEe(e,t){return CP(e,t,"monthsShort")}function aEe(e,t,n){return Ox(e,t,n,"weekdays")}function sEe(e,t,n){return Ox(e,t,n,"weekdaysShort")}function oEe(e,t,n){return Ox(e,t,n,"weekdaysMin")}rc("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=$n(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});jt.lang=Cs("moment.lang is deprecated. Use moment.locale instead.",rc);jt.langData=Cs("moment.langData is deprecated. Use moment.localeData instead.",_l);var Xo=Math.abs;function lEe(){var e=this._data;return this._milliseconds=Xo(this._milliseconds),this._days=Xo(this._days),this._months=Xo(this._months),e.milliseconds=Xo(e.milliseconds),e.seconds=Xo(e.seconds),e.minutes=Xo(e.minutes),e.hours=Xo(e.hours),e.months=Xo(e.months),e.years=Xo(e.years),this}function TP(e,t,n,r){var s=Ks(t,n);return e._milliseconds+=r*s._milliseconds,e._days+=r*s._days,e._months+=r*s._months,e._bubble()}function cEe(e,t){return TP(this,e,t,1)}function uEe(e,t){return TP(this,e,t,-1)}function B2(e){return e<0?Math.floor(e):Math.ceil(e)}function dEe(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,s,u,h,l,v;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=B2(Ub(n)+t)*864e5,t=0,n=0),r.milliseconds=e%1e3,s=us(e/1e3),r.seconds=s%60,u=us(s/60),r.minutes=u%60,h=us(u/60),r.hours=h%24,t+=us(h/24),v=us(AP(t)),n+=v,t-=B2(Ub(v)),l=us(n/12),n%=12,r.days=t,r.months=n,r.years=l,this}function AP(e){return e*4800/146097}function Ub(e){return e*146097/4800}function hEe(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if(e=Ts(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+r/864e5,n=this._months+AP(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Ub(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}function bl(e){return function(){return this.as(e)}}var EP=bl("ms"),fEe=bl("s"),pEe=bl("m"),mEe=bl("h"),gEe=bl("d"),vEe=bl("w"),yEe=bl("M"),_Ee=bl("Q"),bEe=bl("y"),xEe=EP;function wEe(){return Ks(this)}function SEe(e){return e=Ts(e),this.isValid()?this[e+"s"]():NaN}function uu(e){return function(){return this.isValid()?this._data[e]:NaN}}var kEe=uu("milliseconds"),CEe=uu("seconds"),TEe=uu("minutes"),AEe=uu("hours"),EEe=uu("days"),IEe=uu("months"),PEe=uu("years");function DEe(){return us(this.days()/7)}var Qo=Math.round,cd={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function MEe(e,t,n,r,s){return s.relativeTime(t||1,!!n,e,r)}function LEe(e,t,n,r){var s=Ks(e).abs(),u=Qo(s.as("s")),h=Qo(s.as("m")),l=Qo(s.as("h")),v=Qo(s.as("d")),_=Qo(s.as("M")),S=Qo(s.as("w")),C=Qo(s.as("y")),k=u<=n.ss&&["s",u]||u<n.s&&["ss",u]||h<=1&&["m"]||h<n.m&&["mm",h]||l<=1&&["h"]||l<n.h&&["hh",l]||v<=1&&["d"]||v<n.d&&["dd",v];return n.w!=null&&(k=k||S<=1&&["w"]||S<n.w&&["ww",S]),k=k||_<=1&&["M"]||_<n.M&&["MM",_]||C<=1&&["y"]||["yy",C],k[2]=t,k[3]=+e>0,k[4]=r,MEe.apply(null,k)}function REe(e){return e===void 0?Qo:typeof e=="function"?(Qo=e,!0):!1}function OEe(e,t){return cd[e]===void 0?!1:t===void 0?cd[e]:(cd[e]=t,e==="s"&&(cd.ss=t-1),!0)}function zEe(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,r=cd,s,u;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(n=e),typeof t=="object"&&(r=Object.assign({},cd,t),t.s!=null&&t.ss==null&&(r.ss=t.s-1)),s=this.localeData(),u=LEe(this,!n,r,s),n&&(u=s.pastFuture(+this,u)),s.postformat(u)}var z_=Math.abs;function rd(e){return(e>0)-(e<0)||+e}function Rv(){if(!this.isValid())return this.localeData().invalidDate();var e=z_(this._milliseconds)/1e3,t=z_(this._days),n=z_(this._months),r,s,u,h,l=this.asSeconds(),v,_,S,C;return l?(r=us(e/60),s=us(r/60),e%=60,r%=60,u=us(n/12),n%=12,h=e?e.toFixed(3).replace(/\.?0+$/,""):"",v=l<0?"-":"",_=rd(this._months)!==rd(l)?"-":"",S=rd(this._days)!==rd(l)?"-":"",C=rd(this._milliseconds)!==rd(l)?"-":"",v+"P"+(u?_+u+"Y":"")+(n?_+n+"M":"")+(t?S+t+"D":"")+(s||r||e?"T":"")+(s?C+s+"H":"")+(r?C+r+"M":"")+(e?C+h+"S":"")):"P0D"}var Zn=Mv.prototype;Zn.isValid=ITe;Zn.abs=lEe;Zn.add=cEe;Zn.subtract=uEe;Zn.as=hEe;Zn.asMilliseconds=EP;Zn.asSeconds=fEe;Zn.asMinutes=pEe;Zn.asHours=mEe;Zn.asDays=gEe;Zn.asWeeks=vEe;Zn.asMonths=yEe;Zn.asQuarters=_Ee;Zn.asYears=bEe;Zn.valueOf=xEe;Zn._bubble=dEe;Zn.clone=wEe;Zn.get=SEe;Zn.milliseconds=kEe;Zn.seconds=CEe;Zn.minutes=TEe;Zn.hours=AEe;Zn.days=EEe;Zn.weeks=DEe;Zn.months=IEe;Zn.years=PEe;Zn.humanize=zEe;Zn.toISOString=Rv;Zn.toString=Rv;Zn.toJSON=Rv;Zn.locale=mP;Zn.localeData=vP;Zn.toIsoString=Cs("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Rv);Zn.lang=gP;cn("X",0,0,"unix");cn("x",0,0,"valueOf");Xt("x",Ev);Xt("X",rCe);xr("X",function(e,t,n){n._d=new Date(parseFloat(e)*1e3)});xr("x",function(e,t,n){n._d=new Date($n(e))});//! moment.js
jt.version="2.30.1";F2e(Vr);jt.fn=Mt;jt.min=CTe;jt.max=TTe;jt.now=ATe;jt.utc=Mo;jt.unix=tEe;jt.months=rEe;jt.isDate=np;jt.locale=rc;jt.invalid=kv;jt.duration=Ks;jt.isMoment=Gs;jt.weekdays=aEe;jt.parseZone=nEe;jt.localeData=_l;jt.isDuration=Km;jt.monthsShort=iEe;jt.weekdaysMin=oEe;jt.defineLocale=Ax;jt.updateLocale=nTe;jt.locales=rTe;jt.weekdaysShort=sEe;jt.normalizeUnits=Ts;jt.relativeTimeRounding=REe;jt.relativeTimeThreshold=OEe;jt.calendarFormat=JTe;jt.prototype=Mt;jt.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};var IP={exports:{}};(function(e,t){(function(n,r){r()})(jc,function(){function n(_,S){return typeof S>"u"?S={autoBom:!1}:typeof S!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),S={autoBom:!S}),S.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_.type)?new Blob(["\uFEFF",_],{type:_.type}):_}function r(_,S,C){var k=new XMLHttpRequest;k.open("GET",_),k.responseType="blob",k.onload=function(){v(k.response,S,C)},k.onerror=function(){console.error("could not download file")},k.send()}function s(_){var S=new XMLHttpRequest;S.open("HEAD",_,!1);try{S.send()}catch{}return 200<=S.status&&299>=S.status}function u(_){try{_.dispatchEvent(new MouseEvent("click"))}catch{var S=document.createEvent("MouseEvents");S.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),_.dispatchEvent(S)}}var h=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof jc=="object"&&jc.global===jc?jc:void 0,l=h.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),v=h.saveAs||(typeof window!="object"||window!==h?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(_,S,C){var k=h.URL||h.webkitURL,D=document.createElement("a");S=S||_.name||"download",D.download=S,D.rel="noopener",typeof _=="string"?(D.href=_,D.origin===location.origin?u(D):s(D.href)?r(_,S,C):u(D,D.target="_blank")):(D.href=k.createObjectURL(_),setTimeout(function(){k.revokeObjectURL(D.href)},4e4),setTimeout(function(){u(D)},0))}:"msSaveOrOpenBlob"in navigator?function(_,S,C){if(S=S||_.name||"download",typeof _!="string")navigator.msSaveOrOpenBlob(n(_,C),S);else if(s(_))r(_,S,C);else{var k=document.createElement("a");k.href=_,k.target="_blank",setTimeout(function(){u(k)})}}:function(_,S,C,k){if(k=k||open("","_blank"),k&&(k.document.title=k.document.body.innerText="downloading..."),typeof _=="string")return r(_,S,C);var D=_.type==="application/octet-stream",O=/constructor/i.test(h.HTMLElement)||h.safari,R=/CriOS\/[\d]+/.test(navigator.userAgent);if((R||D&&O||l)&&typeof FileReader<"u"){var F=new FileReader;F.onloadend=function(){var X=F.result;X=R?X:X.replace(/^data:[^;]*;/,"data:attachment/file;"),k?k.location.href=X:location=X,k=null},F.readAsDataURL(_)}else{var N=h.URL||h.webkitURL,j=N.createObjectURL(_);k?k.location=j:location.href=j,k=null,setTimeout(function(){N.revokeObjectURL(j)},4e4)}});h.saveAs=v.saveAs=v,e.exports=v})})(IP);var FEe=IP.exports;function BEe(e){return[...new Set(e.map(n=>VEe(n)).filter(n=>n!=null))]}function VEe(e){const t=/[a-zA-Z]+\d\d?[a-zA-Z]?\s*\d+/;if(e){const n=e.match(t);if(n&&n.length>0)return n[0].substring(0,6)}return null}function NEe(e,t){Br.post(nSe+"lsoas?filter=sector",e).then(n=>{t(n.data)})}function $Ee(e,t){const n=BEe(e),r={};NEe(n,s=>{Object.keys(s).forEach(u=>{s[u].forEach(h=>{r[h.replace(/\s/g,"")]=u.trim()})}),t(r)})}const UEe={data(){return{authority:null,columns:[],countsColumn:"",csvData:[],endTime:null,extractDate:null,files:[],loading:!1,lsoasCounted:{},mdText:z2e,postcodeColumn:"",startTime:null,summaryColumns:[{key:"total",title:"Total"},{key:"converted",title:"Successful"},{key:"terminated",title:"Terminated"},{key:"unknown",title:"Unknown"}],summaryData:[{total:0,converted:0,terminated:0,unknown:0}]}},methods:{confirmFile:async function(e){this.files=e;const t=this;if(t.loading=!0,t.files.length>0){const n=await fx(t.files[0],!1);t.columns=n[0],t.csvData=n,t.loading=!1}},confirmOptions:function(){const e=this;e.startTime=jt(),e.loading=!0,e.summaryData[0].total=0,e.summaryData[0].converted=0,e.summaryData[0].unknown=0,e.summaryData[0].terminated=0,e.lsoasCounted={Unknown:0};const t=e.columns.indexOf(e.postcodeColumn),n=e.columns.indexOf(this.countsColumn),r=e.csvData.map(s=>s[t]).filter(s=>s!=null&&s!==e.postcodeColumn);$Ee(r,s=>{e.csvData.forEach((u,h)=>{const l=u[t],v=l.replace(/\s/g,"");if(h===0&&l===e.postcodeColumn)u[t]="LSOA";else{this.summaryData[0].total++;let _="";l&&l!==""&&s[v]?(_=s[v],_==="Terminated"?(u[t]="Terminated",this.summaryData[0].terminated++):_==="Unknown"?(u[t]="Unknown",this.summaryData[0].unknown++):(u[t]=_,this.summaryData[0].converted++)):(u[t]="Unknown",this.summaryData[0].unknown++,_="Unknown"),_==="Terminated"&&(_="Unknown"),this.lsoasCounted[_]||(this.lsoasCounted[_]=0),this.countsColumn!==""?this.lsoasCounted[_]=this.lsoasCounted[_]+parseInt(u[n]):this.lsoasCounted[_]++}}),e.active_step=3,this.loading=!1,this.endTime=jt()})},downloadConvertedFile:function(){this.downloadFile("converted.csv",this.csvData)},downloadSchemaFile:async function(){const e=[["Local authority","Count date","Area code","Members"]],t=jt(this.extractDate).format("YYYY-MM-DD");Object.keys(this.lsoasCounted).filter(r=>r!=="Unknown"&&r!=="Terminated").forEach(r=>{const s=this.lsoasCounted[r];e.push([this.authority.name,t,r,s>4?s.toString():"x"])});const n=this.lsoasCounted.Unknown;this.lsoasCounted.Unknown>0&&e.push([this.authority.name,t,"Unknown",n>4?n.toString():"x"]),this.downloadFile("membership.csv",e)},downloadFile:function(e,t){const n=new Blob([Tg.unparse(t)],{type:"text/plain;charset=utf-8"});FEe.saveAs(n,e)},getTimeCompleted:function(){return this.startTime&&this.endTime?Math.round(jt.duration(this.endTime.diff(this.startTime))):""}},components:{"file-upload":Sv,"service-select":wv}},qEe=er("h2",{class:"text-h5 text-decoration-underline my-3"},"Convert postcodes",-1),jEe=er("strong",null,"Save as",-1),HEe=er("strong",null,"Terminated",-1),GEe=er("strong",null,"Unknown",-1),WEe=er("br",null,null,-1),YEe={key:0},ZEe={class:"mb-2"},KEe=er("a",{href:"https://schema.librarydata.uk/membership",target:"_blank"},"library membership data",-1),XEe={key:1};function JEe(e,t,n,r,s,u){const h=wn("layout-header"),l=wn("markdown-section"),v=Sv,_=wv;return fn(),Bn(Dr,null,{default:Ie(()=>[E(h,{title:"Postcode to area",subtitle:"Convert postcode locations to statistical areas"}),E(yr,{inset:"",color:"info",class:"my-2"}),E(l,{markdownText:s.mdText},null,8,["markdownText"]),E(yr,{inset:"",color:"info",class:"my-2"}),qEe,E(bd,{color:"grey-lighten-5",rounded:"",elevation:"0",class:"px-5 py-5"},{default:Ie(()=>[E(tl,{icon:"mdi-numeric-1-circle",class:"mb-1",title:"Load a file"},{default:Ie(()=>[Ot(" This tool loads CSV files. If your data isn't in CSV format try "),jEe,Ot(" in your software. The first row should be column headings and one column should contain UK postcodes ")]),_:1}),E(v,{files:s.files,onChangeFiles:t[0]||(t[0]=S=>u.confirmFile(S))},null,8,["files"]),E(tl,{class:"mt-8 mb-4",icon:"mdi-numeric-2-circle",title:"Select file options"},{default:Ie(()=>[Ot(" The field headings in your file are displayed below. Choose which column contains the postcodes. If your data includes counts per postcode, also select the field holding the count")]),_:1}),E(Pf,{color:"success",modelValue:s.postcodeColumn,"onUpdate:modelValue":t[1]||(t[1]=S=>s.postcodeColumn=S),items:s.columns,label:"Select postcode field",variant:"outlined",disabled:s.columns.length===0},null,8,["modelValue","items","disabled"]),E(Pf,{color:"success",value:s.countsColumn,items:s.columns.filter(S=>S!==s.postcodeColumn),disabled:s.postcodeColumn===""||s.columns.filter(S=>S!==s.postcodeColumn).length===0,label:"Count field (optional)",variant:"outlined"},null,8,["value","items","disabled"]),E(nn,{color:"info",variant:"tonal",size:"large",onClick:u.confirmOptions,disabled:s.postcodeColumn==="","append-icon":"mdi-chevron-triple-right"},{default:Ie(()=>[Ot(" Convert ")]),_:1},8,["onClick","disabled"]),E(tl,{class:"mt-8 mb-4",icon:"mdi-numeric-3-circle",title:"Results"},{default:Ie(()=>[Ot(" Valid postcodes are changed to their statistical area code. Postcodes that are no longer valid are changed to "),HEe,Ot(". Postcodes not recognised are changed to "),GEe,Ot("."),WEe]),_:1}),s.endTime!==null?(fn(),ds("span",YEe,[er("p",ZEe,qs("Completed in "+u.getTimeCompleted()+" seconds"),1),E(Ga,{color:"grey-lighten-2",variant:"outlined",elevation:"0",class:"mb-2"},{default:Ie(()=>[E(bE,{"no-filter":"",headers:s.summaryColumns,items:s.summaryData,"item-key":"total"},{bottom:Ie(()=>[]),_:1},8,["headers","items"])]),_:1}),E(nn,{color:"info",variant:"tonal",size:"large",onClick:u.downloadConvertedFile,"append-icon":"mdi-content-save"},{default:Ie(()=>[Ot(" Save converted file ")]),_:1},8,["onClick"])])):Yn("",!0),E(tl,{class:"mt-8 mb-4",icon:"mdi-numeric-4-circle",title:"Library membership data"},{default:Ie(()=>[Ot(" Census geographies are required to publish "),KEe,Ot(". This tool has calculated a count of members per statistical area. Select the name of your library service and choose a date the postcodes were extracted from your library management system ")]),_:1}),s.endTime!==null?(fn(),ds("span",XEe,[E(_,{onSelect:t[2]||(t[2]=S=>s.authority=S)}),E(Di,{class:"mt-4",variant:"outlined",modelValue:s.extractDate,"onUpdate:modelValue":t[3]||(t[3]=S=>s.extractDate=S),label:"Count date","prepend-inner-icon":"mdi-calendar",type:"date"},null,8,["modelValue"]),E(nn,{variant:"tonal",color:"success",onClick:u.downloadSchemaFile,size:"large","append-icon":"mdi-content-save",disabled:s.authority===""||s.extractDate===null},{default:Ie(()=>[Ot("Save membership data")]),_:1},8,["onClick","disabled"])])):Yn("",!0)]),_:1}),E(sd,{modelValue:s.loading,"onUpdate:modelValue":t[4]||(t[4]=S=>s.loading=S),persistent:"",width:"300"},{default:Ie(()=>[E(Ga,null,{default:Ie(()=>[E(Yc,null,{default:Ie(()=>[Ot(" Please wait ")]),_:1}),E(mo,null,{default:Ie(()=>[E(A0,{indeterminate:"",color:"info"})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const QEe=Kr(UEe,[["render",JEe]]),eIe=`A mobile library stop is a location visited by a mobile library vehicle during it's round.

The mobile libraries dataset is a **register**. This means that the data needs to be permanently maintained and up to date.
`,tIe={data(){return{mdText:eIe}},methods:{},components:{}},nIe={class:"text-center"};function rIe(e,t,n,r,s,u){const h=wn("layout-header"),l=wn("markdown-section");return fn(),Bn(Dr,null,{default:Ie(()=>[E(h,{title:"Mobile library stops",subtitle:"Locations of mobile library stops, and their frequency"}),er("p",nIe,[E(nn,{size:"large",variant:"tonal",color:"info",href:"https://schema.librarydata.uk/mobile-library-stops",target:"_blank"},{default:Ie(()=>[Ot(" Explore the mobile stops data schema ")]),_:1})]),E(yr,{inset:"",color:"info",class:"my-2"}),E(l,{markdownText:s.mdText},null,8,["markdownText"]),E(yr,{inset:"",color:"info",class:"my-2"})]),_:1})}const iIe=Kr(tIe,[["render",rIe]]),aIe=`A physical visit is an individual entering the library premises - for whatever reason. For co-located premises, this may mean counting visits that are not specifically for the purpose of using the library. Visit counts are often referred to as footfall.

The physical visits dataset is a **time-series**. Data is maintained by adding new data (e.g. the next months visit counts).
`,sIe={data(){return{mdText:aIe}},methods:{},components:{}},oIe={class:"text-center"};function lIe(e,t,n,r,s,u){const h=wn("layout-header"),l=wn("markdown-section");return fn(),Bn(Dr,null,{default:Ie(()=>[E(h,{title:"Physical visits",subtitle:"Counts of people using libraries"}),er("p",oIe,[E(nn,{size:"large",variant:"tonal",color:"info",href:"https://schema.librarydata.uk/physical-visits",target:"_blank"},{default:Ie(()=>[Ot(" Explore the visits data schema ")]),_:1})]),E(yr,{inset:"",color:"info",class:"my-2"}),E(l,{markdownText:s.mdText},null,8,["markdownText"]),E(yr,{inset:"",color:"info",class:"my-2"})]),_:1})}const cIe=Kr(sIe,[["render",lIe]]),uIe=`These pages were created by Dave at [Libraries Hacked](https://www.librarieshacked.org). You can [contact me via email](mailto:info@librarieshacked.org) with any queries.

## GitHub pages

This site is hosted using [GitHub pages](https://pages.github.com/). Although this site does not directly record any user data, it is important to be aware that website hosting providers can store web traffic data that could include data such as your IP address.

GitHub has its own [privacy statement](https://help.github.com/en/github/site-policy/github-privacy-statement). The majority of this is in reference to logged-in services within GitHub, but there is a reference to GitHub pages sites in this policy. In addition to advising that GitHub pages sites should have their own privacy policy (this one), it informs us that logs of visitor IP addresses can be used for security purposes. This does not include user tracking or marketing. A quote of this is displayed below, but a maintained version will be on the GitHub site.

> Please note that GitHub may collect Technical Information from visitors to your GitHub Pages website, including logs of visitor IP addresses, to maintain the security and integrity of the website and service.

## Cookies

Cookies are files saved on your phone, tablet or computer when you visit a website.

This site does not save any cookies onto your computer.

## Tracking and analytics

There are no marketing or analytics trackers set on this website. We do not store your personal data or usage data.
`,dIe={data(){return{mdText:uIe}},methods:{},components:{}};function hIe(e,t,n,r,s,u){const h=wn("layout-header"),l=wn("markdown-section");return fn(),Bn(Dr,null,{default:Ie(()=>[E(h,{title:"Privacy policy",subtitle:"How your data and privacy is protected"}),E(l,{markdownText:s.mdText},null,8,["markdownText"])]),_:1})}const fIe=Kr(dIe,[["render",hIe]]),pIe=`While logged in you will be able to see the level of access you have, which will either be for individual library services, or 'Admin' which provides access to all library data.

No personal data is held about you. Your email address is not stored online, only the domain part of the email (e.g. bl.uk for British Library users) in order to grant access.
`,mIe={data(){return{mdText:pIe}},methods:{logout(){this.$store.dispatch("logout")}},components:{}};function gIe(e,t,n,r,s,u){const h=wn("layout-header"),l=wn("markdown-section"),v=tp;return fn(),Bn(Dr,null,{default:Ie(()=>[E(h,{title:"Profile",subtitle:"See access and profile information"}),E(l,{markdownText:s.mdText},null,8,["markdownText"]),er("section",null,[E(Dr,null,{default:Ie(()=>[E(v,{actions:!0})]),_:1})])]),_:1})}const vIe=Kr(mIe,[["render",gIe]]),yIe=`An item of stock is any item held by the library that is available to the public, and catalogued in the library management system. This dataset provides counts of the different types of items held by libraries.

The stock summary dataset is a **snapshot**. This means that each update to the data is a fresh export, representing the stock held (or on loan) at that point in time.
`,_Ie={data(){return{mdText:yIe}},methods:{},components:{}},bIe={class:"text-center"};function xIe(e,t,n,r,s,u){const h=wn("layout-header"),l=wn("markdown-section");return fn(),Bn(Dr,null,{default:Ie(()=>[E(h,{title:"Stock summary",subtitle:"Snapshot counts of library stock by item type"}),er("p",bIe,[E(nn,{size:"large",variant:"tonal",color:"info",href:"https://schema.librarydata.uk/stock-summary",target:"_blank"},{default:Ie(()=>[Ot(" Explore the stock summary data schema ")]),_:1})]),E(yr,{inset:"",color:"info",class:"my-2"}),E(l,{markdownText:s.mdText},null,8,["markdownText"]),E(yr,{inset:"",color:"info",class:"my-2"})]),_:1})}const wIe=Kr(_Ie,[["render",xIe]]),SIe=kke({history:QSe(),base:"/",routes:[{path:"/",name:"Home",component:jke},{path:"/about",name:"About",component:Pke},{path:"/events",name:"Events",component:Vke},{path:"/libraries",name:"Libraries",component:Zke},{path:"/libraries-edit",name:"Libraries edit",component:u2e},{path:"/loans",name:"Loans",component:m2e},{path:"/membership",name:"Membership",component:C2e},{path:"/postcode-to-lsoa",name:"Membership postcode to LSOA",component:QEe},{path:"/membership-map",name:"Membership map",component:O2e},{path:"/mobile-library-stops",name:"Mobile library stops",component:iIe},{path:"/physical-visits",name:"Physical visits",component:cIe},{path:"/stock-summary",name:"Stock summary",component:wIe},{path:"/privacy",name:"Privacy",component:fIe},{path:"/accessibility",name:"Accessibility",component:Rke},{path:"/login",name:"Login",component:b2e},{path:"/profile",name:"Profile",component:vIe}]});/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var kIe="store";function $d(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function CIe(e){return e!==null&&typeof e=="object"}function TIe(e){return e&&typeof e.then=="function"}function AIe(e,t){return function(){return e(t)}}function PP(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var r=t.indexOf(e);r>-1&&t.splice(r,1)}}function DP(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;Ov(e,n,[],e._modules.root,!0),zx(e,n,t)}function zx(e,t,n){var r=e._state,s=e._scope;e.getters={},e._makeLocalGettersCache=Object.create(null);var u=e._wrappedGetters,h={},l={},v=zg(!0);v.run(function(){$d(u,function(_,S){h[S]=AIe(_,e),l[S]=Q(function(){return h[S]()}),Object.defineProperty(e.getters,S,{get:function(){return l[S].value},enumerable:!0})})}),e._state=Si({data:t}),e._scope=v,e.strict&&MIe(e),r&&n&&e._withCommit(function(){r.data=null}),s&&s.stop()}function Ov(e,t,n,r,s){var u=!n.length,h=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[h],e._modulesNamespaceMap[h]=r),!u&&!s){var l=Fx(t,n.slice(0,-1)),v=n[n.length-1];e._withCommit(function(){l[v]=r.state})}var _=r.context=EIe(e,h,n);r.forEachMutation(function(S,C){var k=h+C;IIe(e,k,S,_)}),r.forEachAction(function(S,C){var k=S.root?C:h+C,D=S.handler||S;PIe(e,k,D,_)}),r.forEachGetter(function(S,C){var k=h+C;DIe(e,k,S,_)}),r.forEachChild(function(S,C){Ov(e,t,n.concat(C),S,s)})}function EIe(e,t,n){var r=t==="",s={dispatch:r?e.dispatch:function(u,h,l){var v=Mg(u,h,l),_=v.payload,S=v.options,C=v.type;return(!S||!S.root)&&(C=t+C),e.dispatch(C,_)},commit:r?e.commit:function(u,h,l){var v=Mg(u,h,l),_=v.payload,S=v.options,C=v.type;(!S||!S.root)&&(C=t+C),e.commit(C,_,S)}};return Object.defineProperties(s,{getters:{get:r?function(){return e.getters}:function(){return MP(e,t)}},state:{get:function(){return Fx(e.state,n)}}}),s}function MP(e,t){if(!e._makeLocalGettersCache[t]){var n={},r=t.length;Object.keys(e.getters).forEach(function(s){if(s.slice(0,r)===t){var u=s.slice(r);Object.defineProperty(n,u,{get:function(){return e.getters[s]},enumerable:!0})}}),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function IIe(e,t,n,r){var s=e._mutations[t]||(e._mutations[t]=[]);s.push(function(h){n.call(e,r.state,h)})}function PIe(e,t,n,r){var s=e._actions[t]||(e._actions[t]=[]);s.push(function(h){var l=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},h);return TIe(l)||(l=Promise.resolve(l)),e._devtoolHook?l.catch(function(v){throw e._devtoolHook.emit("vuex:error",v),v}):l})}function DIe(e,t,n,r){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(u){return n(r.state,r.getters,u.state,u.getters)})}function MIe(e){ut(function(){return e._state.data},function(){},{deep:!0,flush:"sync"})}function Fx(e,t){return t.reduce(function(n,r){return n[r]},e)}function Mg(e,t,n){return CIe(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var LIe="vuex bindings",V2="vuex:mutations",F_="vuex:actions",id="vuex",RIe=0;function OIe(e,t){xSe({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[LIe]},function(n){n.addTimelineLayer({id:V2,label:"Vuex Mutations",color:N2}),n.addTimelineLayer({id:F_,label:"Vuex Actions",color:N2}),n.addInspector({id,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===e&&r.inspectorId===id)if(r.filter){var s=[];zP(s,t._modules.root,r.filter,""),r.rootNodes=s}else r.rootNodes=[OP(t._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===e&&r.inspectorId===id){var s=r.nodeId;MP(t,s),r.state=BIe(NIe(t._modules,s),s==="root"?t.getters:t._makeLocalGettersCache,s)}}),n.on.editInspectorState(function(r){if(r.app===e&&r.inspectorId===id){var s=r.nodeId,u=r.path;s!=="root"&&(u=s.split("/").filter(Boolean).concat(u)),t._withCommit(function(){r.set(t._state.data,u,r.state.value)})}}),t.subscribe(function(r,s){var u={};r.payload&&(u.payload=r.payload),u.state=s,n.notifyComponentUpdate(),n.sendInspectorTree(id),n.sendInspectorState(id),n.addTimelineEvent({layerId:V2,event:{time:Date.now(),title:r.type,data:u}})}),t.subscribeAction({before:function(r,s){var u={};r.payload&&(u.payload=r.payload),r._id=RIe++,r._time=Date.now(),u.state=s,n.addTimelineEvent({layerId:F_,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:u}})},after:function(r,s){var u={},h=Date.now()-r._time;u.duration={_custom:{type:"duration",display:h+"ms",tooltip:"Action duration",value:h}},r.payload&&(u.payload=r.payload),u.state=s,n.addTimelineEvent({layerId:F_,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:u}})}})})}var N2=8702998,zIe=6710886,FIe=16777215,LP={label:"namespaced",textColor:FIe,backgroundColor:zIe};function RP(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function OP(e,t){return{id:t||"root",label:RP(t),tags:e.namespaced?[LP]:[],children:Object.keys(e._children).map(function(n){return OP(e._children[n],t+n+"/")})}}function zP(e,t,n,r){r.includes(n)&&e.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:t.namespaced?[LP]:[]}),Object.keys(t._children).forEach(function(s){zP(e,t._children[s],n,r+s+"/")})}function BIe(e,t,n){t=n==="root"?t:t[n];var r=Object.keys(t),s={state:Object.keys(e.state).map(function(h){return{key:h,editable:!0,value:e.state[h]}})};if(r.length){var u=VIe(t);s.getters=Object.keys(u).map(function(h){return{key:h.endsWith("/")?RP(h):h,editable:!1,value:qb(function(){return u[h]})}})}return s}function VIe(e){var t={};return Object.keys(e).forEach(function(n){var r=n.split("/");if(r.length>1){var s=t,u=r.pop();r.forEach(function(h){s[h]||(s[h]={_custom:{value:{},display:h,tooltip:"Module",abstract:!0}}),s=s[h]._custom.value}),s[u]=qb(function(){return e[n]})}else t[n]=qb(function(){return e[n]})}),t}function NIe(e,t){var n=t.split("/").filter(function(r){return r});return n.reduce(function(r,s,u){var h=r[s];if(!h)throw new Error('Missing module "'+s+'" for path "'+t+'".');return u===n.length-1?h:h._children},t==="root"?e:e.root._children)}function qb(e){try{return e()}catch(t){return t}}var Xs=function(t,n){this.runtime=n,this._children=Object.create(null),this._rawModule=t;var r=t.state;this.state=(typeof r=="function"?r():r)||{}},FP={namespaced:{configurable:!0}};FP.namespaced.get=function(){return!!this._rawModule.namespaced};Xs.prototype.addChild=function(t,n){this._children[t]=n};Xs.prototype.removeChild=function(t){delete this._children[t]};Xs.prototype.getChild=function(t){return this._children[t]};Xs.prototype.hasChild=function(t){return t in this._children};Xs.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};Xs.prototype.forEachChild=function(t){$d(this._children,t)};Xs.prototype.forEachGetter=function(t){this._rawModule.getters&&$d(this._rawModule.getters,t)};Xs.prototype.forEachAction=function(t){this._rawModule.actions&&$d(this._rawModule.actions,t)};Xs.prototype.forEachMutation=function(t){this._rawModule.mutations&&$d(this._rawModule.mutations,t)};Object.defineProperties(Xs.prototype,FP);var du=function(t){this.register([],t,!1)};du.prototype.get=function(t){return t.reduce(function(n,r){return n.getChild(r)},this.root)};du.prototype.getNamespace=function(t){var n=this.root;return t.reduce(function(r,s){return n=n.getChild(s),r+(n.namespaced?s+"/":"")},"")};du.prototype.update=function(t){BP([],this.root,t)};du.prototype.register=function(t,n,r){var s=this;r===void 0&&(r=!0);var u=new Xs(n,r);if(t.length===0)this.root=u;else{var h=this.get(t.slice(0,-1));h.addChild(t[t.length-1],u)}n.modules&&$d(n.modules,function(l,v){s.register(t.concat(v),l,r)})};du.prototype.unregister=function(t){var n=this.get(t.slice(0,-1)),r=t[t.length-1],s=n.getChild(r);s&&s.runtime&&n.removeChild(r)};du.prototype.isRegistered=function(t){var n=this.get(t.slice(0,-1)),r=t[t.length-1];return n?n.hasChild(r):!1};function BP(e,t,n){if(t.update(n),n.modules)for(var r in n.modules){if(!t.getChild(r))return;BP(e.concat(r),t.getChild(r),n.modules[r])}}function $Ie(e){return new Va(e)}var Va=function(t){var n=this;t===void 0&&(t={});var r=t.plugins;r===void 0&&(r=[]);var s=t.strict;s===void 0&&(s=!1);var u=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new du(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=u;var h=this,l=this,v=l.dispatch,_=l.commit;this.dispatch=function(k,D){return v.call(h,k,D)},this.commit=function(k,D,O){return _.call(h,k,D,O)},this.strict=s;var S=this._modules.root.state;Ov(this,S,[],this._modules.root),zx(this,S),r.forEach(function(C){return C(n)})},Bx={state:{configurable:!0}};Va.prototype.install=function(t,n){t.provide(n||kIe,this),t.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&OIe(t,this)};Bx.state.get=function(){return this._state.data};Bx.state.set=function(e){};Va.prototype.commit=function(t,n,r){var s=this,u=Mg(t,n,r),h=u.type,l=u.payload,v={type:h,payload:l},_=this._mutations[h];_&&(this._withCommit(function(){_.forEach(function(C){C(l)})}),this._subscribers.slice().forEach(function(S){return S(v,s.state)}))};Va.prototype.dispatch=function(t,n){var r=this,s=Mg(t,n),u=s.type,h=s.payload,l={type:u,payload:h},v=this._actions[u];if(v){try{this._actionSubscribers.slice().filter(function(S){return S.before}).forEach(function(S){return S.before(l,r.state)})}catch{}var _=v.length>1?Promise.all(v.map(function(S){return S(h)})):v[0](h);return new Promise(function(S,C){_.then(function(k){try{r._actionSubscribers.filter(function(D){return D.after}).forEach(function(D){return D.after(l,r.state)})}catch{}S(k)},function(k){try{r._actionSubscribers.filter(function(D){return D.error}).forEach(function(D){return D.error(l,r.state,k)})}catch{}C(k)})})}};Va.prototype.subscribe=function(t,n){return PP(t,this._subscribers,n)};Va.prototype.subscribeAction=function(t,n){var r=typeof t=="function"?{before:t}:t;return PP(r,this._actionSubscribers,n)};Va.prototype.watch=function(t,n,r){var s=this;return ut(function(){return t(s.state,s.getters)},n,Object.assign({},r))};Va.prototype.replaceState=function(t){var n=this;this._withCommit(function(){n._state.data=t})};Va.prototype.registerModule=function(t,n,r){r===void 0&&(r={}),typeof t=="string"&&(t=[t]),this._modules.register(t,n),Ov(this,this.state,t,this._modules.get(t),r.preserveState),zx(this,this.state)};Va.prototype.unregisterModule=function(t){var n=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var r=Fx(n.state,t.slice(0,-1));delete r[t[t.length-1]]}),DP(this)};Va.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)};Va.prototype.hotUpdate=function(t){this._modules.update(t),DP(this,!0)};Va.prototype._withCommit=function(t){var n=this._committing;this._committing=!0,t(),this._committing=n};Object.defineProperties(Va.prototype,Bx);new TextEncoder;const VP=new TextDecoder,UIe=e=>{const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n},qIe=e=>{let t=e;t instanceof Uint8Array&&(t=VP.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return UIe(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class jIe extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(t){var n;super(t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(n=Error.captureStackTrace)==null||n.call(Error,this,this.constructor)}}class $c extends jIe{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}function HIe(e){return typeof e=="object"&&e!==null}function GIe(e){if(!HIe(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}const WIe=qIe;function $2(e){if(typeof e!="string")throw new $c("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:n}=e.split(".");if(n===5)throw new $c("Only JWTs using Compact JWS serialization can be decoded");if(n!==3)throw new $c("Invalid JWT");if(!t)throw new $c("JWTs must contain a payload");let r;try{r=WIe(t)}catch{throw new $c("Failed to base64url decode the payload")}let s;try{s=JSON.parse(VP.decode(r))}catch{throw new $c("Failed to parse the decoded payload as JSON")}if(!GIe(s))throw new $c("Invalid JWT Claims Set");return s}const YIe=$Ie({state:{loginKey:null,loginSubject:null,loginIssuer:null,loginExpires:null,loginAdmin:!1,loginCodes:[],libraryServices:[]},mutations:{initialiseStore(e){if(localStorage.getItem("loginKey")){e.loginKey=localStorage.getItem("loginKey");const t=$2(e.loginKey);e.loginSubject=t.sub,e.loginIssuer=t.iss,e.loginExpires=new Date(t.exp*1e3),e.loginAdmin=t.admin,e.loginCodes=t.codes}},setLoginKey(e,t){localStorage.setItem("loginKey",t),e.loginKey=t;const n=$2(e.loginKey);e.loginSubject=n.sub,e.loginIssuer=n.iss,e.loginExpires=new Date(n.exp*1e3),e.loginAdmin=n.admin,e.loginCodes=n.codes},logout(e){localStorage.removeItem("loginKey"),e.loginKey=null,e.loginSubject=null,e.loginIssuer=null,e.loginExpires=null,e.loginAdmin=null,e.loginCodes=[]},setServices(e,t){e.libraryServices=t}},actions:{logout({commit:e}){e("logout")}}}),ZIe={};function KIe(e,t){return fn(),Bn(Q4,{app:"",color:"grey-lighten-5"},{default:Ie(()=>[E(Bs,{justify:"center",class:"text-xs-center w-100","no-gutters":""},{default:Ie(()=>[E(nn,{variant:"tonal",color:"info",to:"/accessibility"},{default:Ie(()=>[Ot(" Accessibility ")]),_:1}),Ot("  "),E(nn,{variant:"tonal",color:"info",to:"/privacy"},{default:Ie(()=>[Ot(" Privacy ")]),_:1})]),_:1})]),_:1})}const XIe=Kr(ZIe,[["render",KIe]]),JIe="/assets/logo.png",QIe={name:"App",components:{"layout-footer":XIe},methods:{async logout(){await this.$store.dispatch("logout"),this.$router.push("/")}},data:()=>({drawer:null})},ePe=er("img",{class:"mr-3",src:JIe,height:"40"},null,-1);function tPe(e,t,n,r,s,u){const h=tp,l=wn("router-view"),v=wn("layout-footer");return fn(),Bn(i5,null,{default:Ie(()=>[E(d5,{elevation:"0",flat:"",color:"grey-lighten-5"},{default:Ie(()=>[E(f5,{class:"hidden-lg-and-up",onClick:t[0]||(t[0]=_=>e.drawer=!e.drawer)}),E(Dr,null,{default:Ie(()=>[ePe,E(co)]),_:1})]),_:1}),E(hV,{border:"",modelValue:e.drawer,"onUpdate:modelValue":t[1]||(t[1]=_=>e.drawer=_),elevation:"0"},{append:Ie(()=>[E(Ga,null,{default:Ie(()=>[E(mo,null,{default:Ie(()=>[E(h,{actions:!0})]),_:1})]),_:1})]),default:Ie(()=>[E(If,{nav:""},{default:Ie(()=>[E(kr,{color:"info",to:"/","active-class":"highlighted",class:_a(e.$route.path==="/"?"highlighted":""),"prepend-icon":"mdi-home-circle"},{default:Ie(()=>[E(ja,null,{default:Ie(()=>[Ot("Home")]),_:1})]),_:1},8,["class"]),E(kr,{color:"info",to:"/about","active-class":"highlighted",class:_a(e.$route.path==="/about"?"highlighted":""),"prepend-icon":"mdi-information"},{default:Ie(()=>[E(ja,null,{default:Ie(()=>[Ot("About")]),_:1})]),_:1},8,["class"]),E(yr),E(Ns,{value:"Events","no-action":"","prepend-icon":"mdi-calendar-star"},{activator:Ie(({props:_})=>[E(kr,wt(_,{title:"Events"}),null,16)]),default:Ie(()=>[E(kr,{color:"success",to:"/events","active-class":"highlighted",class:_a(e.$route.path==="/events"?"highlighted":"")},{default:Ie(()=>[E(ja,null,{default:Ie(()=>[Ot("Events dataset")]),_:1})]),_:1},8,["class"])]),_:1}),E(Ns,{value:"Libraries","no-action":"","prepend-icon":"mdi-domain"},{activator:Ie(({props:_})=>[E(kr,wt(_,{title:"Libraries"}),null,16)]),default:Ie(()=>[E(kr,{color:"success",to:"/libraries","active-class":"highlighted",class:_a(e.$route.path==="/libraries"?"highlighted":"")},{default:Ie(()=>[E(ja,null,{default:Ie(()=>[Ot("Libraries dataset")]),_:1})]),_:1},8,["class"]),E(kr,{color:"success",to:"/libraries-edit","active-class":"highlighted",class:_a(e.$route.path==="/libraries"?"highlighted":"")},{default:Ie(()=>[E(ja,null,{default:Ie(()=>[Ot("Edit libraries")]),_:1})]),_:1},8,["class"])]),_:1}),E(Ns,{value:"Loans","prepend-icon":"mdi-book-account-outline"},{activator:Ie(({props:_})=>[E(kr,wt(_,{title:"Loans"}),null,16)]),default:Ie(()=>[E(kr,{color:"success",to:"/loans","active-class":"highlighted",class:_a(e.$route.path==="/loans"?"highlighted":"")},{default:Ie(()=>[E(ja,null,{default:Ie(()=>[Ot("Loans dataset")]),_:1})]),_:1},8,["class"])]),_:1}),E(Ns,{value:"Membership","prepend-icon":"mdi-account-multiple"},{activator:Ie(({props:_})=>[E(kr,wt(_,{title:"Membership"}),null,16)]),default:Ie(()=>[E(kr,{color:"success",to:"/membership","active-class":"highlighted",class:_a(e.$route.path==="/membership"?"highlighted":"")},{default:Ie(()=>[E(ja,null,{default:Ie(()=>[Ot("Membership dataset")]),_:1})]),_:1},8,["class"]),E(kr,{color:"success",to:"/postcode-to-lsoa","active-class":"highlighted",class:_a(e.$route.path==="/postcode-to-lsoa"?"highlighted":"")},{default:Ie(()=>[E(ja,null,{default:Ie(()=>[Ot("Postcode converter")]),_:1})]),_:1},8,["class"]),E(kr,{color:"success",to:"/membership-map","active-class":"highlighted",class:_a(e.$route.path==="/membership-map"?"highlighted":"")},{default:Ie(()=>[E(ja,null,{default:Ie(()=>[Ot("Membership map")]),_:1})]),_:1},8,["class"])]),_:1}),E(Ns,{value:"MobileLibraries","prepend-icon":"mdi-bus-clock"},{activator:Ie(({props:_})=>[E(kr,wt(_,{title:"Mobile libraries"}),null,16)]),default:Ie(()=>[E(kr,{color:"success",to:"/mobile-library-stops","active-class":"highlighted",class:_a(e.$route.path==="/mobile-library-stops"?"highlighted":"")},{default:Ie(()=>[E(ja,null,{default:Ie(()=>[Ot("Mobile library stops dataset")]),_:1})]),_:1},8,["class"])]),_:1}),E(Ns,{value:"Visits","prepend-icon":"mdi-shoe-print"},{activator:Ie(({props:_})=>[E(kr,wt(_,{title:"Visits"}),null,16)]),default:Ie(()=>[E(kr,{color:"success",to:"/physical-visits","active-class":"highlighted",class:_a(e.$route.path==="/physical-visits"?"highlighted":"")},{default:Ie(()=>[E(ja,null,{default:Ie(()=>[Ot("Physical visits dataset")]),_:1})]),_:1},8,["class"])]),_:1}),E(Ns,{value:"Catalogue","prepend-icon":"mdi-bookshelf"},{activator:Ie(({props:_})=>[E(kr,wt(_,{title:"Catalogue"}),null,16)]),default:Ie(()=>[E(kr,{color:"success",to:"/stock-summary","active-class":"highlighted",class:_a(e.$route.path==="/stock-summary"?"highlighted":"")},{default:Ie(()=>[E(ja,null,{default:Ie(()=>[Ot("Stock summary dataset")]),_:1})]),_:1},8,["class"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),E(rV,null,{default:Ie(()=>[E(l)]),_:1}),E(v)]),_:1})}const nPe=Kr(QIe,[["render",tPe]]),rPe=RT({icons:{defaultSet:"mdi",aliases:IT,sets:{mdi:PT}},components:{...CV}});nO({extends:nPe,beforeCreate(){this.$store.commit("initialiseStore")}}).use(rPe).use(SIe).use(YIe).use(ZF).component("layout-header",PV).component("markdown-section",V1e).component("user-profile",tp).mount("#app")});export default iPe();
